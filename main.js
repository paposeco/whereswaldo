/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={982:(t,e,n)=>{n.d(e,{Z:()=>w});var i=n(537),r=n.n(i),s=n(645),o=n.n(s),a=n(667),c=n.n(a),l=new URL(n(707),n.b),h=new URL(n(257),n.b),u=new URL(n(500),n.b),d=new URL(n(226),n.b),f=new URL(n(594),n.b),p=o()(r()),m=c()(l),g=c()(h),y=c()(u),A=c()(d),v=c()(f);p.push([t.id,'html {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n  background: white;\n  font-family: VT323;\n  color: rgb(46, 52, 54);\n}\n\nbody {\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n}\n\nh1 {\n  font-size: 40px;\n  text-align: center;\n}\n\nh2 {\n  font-size: 32px;\n}\n\nh3 {\n  font-size: 22px;\n}\n\nh4 {\n  font-size: 20px;\n}\n\n.centeredtext {\n  text-align: center;\n}\n\n#backgroundimage {\n  display: block;\n  max-height: 100%;\n  max-width: 100%;\n  margin: 0 auto;\n}\n\n#background {\n  width: 100%;\n}\n\n#characterselection {\n  position: absolute;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  width: 230px;\n  z-index: 2;\n}\n\n#characterselection button {\n  width: max-content;\n  align-self: flex-end;\n  margin: 5px;\n  box-shadow: 2px 2px 1px #0f6dc5;\n}\n\n#characterselection button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n  cursor: pointer;\n}\n\n#characterselection ul {\n  list-style: none;\n  padding: 0px 10px;\n  margin: 0px 5px 5px 5px;\n}\n\n#characterselection ul li {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 20px;\n  border-bottom: 1px dotted grey;\n}\n\n#characterselection ul li:hover {\n  cursor: pointer;\n  font-weight: bolder;\n}\n\n#charactersToLookFor {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n  margin-bottom: 40px;\n}\n\n.characterthumbnail {\n  width: 100px;\n}\n\n#loading {\n  width: 98vw;\n  height: 98vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: grey;\n}\n\n#spinner {\n  animation-name: rotate;\n  animation-duration: 8s;\n}\n\n@keyframes rotate {\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n#gamestart {\n  display: flex;\n  height: calc(100vh - 4px);\n  width: calc(100vw - 4px);\n  overflow: hidden;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 2px #0f6dc5 dotted;\n}\n\n#gamestartcontent {\n  height: 90%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.showgame {\n  height: 100vh;\n  width: 100vw;\n}\n\n#gamestatus {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: center;\n}\n\n#sidethumbnails {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 5px;\n}\n\n.characterthumbnailgame {\n  height: 75px;\n  padding: 2px;\n}\n\n.divcharacterthumbnail {\n  text-align: center;\n  background: white;\n  width: 80px;\n}\n\n.divcharacterthumbnail img {\n  display: block;\n  margin: 0 auto;\n}\n\n.divcharacterthumbnail h4 {\n  margin-top: 0px;\n  margin-bottom: 0px;\n}\n\n#foundoverlay {\n  position: absolute;\n  width: 300px;\n  background: white;\n  top: 10%;\n  left: 40%;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 10px;\n  font-size: 22px;\n  border: 2px solid #0f6dc5;\n}\n\n#foundoverlay div {\n  width: 100%;\n}\n\n#closeoverlay {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n#closeoverlay button {\n  margin: 5px;\n  box-shadow: 2px 2px 1px #0f6dc5;\n  padding: 0;\n  height: 20px;\n  width: 20px;\n}\n\n#closeoverlay button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n  cursor: pointer;\n}\n\n#foundoverlay div p {\n  margin-top: 2px;\n  text-align: center;\n}\n\nli[data-character="waldoLocation"]:before {\n  content: url('+m+');\n}\n\nli[data-character="wendaLocation"]:before {\n  content: url('+g+');\n}\n\nli[data-character="odlawLocation"]:before {\n  content: url('+y+');\n}\n\nli[data-character="wizardLocation"]:before {\n  content: url('+A+');\n}\n\nli[data-character="woofLocation"]:before {\n  content: url('+v+");\n}\n\n#scoreboarddiv {\n  position: absolute;\n  top: 10%;\n  left: calc((100vw / 2) - ((0.4 * 100vw) / 2));\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  justify-content: center;\n  width: 40%;\n  border: 1px solid #0f6dc5;\n}\n\n#scoreboarddiv h2 {\n  margin-bottom: 0px;\n  padding-bottom: 0px;\n  margin-top: 25px;\n  text-align: center;\n}\n\n#scoreboarddiv table {\n  width: 75%;\n  padding: 20px 35px;\n  margin: auto;\n}\n\n#scoreboarddiv table tr {\n  height: 75px;\n  font-size: 25px;\n}\n\n#scoreboarddiv table tr td:last-child,\n#scoreboarddiv table tr td:first-child {\n  text-align: center;\n  width: 30px;\n}\n\n#closescoreboarddiv {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n#closescoreboarddiv button {\n  box-shadow: 2px 2px 1px #0f6dc5;\n  padding: 0;\n  height: 20px;\n  width: 20px;\n  margin: 5px;\n}\n\n#closescoreboarddiv button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n}\n\n#playermessage {\n  text-align: center;\n  font-size: 20px;\n}\n\n@keyframes textblink {\n  0% {\n    color: rgb(46, 52, 54);\n  }\n  25% {\n    color: lightgrey;\n  }\n  50% {\n    color: rgb(46, 52, 54);\n  }\n  75% {\n    color: lightgrey;\n  }\n  100% {\n    color: rgb(46, 52, 54);\n  }\n}\n\n#clickstart {\n  animation-name: textblink;\n  animation-duration: 4s;\n  animation-iteration-count: infinite;\n}\n\n#login {\n  width: 150px;\n  box-shadow: 4px 4px 2px #0f6dc5;\n  font-size: 26px;\n}\n\n#login:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 4px 4px 2px #0f6dc5;\n}\n\nbutton {\n  align-self: center;\n  font-family: VT323;\n  background: white;\n  border-radius: 0px;\n  outline: none;\n  cursor: pointer;\n  border: 2px solid lightgrey;\n  color: rgb(46, 52, 54);\n}\n\n.footer {\n  width: 100%;\n  text-align: center;\n}\n.footer a {\n  color: #0f6dc5;\n  /* text-align: center; */\n}\n\n.footer a:visited {\n  color: #0f6dc5;\n}\n\n.footer a:hover {\n  color: #b9102d;\n}\n\n#gamefooter {\n  /* margin-top: 20px; */\n  position: absolute;\n  bottom: 0px;\n  left: 50%;\n  z-index: 2;\n  background: white;\n  width: 80px;\n}\n\n#separator {\n  color: #0f6dc5;\n  font-size: 28px;\n  text-align: center;\n  margin: 5px auto;\n}\n\n#highestscoreslink {\n  box-shadow: 4px 4px 2px #0f6dc5;\n  font-size: 18px;\n}\n\n#highestscoreslink:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 4px 4px 2px #0f6dc5;\n}\n\n.check {\n  position: fixed;\n  top: 0;\n}\n\n.check p {\n  color: rgb(46, 52, 54);\n  margin: 0;\n  font-weight: bolder;\n  font-size: 45px;\n  margin-left: 20px;\n  margin-top: 15px;\n}\n\n@media only screen and (max-width: 1300px) {\n  #scoreboarddiv {\n    width: 60%;\n    left: calc((100vw / 2) - ((0.6 * 100vw) / 2));\n  }\n}\n\n@media only screen and (max-width: 850px) {\n  #scoreboarddiv table {\n    padding: 10px 10px;\n  }\n  #scoreboarddiv table tr {\n    height: 50px;\n    font-size: 22px;\n  }\n  #scoreboarddiv h2 {\n    margin-bottom: 0px;\n    padding-bottom: 0px;\n    margin-top: 5px;\n    font-size: 30px;\n    text-align: center;\n  }\n}\n","",{version:3,sources:["webpack://./src/style/style.css"],names:[],mappings:"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",sourcesContent:['html {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n  background: white;\n  font-family: VT323;\n  color: rgb(46, 52, 54);\n}\n\nbody {\n  height: 100vh;\n  margin: 0;\n  padding: 0;\n}\n\nh1 {\n  font-size: 40px;\n  text-align: center;\n}\n\nh2 {\n  font-size: 32px;\n}\n\nh3 {\n  font-size: 22px;\n}\n\nh4 {\n  font-size: 20px;\n}\n\n.centeredtext {\n  text-align: center;\n}\n\n#backgroundimage {\n  display: block;\n  max-height: 100%;\n  max-width: 100%;\n  margin: 0 auto;\n}\n\n#background {\n  width: 100%;\n}\n\n#characterselection {\n  position: absolute;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  width: 230px;\n  z-index: 2;\n}\n\n#characterselection button {\n  width: max-content;\n  align-self: flex-end;\n  margin: 5px;\n  box-shadow: 2px 2px 1px #0f6dc5;\n}\n\n#characterselection button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n  cursor: pointer;\n}\n\n#characterselection ul {\n  list-style: none;\n  padding: 0px 10px;\n  margin: 0px 5px 5px 5px;\n}\n\n#characterselection ul li {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 20px;\n  border-bottom: 1px dotted grey;\n}\n\n#characterselection ul li:hover {\n  cursor: pointer;\n  font-weight: bolder;\n}\n\n#charactersToLookFor {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n  margin-bottom: 40px;\n}\n\n.characterthumbnail {\n  width: 100px;\n}\n\n#loading {\n  width: 98vw;\n  height: 98vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: grey;\n}\n\n#spinner {\n  animation-name: rotate;\n  animation-duration: 8s;\n}\n\n@keyframes rotate {\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n#gamestart {\n  display: flex;\n  height: calc(100vh - 4px);\n  width: calc(100vw - 4px);\n  overflow: hidden;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border: 2px #0f6dc5 dotted;\n}\n\n#gamestartcontent {\n  height: 90%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.showgame {\n  height: 100vh;\n  width: 100vw;\n}\n\n#gamestatus {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: center;\n}\n\n#sidethumbnails {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 5px;\n}\n\n.characterthumbnailgame {\n  height: 75px;\n  padding: 2px;\n}\n\n.divcharacterthumbnail {\n  text-align: center;\n  background: white;\n  width: 80px;\n}\n\n.divcharacterthumbnail img {\n  display: block;\n  margin: 0 auto;\n}\n\n.divcharacterthumbnail h4 {\n  margin-top: 0px;\n  margin-bottom: 0px;\n}\n\n#foundoverlay {\n  position: absolute;\n  width: 300px;\n  background: white;\n  top: 10%;\n  left: 40%;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 10px;\n  font-size: 22px;\n  border: 2px solid #0f6dc5;\n}\n\n#foundoverlay div {\n  width: 100%;\n}\n\n#closeoverlay {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n#closeoverlay button {\n  margin: 5px;\n  box-shadow: 2px 2px 1px #0f6dc5;\n  padding: 0;\n  height: 20px;\n  width: 20px;\n}\n\n#closeoverlay button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n  cursor: pointer;\n}\n\n#foundoverlay div p {\n  margin-top: 2px;\n  text-align: center;\n}\n\nli[data-character="waldoLocation"]:before {\n  content: url("../images/waldomicrothumbnail.jpg");\n}\n\nli[data-character="wendaLocation"]:before {\n  content: url("../images/wendamicrothumbnail.jpg");\n}\n\nli[data-character="odlawLocation"]:before {\n  content: url("../images/odlawmicrothumbnail.jpg");\n}\n\nli[data-character="wizardLocation"]:before {\n  content: url("../images/wizardmicrothumbnail.jpeg");\n}\n\nli[data-character="woofLocation"]:before {\n  content: url("../images/woofmicrothumbnail.jpg");\n}\n\n#scoreboarddiv {\n  position: absolute;\n  top: 10%;\n  left: calc((100vw / 2) - ((0.4 * 100vw) / 2));\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  justify-content: center;\n  width: 40%;\n  border: 1px solid #0f6dc5;\n}\n\n#scoreboarddiv h2 {\n  margin-bottom: 0px;\n  padding-bottom: 0px;\n  margin-top: 25px;\n  text-align: center;\n}\n\n#scoreboarddiv table {\n  width: 75%;\n  padding: 20px 35px;\n  margin: auto;\n}\n\n#scoreboarddiv table tr {\n  height: 75px;\n  font-size: 25px;\n}\n\n#scoreboarddiv table tr td:last-child,\n#scoreboarddiv table tr td:first-child {\n  text-align: center;\n  width: 30px;\n}\n\n#closescoreboarddiv {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n#closescoreboarddiv button {\n  box-shadow: 2px 2px 1px #0f6dc5;\n  padding: 0;\n  height: 20px;\n  width: 20px;\n  margin: 5px;\n}\n\n#closescoreboarddiv button:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 2px 2px 1px #0f6dc5;\n}\n\n#playermessage {\n  text-align: center;\n  font-size: 20px;\n}\n\n@keyframes textblink {\n  0% {\n    color: rgb(46, 52, 54);\n  }\n  25% {\n    color: lightgrey;\n  }\n  50% {\n    color: rgb(46, 52, 54);\n  }\n  75% {\n    color: lightgrey;\n  }\n  100% {\n    color: rgb(46, 52, 54);\n  }\n}\n\n#clickstart {\n  animation-name: textblink;\n  animation-duration: 4s;\n  animation-iteration-count: infinite;\n}\n\n#login {\n  width: 150px;\n  box-shadow: 4px 4px 2px #0f6dc5;\n  font-size: 26px;\n}\n\n#login:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 4px 4px 2px #0f6dc5;\n}\n\nbutton {\n  align-self: center;\n  font-family: VT323;\n  background: white;\n  border-radius: 0px;\n  outline: none;\n  cursor: pointer;\n  border: 2px solid lightgrey;\n  color: rgb(46, 52, 54);\n}\n\n.footer {\n  width: 100%;\n  text-align: center;\n}\n.footer a {\n  color: #0f6dc5;\n  /* text-align: center; */\n}\n\n.footer a:visited {\n  color: #0f6dc5;\n}\n\n.footer a:hover {\n  color: #b9102d;\n}\n\n#gamefooter {\n  /* margin-top: 20px; */\n  position: absolute;\n  bottom: 0px;\n  left: 50%;\n  z-index: 2;\n  background: white;\n  width: 80px;\n}\n\n#separator {\n  color: #0f6dc5;\n  font-size: 28px;\n  text-align: center;\n  margin: 5px auto;\n}\n\n#highestscoreslink {\n  box-shadow: 4px 4px 2px #0f6dc5;\n  font-size: 18px;\n}\n\n#highestscoreslink:hover {\n  color: #0f6dc5;\n  box-shadow: inset 1px 1px 2px lightgrey, 4px 4px 2px #0f6dc5;\n}\n\n.check {\n  position: fixed;\n  top: 0;\n}\n\n.check p {\n  color: rgb(46, 52, 54);\n  margin: 0;\n  font-weight: bolder;\n  font-size: 45px;\n  margin-left: 20px;\n  margin-top: 15px;\n}\n\n@media only screen and (max-width: 1300px) {\n  #scoreboarddiv {\n    width: 60%;\n    left: calc((100vw / 2) - ((0.6 * 100vw) / 2));\n  }\n}\n\n@media only screen and (max-width: 850px) {\n  #scoreboarddiv table {\n    padding: 10px 10px;\n  }\n  #scoreboarddiv table tr {\n    height: 50px;\n    font-size: 22px;\n  }\n  #scoreboarddiv h2 {\n    margin-bottom: 0px;\n    padding-bottom: 0px;\n    margin-top: 5px;\n    font-size: 30px;\n    text-align: center;\n  }\n}\n'],sourceRoot:""}]);const w=p},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},537:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(r," */"),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([s]).join("\n")}return[e].join("\n")}},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},o=[],a=0;a<t.length;a++){var c=t[a],l=i.base?c[0]+i.base:c[0],h=s[l]||0,u="".concat(l," ").concat(h);s[l]=h+1;var d=n(u),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=r(f,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:p,references:1})}o.push(u)}return o}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=i(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var c=i(t,r),l=0;l<s.length;l++){var h=n(s[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}s=c}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},500:(t,e,n)=>{t.exports=n.p+"30071ea13a7194554b7c.jpg"},99:(t,e,n)=>{t.exports=n.p+"b286fd043c2bd52a71f6.jpg"},502:(t,e,n)=>{t.exports=n.p+"c38a0fc88b3de8a8065a.jpeg"},707:(t,e,n)=>{t.exports=n.p+"f1a4dc4a641a22fe6fa5.jpg"},69:(t,e,n)=>{t.exports=n.p+"6d2d5b10ac017be4dd01.jpg"},257:(t,e,n)=>{t.exports=n.p+"0722f5b37fc0146206ed.jpg"},666:(t,e,n)=>{t.exports=n.p+"f7671a53fc8bdbdf42f9.jpg"},226:(t,e,n)=>{t.exports=n.p+"583f7d73faaaf77b62c4.jpeg"},80:(t,e,n)=>{t.exports=n.p+"d1ec1b1052cb0b131bb3.jpeg"},594:(t,e,n)=>{t.exports=n.p+"659c17aea83f0ecb0ffa.jpg"},319:(t,e,n)=>{t.exports=n.p+"721ff95418c87a062d2d.jpg"}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href;var i={};(()=>{n.d(i,{Z:()=>Zf});var t=n(379),e=n.n(t),r=n(795),s=n.n(r),o=n(569),a=n.n(o),c=n(565),l=n.n(c),h=n(216),u=n.n(h),d=n(589),f=n.n(d),p=n(982),m={};m.styleTagTransform=f(),m.setAttributes=l(),m.insert=a().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=u(),e()(p.Z,m),p.Z&&p.Z.locals&&p.Z.locals;var g=n(69),y=n(99),A=n(666),v=n(80),w=n(319),E=n(502);const b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e}(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw Error();const c=r<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function T(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function C(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function _(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function S(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function k(){const t=T();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}class x extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(R,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new x(i,o,n)}}const R=/\{\$([^}]+)}/g;function D(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(L(n)&&L(s)){if(!D(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function L(t){return null!==t&&"object"==typeof t}function O(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function P(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function B(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class M{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=U),void 0===i.error&&(i.error=U),void 0===i.complete&&(i.complete=U);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function U(){}function V(t){return t&&t._delegate?t._delegate:t}class F{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const j="[DEFAULT]";class z{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new I;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:j})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===j?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:j:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new z(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const q=[];var W,K;(K=W||(W={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT";const $={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},G=W.INFO,Q={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Y=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=Q[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class X{constructor(t){this.name=t,this._logLevel=G,this._logHandler=Y,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in W))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?$[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...t),this._logHandler(this,W.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...t),this._logHandler(this,W.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,W.INFO,...t),this._logHandler(this,W.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,W.WARN,...t),this._logHandler(this,W.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...t),this._logHandler(this,W.ERROR,...t)}}class J{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Z="@firebase/app",tt="0.7.7",et=new X("@firebase/app"),nt={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,rt=new Map;function st(t,e){try{t.container.addComponent(e)}catch(n){et.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ot(t){const e=t.name;if(rt.has(e))return et.debug(`There were multiple attempts to register component ${e}.`),!1;rt.set(e,t);for(const e of it.values())st(e,t);return!0}function at(t,e){return t.container.getProvider(e)}const ct=new N("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class lt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}const ht="9.4.0";function ut(t="[DEFAULT]"){const e=it.get(t);if(!e)throw ct.create("no-app",{appName:t});return e}function dt(t,e,n){var i;let r=null!==(i=nt[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${r}" with version "${e}":`];return s&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void et.warn(t.join(" "))}ot(new F(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}function ft(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}ot(new F("platform-logger",(t=>new J(t)),"PRIVATE")),dt(Z,tt,""),dt(Z,tt,"esm2017"),dt("fire-js",""),Object.create,Object.create;const pt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},mt=new N("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gt=new X("@firebase/auth");function yt(t,...e){gt.logLevel<=W.ERROR&&gt.error(`Auth (9.4.0): ${t}`,...e)}function At(t,...e){throw wt(t,...e)}function vt(t,...e){return wt(t,...e)}function wt(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return mt.create(t,...e)}function Et(t,e,...n){if(!t)throw wt(e,...n)}function bt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yt(e),new Error(e)}function It(t,e){t||bt(e)}const Tt=new Map;function Ct(t){It(t instanceof Function,"Expected a class definition");let e=Tt.get(t);return e?(It(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tt.set(t,e),e)}function _t(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function St(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class kt{constructor(t,e){this.shortDelay=t,this.longDelay=e,It(e>t,"Short delay should be less than long delay!"),this.isMobile=C()||S()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===St()||"https:"===St()||_()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function xt(t,e){It(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Nt{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Dt=new kt(3e4,6e4);function Lt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ot(t,e,n,i,r={}){return Pt(t,r,(()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=O(Object.assign({key:t.config.apiKey},s)).slice(1),a=new(Nt.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&a.set("X-Firebase-Locale",t.languageCode),Nt.fetch()(Mt(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Pt(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Rt),e);try{const e=new Ut(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Vt(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Vt(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Vt(t,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(t,e,n){const i=Object.assign(Object.assign({},pt()),{[e]:n});return new N("auth","Firebase",i).create(e,{appName:t.name})}(t,a,o);At(t,a)}}catch(e){if(e instanceof x)throw e;At(t,"network-request-failed")}}async function Bt(t,e,n,i,r={}){const s=await Ot(t,e,n,i,r);return"mfaPendingCredential"in s&&At(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Mt(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?xt(t.config,r):`${t.config.apiScheme}://${r}`}class Ut{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(vt(this.auth,"timeout"))),Dt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vt(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=vt(t,e,i);return r.customData._tokenResponse=n,r}function Ft(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function jt(t){return 1e3*Number(t)}function zt(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return yt("JWT malformed, contained fewer than 3 sections"),null;try{const t=function(t){try{return b.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(n);return t?JSON.parse(t):(yt("Failed to decode base64 JWT payload"),null)}catch(t){return yt("Caught error parsing JWT payload as JSON",t),null}}async function Ht(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof x&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class qt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class Wt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ft(this.lastLoginAt),this.creationTime=Ft(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kt(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ht(t,async function(t,e){return Ot(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));Et(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?s.providerUserInfo.map((t=>{var{providerId:e}=t,n=ft(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=t.providerData,l=o,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(void 0!==t.idToken,"internal-error"),Et(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=zt(t);return Et(e,"internal-error"),Et(void 0!==e.exp,"internal-error"),Et(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return Et(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await Pt(t,{},(()=>{const n=O({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=Mt(t,i,"/v1/token",`key=${r}`);return Nt.fetch()(s,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new $t;return n&&(Et("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Et("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Et("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return bt("not implemented")}}function Gt(t,e){Et("string"==typeof t||void 0===t,"internal-error",{appName:e})}class Qt{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=ft(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.metadata=new Wt(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await Ht(this,this.stsTokenManager.getToken(this.auth,t));return Et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t,e=!1){const n=V(t),i=await n.getIdToken(e),r=zt(i);Et(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ft(jt(r.auth_time)),issuedAtTime:Ft(jt(r.iat)),expirationTime:Ft(jt(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=V(t);await Kt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Qt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Kt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Ht(this,async function(t,e){return Ot(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const h=null!==(n=e.displayName)&&void 0!==n?n:void 0,u=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:A,emailVerified:v,isAnonymous:w,providerData:E,stsTokenManager:b}=e;Et(A&&b,t,"internal-error");const I=$t.fromJSON(this.name,b);Et("string"==typeof A,t,"internal-error"),Gt(h,t.name),Gt(u,t.name),Et("boolean"==typeof v,t,"internal-error"),Et("boolean"==typeof w,t,"internal-error"),Gt(d,t.name),Gt(f,t.name),Gt(p,t.name),Gt(m,t.name),Gt(g,t.name),Gt(y,t.name);const T=new Qt({uid:A,auth:t,email:u,emailVerified:v,displayName:h,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(T.providerData=E.map((t=>Object.assign({},t)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(t,e,n=!1){const i=new $t;i.updateFromServerResponse(e);const r=new Qt({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Kt(r),r}}class Yt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Yt.type="NONE";const Xt=Yt;function Jt(t,e,n){return`firebase:${t}:${e}:${n}`}class Zt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Jt(this.userKey,i.apiKey,r),this.fullPersistenceKey=Jt("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Qt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Zt(Ct(Xt),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||Ct(Xt);const s=Jt(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=Qt._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new Zt(r,t,n)):new Zt(r,t,n)}}function te(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(re(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ee(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oe(e))return"Blackberry";if(ae(e))return"Webos";if(ne(e))return"Safari";if((e.includes("chrome/")||ie(e))&&!e.includes("edge/"))return"Chrome";if(se(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ee(t=T()){return/firefox\//i.test(t)}function ne(t=T()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ie(t=T()){return/crios\//i.test(t)}function re(t=T()){return/iemobile/i.test(t)}function se(t=T()){return/android/i.test(t)}function oe(t=T()){return/blackberry/i.test(t)}function ae(t=T()){return/webos/i.test(t)}function ce(t=T()){return/iphone|ipad|ipod/i.test(t)}function le(t=T()){return ce(t)||se(t)||ae(t)||oe(t)||/windows phone/i.test(t)||re(t)}function he(t,e=[]){let n;switch(t){case"Browser":n=te(T());break;case"Worker":n=`${te(T())}-${t}`;break;default:n=t}return`${n}/JsCore/9.4.0/${e.length?e.join(","):"FirebaseCore-web"}`}class ue{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fe(this),this.idTokenSubscription=new fe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ct(e)),this._initializationPromise=this.queue((async()=>{var n,i;this._deleted||(this.persistenceManager=await Zt.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);i&&i!==r||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Kt(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?V(t):null;return e&&Et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ct(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new N("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ct(t)||this._popupRedirectResolver;Et(e,this,"argument-error"),this.redirectPersistenceManager=await Zt.create(this,[Ct(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Et(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function de(t){return V(t)}class fe{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new M(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class pe{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return bt("not implemented")}_getIdTokenResponse(t){return bt("not implemented")}_linkToIdToken(t,e){return bt("not implemented")}_getReauthenticationResolver(t){return bt("not implemented")}}class me extends pe{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new me(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new me(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return Bt(t,"POST","/v1/accounts:signInWithPassword",Lt(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Bt(t,"POST","/v1/accounts:signInWithEmailLink",Lt(t,e))}(t,{email:this._email,oobCode:this._password});default:At(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return async function(t,e){return Ot(t,"POST","/v1/accounts:update",e)}(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Bt(t,"POST","/v1/accounts:signInWithEmailLink",Lt(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:At(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function ge(t,e){return Bt(t,"POST","/v1/accounts:signInWithIdp",Lt(t,e))}class ye extends pe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ye(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):At("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=ft(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new ye(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return ge(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,ge(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,ge(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=O(e)}return t}}const Ae={USER_NOT_FOUND:"user-not-found"};class ve extends pe{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ve({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ve({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return Bt(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await Bt(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,e));if(n.temporaryProof)throw Vt(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return Bt(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ae)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new ve({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class we{constructor(t){var e,n,i,r,s,o;const a=P(B(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Et(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=P(B(t)).link,n=e?P(B(e)).deep_link_id:null,i=P(B(t)).deep_link_id;return(i?P(B(i)).link:null)||i||n||e||t}(t);try{return new we(e)}catch(t){return null}}}class Ee{constructor(){this.providerId=Ee.PROVIDER_ID}static credential(t,e){return me._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=we.parseLink(e);return Et(n,"argument-error"),me._fromEmailAndCode(t,n.code,n.tenantId)}}Ee.PROVIDER_ID="password",Ee.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ee.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class be{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ie extends be{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Te extends Ie{constructor(){super("facebook.com")}static credential(t){return ye._fromParams({providerId:Te.PROVIDER_ID,signInMethod:Te.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Te.credentialFromTaggedObject(t)}static credentialFromError(t){return Te.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Te.credential(t.oauthAccessToken)}catch(t){return null}}}Te.FACEBOOK_SIGN_IN_METHOD="facebook.com",Te.PROVIDER_ID="facebook.com";class Ce extends Ie{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ye._fromParams({providerId:Ce.PROVIDER_ID,signInMethod:Ce.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ce.credentialFromTaggedObject(t)}static credentialFromError(t){return Ce.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Ce.credential(e,n)}catch(t){return null}}}Ce.GOOGLE_SIGN_IN_METHOD="google.com",Ce.PROVIDER_ID="google.com";class _e extends Ie{constructor(){super("github.com")}static credential(t){return ye._fromParams({providerId:_e.PROVIDER_ID,signInMethod:_e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _e.credentialFromTaggedObject(t)}static credentialFromError(t){return _e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _e.credential(t.oauthAccessToken)}catch(t){return null}}}_e.GITHUB_SIGN_IN_METHOD="github.com",_e.PROVIDER_ID="github.com";class Se extends Ie{constructor(){super("twitter.com")}static credential(t,e){return ye._fromParams({providerId:Se.PROVIDER_ID,signInMethod:Se.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Se.credentialFromTaggedObject(t)}static credentialFromError(t){return Se.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Se.credential(e,n)}catch(t){return null}}}Se.TWITTER_SIGN_IN_METHOD="twitter.com",Se.PROVIDER_ID="twitter.com";class ke{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await Qt._fromIdTokenResponse(t,n,i),s=xe(n);return new ke({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=xe(n);return new ke({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function xe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ne extends x{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ne.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Ne(t,e,n,i)}}function Re(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ne._fromErrorAndOperation(t,n,e,i);throw n}))}new WeakMap;const De="__sak";class Le{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(De,"1"),this.storage.removeItem(De),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Oe extends Le{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=T();return ne(t)||ce(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=le(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);k()&&10===document.documentMode&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Oe.type="LOCAL";const Pe=Oe;class Be extends Le{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Be.type="SESSION";const Me=Be;class Ue{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Ue(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ve(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}Ue.receivers=[];class Fe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=Ve("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function je(){return window}function ze(){return void 0!==je().WorkerGlobalScope&&"function"==typeof je().importScripts}const He="firebaseLocalStorageDb",qe="firebaseLocalStorage",We="fbase_key";class Ke{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function $e(t,e){return t.transaction([qe],e?"readwrite":"readonly").objectStore(qe)}function Ge(){const t=indexedDB.open(He,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(qe,{keyPath:We})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(qe)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(He);return new Ke(t).toPromise()}(),e(await Ge()))}))}))}async function Qe(t,e,n){const i=$e(t,!0).put({[We]:e,value:n});return new Ke(i).toPromise()}function Ye(t,e){const n=$e(t,!0).delete(e);return new Ke(n).toPromise()}class Xe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ge()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ze()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ue._getInstance(ze()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Fe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}var e}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ge();return await Qe(t,De,"1"),await Ye(t,De),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Qe(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=$e(t,!1).get(e),i=await new Ke(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Ye(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=$e(t,!1).getAll();return new Ke(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xe.type="LOCAL";const Je=Xe;function Ze(t){return`__${t}${Math.floor(1e6*Math.random())}`}Ze("rcb"),new kt(3e4,6e4);class tn{constructor(t){this.providerId=tn.PROVIDER_ID,this.auth=de(t)}verifyPhoneNumber(t,e){return async function(t,e,n){var i;const r=await n.verify();try{let s;if(Et("string"==typeof r,t,"argument-error"),Et("recaptcha"===n.type,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){Et("enroll"===e.type,t,"internal-error");const n=await function(t,e){return Ot(t,"POST","/v2/accounts/mfaEnrollment:start",Lt(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{Et("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;Et(n,t,"missing-multi-factor-info");const o=await function(t,e){return Ot(t,"POST","/v2/accounts/mfaSignIn:start",Lt(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return Ot(t,"POST","/v1/accounts:sendVerificationCode",Lt(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}(this.auth,t,V(e))}static credential(t,e){return ve._fromVerification(t,e)}static credentialFromResult(t){const e=t;return tn.credentialFromTaggedObject(e)}static credentialFromError(t){return tn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?ve._fromTokenResponse(e,n):null}}tn.PROVIDER_ID="phone",tn.PHONE_SIGN_IN_METHOD="phone";class en extends pe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ge(t,this._buildIdpRequest())}_linkToIdToken(t,e){return ge(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return ge(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function nn(t){return async function(t,e,n=!1){const i="signIn",r=await Re(t,i,e),s=await ke._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}(t.auth,new en(t),t.bypassAuthState)}function rn(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),async function(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await Ht(t,Re(i,r,e,t),n);Et(s.idToken,i,"internal-error");const o=zt(s.idToken);Et(o,i,"internal-error");const{sub:a}=o;return Et(t.uid===a,i,"user-mismatch"),ke._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&At(i,"user-mismatch"),t}}(n,new en(t),t.bypassAuthState)}async function sn(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),async function(t,e,n=!1){const i=await Ht(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ke._forOperation(t,"link",i)}(n,new en(t),t.bypassAuthState)}class on{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return nn;case"linkViaPopup":case"linkViaRedirect":return sn;case"reauthViaPopup":case"reauthViaRedirect":return rn;default:At(this.auth,"internal-error")}}resolve(t){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const an=new kt(2e3,1e4);class cn extends on{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,cn.currentPopupAction&&cn.currentPopupAction.cancel(),cn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){It(1===this.filter.length,"Popup operations only handle one event");const t=Ve();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(vt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,an.get())};t()}}cn.currentPopupAction=null;const ln=new Map;class hn extends on{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=ln.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=function(t){return Jt("pendingRedirect",t.config.apiKey,t.name)}(e),i=function(t){return Ct(t._redirectPersistence)}(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}ln.set(this.auth._key(),t)}return this.bypassAuthState||ln.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function un(t,e,n=!1){const i=de(t),r=function(t,e){return e?Ct(e):(Et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),s=new hn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class dn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!pn(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(vt(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fn(t))}saveEventToCache(t){this.cachedEventUids.add(fn(t)),this.lastProcessedEventTime=Date.now()}}function fn(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function pn({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const mn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gn=/^https?/;function yn(t){const e=_t(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!gn.test(n))return!1;if(mn.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const An=new kt(3e4,6e4);function vn(){const t=je().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let wn=null;function En(t){return wn=wn||function(t){return new Promise(((e,n)=>{var i,r,s,o;function a(){vn(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vn(),n(vt(t,"network-request-failed"))},timeout:An.get()})}if(null===(r=null===(i=je().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=je().gapi)||void 0===s?void 0:s.load)){const e=Ze("iframefcb");return je()[e]=()=>{gapi.load?a():n(vt(t,"network-request-failed"))},o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(((t,e)=>{const n=document.createElement("script");var i,r;n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=vt("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(r=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==r?r:document).appendChild(n)}))}a()}})).catch((t=>{throw wn=null,t}))}(t),wn}const bn=new kt(5e3,15e3),In={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(t){const e=t.config;Et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xt(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:t.name,v:ht},r=Tn.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${O(i).slice(1)}`}const _n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sn{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function kn(t,e,n,i,r,s){Et(t.config.authDomain,t,"auth-domain-config-required"),Et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ht,eventId:r};if(e instanceof be){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof Ie){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${function({config:t}){return t.emulator?xt(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${O(a).slice(1)}`}const xn="webStorageSupport",Nn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Me,this._completeRedirectFn=un}async _openPopup(t,e,n,i){var r;return It(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},_n),{width:i.toString(),height:r.toString(),top:s,left:o}),l=T().toLowerCase();n&&(a=ie(l)?"_blank":n),ee(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=T()){var e;return ce(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new Sn(null);const u=window.open(e||"",a,h);Et(u,t,"popup-blocked");try{u.focus()}catch(t){}return new Sn(u)}(t,kn(t,e,n,_t(),i),Ve())}async _openRedirect(t,e,n,i){var r;return await this._originValidation(t),r=kn(t,e,n,_t(),i),je().location.href=r,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(It(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await async function(t){const e=await En(t),n=je().gapi;return Et(n,t,"internal-error"),e.open({where:document.body,url:Cn(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:In,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=vt(t,"network-request-failed"),s=je().setTimeout((()=>{i(r)}),bn.get());function o(){je().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new dn(t);return e.register("authEvent",(e=>(Et(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(xn,{type:xn},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&e(!!r),At(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return Ot(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(yn(t))return}catch(t){}At(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return le()||ne()||ce()}};var Rn,Dn="@firebase/auth",Ln="0.19.2";class On{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pn(t=ut()){const e=at(t,"auth");return e.isInitialized()?e.getImmediate():function(t,e){const n=at(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(D(n.getOptions(),null!=e?e:{}))return t;At(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Nn,persistence:[Je,Pe,Me]})}Rn="Browser",ot(new F("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(t=>{Et(i&&!i.includes(":"),"invalid-api-key",{appName:t.name}),Et(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const n={apiKey:i,authDomain:r,clientPlatform:Rn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(Rn)},s=new ue(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ct);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),ot(new F("auth-internal",(t=>(t=>new On(t))(de(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),dt(Dn,Ln,void 0),dt(Dn,Ln,"esm2017");const Bn=function(t,e,n){const i=document.getElementById("backgroundimage"),r=document.getElementById("background"),s=Number(i.clientWidth),o=Number(r.clientWidth);let a=0;o>s&&(a=(o-s)/2);const c=document.createElement("div");c.style.position="absolute",c.style.width="40px",c.style.height="40px",c.style.border="3px solid black",c.style.borderRadius="25px",c.style.top=e-20+"px",c.style.left=a+t-20+"px",c.style.zIndex="1",c.setAttribute("id",n+"Found"),c.setAttribute("class","characterfoundcircle"),r.appendChild(c)},Mn=function(t){const e=[{setname:"waldoLocation",aliasondiv:"waldothumbnail"},{setname:"odlawLocation",aliasondiv:"odlawthumbnail"},{setname:"wendaLocation",aliasondiv:"wendathumbnail"},{setname:"wizardLocation",aliasondiv:"wizardthumbnail"},{setname:"woofLocation",aliasondiv:"woofthumbnail"}].find((e=>e.setname===t)),n=document.getElementById(e.aliasondiv);n.classList.add("found");const i=document.createElement("div");i.setAttribute("class","check");const r=document.createElement("p");r.innerHTML='<i class="las la-check"></i>',i.appendChild(r),n.appendChild(i)},Un=function(t,e){const n=document.createElement("div"),i=document.getElementById("game");n.setAttribute("id","foundoverlay");const r=document.createElement("div");r.setAttribute("id","closeoverlay");const s=document.createElement("div");n.appendChild(r),n.appendChild(s);const o=document.createElement("button");o.innerHTML="x",r.appendChild(o),o.addEventListener("click",(()=>{n.remove()}));const a=document.createElement("p");if(t){const t=[{setname:"waldoLocation",name:"Waldo"},{setname:"odlawLocation",name:"Odlaw"},{setname:"wendaLocation",name:"Wenda"},{setname:"wizardLocation",name:"Wizard Whitebeard"},{setname:"woofLocation",name:"Woof"}],n=e.dataset.character,i=t.find((t=>t.setname===n));a.textContent=`You found ${i.name}!`}else a.textContent="The selected character isn't at that location.";s.appendChild(a),i.appendChild(n),setTimeout((()=>{n.remove()}),2500)},Vn=function(t,e,n){let i="";i=null===n?"":t?"Congratulations! You made it to the High Score board!":`You were too slow. It took you ${n} seconds to find everyone.`;const r=document.createElement("div"),s=document.getElementById("game");r.setAttribute("id","scoreboarddiv");const o=document.createElement("div");o.setAttribute("id","closescoreboarddiv");const a=document.createElement("button");a.setAttribute("id","closescoreboardbutton"),a.innerHTML="x",o.appendChild(a);const c=document.createElement("div"),l=document.createElement("p");l.setAttribute("id","playermessage"),l.textContent=i;const h=document.createElement("h2");h.textContent="Best Five Players";const u=document.createElement("table"),d=document.createElement("tbody");for(let t=0;t<e.length;t++){const n=document.createElement("tr"),i=t+1+".",r=document.createElement("td"),s=document.createTextNode(i);r.appendChild(s);const o=document.createElement("td");let a,c;""===e[t].name?(a="",c=""):(a=e[t].name,c=e[t].time);const l=document.createTextNode(a);o.appendChild(l);const h=document.createElement("td"),u=document.createTextNode(c);h.appendChild(u),n.appendChild(r),n.appendChild(o),n.appendChild(h),d.appendChild(n)}u.appendChild(d),c.appendChild(l),c.appendChild(h),c.appendChild(u),r.appendChild(o),r.appendChild(c),s.appendChild(r)},Fn=function(t){const e=t.foundcharacters,n=[{name:"waldoLocation",characterdata:t.waldoLocation},{name:"odlawLocation",characterdata:t.odlawLocation},{name:"wendaLocation",characterdata:t.wendaLocation},{name:"wizardLocation",characterdata:t.wizardLocation},{name:"woodLocation",characterdata:t.woofLocation}];let i=0;for(let t=0;t<n.length;t++)if(n[t].characterdata.found){i++;const r=n[t].characterdata.location,s=Number(r.minwidth)-2+(Number(r.maxwidth)-Number(r.minwidth))/2,o=Number(r.minheight)-4+(Number(r.maxheight)-Number(r.minheight))/2;if(Bn(s,o,n[t].name),Mn(n[t].name),i===e)break}},jn={apiKey:"AIzaSyAE43ZeTws_H4AZsObhCJK1OZn7kVNvR0s",authDomain:"whereswaldo-9d066.firebaseapp.com",projectId:"whereswaldo-9d066",storageBucket:"whereswaldo-9d066.appspot.com",messagingSenderId:"136735507337",appId:"1:136735507337:web:5568dfe76489127cdad758"};dt("firebase","9.4.0","app");var zn,Hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},qn={},Wn=Wn||{},Kn=Hn||self;function $n(){}function Gn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Qn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Yn="closure_uid_"+(1e9*Math.random()>>>0),Xn=0;function Jn(t,e,n){return t.call.apply(t.bind,arguments)}function Zn(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ti(t,e,n){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jn:Zn).apply(null,arguments)}function ei(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ni(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function ii(){this.s=this.s,this.o=this.o}var ri={};ii.prototype.s=!1,ii.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Yn)&&t[Yn]||(t[Yn]=++Xn)}(this);delete ri[t]}},ii.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const si=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},oi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,r="string"==typeof t?t.split(""):t;for(let s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function ai(t){return Array.prototype.concat.apply([],arguments)}function ci(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function li(t){return/^[\s\xa0]*$/.test(t)}var hi,ui=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function di(t,e){return-1!=t.indexOf(e)}function fi(t,e){return t<e?-1:t>e?1:0}t:{var pi=Kn.navigator;if(pi){var mi=pi.userAgent;if(mi){hi=mi;break t}}hi=""}function gi(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function yi(t){const e={};for(const n in t)e[n]=t[n];return e}var Ai="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vi(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<Ai.length;e++)n=Ai[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function wi(t){return wi[" "](t),t}wi[" "]=$n;var Ei,bi,Ii=di(hi,"Opera"),Ti=di(hi,"Trident")||di(hi,"MSIE"),Ci=di(hi,"Edge"),_i=Ci||Ti,Si=di(hi,"Gecko")&&!(di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge"))&&!(di(hi,"Trident")||di(hi,"MSIE"))&&!di(hi,"Edge"),ki=di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge");function xi(){var t=Kn.document;return t?t.documentMode:void 0}t:{var Ni="",Ri=(bi=hi,Si?/rv:([^\);]+)(\)|;)/.exec(bi):Ci?/Edge\/([\d\.]+)/.exec(bi):Ti?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(bi):ki?/WebKit\/(\S+)/.exec(bi):Ii?/(?:Version)[ \/]?(\S+)/.exec(bi):void 0);if(Ri&&(Ni=Ri?Ri[1]:""),Ti){var Di=xi();if(null!=Di&&Di>parseFloat(Ni)){Ei=String(Di);break t}}Ei=Ni}var Li,Oi={};function Pi(){return t=Oi,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=ui(String(Ei)).split("."),n=ui("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=fi(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||fi(0==r[2].length,0==s[2].length)||fi(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}();var t}Kn.document&&Ti?Li=xi()||parseInt(Ei,10)||void 0:Li=void 0;var Bi=Li,Mi=function(){if(!Kn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Kn.addEventListener("test",$n,e),Kn.removeEventListener("test",$n,e)}catch(t){}return t}();function Ui(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Vi(t,e){if(Ui.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Si){t:{try{wi(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fi[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vi.Z.h.call(this)}}Ui.prototype.h=function(){this.defaultPrevented=!0},ni(Vi,Ui);var Fi={2:"touch",3:"pen",4:"mouse"};Vi.prototype.h=function(){Vi.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ji="closure_listenable_"+(1e6*Math.random()|0),zi=0;function Hi(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++zi,this.ca=this.fa=!1}function qi(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Wi(t){this.src=t,this.g={},this.h=0}function Ki(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=si(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(qi(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function $i(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}Wi.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=$i(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Hi(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var Gi="closure_lm_"+(1e6*Math.random()|0),Qi={};function Yi(t,e,n,i,r){if(i&&i.once)return Ji(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Yi(t,e[s],n,i,r);return null}return n=sr(n),t&&t[ji]?t.N(e,n,Qn(i)?!!i.capture:!!i,r):Xi(t,e,n,!1,i,r)}function Xi(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=Qn(r)?!!r.capture:!!r,a=ir(t);if(a||(t[Gi]=a=new Wi(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){var t=nr;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Mi||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(er(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Ji(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ji(t,e[s],n,i,r);return null}return n=sr(n),t&&t[ji]?t.O(e,n,Qn(i)?!!i.capture:!!i,r):Xi(t,e,n,!0,i,r)}function Zi(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Zi(t,e[s],n,i,r);else i=Qn(i)?!!i.capture:!!i,n=sr(n),t&&t[ji]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=$i(s=t.g[e],n,i,r))&&(qi(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=ir(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$i(e,n,i,r)),(n=-1<t?e[t]:null)&&tr(n))}function tr(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ji])Ki(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(er(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=ir(e))?(Ki(n,t),0==n.h&&(n.src=null,e[Gi]=null)):qi(t)}}}function er(t){return t in Qi?Qi[t]:Qi[t]="on"+t}function nr(t,e){if(t.ca)t=!0;else{e=new Vi(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&tr(t),t=n.call(i,e)}return t}function ir(t){return(t=t[Gi])instanceof Wi?t:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function sr(t){return"function"==typeof t?t:(t[rr]||(t[rr]=function(e){return t.handleEvent(e)}),t[rr])}function or(){ii.call(this),this.i=new Wi(this),this.P=this,this.I=null}function ar(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new Ui(e,t);else if(e instanceof Ui)e.target=e.target||t;else{var r=e;vi(e=new Ui(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=cr(o,i,!0,e)&&r}if(r=cr(o=e.g=t,i,!0,e)&&r,r=cr(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=cr(o=e.g=n[s],i,!1,e)&&r}function cr(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Ki(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}ni(or,ii),or.prototype[ji]=!0,or.prototype.removeEventListener=function(t,e,n,i){Zi(this,t,e,n,i)},or.prototype.M=function(){if(or.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)qi(n[i]);delete e.g[t],e.h--}}this.I=null},or.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},or.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var lr=Kn.JSON.stringify;function hr(){var t=yr;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ur,dr=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new fr),(t=>t.reset()));class fr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function pr(t){Kn.setTimeout((()=>{throw t}),0)}function mr(t,e){ur||function(){var t=Kn.Promise.resolve(void 0);ur=function(){t.then(Ar)}}(),gr||(ur(),gr=!0),yr.add(t,e)}var gr=!1,yr=new class{constructor(){this.h=this.g=null}add(t,e){const n=dr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Ar(){for(var t;t=hr();){try{t.h.call(t.g)}catch(t){pr(t)}var e=dr;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}gr=!1}function vr(t,e){or.call(this),this.h=t||1,this.g=e||Kn,this.j=ti(this.kb,this),this.l=Date.now()}function wr(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Er(t,e,n){if("function"==typeof t)n&&(t=ti(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ti(t.handleEvent,t)}return 2147483647<Number(e)?-1:Kn.setTimeout(t,e||0)}function br(t){t.g=Er((()=>{t.g=null,t.i&&(t.i=!1,br(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ni(vr,or),(zn=vr.prototype).da=!1,zn.S=null,zn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ar(this,"tick"),this.da&&(wr(this),this.start()))}},zn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},zn.M=function(){vr.Z.M.call(this),wr(this),delete this.g};class Ir extends ii{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:br(this)}M(){super.M(),this.g&&(Kn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(t){ii.call(this),this.h=t,this.g={}}ni(Tr,ii);var Cr=[];function _r(t,e,n,i){Array.isArray(n)||(n&&(Cr[0]=n.toString()),n=Cr);for(var r=0;r<n.length;r++){var s=Yi(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Sr(t){gi(t.g,(function(t,e){this.g.hasOwnProperty(e)&&tr(t)}),t),t.g={}}function kr(){this.g=!0}function xr(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return lr(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}Tr.prototype.M=function(){Tr.Z.M.call(this),Sr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kr.prototype.Aa=function(){this.g=!1},kr.prototype.info=function(){};var Nr={},Rr=null;function Dr(){return Rr=Rr||new or}function Lr(t){Ui.call(this,Nr.Ma,t)}function Or(t){const e=Dr();ar(e,new Lr(e,t))}function Pr(t,e){Ui.call(this,Nr.STAT_EVENT,t),this.stat=e}function Br(t){const e=Dr();ar(e,new Pr(e,t))}function Mr(t,e){Ui.call(this,Nr.Na,t),this.size=e}function Ur(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Kn.setTimeout((function(){t()}),e)}Nr.Ma="serverreachability",ni(Lr,Ui),Nr.STAT_EVENT="statevent",ni(Pr,Ui),Nr.Na="timingevent",ni(Mr,Ui);var Vr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function jr(){}function zr(t){return t.h||(t.h=t.i())}function Hr(){}jr.prototype.h=null;var qr,Wr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kr(){Ui.call(this,"d")}function $r(){Ui.call(this,"c")}function Gr(){}function Qr(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new Tr(this),this.P=Xr,t=_i?125:void 0,this.W=new vr(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Yr}function Yr(){this.i=null,this.g="",this.h=!1}ni(Kr,Ui),ni($r,Ui),ni(Gr,jr),Gr.prototype.g=function(){return new XMLHttpRequest},Gr.prototype.i=function(){return{}},qr=new Gr;var Xr=45e3,Jr={},Zr={};function ts(t,e,n){t.K=1,t.v=Is(ys(e)),t.s=n,t.U=!0,es(t,null)}function es(t,e){t.F=Date.now(),ss(t),t.A=ys(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Bs(n.h,"t",i),t.C=0,n=t.l.H,t.h=new Yr,t.g=Mo(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ir(ti(t.Ia,t,t.g),t.O)),_r(t.V,t.g,"readystatechange",t.gb),e=t.H?yi(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Or(1),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function ns(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function is(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=rs(t,n),i==Zr){4==e&&(t.o=4,Br(14),r=!1),xr(t.j,t.m,null,"[Incomplete Response]");break}if(i==Jr){t.o=4,Br(15),xr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}xr(t.j,t.m,i,null),hs(t,i)}ns(t)&&i!=Zr&&i!=Jr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Br(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),xo(e),e.L=!0,Br(11))):(xr(t.j,t.m,n,"[Invalid Chunked Response]"),ls(t),cs(t))}function rs(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Zr:(n=Number(e.substring(n,i)),isNaN(n)?Jr:(i+=1)+n>e.length?Zr:(e=e.substr(i,n),t.C=i+n,e))}function ss(t){t.Y=Date.now()+t.P,os(t,t.P)}function os(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ur(ti(t.eb,t),e)}function as(t){t.B&&(Kn.clearTimeout(t.B),t.B=null)}function cs(t){0==t.l.G||t.I||Do(t.l,t)}function ls(t){as(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,wr(t.W),Sr(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function hs(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||zs(n.i,t)))if(n.I=t.N,!t.J&&zs(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ro(n),wo(n)}ko(n),Br(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ur(ti(n.ab,n),6e3));if(1>=js(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Oo(n,11)}else if((t.J||n.g==t)&&Ro(n),!li(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const e=l[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const r=l[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;!s.g&&(di(t,"spdy")||di(t,"quic")||di(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Hs(s,s.h),s.h=null))}if(i.D){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.sa=t,bs(i.F,i.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((i=n).oa=Bo(i,i.H?i.la:null,i.W),o.J){qs(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(as(a),ss(a)),i.g=o}else So(i);0<n.l.length&&Io(n)}else"stop"!=l[0]&&"close"!=l[0]||Oo(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Oo(n,7):vo(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Or(4)}catch(t){}}function us(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Gn(t)||"string"==typeof t)oi(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Gn(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Gn(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function ds(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof ds)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function fs(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];ps(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)ps(r,i=t.g[e])||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function ps(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zn=Qr.prototype).setTimeout=function(t){this.P=t},zn.gb=function(t){t=t.target;const e=this.L;e&&3==po(t)?e.l():this.Ia(t)},zn.Ia=function(t){try{if(t==this.g)t:{const h=po(this.g);var e=this.g.Da();const u=this.g.ba();if(!(3>h)&&(3!=h||_i||this.g&&(this.h.h||this.g.ga()||mo(this.g)))){this.I||4!=h||7==e||Or(8==e||0>=u?3:2),as(this);var n=this.g.ba();this.N=n;e:if(ns(this)){var i=mo(this.g);t="";var r=i.length,s=4==po(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ls(this),cs(this);var o="";break e}this.h.i=new Kn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,h,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!li(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,Br(12),ls(this),cs(this);break t}xr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hs(this,n)}this.U?(is(this,h,o),_i&&this.i&&3==h&&(_r(this.V,this.W,"tick",this.fb),this.W.start())):(xr(this.j,this.m,o,null),hs(this,o)),4==h&&ls(this),this.i&&!this.I&&(4==h?Do(this.l,this):(this.i=!1,ss(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Br(12)):(this.o=0,Br(13)),ls(this),cs(this)}}}catch(t){}},zn.fb=function(){if(this.g){var t=po(this.g),e=this.g.ga();this.C<e.length&&(as(this),is(this,t,e),this.i&&4!=t&&ss(this))}},zn.cancel=function(){this.I=!0,ls(this)},zn.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Or(3),Br(17)),ls(this),this.o=2,cs(this)):os(this,this.Y-t)},(zn=ds.prototype).R=function(){fs(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},zn.T=function(){return fs(this),this.g.concat()},zn.get=function(t,e){return ps(this.h,t)?this.h[t]:e},zn.set=function(t,e){ps(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},zn.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var ms=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gs(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof gs){this.g=void 0!==e?e:t.g,As(this,t.j),this.s=t.s,vs(this,t.i),ws(this,t.m),this.l=t.l,e=t.h;var n=new Ds;n.i=e.i,e.g&&(n.g=new ds(e.g),n.h=e.h),Es(this,n),this.o=t.o}else t&&(n=String(t).match(ms))?(this.g=!!e,As(this,n[1]||"",!0),this.s=Ts(n[2]||""),vs(this,n[3]||"",!0),ws(this,n[4]),this.l=Ts(n[5]||"",!0),Es(this,n[6]||"",!0),this.o=Ts(n[7]||"")):(this.g=!!e,this.h=new Ds(null,this.g))}function ys(t){return new gs(t)}function As(t,e,n){t.j=n?Ts(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vs(t,e,n){t.i=n?Ts(e,!0):e}function ws(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Es(t,e,n){e instanceof Ds?(t.h=e,function(t,e){e&&!t.j&&(Ls(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Os(this,e),Bs(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Cs(e,Ns)),t.h=new Ds(e,t.g))}function bs(t,e,n){t.h.set(e,n)}function Is(t){return bs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ts(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,_s),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _s(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cs(e,Ss,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Cs(e,Ss,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cs(n,"/"==n.charAt(0)?xs:ks,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cs(n,Rs)),t.join("")};var Ss=/[#\/\?@]/g,ks=/[#\?:]/g,xs=/[#\?]/g,Ns=/[#\?@]/g,Rs=/#/g;function Ds(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ls(t){t.g||(t.g=new ds,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Os(t,e){Ls(t),e=Ms(t,e),ps(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ps((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&fs(t)))}function Ps(t,e){return Ls(t),e=Ms(t,e),ps(t.g.h,e)}function Bs(t,e,n){Os(t,e),0<n.length&&(t.i=null,t.g.set(Ms(t,e),ci(n)),t.h+=n.length)}function Ms(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Us(t){this.l=t||Vs,t=Kn.PerformanceNavigationTiming?0<(t=Kn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Kn.g&&Kn.g.Ea&&Kn.g.Ea()&&Kn.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(zn=Ds.prototype).add=function(t,e){Ls(this),this.i=null,t=Ms(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},zn.forEach=function(t,e){Ls(this),this.g.forEach((function(n,i){oi(n,(function(n){t.call(e,n,i,this)}),this)}),this)},zn.T=function(){Ls(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},zn.R=function(t){Ls(this);var e=[];if("string"==typeof t)Ps(this,t)&&(e=ai(e,this.g.get(Ms(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ai(e,t[n])}return e},zn.set=function(t,e){return Ls(this),this.i=null,Ps(this,t=Ms(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},zn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},zn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var Vs=10;function Fs(t){return!!t.h||!!t.g&&t.g.size>=t.j}function js(t){return t.h?1:t.g?t.g.size:0}function zs(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Hs(t,e){t.g?t.g.add(e):t.h=e}function qs(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ws(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return ci(t.i)}function Ks(){}function $s(){this.g=new Ks}function Gs(t,e,n){const i=n||"";try{us(t,(function(t,n){let r=t;Qn(t)&&(r=lr(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function Qs(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function Ys(t){this.l=t.$b||null,this.j=t.ib||!1}function Xs(t,e){or.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Us.prototype.cancel=function(){if(this.i=Ws(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Ks.prototype.stringify=function(t){return Kn.JSON.stringify(t,void 0)},Ks.prototype.parse=function(t){return Kn.JSON.parse(t,void 0)},ni(Ys,jr),Ys.prototype.g=function(){return new Xs(this.l,this.j)},Ys.prototype.i=function(t){return function(){return t}}({}),ni(Xs,or);var Js=0;function Zs(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function to(t){t.readyState=4,t.l=null,t.j=null,t.A=null,eo(t)}function eo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(zn=Xs.prototype).open=function(t,e){if(this.readyState!=Js)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,eo(this)},zn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Kn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},zn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,to(this)),this.readyState=Js},zn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Kn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zs(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},zn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?to(this):eo(this),3==this.readyState&&Zs(this)}},zn.Ua=function(t){this.g&&(this.response=this.responseText=t,to(this))},zn.Ta=function(t){this.g&&(this.response=t,to(this))},zn.ha=function(){this.g&&to(this)},zn.setRequestHeader=function(t,e){this.v.append(t,e)},zn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},zn.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Xs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var no=Kn.JSON.parse;function io(t){or.call(this),this.headers=new ds,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ro,this.K=this.L=!1}ni(io,or);var ro="",so=/^https?$/i,oo=["POST","PUT"];function ao(t){return"content-type"==t.toLowerCase()}function co(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lo(t),uo(t)}function lo(t){t.D||(t.D=!0,ar(t,"complete"),ar(t,"error"))}function ho(t){if(t.h&&void 0!==Wn&&(!t.C[1]||4!=po(t)||2!=t.ba()))if(t.v&&4==po(t))Er(t.Fa,0,t);else if(ar(t,"readystatechange"),4==po(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.H).match(ms)[1]||null;if(!r&&Kn.self&&Kn.self.location){var s=Kn.self.location.protocol;r=s.substr(0,s.length-1)}i=!so.test(r?r.toLowerCase():"")}n=i}if(n)ar(t,"complete"),ar(t,"success");else{t.m=6;try{var o=2<po(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",lo(t)}}finally{uo(t)}}}function uo(t,e){if(t.g){fo(t);const n=t.g,i=t.C[0]?$n:null;t.g=null,t.C=null,e||ar(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function fo(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Kn.clearTimeout(t.A),t.A=null)}function po(t){return t.g?t.g.readyState:0}function mo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ro:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function go(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){let e="";return gi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):bs(t,e,n))}function yo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ao(t){this.za=0,this.l=[],this.h=new kr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yo("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yo("baseRetryDelayMs",5e3,t),this.$a=yo("retryDelaySeedMs",1e4,t),this.Ya=yo("forwardChannelMaxRetries",2,t),this.ra=yo("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Us(t&&t.concurrentRequestLimit),this.Ca=new $s,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function vo(t){if(Eo(t),3==t.G){var e=t.V++,n=ys(t.F);bs(n,"SID",t.J),bs(n,"RID",e),bs(n,"TYPE","terminate"),Co(t,n),(e=new Qr(t,t.h,e,void 0)).K=2,e.v=Is(ys(n)),n=!1,Kn.navigator&&Kn.navigator.sendBeacon&&(n=Kn.navigator.sendBeacon(e.v.toString(),"")),!n&&Kn.Image&&((new Image).src=e.v,n=!0),n||(e.g=Mo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ss(e)}Po(t)}function wo(t){t.g&&(xo(t),t.g.cancel(),t.g=null)}function Eo(t){wo(t),t.u&&(Kn.clearTimeout(t.u),t.u=null),Ro(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Kn.clearTimeout(t.m),t.m=null)}function bo(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&Io(t)}function Io(t){Fs(t.i)||t.m||(t.m=!0,mr(t.Ha,t),t.C=0)}function To(t,e){var n;n=e?e.m:t.V++;const i=ys(t.F);bs(i,"SID",t.J),bs(i,"RID",n),bs(i,"AID",t.U),Co(t,i),t.o&&t.s&&go(i,t.o,t.s),n=new Qr(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=_o(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Hs(t.i,n),ts(n,i,e)}function Co(t,e){t.j&&us({},(function(t,n){bs(e,n,t)}))}function _o(t,e,n){n=Math.min(t.l.length,n);var i=t.j?ti(t.j.Oa,t.j,t):null;t:{var r=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{Gs(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,i}function So(t){t.g||t.u||(t.Y=1,mr(t.Ga,t),t.A=0)}function ko(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Ur(ti(t.Ga,t),Lo(t,t.A)),t.A++,0))}function xo(t){null!=t.B&&(Kn.clearTimeout(t.B),t.B=null)}function No(t){t.g=new Qr(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ys(t.oa);bs(e,"RID","rpc"),bs(e,"SID",t.J),bs(e,"CI",t.N?"0":"1"),bs(e,"AID",t.U),Co(t,e),bs(e,"TYPE","xmlhttp"),t.o&&t.s&&go(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Is(ys(e)),n.s=null,n.U=!0,es(n,t)}function Ro(t){null!=t.v&&(Kn.clearTimeout(t.v),t.v=null)}function Do(t,e){var n=null;if(t.g==e){Ro(t),xo(t),t.g=null;var i=2}else{if(!zs(t.i,e))return;n=e.D,qs(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;ar(i=Dr(),new Mr(i,n,e,r)),Io(t)}else So(t);else if(3==(r=e.o)||0==r&&0<t.I||!(1==i&&function(t,e){return!(js(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ur(ti(t.Ha,t,e),Lo(t,t.C)),t.C++,0)))}(t,e)||2==i&&ko(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:Oo(t,5);break;case 4:Oo(t,10);break;case 3:Oo(t,6);break;default:Oo(t,2)}}function Lo(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Oo(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=ti(t.jb,t);n||(n=new gs("//www.google.com/images/cleardot.gif"),Kn.location&&"http"==Kn.location.protocol||As(n,"https"),Is(n)),function(t,e){const n=new kr;if(Kn.Image){const i=new Image;i.onload=ei(Qs,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ei(Qs,n,i,"TestLoadImage: error",!1,e),i.onabort=ei(Qs,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ei(Qs,n,i,"TestLoadImage: timeout",!1,e),Kn.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Br(2);t.G=0,t.j&&t.j.va(e),Po(t),Eo(t)}function Po(t){t.G=0,t.I=-1,t.j&&(0==Ws(t.i).length&&0==t.l.length||(t.i.i.length=0,ci(t.l),t.l.length=0),t.j.ua())}function Bo(t,e,n){let i=function(t){return t instanceof gs?ys(t):new gs(t,void 0)}(n);if(""!=i.i)e&&vs(i,e+"."+i.i),ws(i,i.m);else{const t=Kn.location;i=function(t,e,n,i){var r=new gs(null,void 0);return t&&As(r,t),e&&vs(r,e),n&&ws(r,n),i&&(r.l=i),r}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&gi(t.aa,(function(t,e){bs(i,e,t)})),e=t.D,n=t.sa,e&&n&&bs(i,e,n),bs(i,"VER",t.ma),Co(t,i),i}function Mo(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new io(new Ys({ib:!0})):new io(t.qa)).L=t.H,e}function Uo(){}function Vo(){if(Ti&&!(10<=Number(Bi)))throw Error("Environmental error: no available transport.")}function Fo(t,e){or.call(this),this.g=new Ao(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!li(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!li(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ho(this)}function jo(t){Kr.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function zo(){$r.call(this),this.status=1}function Ho(t){this.g=t}(zn=io.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qr.g(),this.C=this.u?zr(this.u):zr(qr),this.g.onreadystatechange=ti(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void co(this,t)}t=n||"";const r=new ds(this.headers);i&&us(i,(function(t,e){r.set(e,t)})),i=function(t){t:{var e=ao;const n=t.length,i="string"==typeof t?t.split(""):t;for(let r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.T()),n=Kn.FormData&&t instanceof Kn.FormData,!(0<=si(oo,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fo(this),0<this.B&&((this.K=function(t){return Ti&&Pi()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.pa,this)):this.A=Er(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){co(this,t)}},zn.pa=function(){void 0!==Wn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},zn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ar(this,"complete"),ar(this,"abort"),uo(this))},zn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uo(this,!0)),io.Z.M.call(this)},zn.Fa=function(){this.s||(this.F||this.v||this.l?ho(this):this.cb())},zn.cb=function(){ho(this)},zn.ba=function(){try{return 2<po(this)?this.g.status:-1}catch(t){return-1}},zn.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},zn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),no(e)}},zn.Da=function(){return this.m},zn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(zn=Ao.prototype).ma=8,zn.G=1,zn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},zn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new Qr(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=yi(s),vi(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=_o(this,r,e),bs(n=ys(this.F),"RID",t),bs(n,"CVER",22),this.D&&bs(n,"X-HTTP-Session-Id",this.D),Co(this,n),this.o&&s&&go(n,this.o,s),Hs(this.i,r),this.Ra&&bs(n,"TYPE","init"),this.ja?(bs(n,"$req",e),bs(n,"SID","null"),r.$=!0,ts(r,n,null)):ts(r,n,e),this.G=2}}else 3==this.G&&(t?To(this,t):0==this.l.length||Fs(this.i)||To(this))},zn.Ga=function(){if(this.u=null,No(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ur(ti(this.bb,this),t)}},zn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Br(10),wo(this),No(this))},zn.ab=function(){null!=this.v&&(this.v=null,wo(this),ko(this),Br(19))},zn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Br(2)):(this.h.info("Failed to ping google.com"),Br(1))},(zn=Uo.prototype).xa=function(){},zn.wa=function(){},zn.va=function(){},zn.ua=function(){},zn.Oa=function(){},Vo.prototype.g=function(t,e){return new Fo(t,e)},ni(Fo,or),Fo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),mr(ti(t.hb,t,e))),Br(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Bo(t,null,t.W),Io(t)},Fo.prototype.close=function(){vo(this.g)},Fo.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,bo(this.g,e)}else this.v?((e={}).__data__=lr(t),bo(this.g,e)):bo(this.g,t)},Fo.prototype.M=function(){this.g.j=null,delete this.j,vo(this.g),delete this.g,Fo.Z.M.call(this)},ni(jo,Kr),ni(zo,$r),ni(Ho,Uo),Ho.prototype.xa=function(){ar(this.g,"a")},Ho.prototype.wa=function(t){ar(this.g,new jo(t))},Ho.prototype.va=function(t){ar(this.g,new zo(t))},Ho.prototype.ua=function(){ar(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,Fo.prototype.send=Fo.prototype.u,Fo.prototype.open=Fo.prototype.m,Fo.prototype.close=Fo.prototype.close,Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,Fr.COMPLETE="complete",Hr.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",or.prototype.listen=or.prototype.N,io.prototype.listenOnce=io.prototype.O,io.prototype.getLastError=io.prototype.La,io.prototype.getLastErrorCode=io.prototype.Da,io.prototype.getStatus=io.prototype.ba,io.prototype.getResponseJson=io.prototype.Qa,io.prototype.getResponseText=io.prototype.ga,io.prototype.send=io.prototype.ea;var qo=qn.createWebChannelTransport=function(){return new Vo},Wo=qn.getStatEventTarget=function(){return Dr()},Ko=qn.ErrorCode=Vr,$o=qn.EventType=Fr,Go=qn.Event=Nr,Qo=qn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yo=qn.FetchXmlHttpFactory=Ys,Xo=qn.WebChannel=Hr,Jo=qn.XhrIo=io;const Zo="@firebase/firestore";class ta{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ta.UNAUTHENTICATED=new ta(null),ta.GOOGLE_CREDENTIALS=new ta("google-credentials-uid"),ta.FIRST_PARTY=new ta("first-party-uid"),ta.MOCK_USER=new ta("mock-user");let ea="9.4.0";const na=new X("@firebase/firestore");function ia(){return na.logLevel}function ra(t,...e){if(na.logLevel<=W.DEBUG){const n=e.map(aa);na.debug(`Firestore (${ea}): ${t}`,...n)}}function sa(t,...e){if(na.logLevel<=W.ERROR){const n=e.map(aa);na.error(`Firestore (${ea}): ${t}`,...n)}}function oa(t,...e){if(na.logLevel<=W.WARN){const n=e.map(aa);na.warn(`Firestore (${ea}): ${t}`,...n)}}function aa(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function ca(t="Unexpected state"){const e=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: `+t;throw sa(e),new Error(e)}function la(t,e){t||ca()}function ha(t,e){return t}const ua={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class da extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fa{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class pa{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class ma{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(ta.UNAUTHENTICATED)))}shutdown(){}}class ga{constructor(t){this.t=t,this.currentUser=ta.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new fa,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{ra("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(ra("FirebaseCredentialsProvider","Auth not yet detected"),r.resolve(),r=new fa)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(ra("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(la("string"==typeof e.accessToken),new pa(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return la(null===t||"string"==typeof t),new ta(t)}}class ya{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=ta.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class Aa{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new ya(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(ta.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class va{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function wa(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}va.T=-1;class Ea{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=wa(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function ba(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}class Ta{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new da(ua.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new da(ua.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new da(ua.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new da(ua.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ta.fromMillis(Date.now())}static fromDate(t){return Ta.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Ta(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ba(this.nanoseconds,t.nanoseconds):ba(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ca{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ca(t)}static min(){return new Ca(new Ta(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _a(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ka(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class xa{constructor(t,e,n){void 0===e?e=0:e>t.length&&ca(),void 0===n?n=t.length-e:n>t.length-e&&ca(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===xa.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xa?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Na extends xa{construct(t,e,n){return new Na(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new da(ua.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Na(e)}static emptyPath(){return new Na([])}}const Ra=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Da extends xa{construct(t,e,n){return new Da(t,e,n)}static isValidIdentifier(t){return Ra.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Da.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Da(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new da(ua.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new da(ua.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new da(ua.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new da(ua.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Da(e)}static emptyPath(){return new Da([])}}class La{constructor(t){this.fields=t,t.sort(Da.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ia(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Oa{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Oa(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Oa(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ba(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oa.EMPTY_BYTE_STRING=new Oa("");const Pa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ba(t){if(la(!!t),"string"==typeof t){let e=0;const n=Pa.exec(t);if(la(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ma(t.seconds),nanos:Ma(t.nanos)}}function Ma(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ua(t){return"string"==typeof t?Oa.fromBase64String(t):Oa.fromUint8Array(t)}function Va(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fa(t){const e=t.mapValue.fields.__previous_value__;return Va(e)?Fa(e):e}function ja(t){const e=Ba(t.mapValue.fields.__local_write_time__.timestampValue);return new Ta(e.seconds,e.nanos)}function za(t){return null==t}function Ha(t){return 0===t&&1/t==-1/0}class qa{constructor(t){this.path=t}static fromPath(t){return new qa(Na.fromString(t))}static fromName(t){return new qa(Na.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Na.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Na.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new qa(new Na(t.slice()))}}function Wa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Va(t)?4:10:ca()}function Ka(t,e){const n=Wa(t);if(n!==Wa(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ja(t).isEqual(ja(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Ba(t.timestampValue),i=Ba(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ua(t.bytesValue).isEqual(Ua(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ma(t.geoPointValue.latitude)===Ma(e.geoPointValue.latitude)&&Ma(t.geoPointValue.longitude)===Ma(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ma(t.integerValue)===Ma(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ma(t.doubleValue),i=Ma(e.doubleValue);return n===i?Ha(n)===Ha(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],Ka);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(_a(n)!==_a(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ka(n[t],i[t])))return!1;return!0}(t,e);default:return ca()}}function $a(t,e){return void 0!==(t.values||[]).find((t=>Ka(t,e)))}function Ga(t,e){const n=Wa(t),i=Wa(e);if(n!==i)return ba(n,i);switch(n){case 0:return 0;case 1:return ba(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ma(t.integerValue||t.doubleValue),i=Ma(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return Qa(t.timestampValue,e.timestampValue);case 4:return Qa(ja(t),ja(e));case 5:return ba(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ua(t),i=Ua(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=ba(n[t],i[t]);if(0!==e)return e}return ba(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=ba(Ma(t.latitude),Ma(e.latitude));return 0!==n?n:ba(Ma(t.longitude),Ma(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Ga(n[t],i[t]);if(e)return e}return ba(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=ba(i[t],s[t]);if(0!==e)return e;const o=Ga(n[i[t]],r[s[t]]);if(0!==o)return o}return ba(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ca()}}function Qa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ba(t,e);const n=Ba(t),i=Ba(e),r=ba(n.seconds,i.seconds);return 0!==r?r:ba(n.nanos,i.nanos)}function Ya(t){return Xa(t)}function Xa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Ba(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ua(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,qa.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Xa(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Xa(t.fields[r])}`;return n+"}"}(t.mapValue):ca();var e,n}function Ja(t){return!!t&&"integerValue"in t}function Za(t){return!!t&&"arrayValue"in t}function tc(t){return!!t&&"nullValue"in t}function ec(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nc(t){return!!t&&"mapValue"in t}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Sa(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ic(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}class rc{constructor(t){this.value=t}static empty(){return new rc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!nc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ic(e)}setAll(t){let e=Da.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=ic(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());nc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ka(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];nc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Sa(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new rc(ic(this.value))}}function sc(t){const e=[];return Sa(t.fields,((t,n)=>{const i=new Da([t]);if(nc(n)){const t=sc(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new La(e)}class oc{constructor(t,e,n,i,r){this.key=t,this.documentType=e,this.version=n,this.data=i,this.documentState=r}static newInvalidDocument(t){return new oc(t,0,Ca.min(),rc.empty(),0)}static newFoundDocument(t,e,n){return new oc(t,1,e,n,0)}static newNoDocument(t,e){return new oc(t,2,e,rc.empty(),0)}static newUnknownDocument(t,e){return new oc(t,3,e,rc.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof oc&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new oc(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ac{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.A=null}}function cc(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ac(t,e,n,i,r,s,o)}function lc(t){const e=ha(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+Ya(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),za(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=bc(e.startAt)),e.endAt&&(t+="|ub:",t+=bc(e.endAt)),e.A=t}return e.A}function hc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!Ka(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_c(t.startAt,e.startAt)&&_c(t.endAt,e.endAt)}function uc(t){return qa.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class dc extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new fc(t,e,n):"array-contains"===e?new yc(t,n):"in"===e?new Ac(t,n):"not-in"===e?new vc(t,n):"array-contains-any"===e?new wc(t,n):new dc(t,e,n)}static R(t,e,n){return"in"===e?new pc(t,n):new mc(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(Ga(e,this.value)):null!==e&&Wa(this.value)===Wa(e)&&this.P(Ga(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ca()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fc extends dc{constructor(t,e,n){super(t,e,n),this.key=qa.fromName(n.referenceValue)}matches(t){const e=qa.comparator(t.key,this.key);return this.P(e)}}class pc extends dc{constructor(t,e){super(t,"in",e),this.keys=gc(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class mc extends dc{constructor(t,e){super(t,"not-in",e),this.keys=gc(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function gc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>qa.fromName(t.referenceValue)))}class yc extends dc{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Za(e)&&$a(e.arrayValue,this.value)}}class Ac extends dc{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&$a(this.value.arrayValue,e)}}class vc extends dc{constructor(t,e){super(t,"not-in",e)}matches(t){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!$a(this.value.arrayValue,e)}}class wc extends dc{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Za(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>$a(this.value.arrayValue,t)))}}class Ec{constructor(t,e){this.position=t,this.before=e}}function bc(t){return`${t.before?"b":"a"}:${t.position.map((t=>Ya(t))).join(",")}`}class Ic{constructor(t,e="asc"){this.field=t,this.dir=e}}function Tc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Cc(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?qa.comparator(qa.fromName(o.referenceValue),n.key):Ga(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function _c(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ka(t.position[n],e.position[n]))return!1;return!0}class Sc{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function kc(t){return new Sc(t)}function xc(t){return!za(t.limit)&&"F"===t.limitType}function Nc(t){return!za(t.limit)&&"L"===t.limitType}function Rc(t){const e=ha(t);if(null===e.V){e.V=[];const t=function(t){for(const e of t.filters)if(e.v())return e.field;return null}(e),n=function(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new Ic(t)),e.V.push(new Ic(Da.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Ic(Da.keyField(),t))}}}return e.V}function Dc(t){const e=ha(t);if(!e.S)if("F"===e.limitType)e.S=cc(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Rc(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Ic(n.field,e))}const n=e.endAt?new Ec(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Ec(e.startAt.position,!e.startAt.before):null;e.S=cc(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.S}function Lc(t,e){return hc(Dc(t),Dc(e))&&t.limitType===e.limitType}function Oc(t){return`${lc(Dc(t))}|lt:${t.limitType}`}function Pc(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${Ya(e.value)}`;var e})).join(", ")}]`),za(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+bc(t.startAt)),t.endAt&&(e+=", endAt: "+bc(t.endAt)),`Target(${e})`}(Dc(t))}; limitType=${t.limitType})`}function Bc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):qa.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Cc(t.startAt,Rc(t),e)||t.endAt&&Cc(t.endAt,Rc(t),e))}(t,e)}function Mc(t){return(e,n)=>{let i=!1;for(const r of Rc(t)){const t=Uc(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Uc(t,e,n){const i=t.field.isKeyField()?qa.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?Ga(i,r):ca()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ca()}}function Vc(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function Fc(t){return{integerValue:""+t}}function jc(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Fc(e):Vc(t,e)}class zc{constructor(){this._=void 0}}function Hc(t,e,n){return t instanceof Kc?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $c?Gc(t,e):t instanceof Qc?Yc(t,e):function(t,e){const n=Wc(t,e),i=Jc(n)+Jc(t.C);return Ja(n)&&Ja(t.C)?Fc(i):Vc(t.N,i)}(t,e)}function qc(t,e,n){return t instanceof $c?Gc(t,e):t instanceof Qc?Yc(t,e):n}function Wc(t,e){return t instanceof Xc?Ja(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Kc extends zc{}class $c extends zc{constructor(t){super(),this.elements=t}}function Gc(t,e){const n=Zc(e);for(const e of t.elements)n.some((t=>Ka(t,e)))||n.push(e);return{arrayValue:{values:n}}}class Qc extends zc{constructor(t){super(),this.elements=t}}function Yc(t,e){let n=Zc(e);for(const e of t.elements)n=n.filter((t=>!Ka(t,e)));return{arrayValue:{values:n}}}class Xc extends zc{constructor(t,e){super(),this.N=t,this.C=e}}function Jc(t){return Ma(t.integerValue||t.doubleValue)}function Zc(t){return Za(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class tl{constructor(t,e){this.field=t,this.transform=e}}class el{constructor(t,e){this.version=t,this.transformResults=e}}class nl{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new nl}static exists(t){return new nl(void 0,t)}static updateTime(t){return new nl(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function il(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class rl{}function sl(t,e,n){t instanceof hl?function(t,e,n){const i=t.value.clone(),r=fl(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof ul?function(t,e,n){if(!il(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=fl(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(dl(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ol(t,e,n){t instanceof hl?function(t,e,n){if(!il(t.precondition,e))return;const i=t.value.clone(),r=pl(t.fieldTransforms,n,e);i.setAll(r),e.convertToFoundDocument(ll(e),i).setHasLocalMutations()}(t,e,n):t instanceof ul?function(t,e,n){if(!il(t.precondition,e))return;const i=pl(t.fieldTransforms,n,e),r=e.data;r.setAll(dl(t)),r.setAll(i),e.convertToFoundDocument(ll(e),r).setHasLocalMutations()}(t,e,n):function(t,e){il(t.precondition,e)&&e.convertToNoDocument(Ca.min())}(t,e)}function al(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Wc(i.transform,t||null);null!=r&&(null==n&&(n=rc.empty()),n.set(i.field,r))}return n||null}function cl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ia(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $c&&e instanceof $c||t instanceof Qc&&e instanceof Qc?Ia(t.elements,e.elements,Ka):t instanceof Xc&&e instanceof Xc?Ka(t.C,e.C):t instanceof Kc&&e instanceof Kc}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ll(t){return t.isFoundDocument()?t.version:Ca.min()}class hl extends rl{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}}class ul extends rl{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}}function dl(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function fl(t,e,n){const i=new Map;la(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,qc(o,a,n[r]))}return i}function pl(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Hc(t,s,e))}return i}class ml extends rl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class gl extends rl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class yl{constructor(t){this.count=t}}var Al,vl;function wl(t){if(void 0===t)return sa("GRPC error has no .code"),ua.UNKNOWN;switch(t){case Al.OK:return ua.OK;case Al.CANCELLED:return ua.CANCELLED;case Al.UNKNOWN:return ua.UNKNOWN;case Al.DEADLINE_EXCEEDED:return ua.DEADLINE_EXCEEDED;case Al.RESOURCE_EXHAUSTED:return ua.RESOURCE_EXHAUSTED;case Al.INTERNAL:return ua.INTERNAL;case Al.UNAVAILABLE:return ua.UNAVAILABLE;case Al.UNAUTHENTICATED:return ua.UNAUTHENTICATED;case Al.INVALID_ARGUMENT:return ua.INVALID_ARGUMENT;case Al.NOT_FOUND:return ua.NOT_FOUND;case Al.ALREADY_EXISTS:return ua.ALREADY_EXISTS;case Al.PERMISSION_DENIED:return ua.PERMISSION_DENIED;case Al.FAILED_PRECONDITION:return ua.FAILED_PRECONDITION;case Al.ABORTED:return ua.ABORTED;case Al.OUT_OF_RANGE:return ua.OUT_OF_RANGE;case Al.UNIMPLEMENTED:return ua.UNIMPLEMENTED;case Al.DATA_LOSS:return ua.DATA_LOSS;default:return ca()}}(vl=Al||(Al={}))[vl.OK=0]="OK",vl[vl.CANCELLED=1]="CANCELLED",vl[vl.UNKNOWN=2]="UNKNOWN",vl[vl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vl[vl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vl[vl.NOT_FOUND=5]="NOT_FOUND",vl[vl.ALREADY_EXISTS=6]="ALREADY_EXISTS",vl[vl.PERMISSION_DENIED=7]="PERMISSION_DENIED",vl[vl.UNAUTHENTICATED=16]="UNAUTHENTICATED",vl[vl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vl[vl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vl[vl.ABORTED=10]="ABORTED",vl[vl.OUT_OF_RANGE=11]="OUT_OF_RANGE",vl[vl.UNIMPLEMENTED=12]="UNIMPLEMENTED",vl[vl.INTERNAL=13]="INTERNAL",vl[vl.UNAVAILABLE=14]="UNAVAILABLE",vl[vl.DATA_LOSS=15]="DATA_LOSS";class El{constructor(t,e){this.comparator=t,this.root=e||Il.EMPTY}insert(t,e){return new El(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Il.BLACK,null,null))}remove(t){return new El(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Il.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bl(this.root,t,this.comparator,!1)}getReverseIterator(){return new bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bl(this.root,t,this.comparator,!0)}}class bl{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Il{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Il.RED,this.left=null!=i?i:Il.EMPTY,this.right=null!=r?r:Il.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Il(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Il.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Il.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Il.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Il.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ca();if(this.right.isRed())throw ca();const t=this.left.check();if(t!==this.right.check())throw ca();return t+(this.isRed()?0:1)}}Il.EMPTY=null,Il.RED=!0,Il.BLACK=!1,Il.EMPTY=new class{constructor(){this.size=0}get key(){throw ca()}get value(){throw ca()}get color(){throw ca()}get left(){throw ca()}get right(){throw ca()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Il(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tl{constructor(t){this.comparator=t,this.data=new El(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Cl(this.data.getIterator())}getIteratorFrom(t){return new Cl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Tl))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Tl(this.comparator);return e.data=t,e}}class Cl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const _l=new El(qa.comparator);function Sl(){return _l}const kl=new El(qa.comparator);function xl(){return kl}const Nl=new El(qa.comparator);const Rl=new Tl(qa.comparator);function Dl(...t){let e=Rl;for(const n of t)e=e.add(n);return e}const Ll=new Tl(ba);function Ol(){return Ll}class Pl{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Bl.createSynthesizedTargetChangeForCurrentChange(t,e)),new Pl(Ca.min(),n,Ol(),Sl(),Dl())}}class Bl{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Bl(Oa.EMPTY_BYTE_STRING,e,Dl(),Dl(),Dl())}}class Ml{constructor(t,e,n,i){this.k=t,this.removedTargetIds=e,this.key=n,this.$=i}}class Ul{constructor(t,e){this.targetId=t,this.O=e}}class Vl{constructor(t,e,n=Oa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Fl{constructor(){this.F=0,this.M=Hl(),this.L=Oa.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=Dl(),e=Dl(),n=Dl();return this.M.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ca()}})),new Bl(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=Hl()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class jl{constructor(t){this.tt=t,this.et=new Map,this.nt=Sl(),this.st=zl(),this.it=new Tl(ba)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.ct(e,t.key,t.$);for(const e of t.removedTargetIds)this.ct(e,t.key,t.$)}at(t){this.forEachTarget(t,(e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:ca()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach(((t,n)=>{this.ht(n)&&e(n)}))}ft(t){const e=t.targetId,n=t.O.count,i=this.dt(e);if(i){const t=i.target;if(uc(t))if(0===n){const n=new qa(t.path);this.ct(e,n,oc.newNoDocument(n,Ca.min()))}else la(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach(((n,i)=>{const r=this.dt(i);if(r){if(n.current&&uc(r.target)){const e=new qa(r.target.path);null!==this.nt.get(e)||this.gt(i,e)||this.ct(i,e,oc.newNoDocument(e,t))}n.K&&(e.set(i,n.W()),n.G())}}));let n=Dl();this.st.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.dt(t);return!e||2===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))}));const i=new Pl(t,e,this.it,this.nt,n);return this.nt=Sl(),this.st=zl(),this.it=new Tl(ba),i}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}ct(t,e,n){if(!this.ht(t))return;const i=this.ut(t);this.gt(t,e)?i.H(e,1):i.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new Fl,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new Tl(ba),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||ra("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Tt(t)}lt(t){this.et.set(t,new Fl),this.tt.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function zl(){return new El(qa.comparator)}function Hl(){return new El(qa.comparator)}const ql={asc:"ASCENDING",desc:"DESCENDING"},Wl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Kl{constructor(t,e){this.databaseId=t,this.D=e}}function $l(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gl(t,e){return t.D?e.toBase64():e.toUint8Array()}function Ql(t,e){return $l(t,e.toTimestamp())}function Yl(t){return la(!!t),Ca.fromTimestamp(function(t){const e=Ba(t);return new Ta(e.seconds,e.nanos)}(t))}function Xl(t,e){return function(t){return new Na(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Jl(t){const e=Na.fromString(t);return la(Ah(e)),e}function Zl(t,e){return Xl(t.databaseId,e.path)}function th(t,e){const n=Jl(e);if(n.get(1)!==t.databaseId.projectId)throw new da(ua.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new da(ua.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qa(ih(n))}function eh(t,e){return Xl(t.databaseId,e)}function nh(t){return new Na(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ih(t){return la(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function rh(t,e,n){return{name:Zl(t,e),fields:n.value.mapValue.fields}}function sh(t,e){return{documents:[eh(t,e.path)]}}function oh(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=eh(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=eh(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(ec(t.value))return{unaryFilter:{field:fh(t.field),op:"IS_NAN"}};if(tc(t.value))return{unaryFilter:{field:fh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ec(t.value))return{unaryFilter:{field:fh(t.field),op:"IS_NOT_NAN"}};if(tc(t.value))return{unaryFilter:{field:fh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fh(t.field),op:dh(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:fh(t.field),direction:uh(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.D||za(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=lh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=lh(e.endAt)),n}function ah(t){let e=function(t){const e=Jl(t);return 4===e.length?Na.emptyPath():ih(e)}(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){la(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=ch(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Ic(ph(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,za(e)?null:e}(n.limit));let c=null;n.startAt&&(c=hh(n.startAt));let l=null;return n.endAt&&(l=hh(n.endAt)),function(t,e,n,i,r,s,o,a){return new Sc(t,e,n,i,r,s,o,a)}(e,r,o,s,a,"F",c,l)}function ch(t){return t?void 0!==t.unaryFilter?[gh(t)]:void 0!==t.fieldFilter?[mh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>ch(t))).reduce(((t,e)=>t.concat(e))):ca():[]}function lh(t){return{before:t.before,values:t.position}}function hh(t){const e=!!t.before,n=t.values||[];return new Ec(n,e)}function uh(t){return ql[t]}function dh(t){return Wl[t]}function fh(t){return{fieldPath:t.canonicalString()}}function ph(t){return Da.fromServerFormat(t.fieldPath)}function mh(t){return dc.create(ph(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ca()}}(t.fieldFilter.op),t.fieldFilter.value)}function gh(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ph(t.unaryFilter.field);return dc.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ph(t.unaryFilter.field);return dc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ph(t.unaryFilter.field);return dc.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ph(t.unaryFilter.field);return dc.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ca()}}function yh(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ah(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function vh(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Eh(e)),e=wh(t.get(n),e);return Eh(e)}function wh(t,e){let n=e;const i=t.length;for(let e=0;e<i;e++){const i=t.charAt(e);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Eh(t){return t+""}class bh{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}bh.store="owner",bh.key="owner";class Ih{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Ih.store="mutationQueues",Ih.keyPath="userId";class Th{constructor(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}}Th.store="mutations",Th.keyPath="batchId",Th.userMutationsIndex="userMutationsIndex",Th.userMutationsKeyPath=["userId","batchId"];class Ch{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,vh(e)]}static key(t,e,n){return[t,vh(e),n]}}Ch.store="documentMutations",Ch.PLACEHOLDER=new Ch;class _h{constructor(t,e,n,i,r,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=s}}_h.store="remoteDocuments",_h.readTimeIndex="readTimeIndex",_h.readTimeIndexPath="readTime",_h.collectionReadTimeIndex="collectionReadTimeIndex",_h.collectionReadTimeIndexPath=["parentPath","readTime"];class Sh{constructor(t){this.byteSize=t}}Sh.store="remoteDocumentGlobal",Sh.key="remoteDocumentGlobalKey";class kh{constructor(t,e,n,i,r,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=s,this.query=o}}kh.store="targets",kh.keyPath="targetId",kh.queryTargetsIndexName="queryTargetsIndex",kh.queryTargetsKeyPath=["canonicalId","targetId"];class xh{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}xh.store="targetDocuments",xh.keyPath=["targetId","path"],xh.documentTargetsIndex="documentTargetsIndex",xh.documentTargetsKeyPath=["path","targetId"];class Nh{constructor(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}Nh.key="targetGlobalKey",Nh.store="targetGlobal";class Rh{constructor(t,e){this.collectionId=t,this.parent=e}}Rh.store="collectionParents",Rh.keyPath=["collectionId","parent"];class Dh{constructor(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i}}Dh.store="clientMetadata",Dh.keyPath="clientId";class Lh{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Lh.store="bundles",Lh.keyPath="bundleId";class Oh{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Oh.store="namedQueries",Oh.keyPath="name",Ih.store,Th.store,Ch.store,_h.store,kh.store,bh.store,Nh.store,xh.store,Dh.store,Sh.store,Rh.store,Lh.store,Oh.store;class Ph{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ca(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ph(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ph?e:Ph.resolve(e)}catch(t){return Ph.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ph.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ph.reject(e)}static resolve(t){return new Ph(((e,n)=>{e(t)}))}static reject(t){return new Ph(((e,n)=>{n(t)}))}static waitFor(t){return new Ph(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Ph.resolve(!1);for(const n of t)e=e.next((t=>t?Ph.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}}function Bh(t){return"IndexedDbTransactionError"===t.name}class Mh{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&sl(i,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&ol(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&ol(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(Ca.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Dl())}isEqual(t){return this.batchId===t.batchId&&Ia(this.mutations,t.mutations,((t,e)=>cl(t,e)))&&Ia(this.baseMutations,t.baseMutations,((t,e)=>cl(t,e)))}}class Uh{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){la(t.mutations.length===n.length);let i=Nl;const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new Uh(t,e,n,i)}}class Vh{constructor(t,e,n,i,r=Ca.min(),s=Ca.min(),o=Oa.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new Vh(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Vh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Fh{constructor(t){this.Wt=t}}function jh(t){const e=ah({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?function(t,e,n){return new Sc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}(e,e.limit,"L"):e}class zh{constructor(){this.Gt=new Hh}addToCollectionParentIndex(t,e){return this.Gt.add(e),Ph.resolve()}getCollectionParents(t,e){return Ph.resolve(this.Gt.getEntries(e))}}class Hh{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Tl(Na.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Tl(Na.comparator)).toArray()}}class qh{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new qh(t,qh.DEFAULT_COLLECTION_PERCENTILE,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}qh.DEFAULT_COLLECTION_PERCENTILE=10,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qh.DEFAULT=new qh(41943040,qh.DEFAULT_COLLECTION_PERCENTILE,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qh.DISABLED=new qh(-1,0,0);class Wh{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new Wh(0)}static ie(){return new Wh(-1)}}async function Kh(t){if(t.code!==ua.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;ra("LocalStore","Unexpectedly lost primary lease")}class $h{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1}forEach(t){Sa(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return ka(this.inner)}}class Gh{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Rn(t,e,n)))}Rn(t,e,n){return this.He.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}Pn(t,e){return this.He.getEntries(t,e).next((e=>this.vn(t,e).next((()=>e))))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return qa.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new qa(e)).next((t=>{let e=xl();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Sn(t,e,n){const i=e.collectionGroup;let r=xl();return this.Ht.getCollectionParents(t,i).next((s=>Ph.forEach(s,(s=>{const o=function(t,e){return new Sc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.Dn(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}Dn(t,e,n){let i,r;return this.He.getDocumentsMatchingQuery(t,e,n).next((n=>(i=n,this.In.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(r=e,this.Cn(t,r,i).next((t=>{i=t;for(const t of r)for(const e of t.mutations){const n=e.key;let r=i.get(n);null==r&&(r=oc.newInvalidDocument(n),i=i.insert(n,r)),ol(e,r,t.localWriteTime),r.isFoundDocument()||(i=i.remove(n))}}))))).next((()=>(i.forEach(((t,n)=>{Bc(e,n)||(i=i.remove(t))})),i)))}Cn(t,e,n){let i=Dl();for(const t of e)for(const e of t.mutations)e instanceof ul&&null===n.get(e.key)&&(i=i.add(e.key));let r=n;return this.He.getEntries(t,i).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(r=r.insert(t,e))})),r)))}}class Qh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=i}static kn(t,e){let n=Dl(),i=Dl();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new Qh(t,e.fromCache,n,i)}}class Yh{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,i){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ca.min())?this.Fn(t,e):this.On.Pn(t,i).next((r=>{const s=this.Mn(e,r);return(xc(e)||Nc(e))&&this.Ln(e.limitType,s,i,n)?this.Fn(t,e):(ia()<=W.DEBUG&&ra("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Pc(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(s.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Mn(t,e){let n=new Tl(Mc(t));return e.forEach(((e,i)=>{Bc(t,i)&&(n=n.add(i))})),n}Ln(t,e,n,i){if(n.size!==e.size)return!0;const r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Fn(t,e){return ia()<=W.DEBUG&&ra("QueryEngine","Using full collection scan to execute query:",Pc(e)),this.On.getDocumentsMatchingQuery(t,e,Ca.min())}}class Xh{constructor(t,e,n,i){this.persistence=t,this.Bn=e,this.N=i,this.Un=new El(ba),this.qn=new $h((t=>lc(t)),hc),this.Kn=Ca.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Gh(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Un)))}}async function Jh(t,e){const n=ha(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.In.getAllMutationBatches(t).next((o=>(s=o,i=n.persistence.getMutationQueue(e),r=new Gh(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)))).next((e=>{const n=[],i=[];let o=Dl();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return r.Pn(t,o).next((t=>({Wn:t,removedBatchIds:n,addedBatchIds:i})))}))}));return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function Zh(t){const e=ha(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ze.getLastRemoteSnapshotVersion(t)))}function tu(t,e){const n=ha(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e))))}async function eu(t,e,n){const i=ha(t),r=i.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Bh(t))throw t;ra("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Un=i.Un.remove(e),i.qn.delete(r.target)}function nu(t,e,n){const i=ha(t);let r=Ca.min(),s=Dl();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=ha(t),r=i.qn.get(n);return void 0!==r?Ph.resolve(i.Un.get(r)):i.ze.getTargetData(e,n)}(i,t,Dc(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.Bn.getDocumentsMatchingQuery(t,e,n?r:Ca.min(),n?s:Dl()))).next((t=>({documents:t,Gn:s})))))}class iu{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return Ph.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:Yl(n.createTime)}),Ph.resolve()}getNamedQuery(t,e){return Ph.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:jh(t.bundledQuery),readTime:Yl(t.readTime)}}(e)),Ph.resolve()}}class ru{constructor(){this.Zn=new Tl(su.ts),this.es=new Tl(su.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new su(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new su(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}cs(t){const e=new qa(new Na([])),n=new su(e,t),i=new su(e,t+1),r=[];return this.es.forEachInRange([n,i],(t=>{this.rs(t),r.push(t.key)})),r}us(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new qa(new Na([])),n=new su(e,t),i=new su(e,t+1);let r=Dl();return this.es.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new su(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class su{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return qa.comparator(t.key,e.key)||ba(t.ls,e.ls)}static ns(t,e){return ba(t.ls,e.ls)||qa.comparator(t.key,e.key)}}class ou{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new Tl(su.ts)}checkEmpty(t){return Ph.resolve(0===this.In.length)}addMutationBatch(t,e,n,i){const r=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Mh(r,e,n,i);this.In.push(s);for(const e of i)this.ds=this.ds.add(new su(e.key,r)),this.Ht.addToCollectionParentIndex(t,e.key.path.popLast());return Ph.resolve(s)}lookupMutationBatch(t,e){return Ph.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this._s(n),r=i<0?0:i;return Ph.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Ph.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return Ph.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new su(e,0),i=new su(e,Number.POSITIVE_INFINITY),r=[];return this.ds.forEachInRange([n,i],(t=>{const e=this.ws(t.ls);r.push(e)})),Ph.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Tl(ba);return e.forEach((t=>{const e=new su(t,0),i=new su(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,i],(t=>{n=n.add(t.ls)}))})),Ph.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;qa.isDocumentKey(r)||(r=r.child(""));const s=new su(new qa(r),0);let o=new Tl(ba);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.ls)),!0)}),s),Ph.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this.ws(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){la(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return Ph.forEach(e.mutations,(i=>{const r=new su(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.ds=n}))}te(t){}containsKey(t,e){const n=new su(e,0),i=this.ds.firstAfterOrEqual(n);return Ph.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.In.length,Ph.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class au{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new El(qa.comparator),this.size=0}addEntry(t,e,n){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(i,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ph.resolve(n?n.document.clone():oc.newInvalidDocument(e))}getEntries(t,e){let n=Sl();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():oc.newInvalidDocument(t))})),Ph.resolve(n)}getDocumentsMatchingQuery(t,e,n){let i=Sl();const r=new qa(e.path.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:t,value:{document:r,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Bc(e,r)&&(i=i.insert(r.key,r.clone()))}return Ph.resolve(i)}Ts(t,e){return Ph.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new cu(this)}getSize(t){return Ph.resolve(this.size)}}class cu extends class{constructor(){this.changes=new $h((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Ca.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:oc.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ph.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.document.isValidDocument()?e.push(this.Se.addEntry(t,i.document,this.getReadTime(n))):this.Se.removeEntry(n)})),Ph.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class lu{constructor(t){this.persistence=t,this.Es=new $h((t=>lc(t)),hc),this.lastRemoteSnapshotVersion=Ca.min(),this.highestTargetId=0,this.Is=0,this.As=new ru,this.targetCount=0,this.Rs=Wh.se()}forEachTarget(t,e){return this.Es.forEach(((t,n)=>e(n))),Ph.resolve()}getLastRemoteSnapshotVersion(t){return Ph.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ph.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),Ph.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),Ph.resolve()}ce(t){this.Es.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new Wh(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Ph.resolve()}updateTargetData(t,e){return this.ce(e),Ph.resolve()}removeTargetData(t,e){return this.Es.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,Ph.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Es.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Es.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Ph.waitFor(r).next((()=>i))}getTargetCount(t){return Ph.resolve(this.targetCount)}getTargetData(t,e){const n=this.Es.get(e)||null;return Ph.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),Ph.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Ph.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),Ph.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return Ph.resolve(n)}containsKey(t,e){return Ph.resolve(this.As.containsKey(e))}}class hu{constructor(t,e){this.bs={},this.Le=new va(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new lu(this),this.Ht=new zh,this.He=function(t,e){return new au(t,e)}(this.Ht,(t=>this.referenceDelegate.Ps(t))),this.N=new Fh(e),this.Je=new iu(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new ou(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){ra("MemoryPersistence","Starting transaction:",t);const i=new uu(this.Le.next());return this.referenceDelegate.vs(),n(i).next((t=>this.referenceDelegate.Vs(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Ss(t,e){return Ph.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class uu extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}{constructor(t){super(),this.currentSequenceNumber=t}}class du{constructor(t){this.persistence=t,this.Ds=new ru,this.Cs=null}static Ns(t){return new du(t)}get xs(){if(this.Cs)return this.Cs;throw ca()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),Ph.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),Ph.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Ph.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ph.forEach(this.xs,(n=>{const i=qa.fromPath(n);return this.ks(t,i).next((t=>{t||e.removeEntry(i)}))})).next((()=>(this.Cs=null,e.apply(t))))}updateLimboDocument(t,e){return this.ks(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}Ps(t){return 0}ks(t,e){return Ph.or([()=>Ph.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}class fu{constructor(){this.activeTargetIds=Ol()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pu{constructor(){this.yi=new fu,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new fu,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class mu{Ti(t){}shutdown(){}}class gu{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){ra("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){ra("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Au{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class vu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,i){const r=this.Bi(t,e);ra("RestConnection","Sending: ",r,n);const s={};return this.Ui(s,i),this.qi(t,r,s,n).then((t=>(ra("RestConnection","Received: ",t),t)),(e=>{throw oa("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}Ki(t,e,n,i){return this.Li(t,e,n,i)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+ea,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=yu[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,i){return new Promise(((r,s)=>{const o=new Jo;o.listenOnce($o.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case Ko.NO_ERROR:const e=o.getResponseJson();ra("Connection","XHR received:",JSON.stringify(e)),r(e);break;case Ko.TIMEOUT:ra("Connection",'RPC "'+t+'" timed out'),s(new da(ua.DEADLINE_EXCEEDED,"Request time out"));break;case Ko.HTTP_ERROR:const n=o.getStatus();if(ra("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ua).indexOf(e)>=0?e:ua.UNKNOWN}(t.status);s(new da(e,t.message))}else s(new da(ua.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new da(ua.UNAVAILABLE,"Connection failed."));break;default:ca()}}finally{ra("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=qo(),r=Wo(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Yo({})),this.Ui(s.initMessageHeaders,e),C()||S()||T().indexOf("Electron/")>=0||k()||T().indexOf("MSAppHost/")>=0||_()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");ra("Connection","Creating WebChannel: "+o,s);const a=i.createWebChannel(o,s);let c=!1,l=!1;const h=new Au({vi:t=>{l?ra("Connection","Not sending because WebChannel is closed:",t):(c||(ra("Connection","Opening WebChannel transport."),a.open(),c=!0),ra("Connection","WebChannel sending:",t),a.send(t))},Vi:()=>a.close()}),u=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return u(a,Xo.EventType.OPEN,(()=>{l||ra("Connection","WebChannel transport opened.")})),u(a,Xo.EventType.CLOSE,(()=>{l||(l=!0,ra("Connection","WebChannel transport closed"),h.$i())})),u(a,Xo.EventType.ERROR,(t=>{l||(l=!0,oa("Connection","WebChannel transport errored:",t),h.$i(new da(ua.UNAVAILABLE,"The operation could not be completed")))})),u(a,Xo.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];la(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){ra("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=Al[t];if(void 0!==e)return wl(e)}(t),n=r.message;void 0===e&&(e=ua.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),l=!0,h.$i(new da(e,n)),a.close()}else ra("Connection","WebChannel received:",n),h.Oi(n)}})),u(r,Go.STAT_EVENT,(t=>{t.stat===Qo.PROXY?ra("Connection","Detected buffering proxy"):t.stat===Qo.NOPROXY&&ra("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.ki()}),0),h}}function wu(){return"undefined"!=typeof document?document:null}function Eu(t){return new Kl(t,!0)}class bu{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=i,this.Gi=r,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),i=Math.max(0,e-n);i>0&&ra("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,(()=>(this.Ji=Date.now(),t()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Iu{constructor(t,e,n,i,r,s,o){this.Oe=t,this.er=n,this.nr=i,this.sr=r,this.credentialsProvider=s,this.listener=o,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new bu(t,e)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this._r())))}mr(t){this.gr(),this.stream.send(t)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,e){this.gr(),this.yr(),this.ar.cancel(),this.ir++,4!==t?this.ar.reset():e&&e.code===ua.RESOURCE_EXHAUSTED?(sa(e.toString()),sa("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):e&&e.code===ua.UNAUTHENTICATED&&3!==this.state&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.pr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}pr(){}auth(){this.state=1;const t=this.Tr(this.ir),e=this.ir;this.credentialsProvider.getToken().then((t=>{this.ir===e&&this.Er(t)}),(e=>{t((()=>{const t=new da(ua.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ir(t)}))}))}Er(t){const e=this.Tr(this.ir);this.stream=this.Ar(t),this.stream.Si((()=>{e((()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,(()=>(this.hr()&&(this.state=3),Promise.resolve()))),this.listener.Si())))})),this.stream.Ci((t=>{e((()=>this.Ir(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}lr(){this.state=5,this.ar.Xi((async()=>{this.state=0,this.start()}))}Ir(t){return ra("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Tr(t){return e=>{this.Oe.enqueueAndForget((()=>this.ir===t?e():(ra("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tu extends Iu{constructor(t,e,n,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r),this.N=i}Ar(t){return this.sr.ji("Listen",t)}onMessage(t){this.ar.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ca()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.D?(la(void 0===e||"string"==typeof e),Oa.fromBase64String(e||"")):(la(void 0===e||e instanceof Uint8Array),Oa.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ua.UNKNOWN:wl(t.code);return new da(e,t.message||"")}(o);n=new Vl(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=th(t,i.document.name),s=Yl(i.document.updateTime),o=new rc({mapValue:{fields:i.document.fields}}),a=oc.newFoundDocument(r,s,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new Ml(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=th(t,i.document),s=i.readTime?Yl(i.readTime):Ca.min(),o=oc.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ml([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=th(t,i.document),s=i.removedTargetIds||[];n=new Ml([],s,r,null)}else{if(!("filter"in e))return ca();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,r=new yl(i),s=t.targetId;n=new Ul(s,r)}}return n}(this.N,t),n=function(t){if(!("targetChange"in t))return Ca.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Ca.min():e.readTime?Yl(e.readTime):Ca.min()}(t);return this.listener.Rr(e,n)}br(t){const e={};e.database=nh(this.N),e.addTarget=function(t,e){let n;const i=e.target;return n=uc(i)?{documents:sh(t,i)}:{query:oh(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Gl(t,e.resumeToken):e.snapshotVersion.compareTo(Ca.min())>0&&(n.readTime=$l(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ca()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,t);n&&(e.labels=n),this.mr(e)}Pr(t){const e={};e.database=nh(this.N),e.removeTarget=t,this.mr(e)}}class Cu extends Iu{constructor(t,e,n,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r),this.N=i,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(t){return this.sr.ji("Write",t)}onMessage(t){if(la(!!t.streamToken),this.lastStreamToken=t.streamToken,this.vr){this.ar.reset();const e=function(t,e){return t&&t.length>0?(la(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Yl(t.updateTime):Yl(e);return n.isEqual(Ca.min())&&(n=Yl(e)),new el(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Yl(t.commitTime);return this.listener.Dr(n,e)}return la(!t.writeResults||0===t.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const t={};t.database=nh(this.N),this.mr(t)}Sr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof hl)n={update:rh(t,e.key,e.value)};else if(e instanceof ml)n={delete:Zl(t,e.key)};else if(e instanceof ul)n={update:rh(t,e.key,e.data),updateMask:yh(e.fieldMask)};else{if(!(e instanceof gl))return ca();n={verify:Zl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Kc)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $c)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xc)return{fieldPath:e.field.canonicalString(),increment:n.C};throw ca()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ql(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ca()}(t,e.precondition)),n}(this.N,t)))};this.mr(e)}}class _u extends class{}{constructor(t,e,n){super(),this.credentials=t,this.sr=e,this.N=n,this.kr=!1}$r(){if(this.kr)throw new da(ua.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.$r(),this.credentials.getToken().then((i=>this.sr.Li(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ua.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new da(ua.UNKNOWN,t.toString())}))}Ki(t,e,n){return this.$r(),this.credentials.getToken().then((i=>this.sr.Ki(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ua.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new da(ua.UNKNOWN,t.toString())}))}terminate(){this.kr=!0}}class Su{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve()))))}qr(t){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Br("Offline")))}set(t){this.Kr(),this.Or=0,"Online"===t&&(this.Mr=!1),this.Br(t)}Br(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Ur(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(sa(e),this.Mr=!1):ra("OnlineStateTracker",e)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class ku{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=r,this.zr.Ti((t=>{n.enqueueAndForget((async()=>{Mu(this)&&(ra("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=ha(t);e.Wr.add(4),await Nu(e),e.Hr.set("Unknown"),e.Wr.delete(4),await xu(e)}(this))}))})),this.Hr=new Su(n,i)}}async function xu(t){if(Mu(t))for(const e of t.Gr)await e(!0)}async function Nu(t){for(const e of t.Gr)await e(!1)}function Ru(t,e){const n=ha(t);n.Qr.has(e.targetId)||(n.Qr.set(e.targetId,e),Bu(n)?Pu(n):Zu(n).hr()&&Lu(n,e))}function Du(t,e){const n=ha(t),i=Zu(n);n.Qr.delete(e),i.hr()&&Ou(n,e),0===n.Qr.size&&(i.hr()?i.wr():Mu(n)&&n.Hr.set("Unknown"))}function Lu(t,e){t.Jr.Y(e.targetId),Zu(t).br(e)}function Ou(t,e){t.Jr.Y(e),Zu(t).Pr(e)}function Pu(t){t.Jr=new jl({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.Qr.get(e)||null}),Zu(t).start(),t.Hr.Lr()}function Bu(t){return Mu(t)&&!Zu(t).ur()&&t.Qr.size>0}function Mu(t){return 0===ha(t).Wr.size}function Uu(t){t.Jr=void 0}async function Vu(t){t.Qr.forEach(((e,n)=>{Lu(t,e)}))}async function Fu(t,e){Uu(t),Bu(t)?(t.Hr.qr(e),Pu(t)):t.Hr.set("Unknown")}async function ju(t,e,n){if(t.Hr.set("Online"),e instanceof Vl&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Qr.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Qr.delete(i),t.Jr.removeTarget(i))}(t,e)}catch(n){ra("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zu(t,n)}else if(e instanceof Ml?t.Jr.rt(e):e instanceof Ul?t.Jr.ft(e):t.Jr.at(e),!n.isEqual(Ca.min()))try{const e=await Zh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Jr._t(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Qr.get(i);r&&t.Qr.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.Qr.get(e);if(!n)return;t.Qr.set(e,n.withResumeToken(Oa.EMPTY_BYTE_STRING,n.snapshotVersion)),Ou(t,e);const i=new Vh(n.target,e,1,n.sequenceNumber);Lu(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){ra("RemoteStore","Failed to raise snapshot:",e),await zu(t,e)}}async function zu(t,e,n){if(!Bh(e))throw e;t.Wr.add(1),await Nu(t),t.Hr.set("Offline"),n||(n=()=>Zh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ra("RemoteStore","Retrying IndexedDB access"),await n(),t.Wr.delete(1),await xu(t)}))}function Hu(t,e){return e().catch((n=>zu(t,n,e)))}async function qu(t){const e=ha(t),n=td(e);let i=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;Wu(e);)try{const t=await tu(e.localStore,i);if(null===t){0===e.jr.length&&n.wr();break}i=t.batchId,Ku(e,t)}catch(t){await zu(e,t)}$u(e)&&Gu(e)}function Wu(t){return Mu(t)&&t.jr.length<10}function Ku(t,e){t.jr.push(e);const n=td(t);n.hr()&&n.Vr&&n.Sr(e.mutations)}function $u(t){return Mu(t)&&!td(t).ur()&&t.jr.length>0}function Gu(t){td(t).start()}async function Qu(t){td(t).Nr()}async function Yu(t){const e=td(t);for(const n of t.jr)e.Sr(n.mutations)}async function Xu(t,e,n){const i=t.jr.shift(),r=Uh.from(i,e,n);await Hu(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await qu(t)}async function Ju(t,e){e&&td(t).Vr&&await async function(t,e){if(function(t){switch(t){default:return ca();case ua.CANCELLED:case ua.UNKNOWN:case ua.DEADLINE_EXCEEDED:case ua.RESOURCE_EXHAUSTED:case ua.INTERNAL:case ua.UNAVAILABLE:case ua.UNAUTHENTICATED:return!1;case ua.INVALID_ARGUMENT:case ua.NOT_FOUND:case ua.ALREADY_EXISTS:case ua.PERMISSION_DENIED:case ua.FAILED_PRECONDITION:case ua.ABORTED:case ua.OUT_OF_RANGE:case ua.UNIMPLEMENTED:case ua.DATA_LOSS:return!0}}(n=e.code)&&n!==ua.ABORTED){const n=t.jr.shift();td(t).dr(),await Hu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await qu(t)}var n}(t,e),$u(t)&&Gu(t)}function Zu(t){return t.Yr||(t.Yr=function(t,e,n){const i=ha(t);return i.$r(),new Tu(e,i.sr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:Vu.bind(null,t),Ci:Fu.bind(null,t),Rr:ju.bind(null,t)}),t.Gr.push((async e=>{e?(t.Yr.dr(),Bu(t)?Pu(t):t.Hr.set("Unknown")):(await t.Yr.stop(),Uu(t))}))),t.Yr}function td(t){return t.Xr||(t.Xr=function(t,e,n){const i=ha(t);return i.$r(),new Cu(e,i.sr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:Qu.bind(null,t),Ci:Ju.bind(null,t),Cr:Yu.bind(null,t),Dr:Xu.bind(null,t)}),t.Gr.push((async e=>{e?(t.Xr.dr(),await qu(t)):(await t.Xr.stop(),t.jr.length>0&&(ra("RemoteStore",`Stopping write stream with ${t.jr.length} pending writes`),t.jr=[]))}))),t.Xr}class ed{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new ed(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new da(ua.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nd(t,e){if(sa("AsyncQueue",`${e}: ${t}`),Bh(t))return new da(ua.UNAVAILABLE,`${e}: ${t}`);throw t}class id{constructor(t){this.comparator=t?(e,n)=>t(e,n)||qa.comparator(e.key,n.key):(t,e)=>qa.comparator(t.key,e.key),this.keyedMap=xl(),this.sortedSet=new El(this.comparator)}static emptySet(t){return new id(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof id))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new id;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class rd{constructor(){this.Zr=new El(qa.comparator)}track(t){const e=t.doc.key,n=this.Zr.get(e);n?0!==t.type&&3===n.type?this.Zr=this.Zr.insert(e,t):3===t.type&&1!==n.type?this.Zr=this.Zr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Zr=this.Zr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Zr=this.Zr.remove(e):1===t.type&&2===n.type?this.Zr=this.Zr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Zr=this.Zr.insert(e,{type:2,doc:t.doc}):ca():this.Zr=this.Zr.insert(e,t)}eo(){const t=[];return this.Zr.inorderTraversal(((e,n)=>{t.push(n)})),t}}class sd{constructor(t,e,n,i,r,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,i){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new sd(t,e,id.emptySet(e),r,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Lc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class od{constructor(){this.no=void 0,this.listeners=[]}}class ad{constructor(){this.queries=new $h((t=>Oc(t)),Lc),this.onlineState="Unknown",this.so=new Set}}function cd(t,e){const n=ha(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.listeners)e.ro(t)&&(i=!0);r.no=t}}i&&hd(n)}function ld(t,e,n){const i=ha(t),r=i.queries.get(e);if(r)for(const t of r.listeners)t.onError(n);i.queries.delete(e)}function hd(t){t.so.forEach((t=>{t.next()}))}class ud{constructor(t,e,n){this.query=t,this.oo=e,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=n||{}}ro(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new sd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.uo(t)&&(this.oo.next(t),e=!0):this.ho(t,this.onlineState)&&(this.lo(t),e=!0),this.ao=t,e}onError(t){this.oo.error(t)}io(t){this.onlineState=t;let e=!1;return this.ao&&!this.co&&this.ho(this.ao,t)&&(this.lo(this.ao),e=!0),e}ho(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.fo&&n||t.docs.isEmpty()&&"Offline"!==e)}uo(t){if(t.docChanges.length>0)return!0;const e=this.ao&&this.ao.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}lo(t){t=sd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.oo.next(t)}}class dd{constructor(t){this.key=t}}class fd{constructor(t){this.key=t}}class pd{constructor(t,e){this.query=t,this.po=e,this.To=null,this.current=!1,this.Eo=Dl(),this.mutatedKeys=Dl(),this.Io=Mc(t),this.Ao=new id(this.Io)}get Ro(){return this.po}bo(t,e){const n=e?e.Po:new rd,i=e?e.Ao:this.Ao;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a=xc(this.query)&&i.size===this.query.limit?i.last():null,c=Nc(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),h=Bc(this.query,e)?e:null,u=!!l&&this.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;l&&h?l.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),f=!0):this.vo(l,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.Io(h,a)>0||c&&this.Io(h,c)<0)&&(o=!0)):!l&&h?(n.track({type:0,doc:h}),f=!0):l&&!h&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),xc(this.query)||Nc(this.query))for(;s.size>this.query.limit;){const t=xc(this.query)?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Ao:s,Po:n,Ln:o,mutatedKeys:r}}vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Ao;this.Ao=t.Ao,this.mutatedKeys=t.mutatedKeys;const r=t.Po.eo();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ca()}};return n(t)-n(e)}(t.type,e.type)||this.Io(t.doc,e.doc))),this.Vo(n);const s=e?this.So():[],o=0===this.Eo.size&&this.current?1:0,a=o!==this.To;return this.To=o,0!==r.length||a?{snapshot:new sd(this.query,t.Ao,i,r,t.mutatedKeys,0===o,a,!1),Do:s}:{Do:s}}io(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new rd,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(t){return!this.po.has(t)&&!!this.Ao.has(t)&&!this.Ao.get(t).hasLocalMutations}Vo(t){t&&(t.addedDocuments.forEach((t=>this.po=this.po.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.po=this.po.delete(t))),this.current=t.current)}So(){if(!this.current)return[];const t=this.Eo;this.Eo=Dl(),this.Ao.forEach((t=>{this.Co(t.key)&&(this.Eo=this.Eo.add(t.key))}));const e=[];return t.forEach((t=>{this.Eo.has(t)||e.push(new fd(t))})),this.Eo.forEach((n=>{t.has(n)||e.push(new dd(n))})),e}No(t){this.po=t.Gn,this.Eo=Dl();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return sd.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class md{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class gd{constructor(t){this.key=t,this.ko=!1}}class yd{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.$o={},this.Oo=new $h((t=>Oc(t)),Lc),this.Fo=new Map,this.Mo=new Set,this.Lo=new El(qa.comparator),this.Bo=new Map,this.Uo=new ru,this.qo={},this.Ko=new Map,this.jo=Wh.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}async function Ad(t,e){const n=function(t){const e=ha(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Od.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bd.bind(null,e),e.$o.Rr=cd.bind(null,e.eventManager),e.$o.Go=ld.bind(null,e.eventManager),e}(t);let i,r;const s=n.Oo.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.xo();else{const t=await function(t,e){const n=ha(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.ze.getTargetData(t,e).next((r=>r?(i=r,Ph.resolve(i)):n.ze.allocateTargetId(t).next((r=>(i=new Vh(e,r,0,t.currentSequenceNumber),n.ze.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Un.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}(n.localStore,Dc(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await async function(t,e,n,i){t.Wo=(e,n,i)=>async function(t,e,n,i){let r=e.view.bo(n);r.Ln&&(r=await nu(t.localStore,e.query,!1).then((({documents:t})=>e.view.bo(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return xd(t,e.targetId,o.Do),o.snapshot}(t,e,n,i);const r=await nu(t.localStore,e,!0),s=new pd(e,r.Gn),o=s.bo(r.documents),a=Bl.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);xd(t,n,c.Do);const l=new md(e,n,s);return t.Oo.set(e,l),t.Fo.has(n)?t.Fo.get(n).push(e):t.Fo.set(n,[e]),c.snapshot}(n,e,i,"current"===s),n.isPrimaryClient&&Ru(n.remoteStore,t)}return r}async function vd(t,e){const n=ha(t),i=n.Oo.get(e),r=n.Fo.get(i.targetId);if(r.length>1)return n.Fo.set(i.targetId,r.filter((t=>!Lc(t,e)))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await eu(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Du(n.remoteStore,i.targetId),Sd(n,i.targetId)})).catch(Kh)):(Sd(n,i.targetId),await eu(n.localStore,i.targetId,!0))}async function wd(t,e){const n=ha(t);try{const t=await function(t,e){const n=ha(t),i=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const o=[];e.targetChanges.forEach(((e,s)=>{const a=r.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.ze.addMatchingKeys(t,e.addedDocuments,s))));const c=e.resumeToken;if(c.approximateByteSize()>0){const l=a.withResumeToken(c,i).withSequenceNumber(t.currentSequenceNumber);r=r.insert(s,l),function(t,e,n){return la(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,e)&&o.push(n.ze.updateTargetData(t,l))}}));let a=Sl();if(e.documentUpdates.forEach(((i,r)=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(function(t,e,n,i,r){let s=Dl();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=Sl();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==r?void 0:r.get(n))||i;o.isNoDocument()&&o.version.isEqual(Ca.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):ra("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}(t,s,e.documentUpdates,i,void 0).next((t=>{a=t}))),!i.isEqual(Ca.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next((e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Ph.waitFor(o).next((()=>s.apply(t))).next((()=>n.Qn.vn(t,a))).next((()=>a))})).then((t=>(n.Un=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Bo.get(e);i&&(la(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ko=!0:t.modifiedDocuments.size>0?la(i.ko):t.removedDocuments.size>0&&(la(i.ko),i.ko=!1))})),await Dd(n,t,e)}catch(t){await Kh(t)}}function Ed(t,e,n){const i=ha(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Oo.forEach(((n,i)=>{const r=i.view.io(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=ha(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.io(e)&&(i=!0)})),i&&hd(n)}(i.eventManager,e),t.length&&i.$o.Rr(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bd(t,e,n){const i=ha(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Bo.get(e),s=r&&r.key;if(s){let t=new El(qa.comparator);t=t.insert(s,oc.newNoDocument(s,Ca.min()));const n=Dl().add(s),r=new Pl(Ca.min(),new Map,new Tl(ba),t,n);await wd(i,r),i.Lo=i.Lo.remove(s),i.Bo.delete(e),Rd(i)}else await eu(i.localStore,e,!1).then((()=>Sd(i,e,n))).catch(Kh)}async function Id(t,e){const n=ha(t),i=e.batch.batchId;try{const t=await function(t,e){const n=ha(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Ph.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);la(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&i.addEntry(e,n.commitVersion))}))})),o.next((()=>t.In.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(n.localStore,e);_d(n,i,null),Cd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Dd(n,t)}catch(t){await Kh(t)}}async function Td(t,e,n){const i=ha(t);try{const t=await function(t,e){const n=ha(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.In.lookupMutationBatch(t,e).next((e=>(la(null!==e),i=e.keys(),n.In.removeMutationBatch(t,e)))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(i.localStore,e);_d(i,e,n),Cd(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Dd(i,t)}catch(n){await Kh(n)}}function Cd(t,e){(t.Ko.get(e)||[]).forEach((t=>{t.resolve()})),t.Ko.delete(e)}function _d(t,e,n){const i=ha(t);let r=i.qo[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.qo[i.currentUser.toKey()]=r}}function Sd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Fo.get(e))t.Oo.delete(i),n&&t.$o.Go(i,n);t.Fo.delete(e),t.isPrimaryClient&&t.Uo.cs(e).forEach((e=>{t.Uo.containsKey(e)||kd(t,e)}))}function kd(t,e){t.Mo.delete(e.path.canonicalString());const n=t.Lo.get(e);null!==n&&(Du(t.remoteStore,n),t.Lo=t.Lo.remove(e),t.Bo.delete(n),Rd(t))}function xd(t,e,n){for(const i of n)i instanceof dd?(t.Uo.addReference(i.key,e),Nd(t,i)):i instanceof fd?(ra("SyncEngine","Document no longer in limbo: "+i.key),t.Uo.removeReference(i.key,e),t.Uo.containsKey(i.key)||kd(t,i.key)):ca()}function Nd(t,e){const n=e.key,i=n.path.canonicalString();t.Lo.get(n)||t.Mo.has(i)||(ra("SyncEngine","New document in limbo: "+n),t.Mo.add(i),Rd(t))}function Rd(t){for(;t.Mo.size>0&&t.Lo.size<t.maxConcurrentLimboResolutions;){const e=t.Mo.values().next().value;t.Mo.delete(e);const n=new qa(Na.fromString(e)),i=t.jo.next();t.Bo.set(i,new gd(n)),t.Lo=t.Lo.insert(n,i),Ru(t.remoteStore,new Vh(Dc(kc(n.path)),i,2,va.T))}}async function Dd(t,e,n){const i=ha(t),r=[],s=[],o=[];i.Oo.isEmpty()||(i.Oo.forEach(((t,a)=>{o.push(i.Wo(a,e,n).then((t=>{if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),r.push(t);const e=Qh.kn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.$o.Rr(r),await async function(t,e){const n=ha(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ph.forEach(e,(e=>Ph.forEach(e.Nn,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Ph.forEach(e.xn,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Bh(t))throw t;ra("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Un.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Un=n.Un.insert(e,r)}}}(i.localStore,s))}async function Ld(t,e){const n=ha(t);if(!n.currentUser.isEqual(e)){ra("SyncEngine","User change. New user:",e.toKey());const t=await Jh(n.localStore,e);n.currentUser=e,function(t,e){t.Ko.forEach((t=>{t.forEach((t=>{t.reject(new da(ua.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ko.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Dd(n,t.Wn)}}function Od(t,e){const n=ha(t),i=n.Bo.get(e);if(i&&i.ko)return Dl().add(i.key);{let t=Dl();const i=n.Fo.get(e);if(!i)return t;for(const e of i){const i=n.Oo.get(e);t=t.unionWith(i.view.Ro)}return t}}function Pd(t){const e=ha(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Id.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Td.bind(null,e),e}class Bd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=Eu(t.databaseInfo.databaseId),this.sharedClientState=this.Ho(t),this.persistence=this.Jo(t),await this.persistence.start(),this.gcScheduler=this.Yo(t),this.localStore=this.Xo(t)}Yo(t){return null}Xo(t){return function(t,e,n,i){return new Xh(t,e,n,i)}(this.persistence,new Yh,t.initialUser,this.N)}Jo(t){return new hu(du.Ns,this.N)}Ho(t){return new pu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Md{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Ed(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ld.bind(null,this.syncEngine),await async function(t,e){const n=ha(t);e?(n.Wr.delete(2),await xu(n)):e||(n.Wr.add(2),await Nu(n),n.Hr.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new ad}createDatastore(t){const e=Eu(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new vu(i));var i;return function(t,e,n){return new _u(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>Ed(this.syncEngine,t,0),s=gu.bt()?new gu:new mu,new ku(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new yd(t,e,n,i,r,s);return o&&(a.Qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=ha(t);ra("RemoteStore","RemoteStore shutting down."),e.Wr.add(5),await Nu(e),e.zr.shutdown(),e.Hr.set("Unknown")}(this.remoteStore)}}class Ud{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.tc(this.observer.next,t)}error(t){this.observer.error?this.tc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}ec(){this.muted=!0}tc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class Vd{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=ta.UNAUTHENTICATED,this.clientId=Ea.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,(async t=>{ra("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new da(ua.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=nd(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Fd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){return t.offlineComponents||(ra("FirestoreClient","Using default OfflineComponentProvider"),await async function(t,e){t.asyncQueue.verifyOperationInProgress(),ra("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Jh(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}(t,new Bd)),t.offlineComponents}(t);ra("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>async function(t,e){const n=ha(t);n.asyncQueue.verifyOperationInProgress(),ra("RemoteStore","RemoteStore received new credentials");const i=Mu(n);n.Wr.add(3),await Nu(n),i&&n.Hr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Wr.delete(3),await xu(n)}(e.remoteStore,t))),t.onlineComponents=e}async function jd(t){return t.onlineComponents||(ra("FirestoreClient","Using default OnlineComponentProvider"),await Fd(t,new Md)),t.onlineComponents}async function zd(t){const e=await jd(t),n=e.eventManager;return n.onListen=Ad.bind(null,e.syncEngine),n.onUnlisten=vd.bind(null,e.syncEngine),n}function Hd(t,e,n={}){const i=new fa;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new Ud({next:s=>{e.enqueueAndForget((()=>async function(t,e){const n=ha(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new da(ua.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new da(ua.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new ud(kc(n.path),s,{includeMetadataChanges:!0,fo:!0});return async function(t,e){const n=ha(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new od),r)try{s.no=await n.onListen(i)}catch(t){const n=nd(t,`Initialization of query '${Pc(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.io(n.onlineState),s.no&&e.ro(s.no)&&hd(n)}(t,o)}(await zd(t),t.asyncQueue,e,n,i))),i.promise}class qd{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Wd{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Wd&&t.projectId===this.projectId&&t.database===this.database}}const Kd=new Map;function $d(t,e,n){if(!n)throw new da(ua.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Gd(t){if(!qa.isDocumentKey(t))throw new da(ua.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ca()}function Yd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new da(ua.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qd(t);throw new da(ua.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Xd{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new da(ua.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new da(ua.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,i){if(!0===e&&!0===i)throw new da(ua.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jd{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xd({}),this._settingsFrozen=!1,t instanceof Wd?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new da(ua.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wd(t.options.projectId)}(t))}get app(){if(!this._app)throw new da(ua.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new da(ua.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ma;switch(t.type){case"gapi":const e=t.client;return la(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Aa(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new da(ua.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Kd.get(t);e&&(ra("ComponentProvider","Removing Datastore"),Kd.delete(t),e.terminate())}(this),Promise.resolve()}}class Zd{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ef(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zd(this.firestore,t,this._key)}}class tf{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new tf(this.firestore,t,this._query)}}class ef extends tf{constructor(t,e,n){super(t,e,kc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zd(this.firestore,null,new qa(t))}withConverter(t){return new ef(this.firestore,t,this._path)}}function nf(t,e,...n){if(t=V(t),1===arguments.length&&(e=Ea.I()),$d("doc","path",e),t instanceof Jd){const i=Na.fromString(e,...n);return Gd(i),new Zd(t,null,new qa(i))}{if(!(t instanceof Zd||t instanceof ef))throw new da(ua.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Na.fromString(e,...n));return Gd(i),new Zd(t.firestore,t instanceof ef?t.converter:null,new qa(i))}}class rf{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new bu(this,"async_queue_retry"),this.Rc=()=>{const t=wu();t&&ra("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const t=wu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.bc(),this.Pc(t)}enterRestrictedMode(t){if(!this.gc){this.gc=!0,this.Ic=t||!1;const e=wu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Rc)}}enqueue(t){if(this.bc(),this.gc)return new Promise((()=>{}));const e=new fa;return this.Pc((()=>this.gc&&this.Ic?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.mc.push(t),this.vc())))}async vc(){if(0!==this.mc.length){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(t){if(!Bh(t))throw t;ra("AsyncQueue","Operation failed with retryable error: "+t)}this.mc.length>0&&this.ar.Xi((()=>this.vc()))}}Pc(t){const e=this._c.then((()=>(this.Ec=!0,t().catch((t=>{this.Tc=t,this.Ec=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw sa("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ec=!1,t))))));return this._c=e,e}enqueueAfterDelay(t,e,n){this.bc(),this.Ac.indexOf(t)>-1&&(e=0);const i=ed.createAndSchedule(this,t,e,n,(t=>this.Vc(t)));return this.yc.push(i),i}bc(){this.Tc&&ca()}verifyOperationInProgress(){}async Sc(){let t;do{t=this._c,await t}while(t!==this._c)}Dc(t){for(const e of this.yc)if(e.timerId===t)return!0;return!1}Cc(t){return this.Sc().then((()=>{this.yc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.yc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sc()}))}Nc(t){this.Ac.push(t)}Vc(t){const e=this.yc.indexOf(t);this.yc.splice(e,1)}}class sf extends Jd{constructor(t,e){super(t,e),this.type="firestore",this._queue=new rf,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cf(this),this._firestoreClient.terminate()}}function of(t=ut()){return at(t,"firestore").getImmediate()}function af(t){return t._firestoreClient||cf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cf(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new qd(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Vd(t._credentials,t._queue,i)}class lf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new da(ua.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Da(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class hf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hf(Oa.fromBase64String(t))}catch(t){throw new da(ua.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new hf(Oa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class uf{constructor(t){this._methodName=t}}class df{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new da(ua.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new da(ua.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ba(this._lat,t._lat)||ba(this._long,t._long)}}const ff=/^__.*__$/;class pf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new ul(t,this.data,this.fieldMask,e,this.fieldTransforms):new hl(t,this.data,e,this.fieldTransforms)}}class mf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new ul(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function gf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ca()}}class yf{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=i,void 0===r&&this.xc(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(t){return new yf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.$c({path:n,Fc:!1});return i.Mc(t),i}Lc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.$c({path:n,Fc:!1});return i.xc(),i}Bc(t){return this.$c({path:void 0,Fc:!0})}Uc(t){return Rf(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}xc(){if(this.path)for(let t=0;t<this.path.length;t++)this.Mc(this.path.get(t))}Mc(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(gf(this.kc)&&ff.test(t))throw this.Uc('Document fields cannot begin and end with "__"')}}class Af{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Eu(t)}jc(t,e,n,i=!1){return new yf({kc:t,methodName:e,Kc:n,path:Da.emptyPath(),Fc:!1,qc:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function vf(t){const e=t._freezeSettings(),n=Eu(t._databaseId);return new Af(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wf(t,e,n,i,r,s={}){const o=t.jc(s.merge||s.mergeFields?2:0,e,n,r);Sf("Data must be an object, but it was:",o,i);const a=Cf(i,o);let c,l;if(s.merge)c=new La(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=kf(e,i,n);if(!o.contains(r))throw new da(ua.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Df(t,r)||t.push(r)}c=new La(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new pf(new rc(a),c,l)}class Ef extends uf{_toFieldTransform(t){if(2!==t.kc)throw 1===t.kc?t.Uc(`${this._methodName}() can only appear at the top level of your update data`):t.Uc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ef}}class bf extends uf{_toFieldTransform(t){return new tl(t.path,new Kc)}isEqual(t){return t instanceof bf}}class If extends uf{constructor(t,e){super(t),this.Wc=e}_toFieldTransform(t){const e=new Xc(t.N,jc(t.N,this.Wc));return new tl(t.path,e)}isEqual(t){return this===t}}function Tf(t,e){if(_f(t=V(t)))return Sf("Unsupported field value:",e,t),Cf(t,e);if(t instanceof uf)return function(t,e){if(!gf(e.kc))throw e.Uc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Uc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Tf(r,e.Bc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=V(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jc(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Ta.fromDate(t);return{timestampValue:$l(e.N,n)}}if(t instanceof Ta){const n=new Ta(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$l(e.N,n)}}if(t instanceof df)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hf)return{bytesValue:Gl(e.N,t._byteString)};if(t instanceof Zd){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Uc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Xl(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc(`Unsupported field value: ${Qd(t)}`)}(t,e)}function Cf(t,e){const n={};return ka(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(t,((t,i)=>{const r=Tf(i,e.Oc(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function _f(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ta||t instanceof df||t instanceof hf||t instanceof Zd||t instanceof uf)}function Sf(t,e,n){if(!_f(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Qd(n);throw"an object"===i?e.Uc(t+" a custom object"):e.Uc(t+" "+i)}}function kf(t,e,n){if((e=V(e))instanceof lf)return e._internalPath;if("string"==typeof e)return Nf(t,e);throw Rf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const xf=new RegExp("[~\\*/\\[\\]]");function Nf(t,e,n){if(e.search(xf)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lf(...e.split("."))._internalPath}catch(i){throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rf(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new da(ua.INVALID_ARGUMENT,a+t+c)}function Df(t,e){return t.some((t=>t.isEqual(e)))}class Lf{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Zd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Pf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Of extends Lf{data(){return super.data()}}function Pf(t,e){return"string"==typeof e?Nf(t,e):e instanceof lf?e._internalPath:e._delegate._internalPath}class Bf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mf extends Lf{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Uf extends Mf{data(t={}){return super.data(t)}}function Vf(t){t=Yd(t,Zd);const e=Yd(t.firestore,sf);return Hd(af(e),t._key).then((n=>function(t,e,n){const i=n.docs.get(e._key),r=new Ff(t);return new Mf(t,r,e._key,i,new Bf(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}class Ff extends class{convertValue(t,e="none"){switch(Wa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ma(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ua(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ca()}}convertObject(t,e){const n={};return Sa(t.fields,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new df(Ma(t.latitude),Ma(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Fa(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ja(t));default:return null}}convertTimestamp(t){const e=Ba(t);return new Ta(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Na.fromString(t);la(Ah(n));const i=new Wd(n.get(1),n.get(3)),r=new qa(n.popFirst(5));return i.isEqual(e)||sa(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new hf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Zd(this.firestore,null,e)}}function jf(t,e,n,...i){t=Yd(t,Zd);const r=Yd(t.firestore,sf),s=vf(r);let o;return o="string"==typeof(e=V(e))||e instanceof lf?function(t,e,n,i,r,s){const o=t.jc(1,e,n),a=[kf(e,i,n)],c=[r];if(s.length%2!=0)throw new da(ua.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(kf(e,s[t])),c.push(s[t+1]);const l=[],h=rc.empty();for(let t=a.length-1;t>=0;--t)if(!Df(l,a[t])){const e=a[t];let n=c[t];n=V(n);const i=o.Lc(e);if(n instanceof Ef)l.push(e);else{const t=Tf(n,i);null!=t&&(l.push(e),h.set(e,t))}}const u=new La(l);return new mf(h,u,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,i):function(t,e,n,i){const r=t.jc(1,e,n);Sf("Data must be an object, but it was:",r,i);const s=[],o=rc.empty();Sa(i,((t,i)=>{const a=Nf(e,t,n);i=V(i);const c=r.Lc(a);if(i instanceof Ef)s.push(a);else{const t=Tf(i,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new La(s);return new mf(o,a,r.fieldTransforms)}(s,"updateDoc",t._key,e),zf(r,[o.toMutation(t._key,nl.exists(!0))])}function zf(t,e){return function(t,e){const n=new fa;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=Pd(t);try{const t=await function(t,e){const n=ha(t),i=Ta.now(),r=e.reduce(((t,e)=>t.add(e.key)),Dl());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Qn.Pn(t,r).next((r=>{s=r;const o=[];for(const t of e){const e=al(t,s.get(t.key));null!=e&&o.push(new ul(t.key,e,sc(e.value.mapValue),nl.exists(!0)))}return n.In.addMutationBatch(t,i,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.qo[t.currentUser.toKey()];i||(i=new El(ba)),i=i.insert(e,n),t.qo[t.currentUser.toKey()]=i}(i,t.batchId,n),await Dd(i,t.changes),await qu(i.remoteStore)}catch(t){const e=nd(t,"Failed to persist write");n.reject(e)}}(await function(t){return jd(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(af(t),e)}function Hf(){return new bf("serverTimestamp")}function qf(t){return new If("increment",t)}!function(t,e=!0){ea="9.4.0",ot(new F("firestore",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=new sf(i,new ga(t.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:e},n),r._setSettings(n),r}),"PUBLIC")),dt(Zo,"3.3.0",t),dt(Zo,"3.3.0","esm2017")}();const Wf=function(t){let e=document.getElementById("backgroundimage");switch(t){case"waldo":return{minwidth:Math.ceil(.3963*Number(e.clientWidth)),maxwidth:Math.ceil(.4123*Number(e.clientWidth)),minheight:Math.ceil(.5879*Number(e.clientHeight)),maxheight:Math.ceil(.6352*Number(e.clientHeight))};case"odlaw":return{minwidth:Math.ceil(.062*Number(e.clientWidth)),maxwidth:Math.ceil(.077*Number(e.clientWidth)),minheight:Math.ceil(.6616*Number(e.clientHeight)),maxheight:Math.ceil(.6928*Number(e.clientHeight))};case"wenda":return{minwidth:Math.ceil(.2888*Number(e.clientWidth)),maxwidth:Math.ceil(.3006*Number(e.clientWidth)),minheight:Math.ceil(.4764*Number(e.clientHeight)),maxheight:Math.ceil(.5359*Number(e.clientHeight))};case"wizard":return{minwidth:Math.ceil(.7743*Number(e.clientWidth)),maxwidth:Math.ceil(.7897*Number(e.clientWidth)),minheight:Math.ceil(.5369*Number(e.clientHeight)),maxheight:Math.ceil(.5898*Number(e.clientHeight))};case"woof":return{minwidth:Math.ceil(.5823*Number(e.clientWidth)),maxwidth:Math.ceil(.5936*Number(e.clientWidth)),minheight:Math.ceil(.9007*Number(e.clientHeight)),maxheight:Math.ceil(.9105*Number(e.clientHeight))};default:console.log("error error. wrong character called")}},Kf=async function(t){try{await function(t,e,n){t=Yd(t,Zd);const i=Yd(t.firestore,sf),r=function(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}(t.converter,e,n);return zf(i,[wf(vf(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,nl.none())])}(nf(of(),"users",t),{waldoLocation:{location:Wf("waldo"),found:!1},odlawLocation:{location:Wf("odlaw"),found:!1},wendaLocation:{location:Wf("wenda"),found:!1},wizardLocation:{location:Wf("wizard"),found:!1},woofLocation:{location:Wf("woof"),found:!1},startTime:Hf(),endTime:0,foundcharacters:0})}catch(t){console.log("Error writing to database ",t)}},$f=async function(t){const e=await Vf(t);if(e.exists())return e.data().foundcharacters},Gf=async function(t){const e=nf(of(),"scoreboard","scoredata"),n=await Vf(e),i=nf(of(),"users",t),r=await Vf(i);let s=0;if(r.exists()){const t=r.data(),e=t.startTime,n=t.endTime;s=Math.ceil(Number(n)-Number(e))}else console.log("player not found");if(n.exists()){const i=n.data(),r=i.players,o=i.anonymousplayers,a=await Qf(r,s,o,t);if(!1===a[0])Vn(a[0],a[1],s);else{if(!0===a[2])try{await jf(e,{players:a[1],anonymousplayers:qf(1)})}catch(t){console.log("Couldn't update scoreboard ",t)}else try{await jf(e,{players:a[1]})}catch(t){console.log("Couldn't update scoreboard ",t)}Vn(a[0],a[1],s)}}},Qf=async function(t,e,n,i){let r=[],s=[],o=Xf(t);const a=Xf(o);t.forEach((t=>{r.push(t.time),s.push(t.userindb)}));const c=r.findIndex((t=>0===Number(t)||Number(t)>Number(e)));let l=!1;if(-1!==c){let t=function(){let t=window.prompt("Congratulations, you made it to the scoreboard! What should we call you? (max 12 characters)");return t.length>12&&(t=t.substring(0,12)),t}();void 0!==t&&""!==t||(t="Anonymous"+Number(n+1),l=!0);const r=c+1,s=6-r;for(let n=0;n<s;n++)0===n?(o[r+(n-1)].name=t,o[r+(n-1)].time=e,o[r+(n-1)].userindb=i):(o[r+(n-1)].name=a[r+(n-1)-1].name,o[r+(n-1)].time=a[r+(n-1)-1].time,o[r+(n-1)].userindb=a[r+(n-1)-1].userindb);return[!0,o,l]}return[!1,o,l]},Yf=function(){document.getElementById("highestscoreslink").addEventListener("click",(async function(){const t=nf(of(),"scoreboard","scoredata"),e=await Vf(t);if(e.exists()){const t=e.data().players;Vn(null,t,null);const n=document.getElementById("closescoreboardbutton"),i=document.getElementById("scoreboarddiv");n.addEventListener("click",(()=>{i.remove()}))}}))},Xf=function(t){let e=[];for(let n=0;n<t.length;n++){const i=t[n],r={name:i.name,time:i.time,alias:i.alias,userindb:i.userindb};e.push(r)}return e};var Jf;document.getElementById("login").addEventListener("click",(async function(){try{await async function(t){var e;const n=de(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new ke({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await async function(t,e){return Bt(t,"POST","/v1/accounts:signUp",Lt(t,e))}(n,{returnSecureToken:!0}),r=await ke._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}(Pn())}catch(t){console.log("Error signing in ",t)}})),function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=n.name;if("string"!=typeof i||!i)throw ct.create("bad-app-name",{appName:String(i)});const r=it.get(i);if(r){if(D(t,r.options)&&D(n,r.config))return r;throw ct.create("duplicate-app",{appName:i})}const s=new H(i);for(const t of rt.values())s.addComponent(t);const o=new lt(t,n,s);it.set(i,o)}(function(){if(jn&&jn.apiKey)return jn;throw new Error("No Firebase configuration object provided.\nAdd your web app's configuration object to firebase-config.js")}()),Jf=async function(t){if(t){const e=nf(of(),"users",t.uid),n=await Vf(e);let i=!1;n.exists()&&(i=!0),document.getElementById("loading").style.display="none";const r=document.getElementById("gamestart"),s=document.getElementById("game");s.classList.add("showgame"),s.style.display="flex",r.style.display="none",await function(){const t=document.getElementById("background");t.style.width="100%";const e=document.createElement("img");return e.src=E,e.alt="backgroundimage",e.setAttribute("id","backgroundimage"),e.style.display="block",e.style.maxHeight="100%",e.style.maxWidth="100%",e.style.margin="0 auto",t.appendChild(e),e.addEventListener("click",(t=>{!function(t){const e=document.getElementById("backgroundimage"),n=document.getElementById("background"),i=Number(e.clientWidth),r=Number(n.clientWidth);let s=0;r>i&&(s=(r-i)/2),null!==document.getElementById("characterselection")&&document.getElementById("characterselection").remove();const o=document.createElement("div");o.setAttribute("id","characterselection");const a=document.createElement("button");a.innerHTML="x";let c=t.offsetY-20-320+"px";c.split("p")[0]<0&&(c="10px"),o.style.top=c,o.style.left=t.offsetX+s+20+"px";const l=document.createElement("ul"),h=document.createElement("li");h.textContent="Waldo",h.setAttribute("data-character","waldoLocation");const u=document.createElement("li");u.textContent="Odlaw",u.setAttribute("data-character","odlawLocation");const d=document.createElement("li");d.textContent="Wenda",d.setAttribute("data-character","wendaLocation");const f=document.createElement("li");f.textContent="Wizard Whitebeard",f.setAttribute("data-character","wizardLocation");const p=document.createElement("li");p.textContent="Woof",p.setAttribute("data-character","woofLocation"),l.appendChild(h),l.appendChild(u),l.appendChild(d),l.appendChild(f),l.appendChild(p);const m=[t.offsetX,t.offsetY],g=[h,u,d,f,p];for(let t=0;t<g.length;t++)g[t].addEventListener("click",(t=>{Zf(m,t.target),o.remove()}));a.addEventListener("click",(()=>{o.remove()})),n.appendChild(o),o.appendChild(a),o.appendChild(l)}(t)})),"done"}(),!function(){const t=document.getElementById("sidethumbnails"),e=[{alias:"waldothumbnail",file:g,name:"Waldo"},{alias:"odlawthumbnail",file:y,name:"Odlaw"},{alias:"wendathumbnail",file:A,name:"Wenda"},{alias:"wizardthumbnail",file:v,name:"Wizard Whitebeard"},{alias:"woofthumbnail",file:w,name:"Woof"}];for(let n=0;n<e.length;n++){const i=document.createElement("div");i.setAttribute("class","divcharacterthumbnail"),i.setAttribute("id",e[n].alias);const r=document.createElement("img");r.src=e[n].file,r.alt=e[n].alias,r.setAttribute("class","characterthumbnailgame"),i.appendChild(r),t.appendChild(i)}const n=document.createElement("button");n.textContent="Highest Scores",n.setAttribute("id","highestscoreslink"),t.appendChild(n)}(),Yf(),i?setTimeout((()=>{Fn(n.data())}),1e3):setTimeout((()=>{Kf(t.uid)}))}else document.getElementById("loading").style.display="none",document.getElementById("gamestart").style.display="flex",function(){if(null!==Pn().currentUser)return;const t=document.getElementById("charactersToLookFor"),e=[{name:"waldothumbnail",file:g},{name:"odlawthumbnail",file:y},{name:"wendathumbnail",file:A},{name:"wizardthumbnail",file:v},{name:"woofthumbnail",file:w}];for(let n=0;n<e.length;n++){const i=document.createElement("img");i.src=e[n].file,i.alt=e[n].name,i.setAttribute("class","characterthumbnail"),t.appendChild(i)}}()},V(Pn()).onAuthStateChanged(Jf,undefined,undefined),window.onresize=async function(){if(null===Pn().currentUser)return;const t=Pn().currentUser.uid,e=nf(of(),"users",t);try{await jf(e,{"waldoLocation.location":Wf("waldo"),"odlawLocation.location":Wf("odlaw"),"wendaLocation.location":Wf("wenda"),"wizardLocation.location":Wf("wizard"),"woofLocation.location":Wf("woof")}),document.querySelectorAll(".characterfoundcircle").forEach((t=>t.remove()));const t=await Vf(e);Fn(t.data())}catch(t){console.log("Couldn't update doc in database ",t)}};const Zf=async function(t,e){const n=Number(t[0]),i=Number(t[1]),r=await async function(t){const e=nf(of(),"users",Pn().currentUser.uid),n=await Vf(e);if(n.exists())return n.data()[t];console.log("No such document!")}(e.dataset.character),s=Number(r.location.minwidth),o=Number(r.location.maxwidth),a=Number(r.location.minheight),c=Number(r.location.maxheight);return n<=o&&n>=s&&i<=c&&i>=a?(Un(!0,e),async function(t){if(null===Pn().currentUser)return;const e=Pn().currentUser.uid,n=nf(of(),"users",e);if("waldoLocation"===t)try{await jf(n,{foundcharacters:qf(1),"waldoLocation.found":!0})}catch(t){console.log("Couldn't update doc in database ",t)}else if("odlawLocation"===t)try{await jf(n,{foundcharacters:qf(1),"odlawLocation.found":!0})}catch(t){console.log("Couldn't update doc in database ",t)}else if("wendaLocation"===t)try{await jf(n,{foundcharacters:qf(1),"wendaLocation.found":!0})}catch(t){console.log("Couldn't update doc in database ",t)}else if("wizardLocation"===t)try{await jf(n,{foundcharacters:qf(1),"wizardLocation.found":!0})}catch(t){console.log("Couldn't update doc in database ",t)}else if("woofLocation"===t)try{await jf(n,{foundcharacters:qf(1),"woofLocation.found":!0})}catch(t){console.log("Couldn't update doc in database ",t)}if(5===await $f(n)){try{await jf(n,{endTime:Hf()})}catch(t){console.log("Couldn't save timestamp for end of round ",t)}Gf(e)}}(e.dataset.character),Mn(e.dataset.character),Bn(n,i,e.dataset.character),!0):(Un(!1,e),!1)}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxRQUFRL0IsWUFFZixJQUVQcUIsSUFBa0IsRUFBT0UsSUFDbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL3NyYy9zdHlsZS9zdHlsZS5jc3MiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3doZXJlc3dhbGRvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL3NyYy9zdHlsZS9zdHlsZS5jc3M/YzlmMCIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbmRleC1hYTlhNjRlZC5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vd2hlcmVzd2FsZG8vLi9zcmMvZmlyZWJhc2UtY29uZmlnLmpzIiwid2VicGFjazovL3doZXJlc3dhbGRvLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly93aGVyZXN3YWxkby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18gPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL3dhbGRvbWljcm90aHVtYm5haWwuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18gPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL3dlbmRhbWljcm90aHVtYm5haWwuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18gPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL29kbGF3bWljcm90aHVtYm5haWwuanBnXCIsIGltcG9ydC5tZXRhLnVybCk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzNfX18gPSBuZXcgVVJMKFwiLi4vaW1hZ2VzL3dpemFyZG1pY3JvdGh1bWJuYWlsLmpwZWdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfNF9fXyA9IG5ldyBVUkwoXCIuLi9pbWFnZXMvd29vZm1pY3JvdGh1bWJuYWlsLmpwZ1wiLCBpbXBvcnQubWV0YS51cmwpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18pO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzNfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8zX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF80X19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfNF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJodG1sIHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBwYWRkaW5nOiAwO1xcbiAgbWFyZ2luOiAwO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICBmb250LWZhbWlseTogVlQzMjM7XFxuICBjb2xvcjogcmdiKDQ2LCA1MiwgNTQpO1xcbn1cXG5cXG5ib2R5IHtcXG4gIGhlaWdodDogMTAwdmg7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG5cXG5oMSB7XFxuICBmb250LXNpemU6IDQwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbmgyIHtcXG4gIGZvbnQtc2l6ZTogMzJweDtcXG59XFxuXFxuaDMge1xcbiAgZm9udC1zaXplOiAyMnB4O1xcbn1cXG5cXG5oNCB7XFxuICBmb250LXNpemU6IDIwcHg7XFxufVxcblxcbi5jZW50ZXJlZHRleHQge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4jYmFja2dyb3VuZGltYWdlIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIG1heC13aWR0aDogMTAwJTtcXG4gIG1hcmdpbjogMCBhdXRvO1xcbn1cXG5cXG4jYmFja2dyb3VuZCB7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuXFxuI2NoYXJhY3RlcnNlbGVjdGlvbiB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgd2lkdGg6IDIzMHB4O1xcbiAgei1pbmRleDogMjtcXG59XFxuXFxuI2NoYXJhY3RlcnNlbGVjdGlvbiBidXR0b24ge1xcbiAgd2lkdGg6IG1heC1jb250ZW50O1xcbiAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XFxuICBtYXJnaW46IDVweDtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICMwZjZkYzU7XFxufVxcblxcbiNjaGFyYWN0ZXJzZWxlY3Rpb24gYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCAycHggMnB4IDFweCAjMGY2ZGM1O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4jY2hhcmFjdGVyc2VsZWN0aW9uIHVsIHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBwYWRkaW5nOiAwcHggMTBweDtcXG4gIG1hcmdpbjogMHB4IDVweCA1cHggNXB4O1xcbn1cXG5cXG4jY2hhcmFjdGVyc2VsZWN0aW9uIHVsIGxpIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiA1cHg7XFxuICBmb250LXNpemU6IDIwcHg7XFxuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIGdyZXk7XFxufVxcblxcbiNjaGFyYWN0ZXJzZWxlY3Rpb24gdWwgbGk6aG92ZXIge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcXG59XFxuXFxuI2NoYXJhY3RlcnNUb0xvb2tGb3Ige1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBtYXJnaW4tdG9wOiA0MHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogNDBweDtcXG59XFxuXFxuLmNoYXJhY3RlcnRodW1ibmFpbCB7XFxuICB3aWR0aDogMTAwcHg7XFxufVxcblxcbiNsb2FkaW5nIHtcXG4gIHdpZHRoOiA5OHZ3O1xcbiAgaGVpZ2h0OiA5OHZoO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBjb2xvcjogZ3JleTtcXG59XFxuXFxuI3NwaW5uZXIge1xcbiAgYW5pbWF0aW9uLW5hbWU6IHJvdGF0ZTtcXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogOHM7XFxufVxcblxcbkBrZXlmcmFtZXMgcm90YXRlIHtcXG4gIDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7XFxuICB9XFxuICAxMDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gIH1cXG59XFxuXFxuI2dhbWVzdGFydCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gNHB4KTtcXG4gIHdpZHRoOiBjYWxjKDEwMHZ3IC0gNHB4KTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYm9yZGVyOiAycHggIzBmNmRjNSBkb3R0ZWQ7XFxufVxcblxcbiNnYW1lc3RhcnRjb250ZW50IHtcXG4gIGhlaWdodDogOTAlO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuLnNob3dnYW1lIHtcXG4gIGhlaWdodDogMTAwdmg7XFxuICB3aWR0aDogMTAwdnc7XFxufVxcblxcbiNnYW1lc3RhdHVzIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuI3NpZGV0aHVtYm5haWxzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogNXB4O1xcbn1cXG5cXG4uY2hhcmFjdGVydGh1bWJuYWlsZ2FtZSB7XFxuICBoZWlnaHQ6IDc1cHg7XFxuICBwYWRkaW5nOiAycHg7XFxufVxcblxcbi5kaXZjaGFyYWN0ZXJ0aHVtYm5haWwge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICB3aWR0aDogODBweDtcXG59XFxuXFxuLmRpdmNoYXJhY3RlcnRodW1ibmFpbCBpbWcge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDAgYXV0bztcXG59XFxuXFxuLmRpdmNoYXJhY3RlcnRodW1ibmFpbCBoNCB7XFxuICBtYXJnaW4tdG9wOiAwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAwcHg7XFxufVxcblxcbiNmb3VuZG92ZXJsYXkge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDMwMHB4O1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICB0b3A6IDEwJTtcXG4gIGxlZnQ6IDQwJTtcXG4gIHotaW5kZXg6IDE7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xcbiAgZm9udC1zaXplOiAyMnB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgIzBmNmRjNTtcXG59XFxuXFxuI2ZvdW5kb3ZlcmxheSBkaXYge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcblxcbiNjbG9zZW92ZXJsYXkge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xcbn1cXG5cXG4jY2xvc2VvdmVybGF5IGJ1dHRvbiB7XFxuICBtYXJnaW46IDVweDtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICMwZjZkYzU7XFxuICBwYWRkaW5nOiAwO1xcbiAgaGVpZ2h0OiAyMHB4O1xcbiAgd2lkdGg6IDIwcHg7XFxufVxcblxcbiNjbG9zZW92ZXJsYXkgYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCAycHggMnB4IDFweCAjMGY2ZGM1O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4jZm91bmRvdmVybGF5IGRpdiBwIHtcXG4gIG1hcmdpbi10b3A6IDJweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndhbGRvTG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fXyArIFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndlbmRhTG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyArIFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIm9kbGF3TG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyArIFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndpemFyZExvY2F0aW9uXFxcIl06YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IHVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzNfX18gKyBcIik7XFxufVxcblxcbmxpW2RhdGEtY2hhcmFjdGVyPVxcXCJ3b29mTG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFwiICsgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfNF9fXyArIFwiKTtcXG59XFxuXFxuI3Njb3JlYm9hcmRkaXYge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgdG9wOiAxMCU7XFxuICBsZWZ0OiBjYWxjKCgxMDB2dyAvIDIpIC0gKCgwLjQgKiAxMDB2dykgLyAyKSk7XFxuICB6LWluZGV4OiAzO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgd2lkdGg6IDQwJTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICMwZjZkYzU7XFxufVxcblxcbiNzY29yZWJvYXJkZGl2IGgyIHtcXG4gIG1hcmdpbi1ib3R0b206IDBweDtcXG4gIHBhZGRpbmctYm90dG9tOiAwcHg7XFxuICBtYXJnaW4tdG9wOiAyNXB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4jc2NvcmVib2FyZGRpdiB0YWJsZSB7XFxuICB3aWR0aDogNzUlO1xcbiAgcGFkZGluZzogMjBweCAzNXB4O1xcbiAgbWFyZ2luOiBhdXRvO1xcbn1cXG5cXG4jc2NvcmVib2FyZGRpdiB0YWJsZSB0ciB7XFxuICBoZWlnaHQ6IDc1cHg7XFxuICBmb250LXNpemU6IDI1cHg7XFxufVxcblxcbiNzY29yZWJvYXJkZGl2IHRhYmxlIHRyIHRkOmxhc3QtY2hpbGQsXFxuI3Njb3JlYm9hcmRkaXYgdGFibGUgdHIgdGQ6Zmlyc3QtY2hpbGQge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgd2lkdGg6IDMwcHg7XFxufVxcblxcbiNjbG9zZXNjb3JlYm9hcmRkaXYge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xcbn1cXG5cXG4jY2xvc2VzY29yZWJvYXJkZGl2IGJ1dHRvbiB7XFxuICBib3gtc2hhZG93OiAycHggMnB4IDFweCAjMGY2ZGM1O1xcbiAgcGFkZGluZzogMDtcXG4gIGhlaWdodDogMjBweDtcXG4gIHdpZHRoOiAyMHB4O1xcbiAgbWFyZ2luOiA1cHg7XFxufVxcblxcbiNjbG9zZXNjb3JlYm9hcmRkaXYgYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCAycHggMnB4IDFweCAjMGY2ZGM1O1xcbn1cXG5cXG4jcGxheWVybWVzc2FnZSB7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBmb250LXNpemU6IDIwcHg7XFxufVxcblxcbkBrZXlmcmFtZXMgdGV4dGJsaW5rIHtcXG4gIDAlIHtcXG4gICAgY29sb3I6IHJnYig0NiwgNTIsIDU0KTtcXG4gIH1cXG4gIDI1JSB7XFxuICAgIGNvbG9yOiBsaWdodGdyZXk7XFxuICB9XFxuICA1MCUge1xcbiAgICBjb2xvcjogcmdiKDQ2LCA1MiwgNTQpO1xcbiAgfVxcbiAgNzUlIHtcXG4gICAgY29sb3I6IGxpZ2h0Z3JleTtcXG4gIH1cXG4gIDEwMCUge1xcbiAgICBjb2xvcjogcmdiKDQ2LCA1MiwgNTQpO1xcbiAgfVxcbn1cXG5cXG4jY2xpY2tzdGFydCB7XFxuICBhbmltYXRpb24tbmFtZTogdGV4dGJsaW5rO1xcbiAgYW5pbWF0aW9uLWR1cmF0aW9uOiA0cztcXG4gIGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xcbn1cXG5cXG4jbG9naW4ge1xcbiAgd2lkdGg6IDE1MHB4O1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAycHggIzBmNmRjNTtcXG4gIGZvbnQtc2l6ZTogMjZweDtcXG59XFxuXFxuI2xvZ2luOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCA0cHggNHB4IDJweCAjMGY2ZGM1O1xcbn1cXG5cXG5idXR0b24ge1xcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xcbiAgZm9udC1mYW1pbHk6IFZUMzIzO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICBib3JkZXItcmFkaXVzOiAwcHg7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgYm9yZGVyOiAycHggc29saWQgbGlnaHRncmV5O1xcbiAgY29sb3I6IHJnYig0NiwgNTIsIDU0KTtcXG59XFxuXFxuLmZvb3RlciB7XFxuICB3aWR0aDogMTAwJTtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuLmZvb3RlciBhIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgLyogdGV4dC1hbGlnbjogY2VudGVyOyAqL1xcbn1cXG5cXG4uZm9vdGVyIGE6dmlzaXRlZCB7XFxuICBjb2xvcjogIzBmNmRjNTtcXG59XFxuXFxuLmZvb3RlciBhOmhvdmVyIHtcXG4gIGNvbG9yOiAjYjkxMDJkO1xcbn1cXG5cXG4jZ2FtZWZvb3RlciB7XFxuICAvKiBtYXJnaW4tdG9wOiAyMHB4OyAqL1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm90dG9tOiAwcHg7XFxuICBsZWZ0OiA1MCU7XFxuICB6LWluZGV4OiAyO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICB3aWR0aDogODBweDtcXG59XFxuXFxuI3NlcGFyYXRvciB7XFxuICBjb2xvcjogIzBmNmRjNTtcXG4gIGZvbnQtc2l6ZTogMjhweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIG1hcmdpbjogNXB4IGF1dG87XFxufVxcblxcbiNoaWdoZXN0c2NvcmVzbGluayB7XFxuICBib3gtc2hhZG93OiA0cHggNHB4IDJweCAjMGY2ZGM1O1xcbiAgZm9udC1zaXplOiAxOHB4O1xcbn1cXG5cXG4jaGlnaGVzdHNjb3Jlc2xpbms6aG92ZXIge1xcbiAgY29sb3I6ICMwZjZkYzU7XFxuICBib3gtc2hhZG93OiBpbnNldCAxcHggMXB4IDJweCBsaWdodGdyZXksIDRweCA0cHggMnB4ICMwZjZkYzU7XFxufVxcblxcbi5jaGVjayB7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDA7XFxufVxcblxcbi5jaGVjayBwIHtcXG4gIGNvbG9yOiByZ2IoNDYsIDUyLCA1NCk7XFxuICBtYXJnaW46IDA7XFxuICBmb250LXdlaWdodDogYm9sZGVyO1xcbiAgZm9udC1zaXplOiA0NXB4O1xcbiAgbWFyZ2luLWxlZnQ6IDIwcHg7XFxuICBtYXJnaW4tdG9wOiAxNXB4O1xcbn1cXG5cXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEzMDBweCkge1xcbiAgI3Njb3JlYm9hcmRkaXYge1xcbiAgICB3aWR0aDogNjAlO1xcbiAgICBsZWZ0OiBjYWxjKCgxMDB2dyAvIDIpIC0gKCgwLjYgKiAxMDB2dykgLyAyKSk7XFxuICB9XFxufVxcblxcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogODUwcHgpIHtcXG4gICNzY29yZWJvYXJkZGl2IHRhYmxlIHtcXG4gICAgcGFkZGluZzogMTBweCAxMHB4O1xcbiAgfVxcbiAgI3Njb3JlYm9hcmRkaXYgdGFibGUgdHIge1xcbiAgICBoZWlnaHQ6IDUwcHg7XFxuICAgIGZvbnQtc2l6ZTogMjJweDtcXG4gIH1cXG4gICNzY29yZWJvYXJkZGl2IGgyIHtcXG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xcbiAgICBwYWRkaW5nLWJvdHRvbTogMHB4O1xcbiAgICBtYXJnaW4tdG9wOiA1cHg7XFxuICAgIGZvbnQtc2l6ZTogMzBweDtcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgfVxcbn1cXG5cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGUvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixTQUFTO0VBQ1QsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsU0FBUztFQUNULFVBQVU7QUFDWjs7QUFFQTtFQUNFLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxr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OztBQUVBO0VBQ0UsY0FBYztFQUNkLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsK0JBQStCO0VBQy9CLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsNERBQTREO0FBQzlEOztBQUVBO0VBQ0UsZUFBZTtFQUNmLE1BQU07QUFDUjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixTQUFTO0VBQ1QsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0U7SUFDRSxVQUFVO0lBQ1YsNkNBQTZDO0VBQy9DO0FBQ0Y7O0FBRUE7RUFDRTtJQUNFLGtCQUFrQjtFQUNwQjtFQUNBO0lBQ0UsWUFBWTtJQUNaLGVBQWU7RUFDakI7RUFDQTtJQUNFLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsZUFBZTtJQUNmLGVBQWU7SUFDZixrQkFBa0I7RUFDcEI7QUFDRlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJodG1sIHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBwYWRkaW5nOiAwO1xcbiAgbWFyZ2luOiAwO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICBmb250LWZhbWlseTogVlQzMjM7XFxuICBjb2xvcjogcmdiKDQ2LCA1MiwgNTQpO1xcbn1cXG5cXG5ib2R5IHtcXG4gIGhlaWdodDogMTAwdmg7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG5cXG5oMSB7XFxuICBmb250LXNpemU6IDQwcHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcblxcbmgyIHtcXG4gIGZvbnQtc2l6ZTogMzJweDtcXG59XFxuXFxuaDMge1xcbiAgZm9udC1zaXplOiAyMnB4O1xcbn1cXG5cXG5oNCB7XFxuICBmb250LXNpemU6IDIwcHg7XFxufVxcblxcbi5jZW50ZXJlZHRleHQge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4jYmFja2dyb3VuZGltYWdlIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWF4LWhlaWdodDogMTAwJTtcXG4gIG1heC13aWR0aDogMTAwJTtcXG4gIG1hcmdpbjogMCBhdXRvO1xcbn1cXG5cXG4jYmFja2dyb3VuZCB7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuXFxuI2NoYXJhY3RlcnNlbGVjdGlvbiB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgd2lkdGg6IDIzMHB4O1xcbiAgei1pbmRleDogMjtcXG59XFxuXFxuI2NoYXJhY3RlcnNlbGVjdGlvbiBidXR0b24ge1xcbiAgd2lkdGg6IG1heC1jb250ZW50O1xcbiAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XFxuICBtYXJnaW46IDVweDtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICMwZjZkYzU7XFxufVxcblxcbiNjaGFyYWN0ZXJzZWxlY3Rpb24gYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCAycHggMnB4IDFweCAjMGY2ZGM1O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4jY2hhcmFjdGVyc2VsZWN0aW9uIHVsIHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBwYWRkaW5nOiAwcHggMTBweDtcXG4gIG1hcmdpbjogMHB4IDVweCA1cHggNXB4O1xcbn1cXG5cXG4jY2hhcmFjdGVyc2VsZWN0aW9uIHVsIGxpIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiA1cHg7XFxuICBmb250LXNpemU6IDIwcHg7XFxuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIGdyZXk7XFxufVxcblxcbiNjaGFyYWN0ZXJzZWxlY3Rpb24gdWwgbGk6aG92ZXIge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcXG59XFxuXFxuI2NoYXJhY3RlcnNUb0xvb2tGb3Ige1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBtYXJnaW4tdG9wOiA0MHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogNDBweDtcXG59XFxuXFxuLmNoYXJhY3RlcnRodW1ibmFpbCB7XFxuICB3aWR0aDogMTAwcHg7XFxufVxcblxcbiNsb2FkaW5nIHtcXG4gIHdpZHRoOiA5OHZ3O1xcbiAgaGVpZ2h0OiA5OHZoO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBjb2xvcjogZ3JleTtcXG59XFxuXFxuI3NwaW5uZXIge1xcbiAgYW5pbWF0aW9uLW5hbWU6IHJvdGF0ZTtcXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogOHM7XFxufVxcblxcbkBrZXlmcmFtZXMgcm90YXRlIHtcXG4gIDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7XFxuICB9XFxuICAxMDAlIHtcXG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcXG4gIH1cXG59XFxuXFxuI2dhbWVzdGFydCB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gNHB4KTtcXG4gIHdpZHRoOiBjYWxjKDEwMHZ3IC0gNHB4KTtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYm9yZGVyOiAycHggIzBmNmRjNSBkb3R0ZWQ7XFxufVxcblxcbiNnYW1lc3RhcnRjb250ZW50IHtcXG4gIGhlaWdodDogOTAlO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuLnNob3dnYW1lIHtcXG4gIGhlaWdodDogMTAwdmg7XFxuICB3aWR0aDogMTAwdnc7XFxufVxcblxcbiNnYW1lc3RhdHVzIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuI3NpZGV0aHVtYm5haWxzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogNXB4O1xcbn1cXG5cXG4uY2hhcmFjdGVydGh1bWJuYWlsZ2FtZSB7XFxuICBoZWlnaHQ6IDc1cHg7XFxuICBwYWRkaW5nOiAycHg7XFxufVxcblxcbi5kaXZjaGFyYWN0ZXJ0aHVtYm5haWwge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICB3aWR0aDogODBweDtcXG59XFxuXFxuLmRpdmNoYXJhY3RlcnRodW1ibmFpbCBpbWcge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDAgYXV0bztcXG59XFxuXFxuLmRpdmNoYXJhY3RlcnRodW1ibmFpbCBoNCB7XFxuICBtYXJnaW4tdG9wOiAwcHg7XFxuICBtYXJnaW4tYm90dG9tOiAwcHg7XFxufVxcblxcbiNmb3VuZG92ZXJsYXkge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDMwMHB4O1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICB0b3A6IDEwJTtcXG4gIGxlZnQ6IDQwJTtcXG4gIHotaW5kZXg6IDE7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xcbiAgZm9udC1zaXplOiAyMnB4O1xcbiAgYm9yZGVyOiAycHggc29saWQgIzBmNmRjNTtcXG59XFxuXFxuI2ZvdW5kb3ZlcmxheSBkaXYge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcblxcbiNjbG9zZW92ZXJsYXkge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xcbn1cXG5cXG4jY2xvc2VvdmVybGF5IGJ1dHRvbiB7XFxuICBtYXJnaW46IDVweDtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICMwZjZkYzU7XFxuICBwYWRkaW5nOiAwO1xcbiAgaGVpZ2h0OiAyMHB4O1xcbiAgd2lkdGg6IDIwcHg7XFxufVxcblxcbiNjbG9zZW92ZXJsYXkgYnV0dG9uOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCAycHggMnB4IDFweCAjMGY2ZGM1O1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4jZm91bmRvdmVybGF5IGRpdiBwIHtcXG4gIG1hcmdpbi10b3A6IDJweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndhbGRvTG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFxcXCIuLi9pbWFnZXMvd2FsZG9taWNyb3RodW1ibmFpbC5qcGdcXFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndlbmRhTG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFxcXCIuLi9pbWFnZXMvd2VuZGFtaWNyb3RodW1ibmFpbC5qcGdcXFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIm9kbGF3TG9jYXRpb25cXFwiXTpiZWZvcmUge1xcbiAgY29udGVudDogdXJsKFxcXCIuLi9pbWFnZXMvb2RsYXdtaWNyb3RodW1ibmFpbC5qcGdcXFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndpemFyZExvY2F0aW9uXFxcIl06YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IHVybChcXFwiLi4vaW1hZ2VzL3dpemFyZG1pY3JvdGh1bWJuYWlsLmpwZWdcXFwiKTtcXG59XFxuXFxubGlbZGF0YS1jaGFyYWN0ZXI9XFxcIndvb2ZMb2NhdGlvblxcXCJdOmJlZm9yZSB7XFxuICBjb250ZW50OiB1cmwoXFxcIi4uL2ltYWdlcy93b29mbWljcm90aHVtYm5haWwuanBnXFxcIik7XFxufVxcblxcbiNzY29yZWJvYXJkZGl2IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMTAlO1xcbiAgbGVmdDogY2FsYygoMTAwdncgLyAyKSAtICgoMC40ICogMTAwdncpIC8gMikpO1xcbiAgei1pbmRleDogMztcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIHdpZHRoOiA0MCU7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjMGY2ZGM1O1xcbn1cXG5cXG4jc2NvcmVib2FyZGRpdiBoMiB7XFxuICBtYXJnaW4tYm90dG9tOiAwcHg7XFxuICBwYWRkaW5nLWJvdHRvbTogMHB4O1xcbiAgbWFyZ2luLXRvcDogMjVweDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuI3Njb3JlYm9hcmRkaXYgdGFibGUge1xcbiAgd2lkdGg6IDc1JTtcXG4gIHBhZGRpbmc6IDIwcHggMzVweDtcXG4gIG1hcmdpbjogYXV0bztcXG59XFxuXFxuI3Njb3JlYm9hcmRkaXYgdGFibGUgdHIge1xcbiAgaGVpZ2h0OiA3NXB4O1xcbiAgZm9udC1zaXplOiAyNXB4O1xcbn1cXG5cXG4jc2NvcmVib2FyZGRpdiB0YWJsZSB0ciB0ZDpsYXN0LWNoaWxkLFxcbiNzY29yZWJvYXJkZGl2IHRhYmxlIHRyIHRkOmZpcnN0LWNoaWxkIHtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHdpZHRoOiAzMHB4O1xcbn1cXG5cXG4jY2xvc2VzY29yZWJvYXJkZGl2IHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG59XFxuXFxuI2Nsb3Nlc2NvcmVib2FyZGRpdiBidXR0b24ge1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCAxcHggIzBmNmRjNTtcXG4gIHBhZGRpbmc6IDA7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICB3aWR0aDogMjBweDtcXG4gIG1hcmdpbjogNXB4O1xcbn1cXG5cXG4jY2xvc2VzY29yZWJvYXJkZGl2IGJ1dHRvbjpob3ZlciB7XFxuICBjb2xvcjogIzBmNmRjNTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDFweCAxcHggMnB4IGxpZ2h0Z3JleSwgMnB4IDJweCAxcHggIzBmNmRjNTtcXG59XFxuXFxuI3BsYXllcm1lc3NhZ2Uge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZm9udC1zaXplOiAyMHB4O1xcbn1cXG5cXG5Aa2V5ZnJhbWVzIHRleHRibGluayB7XFxuICAwJSB7XFxuICAgIGNvbG9yOiByZ2IoNDYsIDUyLCA1NCk7XFxuICB9XFxuICAyNSUge1xcbiAgICBjb2xvcjogbGlnaHRncmV5O1xcbiAgfVxcbiAgNTAlIHtcXG4gICAgY29sb3I6IHJnYig0NiwgNTIsIDU0KTtcXG4gIH1cXG4gIDc1JSB7XFxuICAgIGNvbG9yOiBsaWdodGdyZXk7XFxuICB9XFxuICAxMDAlIHtcXG4gICAgY29sb3I6IHJnYig0NiwgNTIsIDU0KTtcXG4gIH1cXG59XFxuXFxuI2NsaWNrc3RhcnQge1xcbiAgYW5pbWF0aW9uLW5hbWU6IHRleHRibGluaztcXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogNHM7XFxuICBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50OiBpbmZpbml0ZTtcXG59XFxuXFxuI2xvZ2luIHtcXG4gIHdpZHRoOiAxNTBweDtcXG4gIGJveC1zaGFkb3c6IDRweCA0cHggMnB4ICMwZjZkYzU7XFxuICBmb250LXNpemU6IDI2cHg7XFxufVxcblxcbiNsb2dpbjpob3ZlciB7XFxuICBjb2xvcjogIzBmNmRjNTtcXG4gIGJveC1zaGFkb3c6IGluc2V0IDFweCAxcHggMnB4IGxpZ2h0Z3JleSwgNHB4IDRweCAycHggIzBmNmRjNTtcXG59XFxuXFxuYnV0dG9uIHtcXG4gIGFsaWduLXNlbGY6IGNlbnRlcjtcXG4gIGZvbnQtZmFtaWx5OiBWVDMyMztcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcbiAgYm9yZGVyLXJhZGl1czogMHB4O1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG4gIGJvcmRlcjogMnB4IHNvbGlkIGxpZ2h0Z3JleTtcXG4gIGNvbG9yOiByZ2IoNDYsIDUyLCA1NCk7XFxufVxcblxcbi5mb290ZXIge1xcbiAgd2lkdGg6IDEwMCU7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxufVxcbi5mb290ZXIgYSB7XFxuICBjb2xvcjogIzBmNmRjNTtcXG4gIC8qIHRleHQtYWxpZ246IGNlbnRlcjsgKi9cXG59XFxuXFxuLmZvb3RlciBhOnZpc2l0ZWQge1xcbiAgY29sb3I6ICMwZjZkYzU7XFxufVxcblxcbi5mb290ZXIgYTpob3ZlciB7XFxuICBjb2xvcjogI2I5MTAyZDtcXG59XFxuXFxuI2dhbWVmb290ZXIge1xcbiAgLyogbWFyZ2luLXRvcDogMjBweDsgKi9cXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogMHB4O1xcbiAgbGVmdDogNTAlO1xcbiAgei1pbmRleDogMjtcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcbiAgd2lkdGg6IDgwcHg7XFxufVxcblxcbiNzZXBhcmF0b3Ige1xcbiAgY29sb3I6ICMwZjZkYzU7XFxuICBmb250LXNpemU6IDI4cHg7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBtYXJnaW46IDVweCBhdXRvO1xcbn1cXG5cXG4jaGlnaGVzdHNjb3Jlc2xpbmsge1xcbiAgYm94LXNoYWRvdzogNHB4IDRweCAycHggIzBmNmRjNTtcXG4gIGZvbnQtc2l6ZTogMThweDtcXG59XFxuXFxuI2hpZ2hlc3RzY29yZXNsaW5rOmhvdmVyIHtcXG4gIGNvbG9yOiAjMGY2ZGM1O1xcbiAgYm94LXNoYWRvdzogaW5zZXQgMXB4IDFweCAycHggbGlnaHRncmV5LCA0cHggNHB4IDJweCAjMGY2ZGM1O1xcbn1cXG5cXG4uY2hlY2sge1xcbiAgcG9zaXRpb246IGZpeGVkO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uY2hlY2sgcCB7XFxuICBjb2xvcjogcmdiKDQ2LCA1MiwgNTQpO1xcbiAgbWFyZ2luOiAwO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcXG4gIGZvbnQtc2l6ZTogNDVweDtcXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xcbiAgbWFyZ2luLXRvcDogMTVweDtcXG59XFxuXFxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMzAwcHgpIHtcXG4gICNzY29yZWJvYXJkZGl2IHtcXG4gICAgd2lkdGg6IDYwJTtcXG4gICAgbGVmdDogY2FsYygoMTAwdncgLyAyKSAtICgoMC42ICogMTAwdncpIC8gMikpO1xcbiAgfVxcbn1cXG5cXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDg1MHB4KSB7XFxuICAjc2NvcmVib2FyZGRpdiB0YWJsZSB7XFxuICAgIHBhZGRpbmc6IDEwcHggMTBweDtcXG4gIH1cXG4gICNzY29yZWJvYXJkZGl2IHRhYmxlIHRyIHtcXG4gICAgaGVpZ2h0OiA1MHB4O1xcbiAgICBmb250LXNpemU6IDIycHg7XFxuICB9XFxuICAjc2NvcmVib2FyZGRpdiBoMiB7XFxuICAgIG1hcmdpbi1ib3R0b206IDBweDtcXG4gICAgcGFkZGluZy1ib3R0b206IDBweDtcXG4gICAgbWFyZ2luLXRvcDogNXB4O1xcbiAgICBmb250LXNpemU6IDMwcHg7XFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIH1cXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgICBpZiAoaXRlbVs0XSkge1xuICAgICAgICBjb250ZW50ICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQoaXRlbVs0XSwgXCIpIHtcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuXG4gICAgICBjb250ZW50ICs9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG5cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXNba11bMF07XG5cbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgbW9kdWxlcy5sZW5ndGg7IF9rKyspIHtcbiAgICAgIHZhciBpdGVtID0gW10uY29uY2F0KG1vZHVsZXNbX2tdKTtcblxuICAgICAgaWYgKGRlZHVwZSAmJiBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWEpIHtcbiAgICAgICAgaWYgKCFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3VwcG9ydHMpIHtcbiAgICAgICAgaWYgKCFpdGVtWzRdKSB7XG4gICAgICAgICAgaXRlbVs0XSA9IFwiXCIuY29uY2F0KHN1cHBvcnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAc3VwcG9ydHMgKFwiLmNvbmNhdChpdGVtWzRdLCBcIikge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNF0gPSBzdXBwb3J0cztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCBvcHRpb25zKSB7XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHVybCA9IFN0cmluZyh1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsKTsgLy8gSWYgdXJsIGlzIGFscmVhZHkgd3JhcHBlZCBpbiBxdW90ZXMsIHJlbW92ZSB0aGVtXG5cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9IC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcblxuXG4gIGlmICgvW1wiJygpIFxcdFxcbl18KCUyMCkvLnRlc3QodXJsKSB8fCBvcHRpb25zLm5lZWRRdW90ZXMpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvXFxuL2csIFwiXFxcXG5cIiksIFwiXFxcIlwiKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY3NzTWFwcGluZykpKSk7XG4gICAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgXCJcIikuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuXG5mdW5jdGlvbiBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKSB7XG4gIHZhciByZXN1bHQgPSAtMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlc0luRE9NLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHN0eWxlc0luRE9NW2ldLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpIHtcbiAgICAgIHJlc3VsdCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucykge1xuICB2YXIgaWRDb3VudE1hcCA9IHt9O1xuICB2YXIgaWRlbnRpZmllcnMgPSBbXTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNvdW50ID0gaWRDb3VudE1hcFtpZF0gfHwgMDtcbiAgICB2YXIgaWRlbnRpZmllciA9IFwiXCIuY29uY2F0KGlkLCBcIiBcIikuY29uY2F0KGNvdW50KTtcbiAgICBpZENvdW50TWFwW2lkXSA9IGNvdW50ICsgMTtcbiAgICB2YXIgaW5kZXhCeUlkZW50aWZpZXIgPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgY3NzOiBpdGVtWzFdLFxuICAgICAgbWVkaWE6IGl0ZW1bMl0sXG4gICAgICBzb3VyY2VNYXA6IGl0ZW1bM10sXG4gICAgICBzdXBwb3J0czogaXRlbVs0XSxcbiAgICAgIGxheWVyOiBpdGVtWzVdXG4gICAgfTtcblxuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG5cbiAgdmFyIHVwZGF0ZXIgPSBmdW5jdGlvbiB1cGRhdGVyKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXAgJiYgbmV3T2JqLnN1cHBvcnRzID09PSBvYmouc3VwcG9ydHMgJiYgbmV3T2JqLmxheWVyID09PSBvYmoubGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhcGkudXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwaS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tpXTtcbiAgICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgc3R5bGVzSW5ET01baW5kZXhdLnJlZmVyZW5jZXMtLTtcbiAgICB9XG5cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfaWRlbnRpZmllciA9IGxhc3RJZGVudGlmaWVyc1tfaV07XG5cbiAgICAgIHZhciBfaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihfaWRlbnRpZmllcik7XG5cbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG5cbiAgICAgICAgc3R5bGVzSW5ET00uc3BsaWNlKF9pbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGFzdElkZW50aWZpZXJzID0gbmV3TGFzdElkZW50aWZpZXJzO1xuICB9O1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIG1lbW8gPSB7fTtcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5mdW5jdGlvbiBnZXRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICB9XG5cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGluc2VydEJ5U2VsZWN0b3IoaW5zZXJ0LCBzdHlsZSkge1xuICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGluc2VydCk7XG5cbiAgaWYgKCF0YXJnZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICB9XG5cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRCeVNlbGVjdG9yOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0aW9ucy5hdHRyaWJ1dGVzKTtcbiAgb3B0aW9ucy5pbnNlcnQoZWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0U3R5bGVFbGVtZW50OyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcyhzdHlsZUVsZW1lbnQpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IFwiXCI7XG5cbiAgaWYgKG9iai5zdXBwb3J0cykge1xuICAgIGNzcyArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KG9iai5zdXBwb3J0cywgXCIpIHtcIik7XG4gIH1cblxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cblxuICB2YXIgbmVlZExheWVyID0gdHlwZW9mIG9iai5sYXllciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICBpZiAobmVlZExheWVyKSB7XG4gICAgY3NzICs9IFwiQGxheWVyXCIuY29uY2F0KG9iai5sYXllci5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KG9iai5sYXllcikgOiBcIlwiLCBcIiB7XCIpO1xuICB9XG5cbiAgY3NzICs9IG9iai5jc3M7XG5cbiAgaWYgKG5lZWRMYXllcikge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuXG4gIGlmIChvYmoubWVkaWEpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG5cbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBvcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50LCBvcHRpb25zLm9wdGlvbnMpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGVFbGVtZW50LnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gZG9tQVBJKG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlRWxlbWVudCA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGVFbGVtZW50LCBvcHRpb25zLCBvYmopO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZG9tQVBJOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIHN0eWxlVGFnVHJhbnNmb3JtKGNzcywgc3R5bGVFbGVtZW50KSB7XG4gIGlmIChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0aWQ6IG1vZHVsZUlkLFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0JztcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKlxyXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcclxuICogICB0eXBlIEVyciA9XHJcbiAqICAgICAndW5rbm93bicgfFxyXG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXHJcbiAqICAgICA7XHJcbiAqXHJcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcclxuICogICAvLyBhdC1lbnVtIHtzdHJpbmd9XHJcbiAqICAgdmFyIEVyciA9IHtcclxuICogICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICogICAgIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcclxuICogICB9XHJcbiAqXHJcbiAqICAgbGV0IGVycm9yczogTWFwPEVyciwgc3RyaW5nPiA9IHtcclxuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXHJcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXHJcbiAqICAgbGV0IGVycm9yID0gbmV3IEVycm9yRmFjdG9yeTxFcnI+KCdzZXJ2aWNlJywgJ1NlcnZpY2UnLCBlcnJvcnMpO1xyXG4gKlxyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuR0VORVJJQyk7XHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcclxuICogICAuLi5cclxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cclxuICpcclxuICogICBjYXRjaCAoZSkge1xyXG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcclxuICogICAgIGlmIChlLmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSwgY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENPTlNUQU5UUywgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjcuN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjQuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEZpcmViYXNlIEFwcFxyXG4gKlxyXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBGaXJlYmFzZUVycm9yLCBxdWVyeXN0cmluZywgZ2V0TW9kdWxhckluc3RhbmNlLCBiYXNlNjREZWNvZGUsIGdldFVBLCBpc0lFLCBjcmVhdGVTdWJzY3JpYmUsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBleHRyYWN0UXVlcnlzdHJpbmcsIGlzRW1wdHkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTREtfVkVSU0lPTiwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgZ2V0QXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgRmFjdG9ySWQgPSB7XHJcbiAgICAvKiogUGhvbmUgYXMgc2Vjb25kIGZhY3RvciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBwcm92aWRlcnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFByb3ZpZGVySWQgPSB7XHJcbiAgICAvKiogRmFjZWJvb2sgcHJvdmlkZXIgSUQgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBwcm92aWRlciBJRCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGFzc3dvcmQgcHJvdmlkZXIgKi9cclxuICAgIFBBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIFBob25lIHByb3ZpZGVyICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHByb3ZpZGVyIElEICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgc2lnbi1pbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTaWduSW5NZXRob2QgPSB7XHJcbiAgICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfTElOSzogJ2VtYWlsTGluaycsXHJcbiAgICAvKiogRW1haWwvcGFzc3dvcmQgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIEZhY2Vib29rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBob25lIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgb3BlcmF0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBPcGVyYXRpb25UeXBlID0ge1xyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgbGlua2luZyBhbiBhZGRpdGlvbmFsIHByb3ZpZGVyIHRvIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBMSU5LOiAnbGluaycsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBSRUFVVEhFTlRJQ0FURTogJ3JlYXV0aGVudGljYXRlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHNpZ25pbmcgaW4gYSB1c2VyLiAqL1xyXG4gICAgU0lHTl9JTjogJ3NpZ25JbidcclxufTtcclxuLyoqXHJcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBwb3NzaWJsZSBlbWFpbCBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFjdGlvbkNvZGVPcGVyYXRpb24gPSB7XHJcbiAgICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXHJcbiAgICBFTUFJTF9TSUdOSU46ICdFTUFJTF9TSUdOSU4nLFxyXG4gICAgLyoqIFRoZSBwYXNzd29yZCByZXNldCBhY3Rpb24uICovXHJcbiAgICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcclxuICAgIC8qKiBUaGUgZW1haWwgcmV2b2NhdGlvbiBhY3Rpb24uICovXHJcbiAgICBSRUNPVkVSX0VNQUlMOiAnUkVDT1ZFUl9FTUFJTCcsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiAnUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04nLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgZW1haWwgdmVyaWZpY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9FTUFJTDogJ1ZFUklGWV9FTUFJTCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgcmVzdHJpY3RlZCB0byBhZG1pbmlzdHJhdG9ycyBvbmx5LicsXHJcbiAgICAgICAgW1wiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqL106ICcnLFxyXG4gICAgICAgIFtcImFwcC1ub3QtYXV0aG9yaXplZFwiIC8qIEFQUF9OT1RfQVVUSE9SSVpFRCAqL106IFwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IFwiICtcclxuICAgICAgICAgICAgJ2F1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuICcgK1xyXG4gICAgICAgICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImFwcC1ub3QtaW5zdGFsbGVkXCIgLyogQVBQX05PVF9JTlNUQUxMRUQgKi9dOiAnVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoJyArXHJcbiAgICAgICAgICAgICdBbmRyb2lkIHBhY2thZ2UgbmFtZSBvciBpT1MgYnVuZGxlIElEKSBwcm92aWRlZCBpcyBub3QgaW5zdGFsbGVkIG9uICcgK1xyXG4gICAgICAgICAgICAndGhpcyBkZXZpY2UuJyxcclxuICAgICAgICBbXCJjYXB0Y2hhLWNoZWNrLWZhaWxlZFwiIC8qIENBUFRDSEFfQ0hFQ0tfRkFJTEVEICovXTogJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xyXG4gICAgICAgICAgICAnYWxyZWFkeSB1c2VkIG9yIHRoZSBkb21haW4gYXNzb2NpYXRlZCB3aXRoIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBsaXN0ICcgK1xyXG4gICAgICAgICAgICAnb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy4nLFxyXG4gICAgICAgIFtcImNvZGUtZXhwaXJlZFwiIC8qIENPREVfRVhQSVJFRCAqL106ICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXHJcbiAgICAgICAgICAgICdhZ2Fpbi4nLFxyXG4gICAgICAgIFtcImNvcmRvdmEtbm90LXJlYWR5XCIgLyogQ09SRE9WQV9OT1RfUkVBRFkgKi9dOiAnQ29yZG92YSBmcmFtZXdvcmsgaXMgbm90IHJlYWR5LicsXHJcbiAgICAgICAgW1wiY29ycy11bnN1cHBvcnRlZFwiIC8qIENPUlNfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcclxuICAgICAgICBbXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqL106ICdUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106ICdUaGUgY3VzdG9tIHRva2VuIGNvcnJlc3BvbmRzIHRvIGEgZGlmZmVyZW50IGF1ZGllbmNlLicsXHJcbiAgICAgICAgW1wicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXHJcbiAgICAgICAgICAgICdhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcclxuICAgICAgICBbXCJkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZFwiIC8qIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEICovXTogJ1BsZWFzZSBhY3RpdmF0ZSBEeW5hbWljIExpbmtzIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlIGFuZCBhZ3JlZSB0byB0aGUgdGVybXMgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29uZGl0aW9ucy4nLFxyXG4gICAgICAgIFtcImVtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb25cIiAvKiBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OICovXTogJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqL106ICdBdXRoIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBtYWtlIGEgbmV0d29yayBjYWxsLiBBdXRoIGNhbiAnICtcclxuICAgICAgICAgICAgJ25vIGxvbmdlciBiZSBjb25maWd1cmVkIHRvIHVzZSB0aGUgZW11bGF0b3IuIFRyeSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAnXCJjb25uZWN0QXV0aEVtdWxhdG9yKClcIiBzb29uZXIuJyxcclxuICAgICAgICBbXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqL106ICdUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgZHVlIHRvIGFub3RoZXIgY29uZmxpY3RpbmcgcG9wdXAgYmVpbmcgb3BlbmVkLicsXHJcbiAgICAgICAgW1wiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXHJcbiAgICAgICAgICAgICcgVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtaWRcIiAvKiBJTlZBTElEX0FQUF9JRCAqL106ICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqL106IFwiVGhpcyB1c2VyJ3MgY3JlZGVudGlhbCBpc24ndCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBUaGlzIGNhbiBoYXBwZW4gXCIgK1xyXG4gICAgICAgICAgICBcImlmIHRoZSB1c2VyJ3MgdG9rZW4gaGFzIGJlZW4gdGFtcGVyZWQgd2l0aCwgb3IgaWYgdGhlIHVzZXIgaXNuJ3QgZm9yIFwiICtcclxuICAgICAgICAgICAgJ3RoZSBwcm9qZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBJTlZBTElEX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xyXG4gICAgICAgICAgICAnaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHRvIHVzZSB0aGUgJyArXHJcbiAgICAgICAgICAgICd2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi9dOiAnVGhlIGNvbnRpbnVlIFVSTCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqL106ICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiLCBjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jdXN0b20tdG9rZW5cIiAvKiBJTlZBTElEX0NVU1RPTV9UT0tFTiAqL106ICdUaGUgY3VzdG9tIHRva2VuIGZvcm1hdCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqL106ICdUaGUgcHJvdmlkZWQgZHluYW1pYyBsaW5rIGRvbWFpbiBpcyBub3QgY29uZmlndXJlZCBvciBhdXRob3JpemVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbWFpbFwiIC8qIElOVkFMSURfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYmFkbHkgZm9ybWF0dGVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqL106ICdFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqL106ICdZb3VyIEFQSSBrZXkgaXMgaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdSBoYXZlIGNvcGllZCBpdCBjb3JyZWN0bHkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNlcnQtaGFzaFwiIC8qIElOVkFMSURfQ0VSVF9IQVNIICovXTogJ1RoZSBTSEEtMSBjZXJ0aWZpY2F0ZSBoYXNoIHByb3ZpZGVkIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqL106ICdUaGUgc3VwcGxpZWQgYXV0aCBjcmVkZW50aWFsIGlzIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIgLyogSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIGluIGl0cyBtZXNzYWdlLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogSU5WQUxJRF9NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIiAvKiBJTlZBTElEX09BVVRIX1BST1ZJREVSICovXTogJ0VtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiAnICtcclxuICAgICAgICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106ICdUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NwZWNpZmllZCBBUEkga2V5LicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovXTogJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xyXG4gICAgICAgICAgICAncHJvamVjdC4gRWRpdCB0aGUgbGlzdCBvZiBhdXRob3JpemVkIGRvbWFpbnMgZnJvbSB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBpcyBpbnZhbGlkLiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvZGUgaXMgbWFsZm9ybWVkLCAnICtcclxuICAgICAgICAgICAgJ2V4cGlyZWQsIG9yIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC4nLFxyXG4gICAgICAgIFtcIndyb25nLXBhc3N3b3JkXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgaXMgaW52YWxpZCBvciB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgcGFzc3dvcmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBJTlZBTElEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZSBpcyBpbnZhbGlkLiBJdCBjYW4gb25seSBiZSBsb2NhbCwgc2Vzc2lvbiBvciBub25lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1waG9uZS1udW1iZXJcIiAvKiBJTlZBTElEX1BIT05FX05VTUJFUiAqL106ICdUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVyIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBpbnRvIEUuMTY0IGZvcm1hdC4gRS4xNjQgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcclxuICAgICAgICAgICAgJ251bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcHJvdmlkZXItaWRcIiAvKiBJTlZBTElEX1BST1ZJREVSX0lEICovXTogJ1RoZSBzcGVjaWZpZWQgcHJvdmlkZXIgSUQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjaXBpZW50LWVtYWlsXCIgLyogSU5WQUxJRF9SRUNJUElFTlRfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xyXG4gICAgICAgICAgICAncmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtc2VuZGVyXCIgLyogSU5WQUxJRF9TRU5ERVIgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106ICdUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdGVuYW50LWlkXCIgLyogSU5WQUxJRF9URU5BTlRfSUQgKi9dOiBcIlRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEIGlzIGludmFsaWQuXCIsXHJcbiAgICAgICAgW1wibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106ICdBbiBBbmRyb2lkIFBhY2thZ2UgTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBBbmRyb2lkIEFwcCBpcyByZXF1aXJlZCB0byBiZSBpbnN0YWxsZWQuJyxcclxuICAgICAgICBbXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBNSVNTSU5HX0FVVEhfRE9NQUlOICovXTogJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xyXG4gICAgICAgICAgICAnYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIgLyogTUlTU0lOR19BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgaXMgbWlzc2luZyBhbiBhcHBsaWNhdGlvbiB2ZXJpZmllciAnICtcclxuICAgICAgICAgICAgJ2Fzc2VydGlvbi4gQSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gbmVlZHMgdG8gYmUgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogTUlTU0lOR19DT0RFICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiIC8qIE1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogJ0EgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiIC8qIE1JU1NJTkdfSUZSQU1FX1NUQVJUICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi9dOiAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiIC8qIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRSAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgbm9uY2UuIFRoaXMgY2FuIG9jY3VyIGlmIHRoZSAnICtcclxuICAgICAgICAgICAgJ1NIQS0yNTYgaGFzaCBvZiB0aGUgcHJvdmlkZWQgcmF3IG5vbmNlIGRvZXMgbm90IG1hdGNoIHRoZSBoYXNoZWQgbm9uY2UgJyArXHJcbiAgICAgICAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovXTogJ05vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCIgLyogTUlTU0lOR19QSE9ORV9OVU1CRVIgKi9dOiAnVG8gc2VuZCB2ZXJpZmljYXRpb24gY29kZXMsIHByb3ZpZGUgYSBwaG9uZSBudW1iZXIgZm9yIHRoZSByZWNpcGllbnQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcclxuICAgICAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIE1PRFVMRV9ERVNUUk9ZRUQgKi9dOiAnVGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZUFwcCBoYXMgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogTUZBX0lORk9fTk9UX0ZPVU5EICovXTogJ1RoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZWNvbmQgZmFjdG9yIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi9dOiAnUHJvb2Ygb2Ygb3duZXJzaGlwIG9mIGEgc2Vjb25kIGZhY3RvciBpcyByZXF1aXJlZCB0byBjb21wbGV0ZSBzaWduLWluLicsXHJcbiAgICAgICAgW1wiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovXTogJ0FuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgJyArXHJcbiAgICAgICAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXHJcbiAgICAgICAgICAgICdlbWFpbCBhZGRyZXNzLicsXHJcbiAgICAgICAgW1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi9dOiAnQSBuZXR3b3JrIEF1dGhFcnJvciAoc3VjaCBhcyB0aW1lb3V0LCBpbnRlcnJ1cHRlZCBjb25uZWN0aW9uIG9yIHVucmVhY2hhYmxlIGhvc3QpIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqL106ICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJudWxsLXVzZXJcIiAvKiBOVUxMX1VTRVIgKi9dOiAnQSBudWxsIHVzZXIgb2JqZWN0IHdhcyBwcm92aWRlZCBhcyB0aGUgYXJndW1lbnQgZm9yIGFuIG9wZXJhdGlvbiB3aGljaCAnICtcclxuICAgICAgICAgICAgJ3JlcXVpcmVzIGEgbm9uLW51bGwgdXNlciBvYmplY3QuJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi9dOiAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXHJcbiAgICAgICAgICAgICdFbmFibGUgaXQgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUsIHVuZGVyIHRoZSBzaWduLWluIG1ldGhvZCB0YWIgb2YgdGhlICcgK1xyXG4gICAgICAgICAgICAnQXV0aCBzZWN0aW9uLicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgJyArXHJcbiAgICAgICAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXHJcbiAgICAgICAgICAgICcgYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxyXG4gICAgICAgIFtcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovXTogJ1VuYWJsZSB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHdpdGggdGhlIHBvcHVwLiBJdCBtYXkgaGF2ZSBiZWVuIGJsb2NrZWQgYnkgdGhlIGJyb3dzZXIuJyxcclxuICAgICAgICBbXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIFBPUFVQX0NMT1NFRF9CWV9VU0VSICovXTogJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxyXG4gICAgICAgIFtcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9dOiAnVXNlciBjYW4gb25seSBiZSBsaW5rZWQgdG8gb25lIGlkZW50aXR5IGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJxdW90YS1leGNlZWRlZFwiIC8qIFFVT1RBX0VYQ0VFREVEICovXTogXCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcclxuICAgICAgICBbXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovXTogJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXHJcbiAgICAgICAgW1wicmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmdcIiAvKiBSRURJUkVDVF9PUEVSQVRJT05fUEVORElORyAqL106ICdBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy4nLFxyXG4gICAgICAgIFtcInJlamVjdGVkLWNyZWRlbnRpYWxcIiAvKiBSRUpFQ1RFRF9DUkVERU5USUFMICovXTogJ1RoZSByZXF1ZXN0IGNvbnRhaW5zIG1hbGZvcm1lZCBvciBtaXNtYXRjaGluZyBjcmVkZW50aWFscy4nLFxyXG4gICAgICAgIFtcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi9dOiAnVGhlIHNlY29uZCBmYWN0b3IgaXMgYWxyZWFkeSBlbnJvbGxlZCBvbiB0aGlzIGFjY291bnQuJyxcclxuICAgICAgICBbXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxyXG4gICAgICAgIFtcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqL106IFwiVGhlIHByb3ZpZGVkIHRlbmFudCBJRCBkb2VzIG5vdCBtYXRjaCB0aGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRFwiLFxyXG4gICAgICAgIFtcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxyXG4gICAgICAgIFtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcclxuICAgICAgICBbXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106ICdXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuICcgK1xyXG4gICAgICAgICAgICAnVHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiAnVGhlIGRvbWFpbiBvZiB0aGUgY29udGludWUgVVJMIGlzIG5vdCB3aGl0ZWxpc3RlZC4gIFBsZWFzZSB3aGl0ZWxpc3QgJyArXHJcbiAgICAgICAgICAgICd0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCIgLyogVU5TVVBQT1JURURfRklSU1RfRkFDVE9SICovXTogJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqL106ICdUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIiAvKiBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxyXG4gICAgICAgIFtcInVudmVyaWZpZWQtZW1haWxcIiAvKiBVTlZFUklGSUVEX0VNQUlMICovXTogJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcInVzZXItY2FuY2VsbGVkXCIgLyogVVNFUl9DQU5DRUxMRUQgKi9dOiAnVGhlIHVzZXIgZGlkIG5vdCBncmFudCB5b3VyIGFwcGxpY2F0aW9uIHRoZSBwZXJtaXNzaW9ucyBpdCByZXF1ZXN0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL106ICdUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5ICcgK1xyXG4gICAgICAgICAgICAnaGF2ZSBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL106ICdUaGUgdXNlciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGJ5IGFuIGFkbWluaXN0cmF0b3IuJyxcclxuICAgICAgICBbXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqL106ICdUaGUgc3VwcGxpZWQgY3JlZGVudGlhbHMgZG8gbm90IGNvcnJlc3BvbmQgdG8gdGhlIHByZXZpb3VzbHkgc2lnbmVkIGluIHVzZXIuJyxcclxuICAgICAgICBbXCJ1c2VyLXNpZ25lZC1vdXRcIiAvKiBVU0VSX1NJR05FRF9PVVQgKi9dOiAnJyxcclxuICAgICAgICBbXCJ3ZWFrLXBhc3N3b3JkXCIgLyogV0VBS19QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLicsXHJcbiAgICAgICAgW1wid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCBvciAzcmQgcGFydHkgY29va2llcyBhbmQgZGF0YSBtYXkgYmUgZGlzYWJsZWQuJyxcclxuICAgICAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL106ICdpbml0aWFsaXplQXV0aCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgICdkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplQXV0aCgpIHdpdGggdGhlICcgK1xyXG4gICAgICAgICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXHJcbiAgICAgICAgICAgICcgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS4nXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9wcm9kRXJyb3JNYXAoKSB7XHJcbiAgICAvLyBXZSB3aWxsIGluY2x1ZGUgdGhpcyBvbmUgbWVzc2FnZSBpbiB0aGUgcHJvZCBlcnJvciBtYXAgc2luY2UgYnkgdGhlIHZlcnlcclxuICAgIC8vIG5hdHVyZSBvZiB0aGlzIGVycm9yLCBkZXZlbG9wZXJzIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBzZWUgdGhlIG1lc3NhZ2VcclxuICAgIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBBIHZlcmJvc2UgZXJyb3IgbWFwIHdpdGggZGV0YWlsZWQgZGVzY3JpcHRpb25zIGZvciBtb3N0IGVycm9yIGNvZGVzLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBkZWJ1Z0Vycm9yTWFwID0gX2RlYnVnRXJyb3JNYXA7XHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgZXJyb3IgbWFwIHdpdGggYWxsIHZlcmJvc2UgZXJyb3IgbWVzc2FnZXMgc3RyaXBwZWQuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHByb2RFcnJvck1hcCA9IF9wcm9kRXJyb3JNYXA7XHJcbmNvbnN0IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBfcHJvZEVycm9yTWFwKCkpO1xyXG4vKipcclxuICogQSBtYXAgb2YgcG90ZW50aWFsIGBBdXRoYCBlcnJvciBjb2RlcywgZm9yIGVhc2llciBjb21wYXJpc29uIHdpdGggZXJyb3JzXHJcbiAqIHRocm93biBieSB0aGUgU0RLLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBOb3RlIHRoYXQgeW91IGNhbid0IHRyZWUtc2hha2UgaW5kaXZpZHVhbCBrZXlzXHJcbiAqIGluIHRoZSBtYXAsIHNvIGJ5IHVzaW5nIHRoZSBtYXAgeW91IG1pZ2h0IHN1YnN0YW50aWFsbHkgaW5jcmVhc2UgeW91clxyXG4gKiBidW5kbGUgc2l6ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZID0ge1xyXG4gICAgQURNSU5fT05MWV9PUEVSQVRJT046ICdhdXRoL2FkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uJyxcclxuICAgIEFSR1VNRU5UX0VSUk9SOiAnYXV0aC9hcmd1bWVudC1lcnJvcicsXHJcbiAgICBBUFBfTk9UX0FVVEhPUklaRUQ6ICdhdXRoL2FwcC1ub3QtYXV0aG9yaXplZCcsXHJcbiAgICBBUFBfTk9UX0lOU1RBTExFRDogJ2F1dGgvYXBwLW5vdC1pbnN0YWxsZWQnLFxyXG4gICAgQ0FQVENIQV9DSEVDS19GQUlMRUQ6ICdhdXRoL2NhcHRjaGEtY2hlY2stZmFpbGVkJyxcclxuICAgIENPREVfRVhQSVJFRDogJ2F1dGgvY29kZS1leHBpcmVkJyxcclxuICAgIENPUkRPVkFfTk9UX1JFQURZOiAnYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeScsXHJcbiAgICBDT1JTX1VOU1VQUE9SVEVEOiAnYXV0aC9jb3JzLXVuc3VwcG9ydGVkJyxcclxuICAgIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0U6ICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgQ1JFREVOVElBTF9NSVNNQVRDSDogJ2F1dGgvY3VzdG9tLXRva2VuLW1pc21hdGNoJyxcclxuICAgIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTjogJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJyxcclxuICAgIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSDogJ2F1dGgvZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aCcsXHJcbiAgICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRDogJ2F1dGgvZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWQnLFxyXG4gICAgRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTjogJ2F1dGgvZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvbicsXHJcbiAgICBFTUFJTF9FWElTVFM6ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQ6ICdhdXRoL2VtdWxhdG9yLWNvbmZpZy1mYWlsZWQnLFxyXG4gICAgRVhQSVJFRF9PT0JfQ09ERTogJ2F1dGgvZXhwaXJlZC1hY3Rpb24tY29kZScsXHJcbiAgICBFWFBJUkVEX1BPUFVQX1JFUVVFU1Q6ICdhdXRoL2NhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0JyxcclxuICAgIElOVEVSTkFMX0VSUk9SOiAnYXV0aC9pbnRlcm5hbC1lcnJvcicsXHJcbiAgICBJTlZBTElEX0FQSV9LRVk6ICdhdXRoL2ludmFsaWQtYXBpLWtleScsXHJcbiAgICBJTlZBTElEX0FQUF9DUkVERU5USUFMOiAnYXV0aC9pbnZhbGlkLWFwcC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfQVBQX0lEOiAnYXV0aC9pbnZhbGlkLWFwcC1pZCcsXHJcbiAgICBJTlZBTElEX0FVVEg6ICdhdXRoL2ludmFsaWQtdXNlci10b2tlbicsXHJcbiAgICBJTlZBTElEX0FVVEhfRVZFTlQ6ICdhdXRoL2ludmFsaWQtYXV0aC1ldmVudCcsXHJcbiAgICBJTlZBTElEX0NFUlRfSEFTSDogJ2F1dGgvaW52YWxpZC1jZXJ0LWhhc2gnLFxyXG4gICAgSU5WQUxJRF9DT0RFOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfQ09OVElOVUVfVVJJOiAnYXV0aC9pbnZhbGlkLWNvbnRpbnVlLXVyaScsXHJcbiAgICBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTjogJ2F1dGgvaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb24nLFxyXG4gICAgSU5WQUxJRF9DVVNUT01fVE9LRU46ICdhdXRoL2ludmFsaWQtY3VzdG9tLXRva2VuJyxcclxuICAgIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjogJ2F1dGgvaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluJyxcclxuICAgIElOVkFMSURfRU1BSUw6ICdhdXRoL2ludmFsaWQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUU6ICdhdXRoL2ludmFsaWQtZW11bGF0b3Itc2NoZW1lJyxcclxuICAgIElOVkFMSURfSURQX1JFU1BPTlNFOiAnYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQ6ICdhdXRoL2ludmFsaWQtbWVzc2FnZS1wYXlsb2FkJyxcclxuICAgIElOVkFMSURfTUZBX1NFU1NJT046ICdhdXRoL2ludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb24nLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6ICdhdXRoL2ludmFsaWQtb2F1dGgtY2xpZW50LWlkJyxcclxuICAgIElOVkFMSURfT0FVVEhfUFJPVklERVI6ICdhdXRoL2ludmFsaWQtb2F1dGgtcHJvdmlkZXInLFxyXG4gICAgSU5WQUxJRF9PT0JfQ09ERTogJ2F1dGgvaW52YWxpZC1hY3Rpb24tY29kZScsXHJcbiAgICBJTlZBTElEX09SSUdJTjogJ2F1dGgvdW5hdXRob3JpemVkLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX1BBU1NXT1JEOiAnYXV0aC93cm9uZy1wYXNzd29yZCcsXHJcbiAgICBJTlZBTElEX1BFUlNJU1RFTkNFOiAnYXV0aC9pbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgSU5WQUxJRF9QSE9ORV9OVU1CRVI6ICdhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyJyxcclxuICAgIElOVkFMSURfUFJPVklERVJfSUQ6ICdhdXRoL2ludmFsaWQtcHJvdmlkZXItaWQnLFxyXG4gICAgSU5WQUxJRF9SRUNJUElFTlRfRU1BSUw6ICdhdXRoL2ludmFsaWQtcmVjaXBpZW50LWVtYWlsJyxcclxuICAgIElOVkFMSURfU0VOREVSOiAnYXV0aC9pbnZhbGlkLXNlbmRlcicsXHJcbiAgICBJTlZBTElEX1NFU1NJT05fSU5GTzogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgSU5WQUxJRF9URU5BTlRfSUQ6ICdhdXRoL2ludmFsaWQtdGVuYW50LWlkJyxcclxuICAgIE1GQV9JTkZPX05PVF9GT1VORDogJ2F1dGgvbXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kJyxcclxuICAgIE1GQV9SRVFVSVJFRDogJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRTogJ2F1dGgvbWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lJyxcclxuICAgIE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6ICdhdXRoL21pc3NpbmctYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgTUlTU0lOR19BVVRIX0RPTUFJTjogJ2F1dGgvYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkJyxcclxuICAgIE1JU1NJTkdfQ09ERTogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBNSVNTSU5HX0NPTlRJTlVFX1VSSTogJ2F1dGgvbWlzc2luZy1jb250aW51ZS11cmknLFxyXG4gICAgTUlTU0lOR19JRlJBTUVfU1RBUlQ6ICdhdXRoL21pc3NpbmctaWZyYW1lLXN0YXJ0JyxcclxuICAgIE1JU1NJTkdfSU9TX0JVTkRMRV9JRDogJ2F1dGgvbWlzc2luZy1pb3MtYnVuZGxlLWlkJyxcclxuICAgIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRTogJ2F1dGgvbWlzc2luZy1vci1pbnZhbGlkLW5vbmNlJyxcclxuICAgIE1JU1NJTkdfTUZBX0lORk86ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLWluZm8nLFxyXG4gICAgTUlTU0lOR19NRkFfU0VTU0lPTjogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBNSVNTSU5HX1BIT05FX05VTUJFUjogJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInLFxyXG4gICAgTUlTU0lOR19TRVNTSU9OX0lORk86ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWlkJyxcclxuICAgIE1PRFVMRV9ERVNUUk9ZRUQ6ICdhdXRoL2FwcC1kZWxldGVkJyxcclxuICAgIE5FRURfQ09ORklSTUFUSU9OOiAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJyxcclxuICAgIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQ6ICdhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWQnLFxyXG4gICAgTlVMTF9VU0VSOiAnYXV0aC9udWxsLXVzZXInLFxyXG4gICAgTk9fQVVUSF9FVkVOVDogJ2F1dGgvbm8tYXV0aC1ldmVudCcsXHJcbiAgICBOT19TVUNIX1BST1ZJREVSOiAnYXV0aC9uby1zdWNoLXByb3ZpZGVyJyxcclxuICAgIE9QRVJBVElPTl9OT1RfQUxMT1dFRDogJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyxcclxuICAgIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEOiAnYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50JyxcclxuICAgIFBPUFVQX0JMT0NLRUQ6ICdhdXRoL3BvcHVwLWJsb2NrZWQnLFxyXG4gICAgUE9QVVBfQ0xPU0VEX0JZX1VTRVI6ICdhdXRoL3BvcHVwLWNsb3NlZC1ieS11c2VyJyxcclxuICAgIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEOiAnYXV0aC9wcm92aWRlci1hbHJlYWR5LWxpbmtlZCcsXHJcbiAgICBRVU9UQV9FWENFRURFRDogJ2F1dGgvcXVvdGEtZXhjZWVkZWQnLFxyXG4gICAgUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVI6ICdhdXRoL3JlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyJyxcclxuICAgIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HOiAnYXV0aC9yZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZycsXHJcbiAgICBSRUpFQ1RFRF9DUkVERU5USUFMOiAnYXV0aC9yZWplY3RlZC1jcmVkZW50aWFsJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRDogJ2F1dGgvc2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEOiAnYXV0aC9tYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWQnLFxyXG4gICAgVEVOQU5UX0lEX01JU01BVENIOiAnYXV0aC90ZW5hbnQtaWQtbWlzbWF0Y2gnLFxyXG4gICAgVElNRU9VVDogJ2F1dGgvdGltZW91dCcsXHJcbiAgICBUT0tFTl9FWFBJUkVEOiAnYXV0aC91c2VyLXRva2VuLWV4cGlyZWQnLFxyXG4gICAgVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOiAnYXV0aC90b28tbWFueS1yZXF1ZXN0cycsXHJcbiAgICBVTkFVVEhPUklaRURfRE9NQUlOOiAnYXV0aC91bmF1dGhvcml6ZWQtY29udGludWUtdXJpJyxcclxuICAgIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUjogJ2F1dGgvdW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yJyxcclxuICAgIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFOiAnYXV0aC91bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlJyxcclxuICAgIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT046ICdhdXRoL3Vuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb24nLFxyXG4gICAgVU5WRVJJRklFRF9FTUFJTDogJ2F1dGgvdW52ZXJpZmllZC1lbWFpbCcsXHJcbiAgICBVU0VSX0NBTkNFTExFRDogJ2F1dGgvdXNlci1jYW5jZWxsZWQnLFxyXG4gICAgVVNFUl9ERUxFVEVEOiAnYXV0aC91c2VyLW5vdC1mb3VuZCcsXHJcbiAgICBVU0VSX0RJU0FCTEVEOiAnYXV0aC91c2VyLWRpc2FibGVkJyxcclxuICAgIFVTRVJfTUlTTUFUQ0g6ICdhdXRoL3VzZXItbWlzbWF0Y2gnLFxyXG4gICAgVVNFUl9TSUdORURfT1VUOiAnYXV0aC91c2VyLXNpZ25lZC1vdXQnLFxyXG4gICAgV0VBS19QQVNTV09SRDogJ2F1dGgvd2Vhay1wYXNzd29yZCcsXHJcbiAgICBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRDogJ2F1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQUxSRUFEWV9JTklUSUFMSVpFRDogJ2F1dGgvYWxyZWFkeS1pbml0aWFsaXplZCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ0Vycm9yKG1zZywgLi4uYXJncykge1xyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvcihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZmFpbChhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVFcnJvcihhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcHJvZEVycm9yTWFwKCkpLCB7IFtjb2RlXTogbWVzc2FnZSB9KTtcclxuICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXApO1xyXG4gICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGNvZGUsIHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBvYmplY3QsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBjb25zdHJ1Y3Rvckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvckluc3RhbmNlKSkge1xyXG4gICAgICAgIGlmIChjb25zdHJ1Y3Rvckluc3RhbmNlLm5hbWUgIT09IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgYFR5cGUgb2YgJHtvYmplY3QuY29uc3RydWN0b3IubmFtZX0gZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgaW5zdGFuY2UuYCArXHJcbiAgICAgICAgICAgIGBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBBdXRoIFNESz9gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIGlmICh0eXBlb2YgYXV0aE9yQ29kZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zdCBjb2RlID0gcmVzdFswXTtcclxuICAgICAgICBjb25zdCBmdWxsUGFyYW1zID0gWy4uLnJlc3Quc2xpY2UoMSldO1xyXG4gICAgICAgIGlmIChmdWxsUGFyYW1zWzBdKSB7XHJcbiAgICAgICAgICAgIGZ1bGxQYXJhbXNbMF0uYXBwTmFtZSA9IGF1dGhPckNvZGUubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF1dGhPckNvZGUuX2Vycm9yRmFjdG9yeS5jcmVhdGUoY29kZSwgLi4uZnVsbFBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZLmNyZWF0ZShhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0KGFzc2VydGlvbiwgYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIGludGVybmFsIGVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBmYWlsdXJlIHR5cGUgb2YgZmFpbHVyZSBlbmNvdW50ZXJlZFxyXG4gKiBAdGhyb3dzIEVycm9yXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0ZhaWwoZmFpbHVyZSkge1xyXG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxyXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGZhaWx1cmU7XHJcbiAgICBfbG9nRXJyb3IobWVzc2FnZSk7XHJcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZWJhc2VFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXNzZXJ0aW9uXHJcbiAqIEBwYXJhbSBtZXNzYWdlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0Fzc2VydChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgZGVidWdGYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGluc3RhbmNlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIF9nZXRJbnN0YW5jZShjbHMpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNscyBpbnN0YW5jZW9mIEZ1bmN0aW9uLCAnRXhwZWN0ZWQgYSBjbGFzcyBkZWZpbml0aW9uJyk7XHJcbiAgICBsZXQgaW5zdGFuY2UgPSBpbnN0YW5jZUNhY2hlLmdldChjbHMpO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoaW5zdGFuY2UgaW5zdGFuY2VvZiBjbHMsICdJbnN0YW5jZSBzdG9yZWQgaW4gY2FjaGUgbWlzbWF0Y2hlZCB3aXRoIGNsYXNzJyk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaW5zdGFuY2UgPSBuZXcgY2xzKCk7XHJcbiAgICBpbnN0YW5jZUNhY2hlLnNldChjbHMsIGluc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgYW4ge0BsaW5rIEF1dGh9IGluc3RhbmNlIHdpdGggZmluZS1ncmFpbmVkIGNvbnRyb2wgb3ZlclxyXG4gKiB7QGxpbmsgRGVwZW5kZW5jaWVzfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgbW9yZSBjb250cm9sIG92ZXIgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0aGFuXHJcbiAqIHtAbGluayBnZXRBdXRofS4gYGdldEF1dGhgIHVzZXMgcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdHMgdG8gc3VwcGx5XHJcbiAqIHRoZSB7QGxpbmsgRGVwZW5kZW5jaWVzfS4gSW4gZ2VuZXJhbCwgYGdldEF1dGhgIGlzIHRoZSBlYXNpZXN0IHdheSB0b1xyXG4gKiBpbml0aWFsaXplIEF1dGggYW5kIHdvcmtzIGZvciBtb3N0IHVzZSBjYXNlcy4gVXNlIGBpbml0aWFsaXplQXV0aGAgaWYgeW91XHJcbiAqIG5lZWQgY29udHJvbCBvdmVyIHdoaWNoIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzZWQsIG9yIHRvIG1pbmltaXplIGJ1bmRsZVxyXG4gKiBzaXplIGlmIHlvdSdyZSBub3QgdXNpbmcgZWl0aGVyIGBzaWduSW5XaXRoUG9wdXBgIG9yIGBzaWduSW5XaXRoUmVkaXJlY3RgLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBhcHAgb25seSB1c2VzIGFub255bW91cyBhY2NvdW50cyBhbmQgeW91IG9ubHkgd2FudFxyXG4gKiBhY2NvdW50cyBzYXZlZCBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiwgaW5pdGlhbGl6ZSBgQXV0aGAgd2l0aDpcclxuICpcclxuICogYGBganNcclxuICogY29uc3QgYXV0aCA9IGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gKiAgIHBlcnNpc3RlbmNlOiBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLFxyXG4gKiAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogdW5kZWZpbmVkLFxyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBdXRoKGFwcCwgZGVwcykge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsT3B0aW9ucyA9IHByb3ZpZGVyLmdldE9wdGlvbnMoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKGluaXRpYWxPcHRpb25zLCBkZXBzICE9PSBudWxsICYmIGRlcHMgIT09IHZvaWQgMCA/IGRlcHMgOiB7fSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnM6IGRlcHMgfSk7XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5mdW5jdGlvbiBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucGVyc2lzdGVuY2UpIHx8IFtdO1xyXG4gICAgY29uc3QgaGllcmFyY2h5ID0gKEFycmF5LmlzQXJyYXkocGVyc2lzdGVuY2UpID8gcGVyc2lzdGVuY2UgOiBbcGVyc2lzdGVuY2VdKS5tYXAoX2dldEluc3RhbmNlKTtcclxuICAgIGlmIChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMuZXJyb3JNYXApIHtcclxuICAgICAgICBhdXRoLl91cGRhdGVFcnJvck1hcChkZXBzLmVycm9yTWFwKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgcHJvbWlzZSBpcyBpbnRlbmRlZCB0byBmbG9hdDsgYXV0aCBpbml0aWFsaXphdGlvbiBoYXBwZW5zIGluIHRoZVxyXG4gICAgLy8gYmFja2dyb3VuZCwgbWVhbndoaWxlIHRoZSBhdXRoIG9iamVjdCBtYXkgYmUgdXNlZCBieSB0aGUgYXBwLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgYXV0aC5faW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZShoaWVyYXJjaHksIGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50VXJsKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ocmVmKSkgfHwgJyc7XHJcbn1cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFNjaGVtZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvdG9jb2wpKSB8fCBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnJvd3NlciBpcyB3b3JraW5nIG9ubGluZVxyXG4gKi9cclxuZnVuY3Rpb24gX2lzT25saW5lKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ29uTGluZScgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5vbkxpbmUgPT09ICdib29sZWFuJyAmJlxyXG4gICAgICAgIC8vIEFwcGx5IG9ubHkgZm9yIHRyYWRpdGlvbmFsIHdlYiBhcHBzIGFuZCBDaHJvbWUgZXh0ZW5zaW9ucy5cclxuICAgICAgICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgdHJ1ZSBmb3IgQ29yZG92YSBhcHBzIHdoaWNoIGhhdmUgdW5yZWxpYWJsZVxyXG4gICAgICAgIC8vIG5hdmlnYXRvci5vbkxpbmUgYmVoYXZpb3IgdW5sZXNzIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24gaXNcclxuICAgICAgICAvLyBpbnN0YWxsZWQgd2hpY2ggb3ZlcndyaXRlcyB0aGUgbmF0aXZlIG5hdmlnYXRvci5vbkxpbmUgdmFsdWUgYW5kXHJcbiAgICAgICAgLy8gZGVmaW5lcyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5cclxuICAgICAgICAoX2lzSHR0cE9ySHR0cHMoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAnY29ubmVjdGlvbicgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iub25MaW5lO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgd2UgY2FuJ3QgZGV0ZXJtaW5lIHRoZSBzdGF0ZSwgYXNzdW1lIGl0IGlzIG9ubGluZS5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRVc2VyTGFuZ3VhZ2UoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5hdmlnYXRvckxhbmd1YWdlID0gbmF2aWdhdG9yO1xyXG4gICAgcmV0dXJuIChcclxuICAgIC8vIE1vc3QgcmVsaWFibGUsIGJ1dCBvbmx5IHN1cHBvcnRlZCBpbiBDaHJvbWUvRmlyZWZveC5cclxuICAgIChuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2VzWzBdKSB8fFxyXG4gICAgICAgIC8vIFN1cHBvcnRlZCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmV0dXJucyB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyBVSSwgbm90IHRoZSBsYW5ndWFnZSBzZXQgaW4gYnJvd3NlciBzZXR0aW5ncy5cclxuICAgICAgICBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZSB8fFxyXG4gICAgICAgIC8vIENvdWxkbid0IGRldGVybWluZSBsYW5ndWFnZS5cclxuICAgICAgICBudWxsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBzdHJ1Y3R1cmUgdG8gaGVscCBwaWNrIGJldHdlZW4gYSByYW5nZSBvZiBsb25nIGFuZCBzaG9ydCBkZWxheSBkdXJhdGlvbnNcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiBJbiBnZW5lcmFsLCB0aGUgbG9uZyBkZWxheSBpcyB1c2VkIGZvclxyXG4gKiBtb2JpbGUgZW52aXJvbm1lbnRzIHdoZXJlYXMgc2hvcnQgZGVsYXlzIGFyZSB1c2VkIGZvciBkZXNrdG9wIGVudmlyb25tZW50cy5cclxuICovXHJcbmNsYXNzIERlbGF5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNob3J0RGVsYXksIGxvbmdEZWxheSkge1xyXG4gICAgICAgIHRoaXMuc2hvcnREZWxheSA9IHNob3J0RGVsYXk7XHJcbiAgICAgICAgdGhpcy5sb25nRGVsYXkgPSBsb25nRGVsYXk7XHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZXJyb3Igd2hlbiBpbXByb3Blcmx5IGluaXRpYWxpemVkLlxyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGxvbmdEZWxheSA+IHNob3J0RGVsYXksICdTaG9ydCBkZWxheSBzaG91bGQgYmUgbGVzcyB0aGFuIGxvbmcgZGVsYXkhJyk7XHJcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9IGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKTtcclxuICAgIH1cclxuICAgIGdldCgpIHtcclxuICAgICAgICBpZiAoIV9pc09ubGluZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIFBpY2sgdGhlIHNob3J0ZXIgdGltZW91dC5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKDUwMDAgLyogT0ZGTElORSAqLywgdGhpcy5zaG9ydERlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgcnVubmluZyBpbiBhIG1vYmlsZSBlbnZpcm9ubWVudCwgcmV0dXJuIHRoZSBsb25nIGRlbGF5LCBvdGhlcndpc2VcclxuICAgICAgICAvLyByZXR1cm4gdGhlIHNob3J0IGRlbGF5LlxyXG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgaW1wcm92ZWQgaW4gdGhlIGZ1dHVyZSB0byBkeW5hbWljYWxseSBjaGFuZ2UgYmFzZWQgb24gb3RoZXJcclxuICAgICAgICAvLyB2YXJpYWJsZXMgaW5zdGVhZCBvZiBqdXN0IHJlYWRpbmcgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB0aGlzLmxvbmdEZWxheSA6IHRoaXMuc2hvcnREZWxheTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZW11bGF0b3JVcmwoY29uZmlnLCBwYXRoKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjb25maWcuZW11bGF0b3IsICdFbXVsYXRvciBzaG91bGQgYWx3YXlzIGJlIHNldCBoZXJlJyk7XHJcbiAgICBjb25zdCB7IHVybCB9ID0gY29uZmlnLmVtdWxhdG9yO1xyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHt1cmx9JHtwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRofWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmV0Y2hQcm92aWRlciB7XHJcbiAgICBzdGF0aWMgaW5pdGlhbGl6ZShmZXRjaEltcGwsIGhlYWRlcnNJbXBsLCByZXNwb25zZUltcGwpIHtcclxuICAgICAgICB0aGlzLmZldGNoSW1wbCA9IGZldGNoSW1wbDtcclxuICAgICAgICBpZiAoaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzSW1wbCA9IGhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VJbXBsID0gcmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBmZXRjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mZXRjaEltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdmZXRjaCcgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBoZWFkZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdIZWFkZXJzJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgSGVhZGVycyBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZXNwb25zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdSZXNwb25zZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBSZXNwb25zZSBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwIGZyb20gZXJyb3JzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgdG8gZXJyb3JzIHRvIGRldmVsb3BlciB2aXNpYmxlIGVycm9yc1xyXG4gKi9cclxuY29uc3QgU0VSVkVSX0VSUk9SX01BUCA9IHtcclxuICAgIC8vIEN1c3RvbSB0b2tlbiBlcnJvcnMuXHJcbiAgICBbXCJDUkVERU5USUFMX01JU01BVENIXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106IFwiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ1VTVE9NX1RPS0VOXCIgLyogTUlTU0lOR19DVVNUT01fVE9LRU4gKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBDcmVhdGUgQXV0aCBVUkkgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9JREVOVElGSUVSXCIgLyogSU5WQUxJRF9JREVOVElGSUVSICovXTogXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ09OVElOVUVfVVJJXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXHJcbiAgICBbXCJJTlZBTElEX1BBU1NXT1JEXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106IFwid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19QQVNTV09SRFwiIC8qIE1JU1NJTkdfUEFTU1dPUkQgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycy5cclxuICAgIFtcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqL106IFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sXHJcbiAgICBbXCJQQVNTV09SRF9MT0dJTl9ESVNBQkxFRFwiIC8qIFBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEICovXTogXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi8sXHJcbiAgICAvLyBWZXJpZnkgYXNzZXJ0aW9uIGZvciBzaWduIGluIHdpdGggY3JlZGVudGlhbCBlcnJvcnM6XHJcbiAgICBbXCJJTlZBTElEX0lEUF9SRVNQT05TRVwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIElOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovXTogXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfUkVRX1RZUEVcIiAvKiBNSVNTSU5HX1JFUV9UWVBFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2VuZCBQYXNzd29yZCByZXNldCBlbWFpbCBlcnJvcnM6XHJcbiAgICBbXCJFTUFJTF9OT1RfRk9VTkRcIiAvKiBFTUFJTF9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovLFxyXG4gICAgW1wiUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUXCIgLyogUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIFtcIkVYUElSRURfT09CX0NPREVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfT09CX0NPREVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfT09CX0NPREVcIiAvKiBNSVNTSU5HX09PQl9DT0RFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gT3BlcmF0aW9ucyB0aGF0IHJlcXVpcmUgSUQgdG9rZW4gaW4gcmVxdWVzdDpcclxuICAgIFtcIkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTlwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106IFwicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovLFxyXG4gICAgW1wiSU5WQUxJRF9JRF9UT0tFTlwiIC8qIElOVkFMSURfSURfVE9LRU4gKi9dOiBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyxcclxuICAgIFtcIlRPS0VOX0VYUElSRURcIiAvKiBUT0tFTl9FWFBJUkVEICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGVycm9ycy5cclxuICAgIFtcIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUlwiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9DT0RFXCIgLyogSU5WQUxJRF9DT0RFICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9TRVNTSU9OX0lORk9cIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106IFwiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIklOVkFMSURfVEVNUE9SQVJZX1BST09GXCIgLyogSU5WQUxJRF9URU1QT1JBUllfUFJPT0YgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiTUlTU0lOR19TRVNTSU9OX0lORk9cIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqL106IFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIlNFU1NJT05fRVhQSVJFRFwiIC8qIFNFU1NJT05fRVhQSVJFRCAqL106IFwiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgYWN0aW9uIGNvZGUgZXJyb3JzIHdoZW4gYWRkaXRpb25hbCBzZXR0aW5ncyBwYXNzZWQuXHJcbiAgICAvLyBNSVNTSU5HX0NPTlRJTlVFX1VSSSBpcyBnZXR0aW5nIG1hcHBlZCB0byBJTlRFUk5BTF9FUlJPUiBhYm92ZS5cclxuICAgIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxyXG4gICAgW1wiTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8sXHJcbiAgICBbXCJVTkFVVEhPUklaRURfRE9NQUlOXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106IFwidW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi8sXHJcbiAgICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cclxuICAgIFtcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiBcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi8sXHJcbiAgICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cclxuICAgIFtcIkFETUlOX09OTFlfT1BFUkFUSU9OXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiBcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi8sXHJcbiAgICAvLyBNdWx0aSBmYWN0b3IgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EXCIgLyogTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EICovXTogXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEXCIgLyogTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9FWElTVFNcIiAvKiBTRUNPTkRfRkFDVE9SX0VYSVNUUyAqL106IFwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovLFxyXG4gICAgLy8gQmxvY2tpbmcgZnVuY3Rpb25zIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0VcIiAvKiBCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyAoRmV0Y2hQcm92aWRlci5oZWFkZXJzKCkpKCk7XHJcbiAgICAgICAgaGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIiAvKiBDT05URU5UX1RZUEUgKi8sICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgICAgaGVhZGVycy5zZXQoXCJYLUNsaWVudC1WZXJzaW9uXCIgLyogWF9DTElFTlRfVkVSU0lPTiAqLywgYXV0aC5fZ2V0U2RrQ2xpZW50VmVyc2lvbigpKTtcclxuICAgICAgICBpZiAoYXV0aC5sYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJYLUZpcmViYXNlLUxvY2FsZVwiIC8qIFhfRklSRUJBU0VfTE9DQUxFICovLCBhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkoX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGF1dGguY29uZmlnLmFwaUhvc3QsIHBhdGgsIHF1ZXJ5KSwgT2JqZWN0LmFzc2lnbih7IG1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVycywgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicgfSwgYm9keSkpO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBmZXRjaEZuKSB7XHJcbiAgICBhdXRoLl9jYW5Jbml0RW11bGF0b3IgPSBmYWxzZTtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBTRVJWRVJfRVJST1JfTUFQKSwgY3VzdG9tRXJyb3JNYXApO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IG5ldyBOZXR3b3JrVGltZW91dChhdXRoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoRm4oKSxcclxuICAgICAgICAgICAgbmV0d29ya1RpbWVvdXQucHJvbWlzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCwgdGhlIGZldGNoIHN1Y2NlZWRlZCBhbmQgdGhlIG5ldHdvcmtUaW1lb3V0XHJcbiAgICAgICAgLy8gZGlkbid0IHRocm93OyBjbGVhciB0aGUgbmV0d29yayB0aW1lb3V0IGRlbGF5IHNvIHRoYXQgTm9kZSB3b24ndCBoYW5nXHJcbiAgICAgICAgbmV0d29ya1RpbWVvdXQuY2xlYXJOZXR3b3JrVGltZW91dCgpO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgaWYgKCduZWVkQ29uZmlybWF0aW9uJyBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgISgnZXJyb3JNZXNzYWdlJyBpbiBqc29uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm9rID8ganNvbi5lcnJvck1lc3NhZ2UgOiBqc29uLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFtzZXJ2ZXJFcnJvckNvZGUsIHNlcnZlckVycm9yTWVzc2FnZV0gPSBlcnJvck1lc3NhZ2Uuc3BsaXQoJyA6ICcpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhdXRoRXJyb3IgPSBlcnJvck1hcFtzZXJ2ZXJFcnJvckNvZGVdIHx8XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvckNvZGVcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bX1xcc10rL2csICctJyk7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJFcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGF1dGhFcnJvciwgc2VydmVyRXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIGF1dGhFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfZmFpbChhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCkpO1xyXG4gICAgaWYgKCdtZmFQZW5kaW5nQ3JlZGVudGlhbCcgaW4gc2VydmVyUmVzcG9uc2UpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovLCB7XHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogc2VydmVyUmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZXJ2ZXJSZXNwb25zZTtcclxufVxyXG5mdW5jdGlvbiBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgaG9zdCwgcGF0aCwgcXVlcnkpIHtcclxuICAgIGNvbnN0IGJhc2UgPSBgJHtob3N0fSR7cGF0aH0/JHtxdWVyeX1gO1xyXG4gICAgaWYgKCFhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgJHthdXRoLmNvbmZpZy5hcGlTY2hlbWV9Oi8vJHtiYXNlfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGF1dGguY29uZmlnLCBiYXNlKTtcclxufVxyXG5jbGFzcyBOZXR3b3JrVGltZW91dCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgYXJlIGZ1bmRhbWVudGFsbHkgaW5jb21wYXRpYmxlLCBidXQgd2VcclxuICAgICAgICAvLyBkb24ndCBjYXJlIGFib3V0IHRoZSB2YWx1ZSBoZXJlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJ0aW1lb3V0XCIgLyogVElNRU9VVCAqLykpO1xyXG4gICAgICAgICAgICB9LCBERUZBVUxUX0FQSV9USU1FT1VUX01TLmdldCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyTmV0d29ya1RpbWVvdXQoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgY29kZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGVycm9yUGFyYW1zID0ge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfTtcclxuICAgIGlmIChyZXNwb25zZS5lbWFpbCkge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLmVtYWlsID0gcmVzcG9uc2UuZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzcG9uc2UucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lTnVtYmVyO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoYXV0aCwgY29kZSwgZXJyb3JQYXJhbXMpO1xyXG4gICAgLy8gV2Uga25vdyBjdXN0b21EYXRhIGlzIGRlZmluZWQgb24gZXJyb3IgYmVjYXVzZSBlcnJvclBhcmFtcyBpcyBkZWZpbmVkXHJcbiAgICBlcnJvci5jdXN0b21EYXRhLl90b2tlblJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjb3VudChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmRlbGV0ZVwiIC8qIERFTEVURV9BQ0NPVU5UICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVMaW5rZWRBY2NvdW50cyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6bG9va3VwXCIgLyogR0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHV0Y1RpbWVzdGFtcCkge1xyXG4gICAgaWYgKCF1dGNUaW1lc3RhbXApIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIGRhdGUgb2JqZWN0LlxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShOdW1iZXIodXRjVGltZXN0YW1wKSk7XHJcbiAgICAgICAgLy8gVGVzdCBkYXRlIGlzIHZhbGlkLlxyXG4gICAgICAgIGlmICghaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gVVRDIGRhdGUgc3RyaW5nLlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZy4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldElkVG9rZW4odXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZGVzZXJpYWxpemVkIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpdGZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcclxuICogbWludXRlcy4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgdG9rZW4gYW5kIHJldHVybiBhIG5ldyBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWRUb2tlblJlc3VsdCh1c2VyLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgY29uc3QgY2xhaW1zID0gX3BhcnNlVG9rZW4odG9rZW4pO1xyXG4gICAgX2Fzc2VydChjbGFpbXMgJiYgY2xhaW1zLmV4cCAmJiBjbGFpbXMuYXV0aF90aW1lICYmIGNsYWltcy5pYXQsIHVzZXJJbnRlcm5hbC5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgZmlyZWJhc2UgPSB0eXBlb2YgY2xhaW1zLmZpcmViYXNlID09PSAnb2JqZWN0JyA/IGNsYWltcy5maXJlYmFzZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICBhdXRoVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuYXV0aF90aW1lKSksXHJcbiAgICAgICAgaXNzdWVkQXRUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5pYXQpKSxcclxuICAgICAgICBleHBpcmF0aW9uVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuZXhwKSksXHJcbiAgICAgICAgc2lnbkluUHJvdmlkZXI6IHNpZ25JblByb3ZpZGVyIHx8IG51bGwsXHJcbiAgICAgICAgc2lnbkluU2Vjb25kRmFjdG9yOiAoZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3NlY29uZF9mYWN0b3InXSkgfHwgbnVsbFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoc2Vjb25kcykge1xyXG4gICAgcmV0dXJuIE51bWJlcihzZWNvbmRzKSAqIDEwMDA7XHJcbn1cclxuZnVuY3Rpb24gX3BhcnNlVG9rZW4odG9rZW4pIHtcclxuICAgIGNvbnN0IFthbGdvcml0aG0sIHBheWxvYWQsIHNpZ25hdHVyZV0gPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgaWYgKGFsZ29yaXRobSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgcGF5bG9hZCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgc2lnbmF0dXJlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0pXVCBtYWxmb3JtZWQsIGNvbnRhaW5lZCBmZXdlciB0aGFuIDMgc2VjdGlvbnMnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NERlY29kZShwYXlsb2FkKTtcclxuICAgICAgICBpZiAoIWRlY29kZWQpIHtcclxuICAgICAgICAgICAgX2xvZ0Vycm9yKCdGYWlsZWQgdG8gZGVjb2RlIGJhc2U2NCBKV1QgcGF5bG9hZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIF9sb2dFcnJvcignQ2F1Z2h0IGVycm9yIHBhcnNpbmcgSldUIHBheWxvYWQgYXMgSlNPTicsIGUpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IGV4cGlyZXNJbiBUVEwgZnJvbSBhIHRva2VuIGJ5IHN1YnRyYWN0aW5nIHRoZSBleHBpcmF0aW9uIGZyb20gdGhlIGlzc3VhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3Rva2VuRXhwaXJlc0luKHRva2VuKSB7XHJcbiAgICBjb25zdCBwYXJzZWRUb2tlbiA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQocGFyc2VkVG9rZW4sIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5leHAgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uaWF0ICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBOdW1iZXIocGFyc2VkVG9rZW4uZXhwKSAtIE51bWJlcihwYXJzZWRUb2tlbi5pYXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHByb21pc2UsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAoYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiYgaXNVc2VySW52YWxpZGF0ZWQoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXIuYXV0aC5jdXJyZW50VXNlciA9PT0gdXNlcikge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlci5hdXRoLnNpZ25PdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzVXNlckludmFsaWRhdGVkKHsgY29kZSB9KSB7XHJcbiAgICByZXR1cm4gKGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL31gIHx8XHJcbiAgICAgICAgY29kZSA9PT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUHJvYWN0aXZlUmVmcmVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgIH1cclxuICAgIF9zdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xyXG4gICAgfVxyXG4gICAgX3N0b3AoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRJbnRlcnZhbCh3YXNFcnJvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAod2FzRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmVycm9yQmFja29mZjtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSBNYXRoLm1pbih0aGlzLmVycm9yQmFja29mZiAqIDIsIDk2MDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01BWCAqLyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlcnJvciBiYWNrb2ZmXHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cFRpbWUgPSAoX2EgPSB0aGlzLnVzZXIuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGV4cFRpbWUgLSBEYXRlLm5vdygpIC0gMzAwMDAwIC8qIE9GRlNFVCAqLztcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzY2hlZHVsZSh3YXNFcnJvciA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICAvLyBKdXN0IGluIGNhc2UuLi5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZ2V0SW50ZXJ2YWwod2FzRXJyb3IpO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZXJhdGlvbigpO1xyXG4gICAgICAgIH0sIGludGVydmFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGl0ZXJhdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gT25seSByZXRyeSBvbiBuZXR3b3JrIGVycm9yc1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlID09PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgvKiB3YXNFcnJvciAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyTWV0YWRhdGEge1xyXG4gICAgY29uc3RydWN0b3IoY3JlYXRlZEF0LCBsYXN0TG9naW5BdCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xyXG4gICAgICAgIHRoaXMubGFzdExvZ2luQXQgPSBsYXN0TG9naW5BdDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVUaW1lKCkge1xyXG4gICAgICAgIHRoaXMubGFzdFNpZ25JblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5sYXN0TG9naW5BdCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGlvblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5jcmVhdGVkQXQpO1xyXG4gICAgfVxyXG4gICAgX2NvcHkobWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IG1ldGFkYXRhLmNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbWV0YWRhdGEubGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdDogdGhpcy5sYXN0TG9naW5BdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aCA9IHVzZXIuYXV0aDtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgZ2V0QWNjb3VudEluZm8oYXV0aCwgeyBpZFRva2VuIH0pKTtcclxuICAgIF9hc3NlcnQocmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLnVzZXJzLmxlbmd0aCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGNvcmVBY2NvdW50ID0gcmVzcG9uc2UudXNlcnNbMF07XHJcbiAgICB1c2VyLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcihjb3JlQWNjb3VudCk7XHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSAoKF9hID0gY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aClcclxuICAgICAgICA/IGV4dHJhY3RQcm92aWRlckRhdGEoY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbylcclxuICAgICAgICA6IFtdO1xyXG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gbWVyZ2VQcm92aWRlckRhdGEodXNlci5wcm92aWRlckRhdGEsIG5ld1Byb3ZpZGVyRGF0YSk7XHJcbiAgICAvLyBQcmVzZXJ2ZXMgdGhlIG5vbi1ub255bW91cyBzdGF0dXMgb2YgdGhlIHN0b3JlZCB1c2VyLCBldmVuIGlmIG5vIG1vcmVcclxuICAgIC8vIGNyZWRlbnRpYWxzIChmZWRlcmF0ZWQgb3IgZW1haWwvcGFzc3dvcmQpIGFyZSBsaW5rZWQgdG8gdGhlIHVzZXIuIElmXHJcbiAgICAvLyB0aGUgdXNlciB3YXMgcHJldmlvdXNseSBhbm9ueW1vdXMsIHRoZW4gdXNlIHByb3ZpZGVyIGRhdGEgdG8gdXBkYXRlLlxyXG4gICAgLy8gT24gdGhlIG90aGVyIGhhbmQsIGlmIGl0IHdhcyBub3QgYW5vbnltb3VzIGJlZm9yZSwgaXQgc2hvdWxkIG5ldmVyIGJlXHJcbiAgICAvLyBjb25zaWRlcmVkIGFub255bW91cyBub3cuXHJcbiAgICBjb25zdCBvbGRJc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCBuZXdJc0Fub255bW91cyA9ICEodXNlci5lbWFpbCAmJiBjb3JlQWNjb3VudC5wYXNzd29yZEhhc2gpICYmICEocHJvdmlkZXJEYXRhID09PSBudWxsIHx8IHByb3ZpZGVyRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvdmlkZXJEYXRhLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpc0Fub255bW91cyA9ICFvbGRJc0Fub255bW91cyA/IGZhbHNlIDogbmV3SXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCB1cGRhdGVzID0ge1xyXG4gICAgICAgIHVpZDogY29yZUFjY291bnQubG9jYWxJZCxcclxuICAgICAgICBkaXNwbGF5TmFtZTogY29yZUFjY291bnQuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbDogY29yZUFjY291bnQuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiBjb3JlQWNjb3VudC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBjb3JlQWNjb3VudC50ZW5hbnRJZCB8fCBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVyRGF0YSxcclxuICAgICAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcclxuICAgICAgICBpc0Fub255bW91c1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlcyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbG9hZHMgdXNlciBhY2NvdW50IGRhdGEsIGlmIHNpZ25lZCBpbi5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVsb2FkKHVzZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXJJbnRlcm5hbCk7XHJcbiAgICAvLyBFdmVuIHRob3VnaCB0aGUgY3VycmVudCB1c2VyIGhhc24ndCBjaGFuZ2VkLCB1cGRhdGVcclxuICAgIC8vIGN1cnJlbnQgdXNlciB3aWxsIHRyaWdnZXIgYSBwZXJzaXN0ZW5jZSB1cGRhdGUgdy8gdGhlXHJcbiAgICAvLyBuZXcgaW5mby5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgdXNlckludGVybmFsLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlUHJvdmlkZXJEYXRhKG9yaWdpbmFsLCBuZXdEYXRhKSB7XHJcbiAgICBjb25zdCBkZWR1cGVkID0gb3JpZ2luYWwuZmlsdGVyKG8gPT4gIW5ld0RhdGEuc29tZShuID0+IG4ucHJvdmlkZXJJZCA9PT0gby5wcm92aWRlcklkKSk7XHJcbiAgICByZXR1cm4gWy4uLmRlZHVwZWQsIC4uLm5ld0RhdGFdO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckRhdGEocHJvdmlkZXJzKSB7XHJcbiAgICByZXR1cm4gcHJvdmlkZXJzLm1hcCgoX2EpID0+IHtcclxuICAgICAgICB2YXIgeyBwcm92aWRlcklkIH0gPSBfYSwgcHJvdmlkZXIgPSBfX3Jlc3QoX2EsIFtcInByb3ZpZGVySWRcIl0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHVpZDogcHJvdmlkZXIucmF3SWQgfHwgJycsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwcm92aWRlci5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgICAgICBlbWFpbDogcHJvdmlkZXIuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHByb3ZpZGVyLnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob3RvVVJMOiBwcm92aWRlci5waG90b1VybCB8fCBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RTdHNUb2tlbihhdXRoLCByZWZyZXNoVG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIHt9LCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHF1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsXHJcbiAgICAgICAgICAgICdyZWZyZXNoX3Rva2VuJzogcmVmcmVzaFRva2VuXHJcbiAgICAgICAgfSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgeyB0b2tlbkFwaUhvc3QsIGFwaUtleSB9ID0gYXV0aC5jb25maWc7XHJcbiAgICAgICAgY29uc3QgdXJsID0gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIHRva2VuQXBpSG9zdCwgXCIvdjEvdG9rZW5cIiAvKiBUT0tFTiAqLywgYGtleT0ke2FwaUtleX1gKTtcclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiIC8qIFBPU1QgKi8sXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdYLUNsaWVudC1WZXJzaW9uJzogYXV0aC5fZ2V0U2RrQ2xpZW50VmVyc2lvbigpLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbWVzIGJhY2sgaW4gc25ha2VfY2FzZS4gQ29udmVydCB0byBjYW1lbDpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbixcclxuICAgICAgICBleHBpcmVzSW46IHJlc3BvbnNlLmV4cGlyZXNfaW4sXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZS5yZWZyZXNoX3Rva2VuXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIFRPS0VOX1JFRlJFU0ggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgZXhwaXJlc0luID0gJ2V4cGlyZXNJbicgaW4gcmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgPyBOdW1iZXIocmVzcG9uc2UuZXhwaXJlc0luKVxyXG4gICAgICAgICAgICA6IF90b2tlbkV4cGlyZXNJbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24ocmVzcG9uc2UuaWRUb2tlbiwgcmVzcG9uc2UucmVmcmVzaFRva2VuLCBleHBpcmVzSW4pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oYXV0aCwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLmFjY2Vzc1Rva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuLCBhdXRoLCBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIHRoaXMuYWNjZXNzVG9rZW4gJiYgIXRoaXMuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKGF1dGgsIHRoaXMucmVmcmVzaFRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xlYXJSZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaChhdXRoLCBvbGRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgb2xkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBOdW1iZXIoZXhwaXJlc0luKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJblNlYykge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW5TZWMgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKGFwcE5hbWUsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChleHBpcmF0aW9uVGltZSkge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBleHBpcmF0aW9uVGltZSA9PT0gJ251bWJlcicsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHRoaXMuZXhwaXJhdGlvblRpbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbihzdHNUb2tlbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBfcGVyZm9ybVJlZnJlc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoYXNzZXJ0aW9uLCBhcHBOYW1lKSB7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhc3NlcnRpb24gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhc3NlcnRpb24gPT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxufVxyXG5jbGFzcyBVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfYSkge1xyXG4gICAgICAgIHZhciB7IHVpZCwgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyIH0gPSBfYSwgb3B0ID0gX19yZXN0KF9hLCBbXCJ1aWRcIiwgXCJhdXRoXCIsIFwic3RzVG9rZW5NYW5hZ2VyXCJdKTtcclxuICAgICAgICAvLyBGb3IgdGhlIHVzZXIgb2JqZWN0LCBwcm92aWRlciBpcyBhbHdheXMgRmlyZWJhc2UuXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gXCJmaXJlYmFzZVwiIC8qIEZJUkVCQVNFICovO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHVzZXIudGVuYW50SWQ7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSB1c2VyLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEuX2NvcHkodXNlci5tZXRhZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Fzc2lnbih1c2VyLnN0c1Rva2VuTWFuYWdlcik7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzKSwgeyBhdXRoLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpIH0pKTtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IFN0c1Rva2VuTWFuYWdlci5mcm9tSlNPTih0aGlzLm5hbWUsIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob25lTnVtYmVyLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob3RvVVJMLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHRlbmFudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKF9yZWRpcmVjdEV2ZW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoY3JlYXRlZEF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGxhc3RMb2dpbkF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIHBob3RvVVJMLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVuYW50SWQsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm92aWRlckRhdGEgJiYgQXJyYXkuaXNBcnJheShwcm92aWRlckRhdGEpKSB7XHJcbiAgICAgICAgICAgIHVzZXIucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IF9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gYXV0aFxyXG4gICAgICogQHBhcmFtIGlkVG9rZW5SZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIHN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZDogaWRUb2tlblJlc3BvbnNlLmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxyXG4gICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBQRVJTSVNURU5DRSAqL306JHtrZXl9OiR7YXBpS2V5fToke2FwcE5hbWV9YDtcclxufVxyXG5jbGFzcyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXNlcktleTtcclxuICAgICAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xyXG4gICAgICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFwicGVyc2lzdGVuY2VcIiAvKiBQRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBBVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBPUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIElFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBFREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIFNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIFdFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIFNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kudGVzdCh1YSkgfHxcclxuICAgICAgICAvKGlQYWR8aVBob25lfGlQb2QpLipPUyA4X1xcZC9pLnRlc3QodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1NTdGFuZGFsb25lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuIF9pc0lPUyh1YSkgJiYgISEoKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YW5kYWxvbmUpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFMTAoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gMTA7XHJcbn1cclxuZnVuY3Rpb24gX2lzTW9iaWxlQnJvd3Nlcih1YSA9IGdldFVBKCkpIHtcclxuICAgIC8vIFRPRE86IGltcGxlbWVudCBnZXRCcm93c2VyTmFtZSBlcXVpdmFsZW50IGZvciBPUy5cclxuICAgIHJldHVybiAoX2lzSU9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWQodWEpIHx8XHJcbiAgICAgICAgX2lzV2ViT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQmxhY2tCZXJyeSh1YSkgfHxcclxuICAgICAgICAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgX2lzSUVNb2JpbGUodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJZnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cclxuICAgICAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBTREsgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtLCBmcmFtZXdvcmtzID0gW10pIHtcclxuICAgIGxldCByZXBvcnRlZFBsYXRmb3JtO1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLzpcclxuICAgICAgICAgICAgLy8gSW4gYSBicm93c2VyIGVudmlyb25tZW50LCByZXBvcnQgdGhlIGJyb3dzZXIgbmFtZS5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IF9nZXRCcm93c2VyTmFtZShnZXRVQSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgYSB3b3JrZXIgcnVucyBmcm9tIGEgYnJvd3NlciBidXQgd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGFcclxuICAgICAgICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxyXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogQ2hyb21lLVdvcmtlci9Kc0NvcmUvNC45LjEvRmlyZWJhc2VDb3JlLXdlYi5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGAke19nZXRCcm93c2VyTmFtZShnZXRVQSgpKX0tJHtjbGllbnRQbGF0Zm9ybX1gO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gY2xpZW50UGxhdGZvcm07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRlZEZyYW1ld29ya3MgPSBmcmFtZXdvcmtzLmxlbmd0aFxyXG4gICAgICAgID8gZnJhbWV3b3Jrcy5qb2luKCcsJylcclxuICAgICAgICA6ICdGaXJlYmFzZUNvcmUtd2ViJzsgLyogZGVmYXVsdCB2YWx1ZSBpZiBubyBvdGhlciBmcmFtZXdvcmsgaXMgdXNlZCAqL1xyXG4gICAgcmV0dXJuIGAke3JlcG9ydGVkUGxhdGZvcm19LyR7XCJKc0NvcmVcIiAvKiBDT1JFICovfS8ke1NES19WRVJTSU9OfS8ke3JlcG9ydGVkRnJhbWV3b3Jrc31gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbXVsYXRvckNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIHBlcnNpc3RlbmNlSGllcmFyY2h5KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSByZXNvbHZlciBlYXJseSBpZiBuZWNlc3NhcnkgKG9ubHkgYXBwbGljYWJsZSB0byB3ZWI6XHJcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcclxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVDdXJyZW50VXNlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9ICgoX2IgPSB0aGlzLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudWlkKSB8fCBudWxsO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIElmIHRoZSBwZXJzaXN0ZW5jZSBpcyBjaGFuZ2VkIGluIGFub3RoZXIgd2luZG93LCB0aGUgdXNlciBtYW5hZ2VyIHdpbGwgbGV0IHVzIGtub3dcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX29uU3RvcmFnZUV2ZW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50VXNlciAmJiAhdXNlcikge1xyXG4gICAgICAgICAgICAvLyBObyBjaGFuZ2UsIGRvIG5vdGhpbmcgKHdhcyBzaWduZWQgb3V0IGFuZCByZW1haW5lZCBzaWduZWQgb3V0KS5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGUgc2FtZSB1c2VyIGlzIHRvIGJlIHN5bmNocm9uaXplZC5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlciAmJiB1c2VyICYmIHRoaXMuY3VycmVudFVzZXIudWlkID09PSB1c2VyLnVpZCkge1xyXG4gICAgICAgICAgICAvLyBEYXRhIHVwZGF0ZSwgc2ltcGx5IGNvcHkgZGF0YSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fYXNzaWduKHVzZXIpO1xyXG4gICAgICAgICAgICAvLyBJZiB0b2tlbnMgY2hhbmdlZCBmcm9tIHByZXZpb3VzIHVzZXIgdG9rZW5zLCB0aGlzIHdpbGwgdHJpZ2dlclxyXG4gICAgICAgICAgICAvLyBub3RpZnlBdXRoTGlzdGVuZXJzXy5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdXJyZW50VXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgQXV0aCBzdGF0ZS4gRWl0aGVyIGEgbmV3IGxvZ2luIG9yIGxvZ291dC5cclxuICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRpYWxpemVDdXJyZW50VXNlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHJlZGlyZWN0IGV2ZW50LlxyXG4gICAgICAgIGxldCBzdG9yZWRVc2VyID0gKGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5nZXRDdXJyZW50VXNlcigpKTtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyICYmIHRoaXMuY29uZmlnLmF1dGhEb21haW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdFVzZXJFdmVudElkID0gKF9hID0gdGhpcy5yZWRpcmVjdFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fcmVkaXJlY3RFdmVudElkO1xyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRVc2VyRXZlbnRJZCA9IHN0b3JlZFVzZXIgPT09IG51bGwgfHwgc3RvcmVkVXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnRyeVJlZGlyZWN0U2lnbkluKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzdG9yZWQgdXNlciAoaS5lLiB0aGUgb2xkIFwiY3VycmVudFVzZXJcIikgaGFzIGEgcmVkaXJlY3RJZCB0aGF0XHJcbiAgICAgICAgICAgIC8vIG1hdGNoZXMgdGhlIHJlZGlyZWN0IHVzZXIsIHRoZW4gd2Ugd2FudCB0byBpbml0aWFsbHkgc2lnbiBpbiB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBuZXcgdXNlciBvYmplY3QgZnJvbSByZXN1bHQuXHJcbiAgICAgICAgICAgIC8vIFRPRE8oc2FtZ2hvKTogTW9yZSB0aG9yb3VnaGx5IHRlc3QgYWxsIG9mIHRoaXNcclxuICAgICAgICAgICAgaWYgKCghcmVkaXJlY3RVc2VyRXZlbnRJZCB8fCByZWRpcmVjdFVzZXJFdmVudElkID09PSBzdG9yZWRVc2VyRXZlbnRJZCkgJiZcclxuICAgICAgICAgICAgICAgIChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQudXNlcikpIHtcclxuICAgICAgICAgICAgICAgIHN0b3JlZFVzZXIgPSByZXN1bHQudXNlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBubyB1c2VyIGluIHBlcnNpc3RlbmNlLCB0aGVyZSBpcyBubyBjdXJyZW50IHVzZXIuIFNldCB0byBudWxsLlxyXG4gICAgICAgIGlmICghc3RvcmVkVXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXN0b3JlZFVzZXIuX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzbid0IGEgcmVkaXJlY3QgdXNlciwgd2UgY2FuIHJlbG9hZCBhbmQgYmFpbFxyXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgYWxzbyBjYXRjaCB0aGUgcmVkaXJlY3RlZCB1c2VyLCBpZiBhdmFpbGFibGUsIGFzIHRoYXQgbWV0aG9kXHJcbiAgICAgICAgICAgIC8vIHN0cmlwcyB0aGUgX3JlZGlyZWN0RXZlbnRJZFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9hc3NlcnQodGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCB0aGlzLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIoKTtcclxuICAgICAgICAvLyBJZiB0aGUgcmVkaXJlY3QgdXNlcidzIGV2ZW50IElEIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXNlcidzIGV2ZW50IElELFxyXG4gICAgICAgIC8vIERPIE5PVCByZWxvYWQgdGhlIGN1cnJlbnQgdXNlciwgb3RoZXJ3aXNlIHRoZXknbGwgYmUgY2xlYXJlZCBmcm9tIHN0b3JhZ2UuXHJcbiAgICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIHRoZSByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCgpIGZsb3cuXHJcbiAgICAgICAgaWYgKHRoaXMucmVkaXJlY3RVc2VyICYmXHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVc2VyLl9yZWRpcmVjdEV2ZW50SWQgPT09IHN0b3JlZFVzZXIuX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHN0b3JlZFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIoc3RvcmVkVXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyB0cnlSZWRpcmVjdFNpZ25JbihyZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlZGlyZWN0IHVzZXIgbmVlZHMgdG8gYmUgY2hlY2tlZCAoYW5kIHNpZ25lZCBpbiBpZiBhdmFpbGFibGUpXHJcbiAgICAgICAgLy8gZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24uIEFsbCBvZiB0aGUgbm9ybWFsIHNpZ24gaW4gYW5kIGxpbmsvcmVhdXRoXHJcbiAgICAgICAgLy8gZmxvd3MgY2FsbCBiYWNrIGludG8gYXV0aCBhbmQgcHVzaCB0aGluZ3Mgb250byB0aGUgcHJvbWlzZSBxdWV1ZS4gV2VcclxuICAgICAgICAvLyBuZWVkIHRvIGF3YWl0IHRoZSByZXN1bHQgb2YgdGhlIHJlZGlyZWN0IHNpZ24gaW4gKmluc2lkZSB0aGUgcHJvbWlzZVxyXG4gICAgICAgIC8vIHF1ZXVlKi4gVGhpcyBwcmVzZW50cyBhIHByb2JsZW06IHdlIHJ1biBpbnRvIGRlYWRsb2NrLiBTZWU6XHJcbiAgICAgICAgLy8gICAg4pSMPiBbSW5pdGlhbGl6YXRpb25dIOKUgOKUgOKUgOKUgOKUgOKUkFxyXG4gICAgICAgIC8vICAgIOKUjD4gWzxvdGhlciBxdWV1ZSB0YXNrcz5dIOKUglxyXG4gICAgICAgIC8vICAgIOKUlOKUgCBbZ2V0UmVkaXJlY3RSZXN1bHRdIDzilIDilJhcclxuICAgICAgICAvLyAgICB3aGVyZSBbXSBhcmUgdGFza3Mgb24gdGhlIHF1ZXVlIGFuZCBhcnJvd3MgZGVub3RlIGF3YWl0c1xyXG4gICAgICAgIC8vIEluaXRpYWxpemF0aW9uIHdpbGwgbmV2ZXIgY29tcGxldGUgYmVjYXVzZSBpdCdzIHdhaXRpbmcgb24gc29tZXRoaW5nXHJcbiAgICAgICAgLy8gdGhhdCdzIHdhaXRpbmcgZm9yIGluaXRpYWxpemF0aW9uIHRvIGNvbXBsZXRlIVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gSW5zdGVhZCwgdGhpcyBtZXRob2QgY2FsbHMgZ2V0UmVkaXJlY3RSZXN1bHQoKSAoc3RvcmVkIGluXHJcbiAgICAgICAgLy8gX2NvbXBsZXRlUmVkaXJlY3RGbikgd2l0aCBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBpbnN0cnVjdHMgYWxsIG9mXHJcbiAgICAgICAgLy8gdGhlIHVuZGVybHlpbmcgYXV0aCBvcGVyYXRpb25zIHRvIHNraXAgYW55dGhpbmcgdGhhdCBtdXRhdGVzIGF1dGggc3RhdGUuXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gV2Uga25vdyB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgaXMgc2V0IHNpbmNlIHJlZGlyZWN0UmVzb2x2ZXJcclxuICAgICAgICAgICAgLy8gaXMgcGFzc2VkIGluLiBUaGUgX2NvbXBsZXRlUmVkaXJlY3RGbiBleHBlY3RzIHRoZSB1bndyYXBwZWQgZXh0ZXJuLlxyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIuX2NvbXBsZXRlUmVkaXJlY3RGbih0aGlzLCByZWRpcmVjdFJlc29sdmVyLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gU3dhbGxvdyBhbnkgZXJyb3JzIGhlcmU7IHRoZSBjb2RlIGNhbiByZXRyaWV2ZSB0aGVtIGluXHJcbiAgICAgICAgICAgIC8vIGdldFJlZGlyZWN0UmVzdWx0KCkuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NldFJlZGlyZWN0VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcih1c2VyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmNvZGUgIT09IGBhdXRoLyR7XCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21ldGhpbmcncyB3cm9uZyB3aXRoIHRoZSB1c2VyJ3MgdG9rZW4uIExvZyB0aGVtIG91dCBhbmQgcmVtb3ZlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGVtIGZyb20gc3RvcmFnZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgdXNlRGV2aWNlTGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBfZ2V0VXNlckxhbmd1YWdlKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdXBkYXRlQ3VycmVudFVzZXIodXNlckV4dGVybikge1xyXG4gICAgICAgIC8vIFRoZSBwdWJsaWMgdXBkYXRlQ3VycmVudFVzZXIgbWV0aG9kIG5lZWRzIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSB1c2VyLFxyXG4gICAgICAgIC8vIGFuZCBhbHNvIGNoZWNrIHRoYXQgdGhlIHByb2plY3QgbWF0Y2hlc1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSB1c2VyRXh0ZXJuXHJcbiAgICAgICAgICAgID8gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXJFeHRlcm4pXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHVzZXIuYXV0aC5jb25maWcuYXBpS2V5ID09PSB0aGlzLmNvbmZpZy5hcGlLZXksIHRoaXMsIFwiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIgJiYgdXNlci5fY2xvbmUodGhpcykpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodGhpcy50ZW5hbnRJZCA9PT0gdXNlci50ZW5hbnRJZCwgdGhpcywgXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIiAvKiBURU5BTlRfSURfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlBdXRoTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzaWduT3V0KCkge1xyXG4gICAgICAgIC8vIENsZWFyIHRoZSByZWRpcmVjdCB1c2VyIHdoZW4gc2lnbk91dCBpcyBjYWxsZWRcclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciB8fCB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIobnVsbCk7XHJcbiAgICB9XHJcbiAgICBzZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldFBlcnNpc3RlbmNlKF9nZXRJbnN0YW5jZShwZXJzaXN0ZW5jZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2dldFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucGVyc2lzdGVuY2UudHlwZTtcclxuICAgIH1cclxuICAgIF91cGRhdGVFcnJvck1hcChlcnJvck1hcCkge1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBlcnJvck1hcCgpKTtcclxuICAgIH1cclxuICAgIG9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU3RhdGVMaXN0ZW5lcih0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgb25JZFRva2VuQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU3RhdGVMaXN0ZW5lcih0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmNvbmZpZy5hcGlLZXksXHJcbiAgICAgICAgICAgIGF1dGhEb21haW46IHRoaXMuY29uZmlnLmF1dGhEb21haW4sXHJcbiAgICAgICAgICAgIGFwcE5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6IChfYSA9IHRoaXMuX2N1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9KU09OKClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3NldFJlZGlyZWN0VXNlcih1c2VyLCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBjb25zdCByZWRpcmVjdE1hbmFnZXIgPSBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVzZXIgPT09IG51bGxcclxuICAgICAgICAgICAgPyByZWRpcmVjdE1hbmFnZXIucmVtb3ZlQ3VycmVudFVzZXIoKVxyXG4gICAgICAgICAgICA6IHJlZGlyZWN0TWFuYWdlci5zZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcikge1xyXG4gICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIgPSBhd2FpdCBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyLmNyZWF0ZSh0aGlzLCBbX2dldEluc3RhbmNlKHJlc29sdmVyLl9yZWRpcmVjdFBlcnNpc3RlbmNlKV0sIFwicmVkaXJlY3RVc2VyXCIgLyogUkVESVJFQ1RfVVNFUiAqLyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVc2VyID1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVkaXJlY3RVc2VyRm9ySWQoaWQpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSd2ZSBjbGVhcmVkIGFueSBwZW5kaW5nIHBlcnNpc3RlbmNlIGFjdGlvbnMgaWYgd2UncmUgbm90IGluXHJcbiAgICAgICAgLy8gdGhlIGluaXRpYWxpemVyXHJcbiAgICAgICAgaWYgKHRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYSA9IHRoaXMuX2N1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2IgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBOb3RpZmllcyBsaXN0ZW5lcnMgb25seSBpZiB0aGUgdXNlciBpcyBjdXJyZW50ICovXHJcbiAgICBfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfa2V5KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZy5hdXRoRG9tYWlufToke3RoaXMuY29uZmlnLmFwaUtleX06JHt0aGlzLm5hbWV9YDtcclxuICAgIH1cclxuICAgIF9zdGFydFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRoZSBjdXJyZW50IHVzZXIgY2FzdCBhcyB0aGUgaW50ZXJuYWwgdHlwZSAqL1xyXG4gICAgZ2V0IF9jdXJyZW50VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlcjtcclxuICAgIH1cclxuICAgIG5vdGlmeUF1dGhMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50VWlkID0gKF9iID0gKF9hID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5sYXN0Tm90aWZpZWRVaWQgIT09IGN1cnJlbnRVaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSBjdXJyZW50VWlkO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlZ2lzdGVyU3RhdGVMaXN0ZW5lcihzdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2IgPSB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgPyBuZXh0T3JPYnNlcnZlclxyXG4gICAgICAgICAgICA6IG5leHRPck9ic2VydmVyLm5leHQuYmluZChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2lzSW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBfYXNzZXJ0KHByb21pc2UsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gVGhlIGNhbGxiYWNrIG5lZWRzIHRvIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseSBwZXIgdGhlIHNwZWMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiBjYih0aGlzLmN1cnJlbnRVc2VyKSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmFkZE9ic2VydmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5wcm90ZWN0ZWQgKGZyb20gcmFjZSBjb25kaXRpb25zKSBtZXRob2QgdG8gc2V0IHRoZSBjdXJyZW50IHVzZXIuIFRoaXNcclxuICAgICAqIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tIHdpdGhpbiBhIHF1ZXVlZCBjYWxsYmFjay4gVGhpcyBpcyBuZWNlc3NhcnlcclxuICAgICAqIGJlY2F1c2UgdGhlIHF1ZXVlIHNob3VsZG4ndCByZWx5IG9uIGFub3RoZXIgcXVldWVkIGNhbGxiYWNrLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBkaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyICE9PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgICAgICBpZiAodXNlciAmJiB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXIuX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5yZW1vdmVDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHF1ZXVlKGFjdGlvbikge1xyXG4gICAgICAgIC8vIEluIGNhc2Ugc29tZXRoaW5nIGVycm9ycywgdGhlIGNhbGxiYWNrIHN0aWxsIHNob3VsZCBiZSBjYWxsZWQgaW4gb3JkZXJcclxuICAgICAgICAvLyB0byBrZWVwIHRoZSBwcm9taXNlIGNoYWluIGFsaXZlXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gdGhpcy5vcGVyYXRpb25zLnRoZW4oYWN0aW9uLCBhY3Rpb24pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgYXNzZXJ0ZWRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyLCB0aGlzLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIF9sb2dGcmFtZXdvcmsoZnJhbWV3b3JrKSB7XHJcbiAgICAgICAgaWYgKCFmcmFtZXdvcmsgfHwgdGhpcy5mcmFtZXdvcmtzLmluY2x1ZGVzKGZyYW1ld29yaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MucHVzaChmcmFtZXdvcmspO1xyXG4gICAgICAgIC8vIFNvcnQgYWxwaGFiZXRpY2FsbHkgc28gdGhhdCBcIkZpcmViYXNlQ29yZS13ZWIsRmlyZWJhc2VVSS13ZWJcIiBhbmRcclxuICAgICAgICAvLyBcIkZpcmViYXNlVUktd2ViLEZpcmViYXNlQ29yZS13ZWJcIiBhcmVuJ3Qgdmlld2VkIGFzIGRpZmZlcmVudC5cclxuICAgICAgICB0aGlzLmZyYW1ld29ya3Muc29ydCgpO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IF9nZXRDbGllbnRWZXJzaW9uKHRoaXMuY29uZmlnLmNsaWVudFBsYXRmb3JtLCB0aGlzLl9nZXRGcmFtZXdvcmtzKCkpO1xyXG4gICAgfVxyXG4gICAgX2dldEZyYW1ld29ya3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWV3b3JrcztcclxuICAgIH1cclxuICAgIF9nZXRTZGtDbGllbnRWZXJzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudFZlcnNpb247XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1ldGhvZCB0byBiZSB1c2VkIHRvIGNhc3QgZG93biB0byBvdXIgcHJpdmF0ZSBpbXBsbWVudGF0aW9uIG9mIEF1dGguXHJcbiAqIEl0IHdpbGwgYWxzbyBoYW5kbGUgdW53cmFwcGluZyBmcm9tIHRoZSBjb21wYXQgdHlwZSBpZiBuZWNlc3NhcnlcclxuICpcclxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QgcGFzc2VkIGluIGZyb20gZGV2ZWxvcGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2FzdEF1dGgoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxufVxyXG4vKiogSGVscGVyIGNsYXNzIHRvIHdyYXAgc3Vic2NyaWJlciBsb2dpYyAqL1xyXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hZGRPYnNlcnZlciA9IGNyZWF0ZVN1YnNjcmliZShvYnNlcnZlciA9PiAodGhpcy5vYnNlcnZlciA9IG9ic2VydmVyKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV4dCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMub2JzZXJ2ZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBGaXJlYmFzZSBBdXRoIEVtdWxhdG9yLCBpbnN0ZWFkIG9mIHByb2R1Y3Rpb25cclxuICogRmlyZWJhc2UgQXV0aCBzZXJ2aWNlcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGZvbGxvd2luZyB0aGUgZmlyc3QgY2FsbCB0b1xyXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9LiAgRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMgYXMgZW11bGF0b3JcclxuICogdHJhZmZpYyBpcyBub3QgZW5jcnlwdGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly8xMjcuMC4wLjE6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBhdCB3aGljaCB0aGUgZW11bGF0b3IgaXMgcnVubmluZyAoZWcsICdodHRwOi8vbG9jYWxob3N0OjkwOTknKS5cclxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbC4gYG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzYCBkZWZhdWx0cyB0byBgZmFsc2VgLiBTZXQgaXQgdG9cclxuICogYHRydWVgIHRvIGRpc2FibGUgdGhlIHdhcm5pbmcgYmFubmVyIGF0dGFjaGVkIHRvIHRoZSBET00uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgdXJsLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0KGF1dGhJbnRlcm5hbC5fY2FuSW5pdEVtdWxhdG9yLCBhdXRoSW50ZXJuYWwsIFwiZW11bGF0b3ItY29uZmlnLWZhaWxlZFwiIC8qIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi8pO1xyXG4gICAgX2Fzc2VydCgvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKSwgYXV0aEludGVybmFsLCBcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2hCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlciBJRCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCAnZmFjZWJvb2suY29tJywgb3IgJ2dvb2dsZS5jb20nLlxyXG4gICAgICovXHJcbiAgICBwcm92aWRlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHNpZ24gaW4gbWV0aG9kIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELCBvclxyXG4gICAgICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgc2lnbi1pbiBtZXRob2RcclxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cclxuICAgICAqL1xyXG4gICAgc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnNpZ25Jbk1ldGhvZCA9IHNpZ25Jbk1ldGhvZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKF9hdXRoLCBfaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBTSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIFNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovLCB0ZW5hbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXHJcbiAgICAgKiBwcm92aWRlZCwgYEpTT04ucGFyc2VgIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5lbWFpbCkgJiYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5wYXNzd29yZCkpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhJZHBcIiAvKiBTSUdOX0lOX1dJVEhfSURQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSQxID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgT0F1dGggY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21QYXJhbXMocGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBub25jZSBpZiBhdmFpbGFibGUgYW5kIG5vIHBlbmRpbmdUb2tlbiBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm5vbmNlICYmICFwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLm5vbmNlID0gcGFyYW1zLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHBhcmFtcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMSBhbmQgT0F1dGggdG9rZW4gd2l0aCB0b2tlbiBzZWNyZXRcclxuICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5vYXV0aFRva2VuO1xyXG4gICAgICAgICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5pZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcclxuICAgICAgICAgICAgbm9uY2U6IHRoaXMubm9uY2UsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCB9ID0gb2JqLCByZXN0ID0gX19yZXN0KG9iaiwgW1wicHJvdmlkZXJJZFwiLCBcInNpZ25Jbk1ldGhvZFwiXSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgY3JlZC5pZFRva2VuID0gcmVzdC5pZFRva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcmVzdC5hY2Nlc3NUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5zZWNyZXQgPSByZXN0LnNlY3JldDtcclxuICAgICAgICBjcmVkLm5vbmNlID0gcmVzdC5ub25jZTtcclxuICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHJlc3QucGVuZGluZ1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJJDEsXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5wZW5kaW5nVG9rZW4gPSB0aGlzLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RCb2R5ID0ge307XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydpZF90b2tlbiddID0gdGhpcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnYWNjZXNzX3Rva2VuJ10gPSB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3JldCkge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ29hdXRoX3Rva2VuX3NlY3JldCddID0gdGhpcy5zZWNyZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9zdEJvZHlbJ3Byb3ZpZGVySWQnXSA9IHRoaXMucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9uY2UgJiYgIXRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnbm9uY2UnXSA9IHRoaXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0Qm9keSA9IHF1ZXJ5c3RyaW5nKHBvc3RCb2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2UudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXHJcbn07XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgYXBpUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgb3BlcmF0aW9uOiAnUkVBVVRIJyB9KTtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIGFwaVJlcXVlc3QpLCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtXaXRoUGhvbmVOdW1iZXIkMShhdXRoLCBPYmplY3QuYXNzaWduKHsgaWRUb2tlbiB9LCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciwgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgIGlmICh0ZW1wb3JhcnlQcm9vZiAmJiBwaG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2Vzc2lvbkluZm86IHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBjb2RlOiB2ZXJpZmljYXRpb25Db2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgb2JqLnBob25lTnVtYmVyID0gdGhpcy5wYXJhbXMucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICBvYmoudGVtcG9yYXJ5UHJvb2YgPSB0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbkNvZGUgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbklkID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICAvKiogR2VuZXJhdGVzIGEgcGhvbmUgY3JlZGVudGlhbCBiYXNlZCBvbiBhIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nLiAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGpzb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlLCBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IGpzb247XHJcbiAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25Db2RlICYmXHJcbiAgICAgICAgICAgICF2ZXJpZmljYXRpb25JZCAmJlxyXG4gICAgICAgICAgICAhcGhvbmVOdW1iZXIgJiZcclxuICAgICAgICAgICAgIXRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbXBvcmFyeVByb29mXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgdGhlIG1vZGUgc3RyaW5nIGluIGFjdGlvbiBjb2RlIFVSTCB0byBBY3Rpb24gQ29kZSBJbmZvIG9wZXJhdGlvbi5cclxuICpcclxuICogQHBhcmFtIG1vZGVcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTW9kZShtb2RlKSB7XHJcbiAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICBjYXNlICdyZWNvdmVyRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRUNPVkVSX0VNQUlMXCIgLyogUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLztcclxuICAgICAgICBjYXNlICdzaWduSW4nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5RW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3JldmVydFNlY29uZEZhY3RvckFkZGl0aW9uJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIHBhcnNlIEZETCBsaW5rc1xyXG4gKlxyXG4gKiBAcGFyYW0gdXJsXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZURlZXBMaW5rKHVybCkge1xyXG4gICAgY29uc3QgbGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnbGluayddO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KS5cclxuICAgIGNvbnN0IGRvdWJsZURlZXBMaW5rID0gbGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGxpbmspKVsnZGVlcF9saW5rX2lkJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydkZWVwX2xpbmtfaWQnXTtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gaU9TRGVlcExpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhpT1NEZWVwTGluaykpWydsaW5rJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBwYXJzZSBlbWFpbCBhY3Rpb24gVVJMcyBzdWNoIGFzIHBhc3N3b3JkIHJlc2V0LCBlbWFpbCB2ZXJpZmljYXRpb24sXHJcbiAqIGVtYWlsIGxpbmsgc2lnbiBpbiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25Db2RlVVJMIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGlvbkxpbmsgLSBUaGUgbGluayBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIFVSTC5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbkxpbmspIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcclxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoYWN0aW9uTGluaykpO1xyXG4gICAgICAgIGNvbnN0IGFwaUtleSA9IChfYSA9IHNlYXJjaFBhcmFtc1tcImFwaUtleVwiIC8qIEFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogQ09ERSAqL10pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gcGFyc2VNb2RlKChfYyA9IHNlYXJjaFBhcmFtc1tcIm1vZGVcIiAvKiBNT0RFICovXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbCk7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgQVBJIGtleSwgY29kZSBhbmQgbW9kZS5cclxuICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiBjb2RlICYmIG9wZXJhdGlvbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIENPTlRJTlVFX1VSTCAqL10pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSAoX2UgPSBzZWFyY2hQYXJhbXNbXCJsYW5ndWFnZUNvZGVcIiAvKiBMQU5HVUFHRV9DT0RFICovXSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogbnVsbDtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gKF9mID0gc2VhcmNoUGFyYW1zW1widGVuYW50SWRcIiAvKiBURU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIGFjdGlvbkNvZGVVcmwuY29kZSwgYWN0aW9uQ29kZVVybC50ZW5hbnRJZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QgPSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EID0gXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKG9iaik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcidzIGFjY2VzcyB0b2tlbiBvciBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhlIHJhdyBub25jZSBpcyByZXF1aXJlZCB3aGVuIGFuIElEIHRva2VuIHdpdGggYSBub25jZSBmaWVsZCBpcyBwcm92aWRlZC4gVGhlIFNIQS0yNTYgaGFzaCBvZlxyXG4gICAgICogdGhlIHJhdyBub25jZSBtdXN0IG1hdGNoIHRoZSBub25jZSBmaWVsZCBpbiB0aGUgSUQgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBnb29nbGVVc2VyYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiAvLyBJbml0aWFsaXplIGEgZ2VuZXJhdGUgT0F1dGggcHJvdmlkZXIgd2l0aCBhIGBnb29nbGUuY29tYCBwcm92aWRlcklkLlxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWwoe1xyXG4gICAgICogICBpZFRva2VuOiBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuLFxyXG4gICAgICogfSk7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBFaXRoZXIgdGhlIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIElEIHRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIHJhdyBub25jZVxyXG4gICAgICogb3IgdGhlIElEIHRva2VuIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgbm9uY2U6IHBhcmFtcy5yYXdOb25jZSB9KSk7XHJcbiAgICB9XHJcbiAgICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXHJcbiAgICBfY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICBfYXNzZXJ0KHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAvLyBGb3IgT0F1dGhDcmVkZW50aWFsLCBzaWduIGluIG1ldGhvZCBpcyBzYW1lIGFzIHByb3ZpZGVySWQuXHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLCBzaWduSW5NZXRob2Q6IHRoaXMucHJvdmlkZXJJZCB9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAhb2F1dGhJZFRva2VuICYmXHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aEFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgbm9uY2UsXHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZhY2Vib29rQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEdvb2dsZUF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLyk7XHJcbiAgICAgICAgdGhpcy5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR29vZ2xlLiBBdCBsZWFzdCBvbmUgb2YgSUQgdG9rZW4gYW5kIGFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gXFxgZ29vZ2xlVXNlclxcYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UoKS5pZF90b2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZFRva2VuIC0gR29vZ2xlIElEIHRva2VuLlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gR29vZ2xlIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoaWRUb2tlbiwgYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoSWRUb2tlbiAmJiAhb2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGFuIG9hdXRoIDEgY3JlZGVudGlhbCBvciBhIHBob25lIGNyZWRlbnRpYWxcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkdPT0dMRS4gKi9cclxuR29vZ2xlQXV0aFByb3ZpZGVyLkdPT0dMRV9TSUdOX0lOX01FVEhPRCA9IFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS4gKi9cclxuR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEdpdEh1YiByZXF1aXJlcyBhbiBPQXV0aCAyLjAgcmVkaXJlY3QsIHNvIHlvdSBjYW4gZWl0aGVyIGhhbmRsZSB0aGUgcmVkaXJlY3QgZGlyZWN0bHksIG9yIHVzZVxyXG4gKiB0aGUge0BsaW5rIHNpZ25JbldpdGhQb3B1cH0gaGFuZGxlcjpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHaXRodWIgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHaXRodWJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR2l0aHViLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdpdGh1YiBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJRFBfUkVRVUVTVF9VUkkgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkLCBwcm92aWRlcklkKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IHBlbmRpbmdUb2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QsIHBlbmRpbmdUb2tlbiB9ID0gb2JqO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fFxyXG4gICAgICAgICAgICAhc2lnbkluTWV0aG9kIHx8XHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4gfHxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCAhPT0gc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBhdm9pZCBleHBvc2luZyB0aGUgY29uc3RydWN0b3IgdG8gZW5kIHVzZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFNBTUxfUFJPVklERVJfUFJFRklYID0gJ3NhbWwuJztcclxuLyoqXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGZvciBTQU1MLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IuIFRoZSBwcm92aWRlcklkIG11c3Qgc3RhcnQgd2l0aCBcInNhbWwuXCJcclxuICAgICAqIEBwYXJhbSBwcm92aWRlcklkIC0gU0FNTCBwcm92aWRlciBJRC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIF9hc3NlcnQocHJvdmlkZXJJZC5zdGFydHNXaXRoKFNBTUxfUFJPVklERVJfUFJFRklYKSwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0gYWZ0ZXIgYVxyXG4gICAgICogc3VjY2Vzc2Z1bCBTQU1MIGZsb3cgY29tcGxldGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogRm9yIGV4YW1wbGUsIHRvIGdldCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCB5b3UgY291bGQgd3JpdGUgdGhlXHJcbiAgICAgKiBmb2xsb3dpbmcgY29kZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgc2FtbFByb3ZpZGVyKTtcclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFNBTUxBdXRoUHJvdmlkZXIuc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IFNBTUxBdXRoQ3JlZGVudGlhbC5mcm9tSlNPTihqc29uKTtcclxuICAgICAgICBfYXNzZXJ0KGNyZWRlbnRpYWwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwZW5kaW5nVG9rZW4sIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFwZW5kaW5nVG9rZW4gfHwgIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqICAgY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBUd2l0dGVyQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgVHdpdHRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUd2l0dGVyIGFjY2VzcyB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBzZWNyZXQgLSBUd2l0dGVyIHNlY3JldC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodG9rZW4sIHNlY3JldCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgb2F1dGhUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHNlY3JldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuIHx8ICFvYXV0aFRva2VuU2VjcmV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCA9IFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi4gKi9cclxuVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduVXAoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduVXBcIiAvKiBTSUdOX1VQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFVzZXJDcmVkZW50aWFsSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSBwYXJhbXMudXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwYXJhbXMucHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLl90b2tlblJlc3BvbnNlID0gcGFyYW1zLl90b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IHBhcmFtcy5vcGVyYXRpb25UeXBlO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIG9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VySW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlcklkID0gcHJvdmlkZXJJZEZvclJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgY29uc3QgdXNlckNyZWQgPSBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IGlkVG9rZW5SZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1c2VyQ3JlZDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBfZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlcklkID0gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIF90b2tlblJlc3BvbnNlOiByZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHByb3ZpZGVySWRGb3JSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgaWYgKHJlc3BvbnNlLnByb3ZpZGVySWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UucHJvdmlkZXJJZDtcclxuICAgIH1cclxuICAgIGlmICgncGhvbmVOdW1iZXInIGluIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiBhcyBhbiBhbm9ueW1vdXMgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBhbm9ueW1vdXMgdXNlciBzaWduZWQgaW4sIHRoYXQgdXNlciB3aWxsIGJlIHJldHVybmVkOyBvdGhlcndpc2UsIGFcclxuICogbmV3IGFub255bW91cyB1c2VyIGlkZW50aXR5IHdpbGwgYmUgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluQW5vbnltb3VzbHkoYXV0aCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICBpZiAoKF9hID0gYXV0aEludGVybmFsLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNBbm9ueW1vdXMpIHtcclxuICAgICAgICAvLyBJZiBhbiBhbm9ueW1vdXMgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiwgbm8gbmVlZCB0byBzaWduIHRoZW0gaW4gYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyOiBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGU6IFwic2lnbkluXCIgLyogU0lHTl9JTiAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlLCB0cnVlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JFcnJvciBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgc3VwZXIoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gb3BlcmF0aW9uVHlwZTtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE11bHRpRmFjdG9yRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IChfYSA9IGF1dGgudGVuYW50SWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgX3NlcnZlclJlc3BvbnNlOiBlcnJvci5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yRXJyb3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSB7XHJcbiAgICBjb25zdCBpZFRva2VuUHJvdmlkZXIgPSBvcGVyYXRpb25UeXBlID09PSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi9cclxuICAgICAgICA/IGNyZWRlbnRpYWwuX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKVxyXG4gICAgICAgIDogY3JlZGVudGlhbC5fZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpO1xyXG4gICAgcmV0dXJuIGlkVG9rZW5Qcm92aWRlci5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIHRocm93IE11bHRpRmFjdG9yRXJyb3IuX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRha2VzIGEgc2V0IG9mIFVzZXJJbmZvIHByb3ZpZGVyIGRhdGEgYW5kIGNvbnZlcnRzIGl0IHRvIGEgc2V0IG9mIG5hbWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyRGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBTZXQocHJvdmlkZXJEYXRhXHJcbiAgICAgICAgLm1hcCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQpXHJcbiAgICAgICAgLmZpbHRlcihwaWQgPT4gISFwaWQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVW5saW5rcyBhIHByb3ZpZGVyIGZyb20gYSB1c2VyIGFjY291bnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlcklkIC0gVGhlIHByb3ZpZGVyIHRvIHVubGluay5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdW5saW5rKHVzZXIsIHByb3ZpZGVySWQpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXModHJ1ZSwgdXNlckludGVybmFsLCBwcm92aWRlcklkKTtcclxuICAgIGNvbnN0IHsgcHJvdmlkZXJVc2VySW5mbyB9ID0gYXdhaXQgZGVsZXRlTGlua2VkQWNjb3VudHModXNlckludGVybmFsLmF1dGgsIHtcclxuICAgICAgICBpZFRva2VuOiBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpLFxyXG4gICAgICAgIGRlbGV0ZVByb3ZpZGVyOiBbcHJvdmlkZXJJZF1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgcHJvdmlkZXJzTGVmdCA9IHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJVc2VySW5mbyB8fCBbXSk7XHJcbiAgICB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maWx0ZXIocGQgPT4gcHJvdmlkZXJzTGVmdC5oYXMocGQucHJvdmlkZXJJZCkpO1xyXG4gICAgaWYgKCFwcm92aWRlcnNMZWZ0LmhhcyhcInBob25lXCIgLyogUEhPTkUgKi8pKSB7XHJcbiAgICAgICAgdXNlckludGVybmFsLnBob25lTnVtYmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHVzZXJJbnRlcm5hbDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayQxKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGNyZWRlbnRpYWwuX2xpbmtUb0lkVG9rZW4odXNlci5hdXRoLCBhd2FpdCB1c2VyLmdldElkVG9rZW4oKSksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgXCJsaW5rXCIgLyogTElOSyAqLywgcmVzcG9uc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9hc3NlcnRMaW5rZWRTdGF0dXMoZXhwZWN0ZWQsIHVzZXIsIHByb3ZpZGVyKSB7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgIGNvbnN0IHByb3ZpZGVySWRzID0gcHJvdmlkZXJEYXRhQXNOYW1lcyh1c2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICBjb25zdCBjb2RlID0gZXhwZWN0ZWQgPT09IGZhbHNlXHJcbiAgICAgICAgPyBcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9cclxuICAgICAgICA6IFwibm8tc3VjaC1wcm92aWRlclwiIC8qIE5PX1NVQ0hfUFJPVklERVIgKi87XHJcbiAgICBfYXNzZXJ0KHByb3ZpZGVySWRzLmhhcyhwcm92aWRlcikgPT09IGV4cGVjdGVkLCB1c2VyLmF1dGgsIGNvZGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqLztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlciksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IF9wYXJzZVRva2VuKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIF9hc3NlcnQocGFyc2VkLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHsgc3ViOiBsb2NhbElkIH0gPSBwYXJzZWQ7XHJcbiAgICAgICAgX2Fzc2VydCh1c2VyLnVpZCA9PT0gbG9jYWxJZCwgYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB1c2VyIGRlbGV0ZWQgZXJyb3IgaW50byB1c2VyIG1pc21hdGNoXHJcbiAgICAgICAgaWYgKChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuY29kZSkgPT09IGBhdXRoLyR7XCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9zaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwic2lnbkluXCIgLyogU0lHTl9JTiAqLztcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwpO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgaWYgKCFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChfY2FzdEF1dGgoYXV0aCksIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pblxyXG4gKiBhdHRlbXB0cy4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBmcm9tIGEgYENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTmAgZXJyb3IuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoQ3VzdG9tVG9rZW5cIiAvKiBTSUdOX0lOX1dJVEhfQ1VTVE9NX1RPS0VOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhIGN1c3RvbSB0b2tlbi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQ3VzdG9tIHRva2VucyBhcmUgdXNlZCB0byBpbnRlZ3JhdGUgRmlyZWJhc2UgQXV0aCB3aXRoIGV4aXN0aW5nIGF1dGggc3lzdGVtcywgYW5kIG11c3RcclxuICogYmUgZ2VuZXJhdGVkIGJ5IGFuIGF1dGggYmFja2VuZCB1c2luZyB0aGVcclxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3JlZmVyZW5jZS9hZG1pbi9ub2RlL2FkbWluLmF1dGguQXV0aCNjcmVhdGVjdXN0b210b2tlbiB8IGNyZWF0ZUN1c3RvbVRva2VufVxyXG4gKiBtZXRob2QgaW4gdGhlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hdXRoL2FkbWluIHwgQWRtaW4gU0RLfSAuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHRva2VuIGlzIGludmFsaWQsIGV4cGlyZWQsIG9yIG5vdCBhY2NlcHRlZCBieSB0aGUgRmlyZWJhc2UgQXV0aCBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjdXN0b21Ub2tlbiAtIFRoZSBjdXN0b20gdG9rZW4gdG8gc2lnbiBpbiB3aXRoLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4oYXV0aCwgY3VzdG9tVG9rZW4pIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgdG9rZW46IGN1c3RvbVRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWQgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIoY3JlZC51c2VyKTtcclxuICAgIHJldHVybiBjcmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgICAgIHRoaXMudWlkID0gcmVzcG9uc2UubWZhRW5yb2xsbWVudElkO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsbWVudFRpbWUgPSBuZXcgRGF0ZShyZXNwb25zZS5lbnJvbGxlZEF0KS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICBpZiAoJ3Bob25lSW5mbycgaW4gZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckluZm8uX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckluZm8gZXh0ZW5kcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovLCByZXNwb25zZSk7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lSW5mbztcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKF9hdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9ySW5mbyhlbnJvbGxtZW50KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgX2Fzc2VydCgoKF9hID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiAwLCBhdXRoLCBcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbi5sZW5ndGggPiAwLCBhdXRoLCBcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqLyk7XHJcbiAgICByZXF1ZXN0LmNvbnRpbnVlVXJsID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybDtcclxuICAgIHJlcXVlc3QuZHluYW1pY0xpbmtEb21haW4gPSBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW47XHJcbiAgICByZXF1ZXN0LmNhbkhhbmRsZUNvZGVJbkFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHA7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmlPUykge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZC5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5pT1NCdW5kbGVJZCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkSW5zdGFsbEFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLmluc3RhbGxBcHA7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkTWluaW11bVZlcnNpb25Db2RlID1cclxuICAgICAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQubWluaW11bVZlcnNpb247XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkUGFja2FnZU5hbWUgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gY29tcGxldGUgdGhlIHBhc3N3b3JkIHJlc2V0LCBjYWxsIHtAbGluayBjb25maXJtUGFzc3dvcmRSZXNldH0gd2l0aCB0aGUgY29kZSBzdXBwbGllZCBpblxyXG4gKiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlciwgYWxvbmcgd2l0aCB0aGUgbmV3IHBhc3N3b3JkIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHVzZXIuXHJcbiAqIGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KCd1c2VyQGV4YW1wbGUuY29tJywgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ29tcGxldGVzIHRoZSBwYXNzd29yZCByZXNldCBwcm9jZXNzLCBnaXZlbiBhIGNvbmZpcm1hdGlvbiBjb2RlIGFuZCBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIGNvbmZpcm1hdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1QYXNzd29yZFJlc2V0KGF1dGgsIG9vYkNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICBhd2FpdCByZXNldFBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwge1xyXG4gICAgICAgIG9vYkNvZGUsXHJcbiAgICAgICAgbmV3UGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgLy8gRG8gbm90IHJldHVybiB0aGUgZW1haWwuXHJcbn1cclxuLyoqXHJcbiAqIEFwcGxpZXMgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGF3YWl0IGFwcGx5QWN0aW9uQ29kZSQxKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgeyBvb2JDb2RlIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgbWV0YWRhdGEgYWJvdXQgdGhlIGNvZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzZXRQYXNzd29yZChhdXRoTW9kdWxhciwgeyBvb2JDb2RlIH0pO1xyXG4gICAgLy8gRW1haWwgY291bGQgYmUgZW1wdHkgb25seSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzIEVNQUlMX1NJR05JTiBvclxyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBOZXcgZW1haWwgc2hvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE11bHRpLWZhY3RvciBpbmZvIGNvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTi5cclxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHJlc3BvbnNlLnJlcXVlc3RUeXBlO1xyXG4gICAgX2Fzc2VydChvcGVyYXRpb24sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICBjYXNlIFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLzpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5uZXdFbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm1mYUluZm8sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UuZW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIG11bHRpLWZhY3RvciBpbmZvIGZvciByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvblxyXG4gICAgbGV0IG11bHRpRmFjdG9ySW5mbyA9IG51bGw7XHJcbiAgICBpZiAocmVzcG9uc2UubWZhSW5mbykge1xyXG4gICAgICAgIG11bHRpRmFjdG9ySW5mbyA9IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShfY2FzdEF1dGgoYXV0aE1vZHVsYXIpLCByZXNwb25zZS5tZmFJbmZvKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBlbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UubmV3RW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovXHJcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmVtYWlsXHJcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLm5ld0VtYWlsKSB8fCBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aUZhY3RvckluZm9cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZXJhdGlvblxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgcGFzc3dvcmQgcmVzZXQgY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzIGlmIHZhbGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShhdXRoLCBjb2RlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNoZWNrQWN0aW9uQ29kZShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIGNvZGUpO1xyXG4gICAgLy8gRW1haWwgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50IHNpbmNlIGEgY29kZSB3YXMgc2VudCB0byBpdFxyXG4gICAgcmV0dXJuIGRhdGEuZW1haWw7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBPbiBzdWNjZXNzZnVsIGNyZWF0aW9uIG9mIHRoZSB1c2VyIGFjY291bnQsIHRoaXMgdXNlciB3aWxsIGFsc28gYmUgc2lnbmVkIGluIHRvIHlvdXIgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIFVzZXIgYWNjb3VudCBjcmVhdGlvbiBjYW4gZmFpbCBpZiB0aGUgYWNjb3VudCBhbHJlYWR5IGV4aXN0cyBvciB0aGUgcGFzc3dvcmQgaXMgaW52YWxpZC5cclxuICpcclxuICogTm90ZTogVGhlIGVtYWlsIGFkZHJlc3MgYWN0cyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciBhbmQgZW5hYmxlcyBhbiBlbWFpbC1iYXNlZFxyXG4gKiBwYXNzd29yZCByZXNldC4gVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyB1c2VyIGFjY291bnQgYW5kIHNldCB0aGUgaW5pdGlhbCB1c2VyIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXIncyBjaG9zZW4gcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkIGRvIG5vdCBtYXRjaC5cclxuICpcclxuICogTm90ZTogVGhlIHVzZXIncyBwYXNzd29yZCBpcyBOT1QgdGhlIHBhc3N3b3JkIHVzZWQgdG8gYWNjZXNzIHRoZSB1c2VyJ3MgZW1haWwgYWNjb3VudC4gVGhlXHJcbiAqIGVtYWlsIGFkZHJlc3Mgc2VydmVzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyLCBhbmQgdGhlIHBhc3N3b3JkIGlzIHVzZWQgdG8gYWNjZXNzXHJcbiAqIHRoZSB1c2VyJ3MgYWNjb3VudCBpbiB5b3VyIEZpcmViYXNlIHByb2plY3QuIFNlZSBhbHNvOiB7QGxpbmsgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcnMgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXJzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNlbmRzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIHRvIHRoZSB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHNpZ24taW4gb3BlcmF0aW9uIGhhcyB0byBhbHdheXMgYmUgY29tcGxldGVkIGluIHRoZSBhcHAgdW5saWtlIG90aGVyIG91dCBvZiBiYW5kIGVtYWlsXHJcbiAqIGFjdGlvbnMgKHBhc3N3b3JkIHJlc2V0IGFuZCBlbWFpbCB2ZXJpZmljYXRpb25zKS4gVGhpcyBpcyBiZWNhdXNlLCBhdCB0aGUgZW5kIG9mIHRoZSBmbG93LFxyXG4gKiB0aGUgdXNlciBpcyBleHBlY3RlZCB0byBiZSBzaWduZWQgaW4gYW5kIHRoZWlyIEF1dGggc3RhdGUgcGVyc2lzdGVkIHdpdGhpbiB0aGUgYXBwLlxyXG4gKlxyXG4gKiBUbyBjb21wbGV0ZSBzaWduIGluIHdpdGggdGhlIGVtYWlsIGxpbmssIGNhbGwge0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9IHdpdGggdGhlIGVtYWlsXHJcbiAqIGFkZHJlc3MgYW5kIHRoZSBlbWFpbCBsaW5rIHN1cHBsaWVkIGluIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoJ3VzZXJAZXhhbXBsZS5jb20nLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoSW50ZXJuYWwgLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYW4gaW5jb21pbmcgbGluayBpcyBhIHNpZ24taW4gd2l0aCBlbWFpbCBsaW5rIHN1aXRhYmxlIGZvciB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSB7XHJcbiAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgIHJldHVybiAoYWN0aW9uQ29kZVVybCA9PT0gbnVsbCB8fCBhY3Rpb25Db2RlVXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhY3Rpb25Db2RlVXJsLm9wZXJhdGlvbikgPT09IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgc2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBubyBsaW5rIGlzIHBhc3NlZCwgdGhlIGxpbmsgaXMgaW5mZXJyZWQgZnJvbSB0aGUgY3VycmVudCBVUkwuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZCBvciBPVFAgaW4gZW1haWwgbGluayBleHBpcmVzLlxyXG4gKlxyXG4gKiBOb3RlOiBDb25maXJtIHRoZSBsaW5rIGlzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIGZpcmViYXNlLmF1dGguQXV0aC5pc1NpZ25JbldpdGhFbWFpbExpbmsuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluaygndXNlckBleGFtcGxlLmNvbScsICd1c2VyQGV4YW1wbGUuY29tJywgZW1haWxMaW5rKTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsV2l0aExpbmsoZW1haWwsIGVtYWlsTGluayB8fCBfZ2V0Q3VycmVudFVybCgpKTtcclxuICAgIC8vIENoZWNrIGlmIHRoZSB0ZW5hbnQgSUQgaW4gdGhlIGVtYWlsIGxpbmsgbWF0Y2hlcyB0aGUgdGVuYW50IElEIG9uIEF1dGhcclxuICAgIC8vIGluc3RhbmNlLlxyXG4gICAgX2Fzc2VydChjcmVkZW50aWFsLl90ZW5hbnRJZCA9PT0gKGF1dGhNb2R1bGFyLnRlbmFudElkIHx8IG51bGwpLCBhdXRoTW9kdWxhciwgXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIiAvKiBURU5BTlRfSURfTUlTTUFUQ0ggKi8pO1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhNb2R1bGFyLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoVXJpKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6Y3JlYXRlQXV0aFVyaVwiIC8qIENSRUFURV9BVVRIX1VSSSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogR2V0cyB0aGUgbGlzdCBvZiBwb3NzaWJsZSBzaWduIGluIG1ldGhvZHMgZm9yIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBkaWZmZXJlbnRpYXRlIG1ldGhvZHMgb2Ygc2lnbi1pbiBmb3IgdGhlIHNhbWUgcHJvdmlkZXIsIGVnLlxyXG4gKiB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdoaWNoIGhhcyAyIG1ldGhvZHMgb2Ygc2lnbi1pbixcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbChhdXRoLCBlbWFpbCkge1xyXG4gICAgLy8gY3JlYXRlQXV0aFVyaSByZXR1cm5zIGFuIGVycm9yIGlmIGNvbnRpbnVlIFVSSSBpcyBub3QgaHR0cCBvciBodHRwcy5cclxuICAgIC8vIEZvciBlbnZpcm9ubWVudHMgbGlrZSBDb3Jkb3ZhLCBDaHJvbWUgZXh0ZW5zaW9ucywgbmF0aXZlIGZyYW1ld29ya3MsIGZpbGVcclxuICAgIC8vIHN5c3RlbXMsIGV0YywgdXNlIGh0dHA6Ly9sb2NhbGhvc3QgYXMgY29udGludWUgVVJMLlxyXG4gICAgY29uc3QgY29udGludWVVcmkgPSBfaXNIdHRwT3JIdHRwcygpID8gX2dldEN1cnJlbnRVcmwoKSA6ICdodHRwOi8vbG9jYWxob3N0JztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRlbnRpZmllcjogZW1haWwsXHJcbiAgICAgICAgY29udGludWVVcmlcclxuICAgIH07XHJcbiAgICBjb25zdCB7IHNpZ25pbk1ldGhvZHMgfSA9IGF3YWl0IGNyZWF0ZUF1dGhVcmkoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCByZXF1ZXN0KTtcclxuICAgIHJldHVybiBzaWduaW5NZXRob2RzIHx8IFtdO1xyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byBhIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBpcyBjb21wbGV0ZWQgYnkgY2FsbGluZyB7QGxpbmsgYXBwbHlBY3Rpb25Db2RlfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBhd2FpdCBhcHBseUFjdGlvbkNvZGUoYXV0aCwgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlciwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlZFUklGWV9FTUFJTFwiIC8qIFZFUklGWV9FTUFJTCAqLyxcclxuICAgICAgICBpZFRva2VuXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCBzZW5kRW1haWxWZXJpZmljYXRpb24kMSh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XHJcbiAgICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZW5kcyBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byBhIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgdXNlcidzIGVtYWlsIHdpbGwgYmUgdXBkYXRlZCB0byB0aGUgbmV3IG9uZSBhZnRlciBiZWluZyB2ZXJpZmllZC5cclxuICpcclxuICogSWYgeW91IGhhdmUgYSBjdXN0b20gZW1haWwgYWN0aW9uIGhhbmRsZXIsIHlvdSBjYW4gY29tcGxldGUgdGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGJ5IGNhbGxpbmdcclxuICoge0BsaW5rIGFwcGx5QWN0aW9uQ29kZX0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh1c2VyLCAnbmV3ZW1haWxAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBhd2FpdCBhcHBseUFjdGlvbkNvZGUoYXV0aCwgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3RW1haWwgLSBUaGUgbmV3IGVtYWlsIGFkZHJlc3MgdG8gYmUgdmVyaWZpZWQgYmVmb3JlIHVwZGF0ZS5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgbmV3RW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHZlcmlmeUFuZENoYW5nZUVtYWlsKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBsb2NhbCBjb3B5IG9mIHRoZSBlbWFpbCBvbiB1c2VyIGlzIG91dGRhdGVkLCByZWxvYWQgdGhlXHJcbiAgICAgICAgLy8gdXNlci5cclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVcGRhdGVzIGEgdXNlcidzIHByb2ZpbGUgZGF0YS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb2ZpbGUgLSBUaGUgcHJvZmlsZSdzIGBkaXNwbGF5TmFtZWAgYW5kIGBwaG90b1VSTGAgdG8gdXBkYXRlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlKHVzZXIsIHsgZGlzcGxheU5hbWUsIHBob3RvVVJMOiBwaG90b1VybCB9KSB7XHJcbiAgICBpZiAoZGlzcGxheU5hbWUgPT09IHVuZGVmaW5lZCAmJiBwaG90b1VybCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCBwcm9maWxlUmVxdWVzdCA9IHtcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHBob3RvVXJsLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VySW50ZXJuYWwsIHVwZGF0ZVByb2ZpbGUkMSh1c2VySW50ZXJuYWwuYXV0aCwgcHJvZmlsZVJlcXVlc3QpKTtcclxuICAgIHVzZXJJbnRlcm5hbC5kaXNwbGF5TmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICB1c2VySW50ZXJuYWwucGhvdG9VUkwgPSByZXNwb25zZS5waG90b1VybCB8fCBudWxsO1xyXG4gICAgLy8gVXBkYXRlIHRoZSBwYXNzd29yZCBwcm92aWRlciBhcyB3ZWxsXHJcbiAgICBjb25zdCBwYXNzd29yZFByb3ZpZGVyID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maW5kKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZCA9PT0gXCJwYXNzd29yZFwiIC8qIFBBU1NXT1JEICovKTtcclxuICAgIGlmIChwYXNzd29yZFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5kaXNwbGF5TmFtZSA9IHVzZXJJbnRlcm5hbC5kaXNwbGF5TmFtZTtcclxuICAgICAgICBwYXNzd29yZFByb3ZpZGVyLnBob3RvVVJMID0gdXNlckludGVybmFsLnBob3RvVVJMO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiBlbWFpbCB3aWxsIGJlIHNlbnQgdG8gdGhlIG9yaWdpbmFsIGVtYWlsIGFkZHJlc3MgKGlmIGl0IHdhcyBzZXQpIHRoYXQgYWxsb3dzIHRvIHJldm9rZSB0aGVcclxuICogZW1haWwgYWRkcmVzcyBjaGFuZ2UsIGluIG9yZGVyIHRvIHByb3RlY3QgdGhlbSBmcm9tIGFjY291bnQgaGlqYWNraW5nLlxyXG4gKlxyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3RW1haWwgLSBUaGUgbmV3IGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgbmV3RW1haWwsIG51bGwpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKHVzZXIsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlRW1haWxPclBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgbnVsbCwgbmV3UGFzc3dvcmQpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUVtYWlsT3JQYXNzd29yZCh1c2VyLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGlmIChlbWFpbCkge1xyXG4gICAgICAgIHJlcXVlc3QuZW1haWwgPSBlbWFpbDtcclxuICAgIH1cclxuICAgIGlmIChwYXNzd29yZCkge1xyXG4gICAgICAgIHJlcXVlc3QucGFzc3dvcmQgPSBwYXNzd29yZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQYXJzZSB0aGUgYEFkZGl0aW9uYWxVc2VySW5mb2AgZnJvbSB0aGUgSUQgdG9rZW4gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBfZnJvbUlkVG9rZW5SZXNwb25zZShpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBpZiAoIWlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBwcm92aWRlcklkIH0gPSBpZFRva2VuUmVzcG9uc2U7XHJcbiAgICBjb25zdCBwcm9maWxlID0gaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvXHJcbiAgICAgICAgPyBKU09OLnBhcnNlKGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mbylcclxuICAgICAgICA6IHt9O1xyXG4gICAgY29uc3QgaXNOZXdVc2VyID0gaWRUb2tlblJlc3BvbnNlLmlzTmV3VXNlciB8fFxyXG4gICAgICAgIGlkVG9rZW5SZXNwb25zZS5raW5kID09PSBcImlkZW50aXR5dG9vbGtpdCNTaWdudXBOZXdVc2VyUmVzcG9uc2VcIiAvKiBTaWdudXBOZXdVc2VyICovO1xyXG4gICAgaWYgKCFwcm92aWRlcklkICYmIChpZFRva2VuUmVzcG9uc2UgPT09IG51bGwgfHwgaWRUb2tlblJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpIHtcclxuICAgICAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IChfYiA9IChfYSA9IF9wYXJzZVRva2VuKGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpcmViYXNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbJ3NpZ25faW5fcHJvdmlkZXInXTtcclxuICAgICAgICBpZiAoc2lnbkluUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRQcm92aWRlcklkID0gc2lnbkluUHJvdmlkZXIgIT09IFwiYW5vbnltb3VzXCIgLyogQU5PTllNT1VTICovICYmXHJcbiAgICAgICAgICAgICAgICBzaWduSW5Qcm92aWRlciAhPT0gXCJjdXN0b21cIiAvKiBDVVNUT00gKi9cclxuICAgICAgICAgICAgICAgID8gc2lnbkluUHJvdmlkZXJcclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgLy8gVXNlcyBnZW5lcmljIGNsYXNzIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgbGVnYWN5IFNESy5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgZmlsdGVyZWRQcm92aWRlcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHN3aXRjaCAocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGNhc2UgXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUsIGlkVG9rZW5SZXNwb25zZS5zY3JlZW5OYW1lIHx8IG51bGwpO1xyXG4gICAgICAgIGNhc2UgXCJjdXN0b21cIiAvKiBDVVNUT00gKi86XHJcbiAgICAgICAgY2FzZSBcImFub255bW91c1wiIC8qIEFOT05ZTU9VUyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgbnVsbCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuaXNOZXdVc2VyID0gaXNOZXdVc2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlID0gcHJvZmlsZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUgZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSwgdXNlcm5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi8sIHByb2ZpbGUsIHR5cGVvZiAocHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luKSA9PT0gJ3N0cmluZycgPyBwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4gOiBudWxsKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSwgc2NyZWVuTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi8sIHByb2ZpbGUsIHNjcmVlbk5hbWUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyBwcm92aWRlciBzcGVjaWZpYyB7QGxpbmsgQWRkaXRpb25hbFVzZXJJbmZvfSBmb3IgdGhlIGdpdmVuIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFkZGl0aW9uYWxVc2VySW5mbyh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgeyB1c2VyLCBfdG9rZW5SZXNwb25zZSB9ID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICBpZiAodXNlci5pc0Fub255bW91cyAmJiAhX3Rva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAvLyBIYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSB3aGVyZSBzaWduSW5Bbm9ueW1vdXNseSgpIGdldHMgY2FsbGVkIHR3aWNlLlxyXG4gICAgICAgIC8vIE5vIG5ldHdvcmsgY2FsbCBpcyBtYWRlIHNvIHRoZXJlJ3Mgbm90aGluZyB0byBhY3R1YWxseSBmaWxsIHRoaXMgaW5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBpc05ld1VzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcm9maWxlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBfZnJvbUlkVG9rZW5SZXNwb25zZShfdG9rZW5SZXNwb25zZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gTm9uLW9wdGlvbmFsIGF1dGggbWV0aG9kcy5cclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHR5cGUgb2YgcGVyc2lzdGVuY2Ugb24gdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnRseSBzYXZlZFxyXG4gKiBgQXV0aGAgc2Vzc2lvbiBhbmQgYXBwbGllcyB0aGlzIHR5cGUgb2YgcGVyc2lzdGVuY2UgZm9yIGZ1dHVyZSBzaWduLWluIHJlcXVlc3RzLCBpbmNsdWRpbmdcclxuICogc2lnbi1pbiB3aXRoIHJlZGlyZWN0IHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ha2VzIGl0IGVhc3kgZm9yIGEgdXNlciBzaWduaW5nIGluIHRvIHNwZWNpZnkgd2hldGhlciB0aGVpciBzZXNzaW9uIHNob3VsZCBiZVxyXG4gKiByZW1lbWJlcmVkIG9yIG5vdC4gSXQgYWxzbyBtYWtlcyBpdCBlYXNpZXIgdG8gbmV2ZXIgcGVyc2lzdCB0aGUgYEF1dGhgIHN0YXRlIGZvciBhcHBsaWNhdGlvbnNcclxuICogdGhhdCBhcmUgc2hhcmVkIGJ5IG90aGVyIHVzZXJzIG9yIGhhdmUgc2Vuc2l0aXZlIGRhdGEuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogc2V0UGVyc2lzdGVuY2UoYXV0aCwgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZSAtIFRoZSB7QGxpbmsgUGVyc2lzdGVuY2V9IHRvIHVzZS5cclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBwZXJzaXN0ZW5jZSBjaGFuZ2UgaGFzIGNvbXBsZXRlZFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBwZXJzaXN0ZW5jZSkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHNpZ25lZC1pbiB1c2VyJ3MgSUQgdG9rZW4sIHdoaWNoIGluY2x1ZGVzIHNpZ24taW4sXHJcbiAqIHNpZ24tb3V0LCBhbmQgdG9rZW4gcmVmcmVzaCBldmVudHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGVycm9yLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25JZFRva2VuQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhbiBvYnNlcnZlciBmb3IgY2hhbmdlcyB0byB0aGUgdXNlcidzIHNpZ24taW4gc3RhdGUuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGtlZXAgdGhlIG9sZCBiZWhhdmlvciwgc2VlIHtAbGluayBvbklkVG9rZW5DaGFuZ2VkfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gY2hhbmdlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gZXJyb3IuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkF1dGhTdGF0ZUNoYW5nZWQoYXV0aCwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgY3VycmVudCBsYW5ndWFnZSB0byB0aGUgZGVmYXVsdCBkZXZpY2UvYnJvd3NlciBwcmVmZXJlbmNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVzZURldmljZUxhbmd1YWdlKGF1dGgpIHtcclxuICAgIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51c2VEZXZpY2VMYW5ndWFnZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzZXRzIHRoZSBwcm92aWRlZCB1c2VyIGFzIHtAbGluayBBdXRoLmN1cnJlbnRVc2VyfSBvbiB0aGVcclxuICoge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBIG5ldyBpbnN0YW5jZSBjb3B5IG9mIHRoZSB1c2VyIHByb3ZpZGVkIHdpbGwgYmUgbWFkZSBhbmQgc2V0IGFzIGN1cnJlbnRVc2VyLlxyXG4gKlxyXG4gKiBUaGlzIHdpbGwgdHJpZ2dlciB7QGxpbmsgb25BdXRoU3RhdGVDaGFuZ2VkfSBhbmQge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9IGxpc3RlbmVyc1xyXG4gKiBsaWtlIG90aGVyIHNpZ24gaW4gbWV0aG9kcy5cclxuICpcclxuICogVGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSB1c2VyIHRvIGJlIHVwZGF0ZWQgYmVsb25ncyB0byBhIGRpZmZlcmVudCBGaXJlYmFzZVxyXG4gKiBwcm9qZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIG5ldyB7QGxpbmsgVXNlcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRVc2VyKGF1dGgsIHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbn1cclxuLyoqXHJcbiAqIFNpZ25zIG91dCB0aGUgY3VycmVudCB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25PdXQoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zaWduT3V0KCk7XHJcbn1cclxuLyoqXHJcbiAqIERlbGV0ZXMgYW5kIHNpZ25zIG91dCB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHlcclxuICogc2lnbmVkIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlVXNlcih1c2VyKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmRlbGV0ZSgpO1xyXG59XG5cbmNsYXNzIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IodHlwZSwgY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUlkdG9rZW4oaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgaWRUb2tlbik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIG1mYVBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogRU5ST0xMICovXHJcbiAgICAgICAgICAgID8gJ2lkVG9rZW4nXHJcbiAgICAgICAgICAgIDogJ3BlbmRpbmdDcmVkZW50aWFsJztcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtdWx0aUZhY3RvclNlc3Npb246IHtcclxuICAgICAgICAgICAgICAgIFtrZXldOiB0aGlzLmNyZWRlbnRpYWxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUpTT04ob2JqKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikge1xyXG4gICAgICAgICAgICBpZiAoKF9hID0gb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKG9iai5tdWx0aUZhY3RvclNlc3Npb24ucGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChfYiA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4ob2JqLm11bHRpRmFjdG9yU2Vzc2lvbi5pZFRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvclJlc29sdmVySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXNzaW9uLCBoaW50cywgc2lnbkluUmVzb2x2ZXIpIHtcclxuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xyXG4gICAgICAgIHRoaXMuaGludHMgPSBoaW50cztcclxuICAgICAgICB0aGlzLnNpZ25JblJlc29sdmVyID0gc2lnbkluUmVzb2x2ZXI7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FcnJvcihhdXRoRXh0ZXJuLCBlcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICAgICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSBlcnJvci5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZTtcclxuICAgICAgICBjb25zdCBoaW50cyA9IChzZXJ2ZXJSZXNwb25zZS5tZmFJbmZvIHx8IFtdKS5tYXAoZW5yb2xsbWVudCA9PiBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCkpO1xyXG4gICAgICAgIF9hc3NlcnQoc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclJlc29sdmVySW1wbChzZXNzaW9uLCBoaW50cywgYXN5bmMgKGFzc2VydGlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZmFSZXNwb25zZSA9IGF3YWl0IGFzc2VydGlvbi5fcHJvY2VzcyhhdXRoLCBzZXNzaW9uKTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgb3V0IHRoZSB1bm5lZWRlZCBmaWVsZHMgZnJvbSB0aGUgb2xkIGxvZ2luIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFJbmZvO1xyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIC8vIFVzZSBpbiB0aGUgbmV3IHRva2VuICYgcmVmcmVzaCB0b2tlbiBpbiB0aGUgb2xkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2VydmVyUmVzcG9uc2UpLCB7IGlkVG9rZW46IG1mYVJlc3BvbnNlLmlkVG9rZW4sIHJlZnJlc2hUb2tlbjogbWZhUmVzcG9uc2UucmVmcmVzaFRva2VuIH0pO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgY29sbGFwc2UgdGhpcyBzd2l0Y2ggc3RhdGVtZW50IGludG8gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24gYW5kIGhhdmUgaXQgc3VwcG9ydCB0aGUgU0lHTl9JTiBjYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3Iub3BlcmF0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNpZ25JblwiIC8qIFNJR05fSU4gKi86XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgZXJyb3Iub3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqLzpcclxuICAgICAgICAgICAgICAgICAgICBfYXNzZXJ0KGVycm9yLnVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKGVycm9yLnVzZXIsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlc29sdmVTaWduSW4oYXNzZXJ0aW9uRXh0ZXJuKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25JblJlc29sdmVyKGFzc2VydGlvbik7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVzIGEge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXJ9IHN1aXRhYmxlIGZvciBjb21wbGV0aW9uIG9mIGFcclxuICogbXVsdGktZmFjdG9yIGZsb3cuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVycm9yIC0gVGhlIHtAbGluayBNdWx0aUZhY3RvckVycm9yfSByYWlzZWQgZHVyaW5nIGEgc2lnbi1pbiwgb3JcclxuICogcmVhdXRoZW50aWNhdGlvbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIoYXV0aCwgZXJyb3IpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgZXJyb3JJbnRlcm5hbCA9IGVycm9yO1xyXG4gICAgX2Fzc2VydChlcnJvci5jdXN0b21EYXRhLm9wZXJhdGlvblR5cGUsIGF1dGhNb2R1bGFyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCgoX2EgPSBlcnJvckludGVybmFsLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWZhUGVuZGluZ0NyZWRlbnRpYWwsIGF1dGhNb2R1bGFyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsLl9mcm9tRXJyb3IoYXV0aE1vZHVsYXIsIGVycm9ySW50ZXJuYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0RW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OnN0YXJ0XCIgLyogU1RBUlRfUEhPTkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVFbnJvbGxQaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6ZmluYWxpemVcIiAvKiBGSU5BTElaRV9QSE9ORV9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiB3aXRoZHJhd01mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6d2l0aGRyYXdcIiAvKiBXSVRIRFJBV19NRkEgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IFtdO1xyXG4gICAgICAgIHVzZXIuX29uUmVsb2FkKHVzZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXJJbmZvLm1mYUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdXNlckluZm8ubWZhSW5mby5tYXAoZW5yb2xsbWVudCA9PiBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UodXNlci5hdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVVzZXIodXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JVc2VySW1wbCh1c2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZW5yb2xsKGFzc2VydGlvbkV4dGVybiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IChhd2FpdCB0aGlzLmdldFNlc3Npb24oKSk7XHJcbiAgICAgICAgY29uc3QgZmluYWxpemVNZmFSZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMudXNlciwgYXNzZXJ0aW9uLl9wcm9jZXNzKHRoaXMudXNlci5hdXRoLCBzZXNzaW9uLCBkaXNwbGF5TmFtZSkpO1xyXG4gICAgICAgIC8vIE5ldyB0b2tlbnMgd2lsbCBiZSBpc3N1ZWQgYWZ0ZXIgZW5yb2xsbWVudCBvZiB0aGUgbmV3IHNlY29uZCBmYWN0b3JzLlxyXG4gICAgICAgIC8vIFRoZXkgbmVlZCB0byBiZSB1cGRhdGVkIG9uIHRoZSB1c2VyLlxyXG4gICAgICAgIGF3YWl0IHRoaXMudXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkoZmluYWxpemVNZmFSZXNwb25zZSk7XHJcbiAgICAgICAgLy8gVGhlIHVzZXIgbmVlZHMgdG8gYmUgcmVsb2FkZWQgdG8gZ2V0IHRoZSBuZXcgbXVsdGktZmFjdG9yIGluZm9ybWF0aW9uXHJcbiAgICAgICAgLy8gZnJvbSBzZXJ2ZXIuIFVTRVJfUkVMT0FERUQgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQgYW5kIGBlbnJvbGxlZEZhY3RvcnNgXHJcbiAgICAgICAgLy8gd2lsbCBiZSB1cGRhdGVkLlxyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1bmVucm9sbChpbmZvT3JVaWQpIHtcclxuICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSB0eXBlb2YgaW5mb09yVWlkID09PSAnc3RyaW5nJyA/IGluZm9PclVpZCA6IGluZm9PclVpZC51aWQ7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlblJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCB3aXRoZHJhd01mYSh0aGlzLnVzZXIuYXV0aCwge1xyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBtZmFFbnJvbGxtZW50SWRcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzZWNvbmQgZmFjdG9yIGZyb20gdGhlIHVzZXIncyBsaXN0LlxyXG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdGhpcy5lbnJvbGxlZEZhY3RvcnMuZmlsdGVyKCh7IHVpZCB9KSA9PiB1aWQgIT09IG1mYUVucm9sbG1lbnRJZCk7XHJcbiAgICAgICAgLy8gRGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGJhY2tlbmQgZGVjaWRlZCB0byByZXZva2UgdGhlIHVzZXIncyBzZXNzaW9uLFxyXG4gICAgICAgIC8vIHRoZSB0b2tlblJlc3BvbnNlIG1heSBiZSBlbXB0eS4gSWYgdGhlIHRva2VucyB3ZXJlIG5vdCB1cGRhdGVkIChhbmQgdGhleVxyXG4gICAgICAgIC8vIGFyZSBub3cgaW52YWxpZCksIHJlbG9hZGluZyB0aGUgdXNlciB3aWxsIGRpc2NvdmVyIHRoaXMgYW5kIGludmFsaWRhdGVcclxuICAgICAgICAvLyB0aGUgdXNlcidzIHN0YXRlIGFjY29yZGluZ2x5LlxyXG4gICAgICAgIGF3YWl0IHRoaXMudXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmNvZGUgIT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29uc3QgbXVsdGlGYWN0b3JVc2VyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4vKipcclxuICogVGhlIHtAbGluayBNdWx0aUZhY3RvclVzZXJ9IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgaXMgdXNlZCB0byBhY2Nlc3MgYWxsIG11bHRpLWZhY3RvciBwcm9wZXJ0aWVzIGFuZCBvcGVyYXRpb25zIHJlbGF0ZWQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG11bHRpRmFjdG9yKHVzZXIpIHtcclxuICAgIGNvbnN0IHVzZXJNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgaWYgKCFtdWx0aUZhY3RvclVzZXJDYWNoZS5oYXModXNlck1vZHVsYXIpKSB7XHJcbiAgICAgICAgbXVsdGlGYWN0b3JVc2VyQ2FjaGUuc2V0KHVzZXJNb2R1bGFyLCBNdWx0aUZhY3RvclVzZXJJbXBsLl9mcm9tVXNlcih1c2VyTW9kdWxhcikpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG11bHRpRmFjdG9yVXNlckNhY2hlLmdldCh1c2VyTW9kdWxhcik7XHJcbn1cblxuY29uc3QgU1RPUkFHRV9BVkFJTEFCTEVfS0VZID0gJ19fc2FrJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlcmUgYXJlIHR3byBkaWZmZXJlbnQgYnJvd3NlciBwZXJzaXN0ZW5jZSB0eXBlczogbG9jYWwgYW5kIHNlc3Npb24uXHJcbi8vIEJvdGggaGF2ZSB0aGUgc2FtZSBpbXBsZW1lbnRhdGlvbiBidXQgdXNlIGEgZGlmZmVyZW50IHVuZGVybHlpbmcgc3RvcmFnZVxyXG4vLyBvYmplY3QuXHJcbmNsYXNzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKHN0b3JhZ2VSZXRyaWV2ZXIsIHR5cGUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2VSZXRyaWV2ZXIgPSBzdG9yYWdlUmV0cmlldmVyO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcbiAgICBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfQVZBSUxBQkxFX0tFWSwgJzEnKTtcclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoanNvbiA/IEpTT04ucGFyc2UoanNvbikgOiBudWxsKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgc3RvcmFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlUmV0cmlldmVyKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIF9pc1NhZmFyaSh1YSkgfHwgX2lzSU9TKHVhKTtcclxufVxyXG4vLyBUaGUgcG9sbGluZyBwZXJpb2QgaW4gY2FzZSBldmVudHMgYXJlIG5vdCBzdXBwb3J0ZWRcclxuY29uc3QgX1BPTExJTkdfSU5URVJWQUxfTVMkMSA9IDEwMDA7XHJcbi8vIFRoZSBJRSAxMCBsb2NhbFN0b3JhZ2UgY3Jvc3MgdGFiIHN5bmNocm9uaXphdGlvbiBkZWxheSBpbiBtaWxsaXNlY29uZHNcclxuY29uc3QgSUUxMF9MT0NBTF9TVE9SQUdFX1NZTkNfREVMQVkgPSAxMDtcclxuY2xhc3MgQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgZXh0ZW5kcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigoKSA9PiB3aW5kb3cubG9jYWxTdG9yYWdlLCBcIkxPQ0FMXCIgLyogTE9DQUwgKi8pO1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSAoZXZlbnQsIHBvbGwpID0+IHRoaXMub25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlID0ge307XHJcbiAgICAgICAgLy8gc2V0VGltZW91dCByZXR1cm4gdmFsdWUgaXMgcGxhdGZvcm0gc3BlY2lmaWNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICAvLyBTYWZhcmkgb3IgaU9TIGJyb3dzZXIgYW5kIGVtYmVkZGVkIGluIGFuIGlmcmFtZS5cclxuICAgICAgICB0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCA9IF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpICYmIF9pc0lmcmFtZSgpO1xyXG4gICAgICAgIC8vIFdoZXRoZXIgdG8gdXNlIHBvbGxpbmcgaW5zdGVhZCBvZiBkZXBlbmRpbmcgb24gd2luZG93IGV2ZW50c1xyXG4gICAgICAgIHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcgPSBfaXNNb2JpbGVCcm93c2VyKCk7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkQWxsb3dNaWdyYXRpb24gPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZm9yQWxsQ2hhbmdlZEtleXMoY2IpIHtcclxuICAgICAgICAvLyBDaGVjayBhbGwga2V5cyB3aXRoIGxpc3RlbmVycyBvbiB0aGVtLlxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAvLyBHZXQgdmFsdWUgZnJvbSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgLy8gSWYgbG9jYWwgbWFwIHZhbHVlIGRvZXMgbm90IG1hdGNoLCB0cmlnZ2VyIGxpc3RlbmVyIHdpdGggc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gRGlmZmVyZW50aWF0ZSB0aGlzIHNpbXVsYXRlZCBldmVudCBmcm9tIHRoZSByZWFsIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNiKGtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uU3RvcmFnZUV2ZW50KGV2ZW50LCBwb2xsID0gZmFsc2UpIHtcclxuICAgICAgICAvLyBLZXkgd291bGQgYmUgbnVsbCBpbiBzb21lIHNpdHVhdGlvbnMsIGxpa2Ugd2hlbiBsb2NhbFN0b3JhZ2UgaXMgY2xlYXJlZFxyXG4gICAgICAgIGlmICghZXZlbnQua2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yQWxsQ2hhbmdlZEtleXMoKGtleSwgX29sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcclxuICAgICAgICAvLyBDaGVjayB0aGUgbWVjaGFuaXNtIGhvdyB0aGlzIGV2ZW50IHdhcyBkZXRlY3RlZC5cclxuICAgICAgICAvLyBUaGUgZmlyc3QgZXZlbnQgd2lsbCBkaWN0YXRlIHRoZSBtZWNoYW5pc20gdG8gYmUgdXNlZC5cclxuICAgICAgICBpZiAocG9sbCkge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgcG9sbGluZy5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0b3JhZ2UgZXZlbnQgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHN0b3JhZ2UgZXZlbnQgbGlzdGVuZXIuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBwb2xsaW5nIGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2FmYXJpIGVtYmVkZGVkIGlmcmFtZS4gU3RvcmFnZSBldmVudCB3aWxsIHRyaWdnZXIgd2l0aCB0aGUgZGVsdGFcclxuICAgICAgICAvLyBjaGFuZ2VzIGJ1dCBubyBjaGFuZ2VzIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgaWZyYW1lIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICBpZiAodGhpcy5zYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQpIHtcclxuICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgaWZyYW1lIHBhZ2UgdmFsdWUuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgLy8gVmFsdWUgbm90IHN5bmNocm9uaXplZCwgc3luY2hyb25pemUgbWFudWFsbHkuXHJcbiAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbHVlIGNoYW5nZWQgZnJvbSBjdXJyZW50IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3VycmVudCB2YWx1ZSBkZWxldGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5sb2NhbENhY2hlW2tleV0gPT09IGV2ZW50Lm5ld1ZhbHVlICYmICFwb2xsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGRldGVjdGVkIGFuZCBwcm9jZXNzZWQsIGRvIG5vdCB0cmlnZ2VyIGxpc3RlbmVycyBhZ2Fpbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0cmlnZ2VyTGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBLZWVwIGxvY2FsIG1hcCB1cCB0byBkYXRlIGluIGNhc2Ugc3RvcmFnZSBldmVudCBpcyB0cmlnZ2VyZWQgYmVmb3JlXHJcbiAgICAgICAgICAgIC8vIHBvbGwuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgaWYgKCFwb2xsICYmIHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVhbCBzdG9yYWdlIGV2ZW50IHdoaWNoIGhhcyBhbHJlYWR5IGJlZW4gZGV0ZWN0ZWQsIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHNlZW1zIHRvIHRyaWdnZXIgaW4gc29tZSBJRSBicm93c2VycyBmb3Igc29tZSByZWFzb24uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCBzdG9yZWRWYWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgaWYgKF9pc0lFMTAoKSAmJlxyXG4gICAgICAgICAgICBzdG9yZWRWYWx1ZSAhPT0gZXZlbnQubmV3VmFsdWUgJiZcclxuICAgICAgICAgICAgZXZlbnQubmV3VmFsdWUgIT09IGV2ZW50Lm9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIElFIDEwIGhhcyB0aGlzIHdlaXJkIGJ1ZyB3aGVyZSBhIHN0b3JhZ2UgZXZlbnQgd291bGQgdHJpZ2dlciB3aXRoIHRoZVxyXG4gICAgICAgICAgICAvLyBjb3JyZWN0IGtleSwgb2xkVmFsdWUgYW5kIG5ld1ZhbHVlIGJ1dCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpIGRvZXNcclxuICAgICAgICAgICAgLy8gbm90IHlpZWxkIHRoZSB1cGRhdGVkIHZhbHVlIHVudGlsIGEgZmV3IG1pbGxpc2Vjb25kcy4gVGhpcyBlbnN1cmVzXHJcbiAgICAgICAgICAgIC8vIHRoaXMgcmVjb3ZlcnMgZnJvbSB0aGF0IHNpdHVhdGlvbi5cclxuICAgICAgICAgICAgc2V0VGltZW91dCh0cmlnZ2VyTGlzdGVuZXJzLCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0cmlnZ2VyTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIodmFsdWUgPyBKU09OLnBhcnNlKHZhbHVlKSA6IHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZm9yQWxsQ2hhbmdlZEtleXMoKGtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcmFnZUV2ZW50KG5ldyBTdG9yYWdlRXZlbnQoJ3N0b3JhZ2UnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgICAgICAvKiBwb2xsICovIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBfUE9MTElOR19JTlRFUlZBTF9NUyQxKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGF0dGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBkZXRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBXaGV0aGVyIGJyb3dzZXIgY2FuIGRldGVjdCBzdG9yYWdlIGV2ZW50IHdoZW4gaXQgaGFkIGFscmVhZHkgYmVlbiBwdXNoZWQgdG8gdGhlIGJhY2tncm91bmQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWF5IGhhcHBlbiBpbiBzb21lIG1vYmlsZSBicm93c2Vycy4gQSBsb2NhbFN0b3JhZ2UgY2hhbmdlIGluIHRoZSBmb3JlZ3JvdW5kIHdpbmRvd1xyXG4gICAgICAgICAgICAvLyB3aWxsIG5vdCBiZSBkZXRlY3RlZCBpbiB0aGUgYmFja2dyb3VuZCB3aW5kb3cgdmlhIHRoZSBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBkZXRlY3RlZCBpbiBpT1MgNy54IG1vYmlsZSBicm93c2Vyc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mYWxsYmFja1RvUG9sbGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBVcGRhdGUgbG9jYWwgY2FjaGUgb24gYmFzZSBvcGVyYXRpb25zOlxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3NldChrZXksIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBzdXBlci5fZ2V0KGtleSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgfVxyXG59XHJcbkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGxvY2FsU3RvcmFnZWBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlID0gQnJvd3NlckxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgZXh0ZW5kcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigoKSA9PiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UsIFwiU0VTU0lPTlwiIC8qIFNFU1NJT04gKi8pO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBzZXNzaW9uIHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93c1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLnR5cGUgPSAnU0VTU0lPTic7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIGBTRVNTSU9OYCB1c2luZyBgc2Vzc2lvblN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlID0gQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNoaW0gZm9yIFByb21pc2UuYWxsU2V0dGxlZCwgbm90ZSB0aGUgc2xpZ2h0bHkgZGlmZmVyZW50IGZvcm1hdCBvZiBgZnVsZmlsbGVkYCB2cyBgc3RhdHVzYC5cclxuICpcclxuICogQHBhcmFtIHByb21pc2VzIC0gQXJyYXkgb2YgcHJvbWlzZXMgdG8gd2FpdCBvbi5cclxuICovXHJcbmZ1bmN0aW9uIF9hbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKGFzeW5jIChwcm9taXNlKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwcm9taXNlO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKHJlYXNvbikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlYXNvblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGNsYXNzIGZvciByZWNlaXZpbmcgbWVzc2FnZXMuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBSZWNlaXZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihldmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwID0ge307XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IHRoaXMuaGFuZGxlRXZlbnQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT2J0YWluIGFuIGluc3RhbmNlIG9mIGEgUmVjZWl2ZXIgZm9yIGEgZ2l2ZW4gZXZlbnQgdGFyZ2V0LCBpZiBub25lIGV4aXN0cyBpdCB3aWxsIGJlIGNyZWF0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VGFyZ2V0IC0gQW4gZXZlbnQgdGFyZ2V0IChzdWNoIGFzIHdpbmRvdyBvciBzZWxmKSB0aHJvdWdoIHdoaWNoIHRoZSB1bmRlcmx5aW5nXHJcbiAgICAgKiBtZXNzYWdlcyB3aWxsIGJlIHJlY2VpdmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2dldEluc3RhbmNlKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gVGhlIHJlc3VsdHMgYXJlIHN0b3JlZCBpbiBhbiBhcnJheSBzaW5jZSBvYmplY3RzIGNhbid0IGJlIGtleXMgZm9yIG90aGVyXHJcbiAgICAgICAgLy8gb2JqZWN0cy4gSW4gYWRkaXRpb24sIHNldHRpbmcgYSB1bmlxdWUgcHJvcGVydHkgb24gYW4gZXZlbnQgdGFyZ2V0IGFzIGFcclxuICAgICAgICAvLyBoYXNoIG1hcCBrZXkgbWF5IG5vdCBiZSBhbGxvd2VkIGR1ZSB0byBDT1JTIHJlc3RyaWN0aW9ucy5cclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5yZWNlaXZlcnMuZmluZChyZWNlaXZlciA9PiByZWNlaXZlci5pc0xpc3RlbmluZ3RvKGV2ZW50VGFyZ2V0KSk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5ld0luc3RhbmNlID0gbmV3IFJlY2VpdmVyKGV2ZW50VGFyZ2V0KTtcclxuICAgICAgICB0aGlzLnJlY2VpdmVycy5wdXNoKG5ld0luc3RhbmNlKTtcclxuICAgICAgICByZXR1cm4gbmV3SW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpc0xpc3RlbmluZ3RvKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRUYXJnZXQgPT09IGV2ZW50VGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBGYW5zIG91dCBhIE1lc3NhZ2VFdmVudCB0byB0aGUgYXBwcm9wcmlhdGUgbGlzdGVuZXJzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBTZW5kcyBhbiB7QGxpbmsgU3RhdHVzLkFDS30gdXBvbiByZWNlaXB0IGFuZCBhIHtAbGluayBTdGF0dXMuRE9ORX0gb25jZSBhbGwgaGFuZGxlcnMgaGF2ZVxyXG4gICAgICogZmluaXNoZWQgcHJvY2Vzc2luZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgTWVzc2FnZUV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgYXN5bmMgaGFuZGxlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGV2ZW50SWQsIGV2ZW50VHlwZSwgZGF0YSB9ID0gbWVzc2FnZUV2ZW50LmRhdGE7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV07XHJcbiAgICAgICAgaWYgKCEoaGFuZGxlcnMgPT09IG51bGwgfHwgaGFuZGxlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGhhbmRsZXJzLnNpemUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImFja1wiIC8qIEFDSyAqLyxcclxuICAgICAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICAgICAgZXZlbnRUeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKGhhbmRsZXJzKS5tYXAoYXN5bmMgKGhhbmRsZXIpID0+IGhhbmRsZXIobWVzc2FnZUV2ZW50Lm9yaWdpbiwgZGF0YSkpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2FsbFNldHRsZWQocHJvbWlzZXMpO1xyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJkb25lXCIgLyogRE9ORSAqLyxcclxuICAgICAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICAgICAgZXZlbnRUeXBlLFxyXG4gICAgICAgICAgICByZXNwb25zZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmb3IgYSBwYXJ0aWN1bGFyIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFR5cGUgLSBFdmVudCBuYW1lIHRvIHN1YnNjcmliZSB0by5cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgLSBUaGUgZXZlbnQgaGFuZGxlciB3aGljaCBzaG91bGQgcmVjZWl2ZSB0aGUgZXZlbnRzLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3N1YnNjcmliZShldmVudFR5cGUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmhhbmRsZXJzTWFwKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSA9IG5ldyBTZXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmFkZChldmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnN1YnNjcmliZSBhbiBldmVudCBoYW5kbGVyIGZyb20gYSBwYXJ0aWN1bGFyIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFR5cGUgLSBFdmVudCBuYW1lIHRvIHVuc3Vic2NyaWJlIGZyb20uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gT3B0aW5vYWwgZXZlbnQgaGFuZGxlciwgaWYgbm9uZSBwcm92aWRlZCwgdW5zdWJzY3JpYmUgYWxsIGhhbmRsZXJzIG9uIHRoaXMgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfdW5zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdICYmIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uZGVsZXRlKGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZXZlbnRIYW5kbGVyIHx8IHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmhhbmRsZXJzTWFwKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblJlY2VpdmVyLnJlY2VpdmVycyA9IFtdO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2VuZXJhdGVFdmVudElkKHByZWZpeCA9ICcnLCBkaWdpdHMgPSAxMCkge1xyXG4gICAgbGV0IHJhbmRvbSA9ICcnO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaWdpdHM7IGkrKykge1xyXG4gICAgICAgIHJhbmRvbSArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJlZml4ICsgcmFuZG9tO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIHNlbmRpbmcgbWVzc2FnZXMgYW5kIHdhaXRpbmcgZm9yIGEgY29tcGxldGlvbiByZXNwb25zZS5cclxuICpcclxuICovXHJcbmNsYXNzIFNlbmRlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzID0gbmV3IFNldCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnN1YnNjcmliZSB0aGUgaGFuZGxlciBhbmQgcmVtb3ZlIGl0IGZyb20gb3VyIHRyYWNraW5nIFNldC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlciAtIFRoZSBoYW5kbGVyIHRvIHVuc3Vic2NyaWJlLlxyXG4gICAgICovXHJcbiAgICByZW1vdmVNZXNzYWdlSGFuZGxlcihoYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKGhhbmRsZXIubWVzc2FnZUNoYW5uZWwpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlci5vbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBoYW5kbGVyLm1lc3NhZ2VDaGFubmVsLnBvcnQxLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZGVsZXRlKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVjZWl2ZXIgbG9jYXRlZCBhdCB7QGxpbmsgdGFyZ2V0fS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogV2UnbGwgZmlyc3Qgd2FpdCBhIGJpdCBmb3IgYW4gQUNLICwgaWYgd2UgZ2V0IG9uZSB3ZSB3aWxsIHdhaXQgc2lnbmlmaWNhbnRseSBsb25nZXIgdW50aWwgdGhlXHJcbiAgICAgKiByZWNlaXZlciBoYXMgaGFkIGEgY2hhbmNlIHRvIGZ1bGx5IHByb2Nlc3MgdGhlIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFR5cGUgLSBUeXBlIG9mIGV2ZW50IHRvIHNlbmQuXHJcbiAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBwYXlsb2FkIG9mIHRoZSBldmVudC5cclxuICAgICAqIEBwYXJhbSB0aW1lb3V0IC0gVGltZW91dCBmb3Igd2FpdGluZyBvbiBhbiBBQ0sgZnJvbSB0aGUgcmVjZWl2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc2V0dGxlZCBwcm9taXNlcyBmcm9tIGFsbCB0aGUgaGFuZGxlcnMgdGhhdCB3ZXJlIGxpc3RlbmluZyBvbiB0aGUgcmVjZWl2ZXIuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9zZW5kKGV2ZW50VHlwZSwgZGF0YSwgdGltZW91dCA9IDUwIC8qIEFDSyAqLykge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJyA/IG5ldyBNZXNzYWdlQ2hhbm5lbCgpIDogbnVsbDtcclxuICAgICAgICBpZiAoIW1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbm5lY3Rpb25fdW5hdmFpbGFibGVcIiAvKiBDT05ORUNUSU9OX1VOQVZBSUxBQkxFICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIHJldHVybiBmdW5kYW1lbnRhbGx5IGRpZmZlcmVudCB0eXBlcy5cclxuICAgICAgICAvLyBXZSBkb24ndCBhY3R1YWxseSBjYXJlIHdoYXQgdGhlIHZhbHVlIGlzIGJ1dCBUUyB3b24ndCBhY2NlcHQgdW5rbm93biBhbmRcclxuICAgICAgICAvLyB3ZSBjYW4ndCBjYXN0IHByb3Blcmx5IGluIGJvdGggZW52aXJvbm1lbnRzLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgbGV0IGNvbXBsZXRpb25UaW1lcjtcclxuICAgICAgICBsZXQgaGFuZGxlcjtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgnJywgMjApO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5zdGFydCgpO1xyXG4gICAgICAgICAgICBjb25zdCBhY2tUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInVuc3VwcG9ydGVkX2V2ZW50XCIgLyogVU5TVVBQT1JURURfRVZFTlQgKi8pKTtcclxuICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbCxcclxuICAgICAgICAgICAgICAgIG9uTWVzc2FnZShldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlRXZlbnQuZGF0YS5ldmVudElkICE9PSBldmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlRXZlbnQuZGF0YS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFja1wiIC8qIEFDSyAqLzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZWNlaXZlciBzaG91bGQgQUNLIGZpcnN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFja1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25UaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ0aW1lb3V0XCIgLyogVElNRU9VVCAqLykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCAvKiBDT01QTEVUSU9OICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZG9uZVwiIC8qIERPTkUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmNlIHRoZSByZWNlaXZlcidzIGhhbmRsZXJzIGFyZSBmaW5pc2hlZCB3ZSB3aWxsIGdldCB0aGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wbGV0aW9uVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlRXZlbnQuZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJpbnZhbGlkX3Jlc3BvbnNlXCIgLyogSU5WQUxJRF9SRVNQT05TRSAqLykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmFkZChoYW5kbGVyKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIGRhdGFcclxuICAgICAgICAgICAgfSwgW21lc3NhZ2VDaGFubmVsLnBvcnQyXSk7XHJcbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIExhenkgYWNjZXNzb3IgZm9yIHdpbmRvdywgc2luY2UgdGhlIGNvbXBhdCBsYXllciB3b24ndCB0cmVlIHNoYWtlIHRoaXMgb3V0LFxyXG4gKiB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBub3QgdG8gbWVzcyB3aXRoIHdpbmRvdyB1bmxlc3Mgd2UgaGF2ZSB0b1xyXG4gKi9cclxuZnVuY3Rpb24gX3dpbmRvdygpIHtcclxuICAgIHJldHVybiB3aW5kb3c7XHJcbn1cclxuZnVuY3Rpb24gX3NldFdpbmRvd0xvY2F0aW9uKHVybCkge1xyXG4gICAgX3dpbmRvdygpLmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc1dvcmtlcigpIHtcclxuICAgIHJldHVybiAodHlwZW9mIF93aW5kb3coKVsnV29ya2VyR2xvYmFsU2NvcGUnXSAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgX3dpbmRvdygpWydpbXBvcnRTY3JpcHRzJ10gPT09ICdmdW5jdGlvbicpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyKCkge1xyXG4gICAgaWYgKCEobmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xyXG4gICAgICAgIHJldHVybiByZWdpc3RyYXRpb24uYWN0aXZlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICgoX2EgPSBuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRyb2xsZXIpIHx8IG51bGw7XHJcbn1cclxuZnVuY3Rpb24gX2dldFdvcmtlckdsb2JhbFNjb3BlKCkge1xyXG4gICAgcmV0dXJuIF9pc1dvcmtlcigpID8gc2VsZiA6IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZURiJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IERCX09CSkVDVFNUT1JFX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2UnO1xyXG5jb25zdCBEQl9EQVRBX0tFWVBBVEggPSAnZmJhc2Vfa2V5JztcclxuLyoqXHJcbiAqIFByb21pc2Ugd3JhcHBlciBmb3IgSURCUmVxdWVzdFxyXG4gKlxyXG4gKiBVbmZvcnR1bmF0ZWx5IHdlIGNhbid0IGNsZWFubHkgZXh0ZW5kIFByb21pc2U8VD4gc2luY2UgcHJvbWlzZXMgYXJlIG5vdCBjYWxsYWJsZSBpbiBFUzZcclxuICpcclxuICovXHJcbmNsYXNzIERCUHJvbWlzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0KSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcclxuICAgIH1cclxuICAgIHRvUHJvbWlzZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcy5yZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0T2JqZWN0U3RvcmUoZGIsIGlzUmVhZFdyaXRlKSB7XHJcbiAgICByZXR1cm4gZGJcclxuICAgICAgICAudHJhbnNhY3Rpb24oW0RCX09CSkVDVFNUT1JFX05BTUVdLCBpc1JlYWRXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JylcclxuICAgICAgICAub2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSk7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZURhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9OQU1FKTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmZ1bmN0aW9uIF9vcGVuRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oREJfTkFNRSwgREJfVkVSU0lPTik7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FLCB7IGtleVBhdGg6IERCX0RBVEFfS0VZUEFUSCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICAvLyBTdHJhbmdlIGJ1ZyB0aGF0IG9jY3VycyBpbiBGaXJlZm94IHdoZW4gbXVsdGlwbGUgdGFicyBhcmUgb3BlbmVkIGF0IHRoZVxyXG4gICAgICAgICAgICAvLyBzYW1lIHRpbWUuIFRoZSBvbmx5IHdheSB0byByZWNvdmVyIHNlZW1zIHRvIGJlIGRlbGV0aW5nIHRoZSBkYXRhYmFzZVxyXG4gICAgICAgICAgICAvLyBhbmQgcmUtaW5pdGlhbGl6aW5nIGl0LlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy82MzRcclxuICAgICAgICAgICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKERCX09CSkVDVFNUT1JFX05BTUUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGNsb3NlIHRoZSBkYXRhYmFzZSBvciBlbHNlIHlvdSBnZXQgYSBgYmxvY2tlZGAgZXZlbnRcclxuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBfZGVsZXRlRGF0YWJhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoYXdhaXQgX29wZW5EYXRhYmFzZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLnB1dCh7XHJcbiAgICAgICAgW0RCX0RBVEFfS0VZUEFUSF06IGtleSxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0KGtleSk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxuICAgIHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgPyBudWxsIDogZGF0YS52YWx1ZTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlT2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkuZGVsZXRlKGtleSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyA9IDgwMDtcclxuY29uc3QgX1RSQU5TQUNUSU9OX1JFVFJZX0NPVU5UID0gMztcclxuY2xhc3MgSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcIkxPQ0FMXCIgLyogTE9DQUwgKi87XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkQWxsb3dNaWdyYXRpb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlID0ge307XHJcbiAgICAgICAgLy8gc2V0VGltZW91dCByZXR1cm4gdmFsdWUgaXMgcGxhdGZvcm0gc3BlY2lmaWNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmljZVdvcmtlciA9IG51bGw7XHJcbiAgICAgICAgLy8gRmlyZSAmIGZvcmdldCB0aGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIGFzIGl0IG1heSBuZXZlciByZXNvbHZlXHJcbiAgICAgICAgdGhpcy5fd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlID1cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZygpLnRoZW4oKCkgPT4geyB9LCAoKSA9PiB7IH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5EYigpIHtcclxuICAgICAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYiA9IGF3YWl0IF9vcGVuRGF0YWJhc2UoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYjtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUmV0cmllcyhvcCkge1xyXG4gICAgICAgIGxldCBudW1BdHRlbXB0cyA9IDA7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5fb3BlbkRiKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgb3AoZGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtQXR0ZW1wdHMrKyA+IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY29uc2lkZXIgYWRkaW5nIGV4cG9uZW50aWFsIGJhY2tvZmZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5kZXhlZERCIGV2ZW50cyBkbyBub3QgcHJvcGFnYXRlIGZyb20gdGhlIG1haW4gd2luZG93IHRvIHRoZSB3b3JrZXIgY29udGV4dC4gIFdlIHJlbHkgb24gYVxyXG4gICAgICogcG9zdE1lc3NhZ2UgaW50ZXJmYWNlIHRvIHNlbmQgdGhlc2UgZXZlbnRzIHRvIHRoZSB3b3JrZXIgb3Vyc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZygpIHtcclxuICAgICAgICByZXR1cm4gX2lzV29ya2VyKCkgPyB0aGlzLmluaXRpYWxpemVSZWNlaXZlcigpIDogdGhpcy5pbml0aWFsaXplU2VuZGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzIHRoZSB3b3JrZXIgd2Ugc2hvdWxkIGxpc3RlbiB0byBldmVudHMgZnJvbSB0aGUgbWFpbiB3aW5kb3cuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVSZWNlaXZlcigpIHtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gUmVjZWl2ZXIuX2dldEluc3RhbmNlKF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpKTtcclxuICAgICAgICAvLyBSZWZyZXNoIGZyb20gcGVyc2lzdGVuY2UgaWYgd2UgcmVjZWl2ZSBhIEtleUNoYW5nZWQgbWVzc2FnZS5cclxuICAgICAgICB0aGlzLnJlY2VpdmVyLl9zdWJzY3JpYmUoXCJrZXlDaGFuZ2VkXCIgLyogS0VZX0NIQU5HRUQgKi8sIGFzeW5jIChfb3JpZ2luLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBhd2FpdCB0aGlzLl9wb2xsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBrZXlQcm9jZXNzZWQ6IGtleXMuaW5jbHVkZXMoZGF0YS5rZXkpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gTGV0IHRoZSBzZW5kZXIga25vdyB0aGF0IHdlIGFyZSBsaXN0ZW5pbmcgc28gdGhleSBnaXZlIHVzIG1vcmUgdGltZW91dC5cclxuICAgICAgICB0aGlzLnJlY2VpdmVyLl9zdWJzY3JpYmUoXCJwaW5nXCIgLyogUElORyAqLywgYXN5bmMgKF9vcmlnaW4sIF9kYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXCJrZXlDaGFuZ2VkXCIgLyogS0VZX0NIQU5HRUQgKi9dO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgbWFpbiB3aW5kb3csIHdlIHNob3VsZCBsZXQgdGhlIHdvcmtlciBrbm93IHdoZW4ga2V5cyBjaGFuZ2UgKHNldCBhbmQgcmVtb3ZlKS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2aWNlV29ya2VyQ29udGFpbmVyL3JlYWR5IHwgU2VydmljZVdvcmtlckNvbnRhaW5lci5yZWFkeX1cclxuICAgICAqIG1heSBub3QgcmVzb2x2ZS5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlbmRlcigpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGFuIGFjdGl2ZSBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBhd2FpdCBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpO1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBuZXcgU2VuZGVyKHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcik7XHJcbiAgICAgICAgLy8gUGluZyB0aGUgc2VydmljZSB3b3JrZXIgdG8gY2hlY2sgd2hhdCBldmVudHMgdGhleSBjYW4gaGFuZGxlLlxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnNlbmRlci5fc2VuZChcInBpbmdcIiAvKiBQSU5HICovLCB7fSwgODAwIC8qIExPTkdfQUNLICovKTtcclxuICAgICAgICBpZiAoIXJlc3VsdHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYSA9IHJlc3VsdHNbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mdWxmaWxsZWQpICYmXHJcbiAgICAgICAgICAgICgoX2IgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudmFsdWUuaW5jbHVkZXMoXCJrZXlDaGFuZ2VkXCIgLyogS0VZX0NIQU5HRUQgKi8pKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBMZXQgdGhlIHdvcmtlciBrbm93IGFib3V0IGEgY2hhbmdlZCBrZXksIHRoZSBleGFjdCBrZXkgZG9lc24ndCB0ZWNobmljYWxseSBtYXR0ZXIgc2luY2UgdGhlXHJcbiAgICAgKiB3b3JrZXIgd2lsbCBqdXN0IHRyaWdnZXIgYSBmdWxsIHN5bmMgYW55d2F5LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3Igbm93LCB3ZSBvbmx5IHN1cHBvcnQgb25lIHNlcnZpY2Ugd29ya2VyIHBlciBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBrZXkgLSBTdG9yYWdlIGtleSB3aGljaCBjaGFuZ2VkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBub3RpZnlTZXJ2aWNlV29ya2VyKGtleSkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZW5kZXIgfHxcclxuICAgICAgICAgICAgIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlciB8fFxyXG4gICAgICAgICAgICBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSAhPT0gdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJrZXlDaGFuZ2VkXCIgLyogS0VZX0NIQU5HRUQgKi8sIHsga2V5IH0sIFxyXG4gICAgICAgICAgICAvLyBVc2UgbG9uZyB0aW1lb3V0IGlmIHJlY2VpdmVyIGhhcyBwcmV2aW91c2x5IHJlc3BvbmRlZCB0byBhIHBpbmcgZnJvbSB1cy5cclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGVcclxuICAgICAgICAgICAgICAgID8gODAwIC8qIExPTkdfQUNLICovXHJcbiAgICAgICAgICAgICAgICA6IDUwIC8qIEFDSyAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdCBlZmZvcnQgYXBwcm9hY2guIElnbm9yZSBlcnJvcnMuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghaW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9wdXRPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSwgJzEnKTtcclxuICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZU9iamVjdChkYiwgU1RPUkFHRV9BVkFJTEFCTEVfS0VZKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3dpdGhQZW5kaW5nV3JpdGUod3JpdGUpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMrKztcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzLS07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90aWZ5U2VydmljZVdvcmtlcihrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBvYmogPSAoYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBnZXRPYmplY3QoZGIsIGtleSkpKTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG9iajtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBlbmRpbmdXcml0ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gX2RlbGV0ZU9iamVjdChkYiwga2V5KSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90aWZ5U2VydmljZVdvcmtlcihrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3BvbGwoKSB7XHJcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgd2UgbmVlZCB0byBmYWxsYmFjayBpZiBnZXRBbGwgaXMgbm90IHN1cHBvcnRlZFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBnZXRBbGxSZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEQlByb21pc2UoZ2V0QWxsUmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSBoYXZlIHBlbmRpbmcgd3JpdGVzIGluIHByb2dyZXNzIGFib3J0LCB3ZSdsbCBnZXQgcGlja2VkIHVwIG9uIHRoZSBuZXh0IHBvbGxcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nV3JpdGVzICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGtleXNJblJlc3VsdCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgZmJhc2Vfa2V5OiBrZXksIHZhbHVlIH0gb2YgcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGtleXNJblJlc3VsdC5hZGQoa2V5KTtcclxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYWxDYWNoZVtrZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgbG9jYWxLZXkgb2YgT2JqZWN0LmtleXModGhpcy5sb2NhbENhY2hlKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbENhY2hlW2xvY2FsS2V5XSAmJiAha2V5c0luUmVzdWx0Lmhhcyhsb2NhbEtleSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZWRcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGxvY2FsS2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaChsb2NhbEtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gbmV3VmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gdGhpcy5fcG9sbCgpLCBfUE9MTElOR19JTlRFUlZBTF9NUyk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fZ2V0KGtleSk7IC8vIFRoaXMgY2FuIGhhcHBlbiBpbiB0aGUgYmFja2dyb3VuZCBhc3luYyBhbmQgd2UgY2FuIHJldHVybiBpbW1lZGlhdGVseS5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBpbmRleGVkREJgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlID0gSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYVNpZ25JbjpzdGFydFwiIC8qIFNUQVJUX1BIT05FX01GQV9TSUdOX0lOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46ZmluYWxpemVcIiAvKiBGSU5BTElaRV9QSE9ORV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNhcHRjaGFQYXJhbXMoYXV0aCkge1xyXG4gICAgcmV0dXJuICgoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogR0VUICovLCBcIi92MS9yZWNhcHRjaGFQYXJhbXNcIiAvKiBHRVRfUkVDQVBUQ0hBX1BBUkFNICovKSkucmVjYXB0Y2hhU2l0ZUtleSB8fCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U2NyaXB0UGFyZW50RWxlbWVudCgpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICByZXR1cm4gKF9iID0gKF9hID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBkb2N1bWVudDtcclxufVxyXG5mdW5jdGlvbiBfbG9hZEpTKHVybCkge1xyXG4gICAgLy8gVE9ETzogY29uc2lkZXIgYWRkaW5nIHRpbWVvdXQgc3VwcG9ydCAmIGNhbmNlbGxhdGlvblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcclxuICAgICAgICBlbC5vbmxvYWQgPSByZXNvbHZlO1xyXG4gICAgICAgIGVsLm9uZXJyb3IgPSBlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgZXJyb3IuY3VzdG9tRGF0YSA9IGU7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBlbC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgICAgZWwuY2hhcnNldCA9ICdVVEYtOCc7XHJcbiAgICAgICAgZ2V0U2NyaXB0UGFyZW50RWxlbWVudCgpLmFwcGVuZENoaWxkKGVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUNhbGxiYWNrTmFtZShwcmVmaXgpIHtcclxuICAgIHJldHVybiBgX18ke3ByZWZpeH0ke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX1NPTFZFX1RJTUVfTVMgPSA1MDA7XHJcbmNvbnN0IF9FWFBJUkFUSU9OX1RJTUVfTVMgPSA2MDAwMDtcclxuY29uc3QgX1dJREdFVF9JRF9TVEFSVCA9IDEwMDAwMDAwMDAwMDA7XHJcbmNsYXNzIE1vY2tSZUNhcHRjaGEge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB0aGlzLl93aWRnZXRzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKGNvbnRhaW5lciwgcGFyYW1ldGVycykge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5jb3VudGVyO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMuc2V0KGlkLCBuZXcgTW9ja1dpZGdldChjb250YWluZXIsIHRoaXMuYXV0aC5uYW1lLCBwYXJhbWV0ZXJzIHx8IHt9KSk7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG4gICAgcmVzZXQob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHZvaWQgKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRlbGV0ZSgpKTtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLmRlbGV0ZShpZCk7XHJcbiAgICB9XHJcbiAgICBnZXRSZXNwb25zZShvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRSZXNwb25zZSgpKSB8fCAnJztcclxuICAgIH1cclxuICAgIGFzeW5jIGV4ZWN1dGUob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHZvaWQgKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmV4ZWN1dGUoKSk7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIE1vY2tXaWRnZXQge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyT3JJZCwgYXBwTmFtZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xpY2tIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBjb250YWluZXJPcklkID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lck9ySWQpXHJcbiAgICAgICAgICAgIDogY29udGFpbmVyT3JJZDtcclxuICAgICAgICBfYXNzZXJ0KGNvbnRhaW5lciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCB7IGFwcE5hbWUgfSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0aGlzLnBhcmFtcy5zaXplICE9PSAnaW52aXNpYmxlJztcclxuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRSZXNwb25zZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VUb2tlbjtcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVySWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IGdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nKDUwKTtcclxuICAgICAgICAgICAgY29uc3QgeyBjYWxsYmFjaywgJ2V4cGlyZWQtY2FsbGJhY2snOiBleHBpcmVkQ2FsbGJhY2sgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5yZXNwb25zZVRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnRpbWVySWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChleHBpcmVkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVkQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIF9FWFBJUkFUSU9OX1RJTUVfTVMpO1xyXG4gICAgICAgIH0sIF9TT0xWRV9USU1FX01TKTtcclxuICAgIH1cclxuICAgIGNoZWNrSWZEZWxldGVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZUNBUFRDSEEgbW9jayB3YXMgYWxyZWFkeSBkZWxldGVkIScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyhsZW4pIHtcclxuICAgIGNvbnN0IGNoYXJzID0gW107XHJcbiAgICBjb25zdCBhbGxvd2VkQ2hhcnMgPSAnMTIzNDU2Nzg5MGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGNoYXJzLnB1c2goYWxsb3dlZENoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFJlQ2FwdGNoYSB3aWxsIGxvYWQgdXNpbmcgdGhlIHNhbWUgY2FsbGJhY2ssIHNvIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBuZWVkc1xyXG4vLyB0byBiZSBrZXB0IGFyb3VuZFxyXG5jb25zdCBfSlNMT0FEX0NBTExCQUNLID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdyY2InKTtcclxuY29uc3QgTkVUV09SS19USU1FT1VUX0RFTEFZID0gbmV3IERlbGF5KDMwMDAwLCA2MDAwMCk7XHJcbmNvbnN0IFJFQ0FQVENIQV9CQVNFID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS5qcz8nO1xyXG4vKipcclxuICogTG9hZGVyIGZvciB0aGUgR1JlQ2FwdGNoYSBsaWJyYXJ5LiBUaGVyZSBzaG91bGQgb25seSBldmVyIGJlIG9uZSBvZiB0aGlzLlxyXG4gKi9cclxuY2xhc3MgUmVDYXB0Y2hhTG9hZGVySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IDA7XHJcbiAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCA9ICEhX3dpbmRvdygpLmdyZWNhcHRjaGE7XHJcbiAgICB9XHJcbiAgICBsb2FkKGF1dGgsIGhsID0gJycpIHtcclxuICAgICAgICBfYXNzZXJ0KGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJlc29sdmVJbW1lZGlhdGVseShobCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShfd2luZG93KCkuZ3JlY2FwdGNoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ldHdvcmtUaW1lb3V0ID0gX3dpbmRvdygpLnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgIH0sIE5FVFdPUktfVElNRU9VVF9ERUxBWS5nZXQoKSk7XHJcbiAgICAgICAgICAgIF93aW5kb3coKVtfSlNMT0FEX0NBTExCQUNLXSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIF93aW5kb3coKS5jbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIF93aW5kb3coKVtfSlNMT0FEX0NBTExCQUNLXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IF93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWNhcHRjaGEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFdyYXAgdGhlIGdyZXB0Y2hhIHJlbmRlciBmdW5jdGlvbiBzbyB0aGF0IHdlIGtub3cgaWYgdGhlIGRldmVsb3BlciBoYXNcclxuICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBpdCBzZXBhcmF0ZWx5XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW5kZXIgPSByZWNhcHRjaGEucmVuZGVyO1xyXG4gICAgICAgICAgICAgICAgcmVjYXB0Y2hhLnJlbmRlciA9IChjb250YWluZXIsIHBhcmFtcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldElkID0gcmVuZGVyKGNvbnRhaW5lciwgcGFyYW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2lkZ2V0SWQ7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ob3N0TGFuZ3VhZ2UgPSBobDtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVjYXB0Y2hhKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7UkVDQVBUQ0hBX0JBU0V9PyR7cXVlcnlzdHJpbmcoe1xyXG4gICAgICAgICAgICAgICAgb25sb2FkOiBfSlNMT0FEX0NBTExCQUNLLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiAnZXhwbGljaXQnLFxyXG4gICAgICAgICAgICAgICAgaGxcclxuICAgICAgICAgICAgfSl9YDtcclxuICAgICAgICAgICAgX2xvYWRKUyh1cmwpLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChuZXR3b3JrVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyZWRPbmVJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmNvdW50ZXItLTtcclxuICAgIH1cclxuICAgIHNob3VsZFJlc29sdmVJbW1lZGlhdGVseShobCkge1xyXG4gICAgICAgIC8vIFdlIGNhbiByZXNvbHZlIGltbWVkaWF0ZWx5IGlmOlxyXG4gICAgICAgIC8vICAg4oCiIGdyZWNhcHRjaGEgaXMgYWxyZWFkeSBkZWZpbmVkIEFORCAoXHJcbiAgICAgICAgLy8gICAgIDEuIHRoZSByZXF1ZXN0ZWQgbGFuZ3VhZ2UgY29kZXMgYXJlIHRoZSBzYW1lIE9SXHJcbiAgICAgICAgLy8gICAgIDIuIHRoZXJlIGV4aXN0cyBhbHJlYWR5IGEgUmVDYXB0Y2hhIG9uIHRoZSBwYWdlXHJcbiAgICAgICAgLy8gICAgIDMuIHRoZSBsaWJyYXJ5IHdhcyBhbHJlYWR5IGxvYWRlZCBieSB0aGUgYXBwXHJcbiAgICAgICAgLy8gSW4gY2FzZXMgKDIpIGFuZCAoMyksIHdlIF9jYW4ndF8gcmVsb2FkIGFzIGl0IHdvdWxkIGJyZWFrIHRoZSByZWNhcHRjaGFzXHJcbiAgICAgICAgLy8gdGhhdCBhcmUgYWxyZWFkeSBpbiB0aGUgcGFnZVxyXG4gICAgICAgIHJldHVybiAoISFfd2luZG93KCkuZ3JlY2FwdGNoYSAmJlxyXG4gICAgICAgICAgICAoaGwgPT09IHRoaXMuaG9zdExhbmd1YWdlIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCkge1xyXG4gICAgcmV0dXJuIGhsLmxlbmd0aCA8PSA2ICYmIC9eXFxzKlthLXpBLVowLTlcXC1dKlxccyokLy50ZXN0KGhsKTtcclxufVxyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCB7XHJcbiAgICBhc3luYyBsb2FkKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1vY2tSZUNhcHRjaGEoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7IH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBSRUNBUFRDSEFfVkVSSUZJRVJfVFlQRSA9ICdyZWNhcHRjaGEnO1xyXG5jb25zdCBERUZBVUxUX1BBUkFNUyA9IHtcclxuICAgIHRoZW1lOiAnbGlnaHQnLFxyXG4gICAgdHlwZTogJ2ltYWdlJ1xyXG59O1xyXG4vKipcclxuICogQW4ge0BsaW5rIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhLyB8IHJlQ0FQVENIQX0tYmFzZWQgYXBwbGljYXRpb24gdmVyaWZpZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFJlY2FwdGNoYVZlcmlmaWVyIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJPcklkIC0gVGhlIHJlQ0FQVENIQSBjb250YWluZXIgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGlzIGhhcyBkaWZmZXJlbnQgbWVhbmluZyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgcmVDQVBUQ0hBIGlzIGhpZGRlbiBvciB2aXNpYmxlLiBGb3IgYVxyXG4gICAgICogdmlzaWJsZSByZUNBUFRDSEEgdGhlIGNvbnRhaW5lciBtdXN0IGJlIGVtcHR5LiBJZiBhIHN0cmluZyBpcyB1c2VkLCBpdCBoYXMgdG8gY29ycmVzcG9uZCB0b1xyXG4gICAgICogYW4gZWxlbWVudCBJRC4gVGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBtdXN0IGFsc28gbXVzdCBiZSBpbiB0aGUgRE9NIGF0IHRoZSB0aW1lIG9mXHJcbiAgICAgKiBpbml0aWFsaXphdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1ldGVycyAtIFRoZSBvcHRpb25hbCByZUNBUFRDSEEgcGFyYW1ldGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogQ2hlY2sgdGhlIHJlQ0FQVENIQSBkb2NzIGZvciBhIGNvbXByZWhlbnNpdmUgbGlzdC4gQWxsIHBhcmFtZXRlcnMgYXJlIGFjY2VwdGVkIGV4Y2VwdCBmb3JcclxuICAgICAqIHRoZSBzaXRla2V5LiBGaXJlYmFzZSBBdXRoIGJhY2tlbmQgcHJvdmlzaW9ucyBhIHJlQ0FQVENIQSBmb3IgZWFjaCBwcm9qZWN0IGFuZCB3aWxsXHJcbiAgICAgKiBjb25maWd1cmUgdGhpcyB1cG9uIHJlbmRlcmluZy4gRm9yIGFuIGludmlzaWJsZSByZUNBUFRDSEEsIGEgc2l6ZSBrZXkgbXVzdCBoYXZlIHRoZSB2YWx1ZVxyXG4gICAgICogJ2ludmlzaWJsZScuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGhFeHRlcm4gLSBUaGUgY29ycmVzcG9uZGluZyBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIElmIG5vbmUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZSBpcyB1c2VkLiBBIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZVxyXG4gICAgICogbXVzdCBiZSBpbml0aWFsaXplZCB3aXRoIGFuIEFQSSBrZXksIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyT3JJZCwgcGFyYW1ldGVycyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUEFSQU1TKSwgYXV0aEV4dGVybikge1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGFwcGxpY2F0aW9uIHZlcmlmaWVyIHR5cGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmVtYXJrc1xyXG4gICAgICAgICAqIEZvciBhIHJlQ0FQVENIQSB2ZXJpZmllciwgdGhpcyBpcyAncmVjYXB0Y2hhJy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnR5cGUgPSBSRUNBUFRDSEFfVkVSSUZJRVJfVFlQRTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIHRoaXMuaXNJbnZpc2libGUgPSB0aGlzLnBhcmFtZXRlcnMuc2l6ZSA9PT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnLCB0aGlzLmF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuY2FsbGJhY2sgPSB0aGlzLm1ha2VUb2tlbkNhbGxiYWNrKHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyID0gdGhpcy5hdXRoLnNldHRpbmdzLmFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZ1xyXG4gICAgICAgICAgICA/IG5ldyBNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCgpXHJcbiAgICAgICAgICAgIDogbmV3IFJlQ2FwdGNoYUxvYWRlckltcGwoKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlU3RhcnRpbmdTdGF0ZSgpO1xyXG4gICAgICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgaWYgc2RrIHZlcnNpb24gaXMgbmVlZGVkXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFdhaXRzIGZvciB0aGUgdXNlciB0byBzb2x2ZSB0aGUgcmVDQVBUQ0hBIGFuZCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciB0aGUgcmVDQVBUQ0hBIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB2ZXJpZnkoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICBjb25zdCBpZCA9IGF3YWl0IHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgY29uc3QgcmVjYXB0Y2hhID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVjYXB0Y2hhLmdldFJlc3BvbnNlKGlkKTtcclxuICAgICAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VuQ2hhbmdlID0gKHRva2VuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBJZ25vcmUgdG9rZW4gZXhwaXJhdGlvbnMuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmRlbGV0ZSh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRva2VuKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5hZGQodG9rZW5DaGFuZ2UpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmVjYXB0Y2hhLmV4ZWN1dGUoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgdGhlIHJlQ0FQVENIQSB3aWRnZXQgb24gdGhlIHBhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVDQVBUQ0hBIHdpZGdldCBJRC5cclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBwcm9taXNlLiBTaW5jZSBpdCdzIG5vdCBhc3luYyAod2Ugd2FudCB0byByZXR1cm4gdGhlXHJcbiAgICAgICAgICAgIC8vIF9zYW1lXyBwcm9taXNlIGlmIHJlbmRlcmluZyBpcyBzdGlsbCBvY2N1cnJpbmcpLCB0aGUgQVBJIHN1cmZhY2Ugc2hvdWxkXHJcbiAgICAgICAgICAgIC8vIHJlamVjdCB3aXRoIHRoZSBlcnJvciByYXRoZXIgdGhhbiBqdXN0IHRocm93XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyUHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSB0aGlzLm1ha2VSZW5kZXJQcm9taXNlKCkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9yZXNldCgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLndpZGdldElkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKS5yZXNldCh0aGlzLndpZGdldElkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBmcm9tIHRoZSBwYWdlIGFuZCBkZXN0cm95cyB0aGUgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3JlY2FwdGNoYUxvYWRlci5jbGVhcmVkT25lSW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhbGlkYXRlU3RhcnRpbmdTdGF0ZSgpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnBhcmFtZXRlcnMuc2l0ZWtleSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5pc0ludmlzaWJsZSB8fCAhdGhpcy5jb250YWluZXIuaGFzQ2hpbGROb2RlcygpLCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnLCB0aGlzLmF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIG1ha2VUb2tlbkNhbGxiYWNrKGV4aXN0aW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRva2VuID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKHRva2VuKSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nKHRva2VuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxGdW5jID0gX3dpbmRvdygpW2V4aXN0aW5nXTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsRnVuYyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbEZ1bmModG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFzc2VydE5vdERlc3Ryb3llZCgpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLmRlc3Ryb3llZCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbWFrZVJlbmRlclByb21pc2UoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLndpZGdldElkKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBndWFyYW50ZWVkRW1wdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChndWFyYW50ZWVkRW1wdHkpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZ3VhcmFudGVlZEVtcHR5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMud2lkZ2V0SWQgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCkucmVuZGVyKGNvbnRhaW5lciwgdGhpcy5wYXJhbWV0ZXJzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0SWQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0KCkge1xyXG4gICAgICAgIF9hc3NlcnQoX2lzSHR0cE9ySHR0cHMoKSAmJiAhX2lzV29ya2VyKCksIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCBkb21SZWFkeSgpO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gYXdhaXQgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmxvYWQodGhpcy5hdXRoLCB0aGlzLmF1dGgubGFuZ3VhZ2VDb2RlIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3Qgc2l0ZUtleSA9IGF3YWl0IGdldFJlY2FwdGNoYVBhcmFtcyh0aGlzLmF1dGgpO1xyXG4gICAgICAgIF9hc3NlcnQoc2l0ZUtleSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5zaXRla2V5ID0gc2l0ZUtleTtcclxuICAgIH1cclxuICAgIGdldEFzc2VydGVkUmVjYXB0Y2hhKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5yZWNhcHRjaGEsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWNhcHRjaGE7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZG9tUmVhZHkoKSB7XHJcbiAgICBsZXQgcmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEb2N1bWVudCBub3QgcmVhZHksIHdhaXQgZm9yIGxvYWQgYmVmb3JlIHJlc29sdmluZy5cclxuICAgICAgICAvLyBTYXZlIHJlc29sdmVyLCBzbyB3ZSBjYW4gcmVtb3ZlIGxpc3RlbmVyIGluIGNhc2UgaXQgd2FzIGV4dGVybmFsbHlcclxuICAgICAgICAvLyBjYW5jZWxsZWQuXHJcbiAgICAgICAgcmVzb2x2ZXIgPSAoKSA9PiByZXNvbHZlKCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNvbHZlcik7XHJcbiAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICBpZiAocmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBDb25maXJtYXRpb25SZXN1bHRJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHZlcmlmaWNhdGlvbklkLCBvbkNvbmZpcm1hdGlvbikge1xyXG4gICAgICAgIHRoaXMudmVyaWZpY2F0aW9uSWQgPSB2ZXJpZmljYXRpb25JZDtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybWF0aW9uID0gb25Db25maXJtYXRpb247XHJcbiAgICB9XHJcbiAgICBjb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aENyZWRlbnRpYWwuX2Zyb21WZXJpZmljYXRpb24odGhpcy52ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25Db25maXJtYXRpb24oYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhIHBob25lIG51bWJlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtZXRob2Qgc2VuZHMgYSBjb2RlIHZpYSBTTVMgdG8gdGhlIGdpdmVuXHJcbiAqIHBob25lIG51bWJlciwgYW5kIHJldHVybnMgYSB7QGxpbmsgQ29uZmlybWF0aW9uUmVzdWx0fS4gQWZ0ZXIgdGhlIHVzZXJcclxuICogcHJvdmlkZXMgdGhlIGNvZGUgc2VudCB0byB0aGVpciBwaG9uZSwgY2FsbCB7QGxpbmsgQ29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm19XHJcbiAqIHdpdGggdGhlIGNvZGUgdG8gc2lnbiB0aGUgdXNlciBpbi5cclxuICpcclxuICogRm9yIGFidXNlIHByZXZlbnRpb24sIHRoaXMgbWV0aG9kIGFsc28gcmVxdWlyZXMgYSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uXHJcbiAqIFRoaXMgU0RLIGluY2x1ZGVzIGEgcmVDQVBUQ0hBLWJhc2VkIGltcGxlbWVudGF0aW9uLCB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbiB3b3JrIG9uIG90aGVyIHBsYXRmb3JtcyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZVxyXG4gKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9IChsaWtlIFJlYWN0IE5hdGl2ZSksIGJ1dCB5b3UgbmVlZCB0byB1c2UgYVxyXG4gKiB0aGlyZC1wYXJ0eSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0gaW1wbGVtZW50YXRpb24uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5SZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gYSB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHBob25lTnVtYmVyIC0gVGhlIHVzZXIncyBwaG9uZSBudW1iZXIgaW4gRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAqIEBwYXJhbSBhcHBWZXJpZmllciAtIFRoZSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKGF1dGhJbnRlcm5hbCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIHBob25lIG51bWJlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHBob25lTnVtYmVyIC0gVGhlIHVzZXIncyBwaG9uZSBudW1iZXIgaW4gRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAqIEBwYXJhbSBhcHBWZXJpZmllciAtIFRoZSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUGhvbmVOdW1iZXIodXNlciwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBwaG9uZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrcyBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pbiBhdHRlbXB0cy5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHBob25lTnVtYmVyIC0gVGhlIHVzZXIncyBwaG9uZSBudW1iZXIgaW4gRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAqIEBwYXJhbSBhcHBWZXJpZmllciAtIFRoZSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIodXNlckludGVybmFsLmF1dGgsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgdmVyaWZpY2F0aW9uIElEIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgU01TIGNvZGUgdGhhdCBpcyBzZW50LlxyXG4gKlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3ZlcmlmeVBob25lTnVtYmVyKGF1dGgsIG9wdGlvbnMsIHZlcmlmaWVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCByZWNhcHRjaGFUb2tlbiA9IGF3YWl0IHZlcmlmaWVyLnZlcmlmeSgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZWNhcHRjaGFUb2tlbiA9PT0gJ3N0cmluZycsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh2ZXJpZmllci50eXBlID09PSBSRUNBUFRDSEFfVkVSSUZJRVJfVFlQRSwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBsZXQgcGhvbmVJbmZvT3B0aW9ucztcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogb3B0aW9uc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnc2Vzc2lvbicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uID0gcGhvbmVJbmZvT3B0aW9ucy5zZXNzaW9uO1xyXG4gICAgICAgICAgICBpZiAoJ3Bob25lTnVtYmVyJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBfYXNzZXJ0KHNlc3Npb24udHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN0YXJ0RW5yb2xsUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZUVucm9sbG1lbnRJbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBwaG9uZUluZm9PcHRpb25zLnBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnBob25lU2Vzc2lvbkluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfYXNzZXJ0KHNlc3Npb24udHlwZSA9PT0gXCJzaWduaW5cIiAvKiBTSUdOX0lOICovLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gKChfYSA9IHBob25lSW5mb09wdGlvbnMubXVsdGlGYWN0b3JIaW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMubXVsdGlGYWN0b3JVaWQ7XHJcbiAgICAgICAgICAgICAgICBfYXNzZXJ0KG1mYUVucm9sbG1lbnRJZCwgYXV0aCwgXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogTUlTU0lOR19NRkFfSU5GTyAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHN0YXJ0U2lnbkluUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsOiBzZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWZhRW5yb2xsbWVudElkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lU2lnbkluSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnBob25lUmVzcG9uc2VJbmZvLnNlc3Npb25JbmZvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB7IHNlc3Npb25JbmZvIH0gPSBhd2FpdCBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBwaG9uZUluZm9PcHRpb25zLnBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5mbztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB2ZXJpZmllci5fcmVzZXQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBob25lIG51bWJlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgXHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKCcrMTY1MDU1NTAxMDEnLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIHRoZSB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGNvbnN0IHBob25lQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBhd2FpdCB1cGRhdGVQaG9uZU51bWJlcih1c2VyLCBwaG9uZUNyZWRlbnRpYWwpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBBIGNyZWRlbnRpYWwgYXV0aGVudGljYXRpbmcgdGhlIG5ldyBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIGF3YWl0IF9saW5rJDEoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIFBob25lQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKCcrMTY1MDU1NTAxMDEnLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIHRoZSB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGNvbnN0IHBob25lQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZSBpbiB3aGljaCBzaWduLWlucyBzaG91bGQgb2NjdXIuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IFBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIFN0YXJ0cyBhIHBob25lIG51bWJlciBhdXRoZW50aWNhdGlvbiBmbG93IGJ5IHNlbmRpbmcgYSB2ZXJpZmljYXRpb24gY29kZSB0byB0aGUgZ2l2ZW4gcGhvbmVcclxuICAgICAqIG51bWJlci5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgZmxvdyBpcyBwcm92aWRlZCB1c2luZyB0aGUgYHNpZ25JbldpdGhQaG9uZU51bWJlcmAgbWV0aG9kLlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lSW5mb09wdGlvbnMgLSBUaGUgdXNlcidzIHtAbGluayBQaG9uZUluZm9PcHRpb25zfS4gVGhlIHBob25lIG51bWJlciBzaG91bGQgYmUgaW5cclxuICAgICAqIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gICAgICogQHBhcmFtIGFwcGxpY2F0aW9uVmVyaWZpZXIgLSBGb3IgYWJ1c2UgcHJldmVudGlvbiwgdGhpcyBtZXRob2QgYWxzbyByZXF1aXJlcyBhXHJcbiAgICAgKiB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uIFRoaXMgU0RLIGluY2x1ZGVzIGEgcmVDQVBUQ0hBLWJhc2VkIGltcGxlbWVudGF0aW9uLFxyXG4gICAgICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIGEgdmVyaWZpY2F0aW9uIElEIHRoYXQgY2FuIGJlIHBhc3NlZCB0b1xyXG4gICAgICoge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9IHRvIGlkZW50aWZ5IHRoaXMgZmxvdy4uXHJcbiAgICAgKi9cclxuICAgIHZlcmlmeVBob25lTnVtYmVyKHBob25lT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBfdmVyaWZ5UGhvbmVOdW1iZXIodGhpcy5hdXRoLCBwaG9uZU9wdGlvbnMsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwsIGdpdmVuIHRoZSB2ZXJpZmljYXRpb24gSUQgZnJvbVxyXG4gICAgICoge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyfSBhbmQgdGhlIGNvZGUgdGhhdCB3YXMgc2VudCB0byB0aGUgdXNlcidzXHJcbiAgICAgKiBtb2JpbGUgZGV2aWNlLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmVyaWZpY2F0aW9uSWQgLSBUaGUgdmVyaWZpY2F0aW9uIElEIHJldHVybmVkIGZyb20ge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyfS5cclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25Db2RlIC0gVGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIncyBtb2JpbGUgZGV2aWNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aENyZWRlbnRpYWwuX2Zyb21WZXJpZmljYXRpb24odmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB3aGVuIHBhc3NlZCBhbiBlcnJvci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIFRoaXMgbWV0aG9kIHdvcmtzIGZvciBlcnJvcnMgbGlrZVxyXG4gICAgICogYGF1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbHNgLiBUaGlzIGlzIHVzZWZ1bCBmb3JcclxuICAgICAqIHJlY292ZXJpbmcgd2hlbiBhdHRlbXB0aW5nIHRvIHNldCBhIHVzZXIncyBwaG9uZSBudW1iZXIgYnV0IHRoZSBudW1iZXJcclxuICAgICAqIGluIHF1ZXN0aW9uIGlzIGFscmVhZHkgdGllZCB0byBhbm90aGVyIGFjY291bnQuIEZvciBleGFtcGxlLCB0aGUgZm9sbG93aW5nXHJcbiAgICAgKiBjb2RlIHRyaWVzIHRvIHVwZGF0ZSB0aGUgY3VycmVudCB1c2VyJ3MgcGhvbmUgbnVtYmVyLCBhbmQgaWYgdGhhdFxyXG4gICAgICogZmFpbHMsIGxpbmtzIHRoZSB1c2VyIHdpdGggdGhlIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoYXQgbnVtYmVyOlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIobnVtYmVyLCB2ZXJpZmllcik7XHJcbiAgICAgKiB0cnkge1xyXG4gICAgICogICBjb25zdCBjb2RlID0gJyc7IC8vIFByb21wdCB0aGUgdXNlciBmb3IgdGhlIHZlcmlmaWNhdGlvbiBjb2RlXHJcbiAgICAgKiAgIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKFxyXG4gICAgICogICAgICAgYXV0aC5jdXJyZW50VXNlcixcclxuICAgICAqICAgICAgIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIGNvZGUpKTtcclxuICAgICAqIH0gY2F0Y2ggKGUpIHtcclxuICAgICAqICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbCcpIHtcclxuICAgICAqICAgICBjb25zdCBjcmVkID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihlKTtcclxuICAgICAqICAgICBhd2FpdCBsaW5rV2l0aENyZWRlbnRpYWwoYXV0aC5jdXJyZW50VXNlciwgY3JlZCk7XHJcbiAgICAgKiAgIH1cclxuICAgICAqIH1cclxuICAgICAqXHJcbiAgICAgKiAvLyBBdCB0aGlzIHBvaW50LCBhdXRoLmN1cnJlbnRVc2VyLnBob25lTnVtYmVyID09PSBudW1iZXIuXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBUaGUgZXJyb3IgdG8gZ2VuZXJhdGUgYSBjcmVkZW50aWFsIGZyb20uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAocGhvbmVOdW1iZXIgJiYgdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBob25lQXV0aENyZWRlbnRpYWwuX2Zyb21Ub2tlblJlc3BvbnNlKHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QSE9ORS4gKi9cclxuUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInBob25lXCIgLyogUEhPTkUgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QSE9ORV9TSUdOX0lOX01FVEhPRCA9IFwicGhvbmVcIiAvKiBQSE9ORSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENob29zZXMgYSBwb3B1cC9yZWRpcmVjdCByZXNvbHZlciB0byB1c2UuIFRoaXMgcHJlZmVycyB0aGUgb3ZlcnJpZGUgKHdoaWNoXHJcbiAqIGlzIGRpcmVjdGx5IHBhc3NlZCBpbiksIGFuZCBmYWxscyBiYWNrIHRvIHRoZSBwcm9wZXJ0eSBzZXQgb24gdGhlIGF1dGhcclxuICogb2JqZWN0LiBJZiBuZWl0aGVyIGFyZSBhdmFpbGFibGUsIHRoaXMgZnVuY3Rpb24gZXJyb3JzIHcvIGFuIGFyZ3VtZW50IGVycm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aCwgcmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgaWYgKHJlc29sdmVyT3ZlcnJpZGUpIHtcclxuICAgICAgICByZXR1cm4gX2dldEluc3RhbmNlKHJlc29sdmVyT3ZlcnJpZGUpO1xyXG4gICAgfVxyXG4gICAgX2Fzc2VydChhdXRoLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIElkcENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihcImN1c3RvbVwiIC8qIENVU1RPTSAqLywgXCJjdXN0b21cIiAvKiBDVVNUT00gKi8pO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdChpZFRva2VuKSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiB0aGlzLnBhcmFtcy5yZXF1ZXN0VXJpLFxyXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMucGFyYW1zLnNlc3Npb25JZCxcclxuICAgICAgICAgICAgcG9zdEJvZHk6IHRoaXMucGFyYW1zLnBvc3RCb2R5LFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5wYXJhbXMudGVuYW50SWQsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wYXJhbXMucGVuZGluZ1Rva2VuLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgcmV0dXJuSWRwQ3JlZGVudGlhbDogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGlkVG9rZW4pIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX3NpZ25JbihwYXJhbXMpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aENyZWRlbnRpYWwocGFyYW1zLmF1dGgsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XHJcbmZ1bmN0aW9uIF9yZWF1dGgocGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGF1dGgsIHVzZXIgfSA9IHBhcmFtcztcclxuICAgIF9hc3NlcnQodXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGUodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmsocGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGF1dGgsIHVzZXIgfSA9IHBhcmFtcztcclxuICAgIF9hc3NlcnQodXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBfbGluayQxKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICovXHJcbmNsYXNzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5ieXBhc3NBdXRoU3RhdGUgPSBieXBhc3NBdXRoU3RhdGU7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyID0gQXJyYXkuaXNBcnJheShmaWx0ZXIpID8gZmlsdGVyIDogW2ZpbHRlcl07XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSB7IHJlc29sdmUsIHJlamVjdCB9O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBhd2FpdCB0aGlzLnJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uRXhlY3V0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IHVybFJlc3BvbnNlLCBzZXNzaW9uSWQsIHBvc3RCb2R5LCB0ZW5hbnRJZCwgZXJyb3IsIHR5cGUgfSA9IGV2ZW50O1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBhdXRoOiB0aGlzLmF1dGgsXHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHVybFJlc3BvbnNlLFxyXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRlbmFudElkIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgcG9zdEJvZHk6IHBvc3RCb2R5IHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLFxyXG4gICAgICAgICAgICBieXBhc3NBdXRoU3RhdGU6IHRoaXMuYnlwYXNzQXV0aFN0YXRlXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUoYXdhaXQgdGhpcy5nZXRJZHBUYXNrKHR5cGUpKHBhcmFtcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZ2V0SWRwVGFzayh0eXBlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFQb3B1cFwiIC8qIFNJR05fSU5fVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfc2lnbkluO1xyXG4gICAgICAgICAgICBjYXNlIFwibGlua1ZpYVBvcHVwXCIgLyogTElOS19WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfbGluaztcclxuICAgICAgICAgICAgY2FzZSBcInJlYXV0aFZpYVBvcHVwXCIgLyogUkVBVVRIX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVhdXRoO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwodGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlc29sdmUoY3JlZCkge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVzb2x2ZShjcmVkKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICByZWplY3QoZXJyb3IpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLnBlbmRpbmdQcm9taXNlLCAnUGVuZGluZyBwcm9taXNlIHdhcyBuZXZlciBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpO1xyXG4gICAgfVxyXG4gICAgdW5yZWdpc3RlckFuZENsZWFuVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnVucmVnaXN0ZXJDb25zdW1lcih0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGVhblVwKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQgPSBuZXcgRGVsYXkoMjAwMCwgMTAwMDApO1xyXG4vKipcclxuICogQXV0aGVudGljYXRlcyBhIEZpcmViYXNlIGNsaWVudCB1c2luZyBhIHBvcHVwLWJhc2VkIE9BdXRoIGF1dGhlbnRpY2F0aW9uIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHN1Y2NlZWRzLCByZXR1cm5zIHRoZSBzaWduZWQgaW4gdXNlciBhbG9uZyB3aXRoIHRoZSBwcm92aWRlcidzIGNyZWRlbnRpYWwuIElmIHNpZ24gaW4gd2FzXHJcbiAqIHVuc3VjY2Vzc2Z1bCwgcmV0dXJucyBhbiBlcnJvciBvYmplY3QgY29udGFpbmluZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlcnJvci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIpO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFBvcHVwT3BlcmF0aW9uKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5WaWFQb3B1cFwiIC8qIFNJR05fSU5fVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFJlYXV0aGVudGljYXRlcyB0aGUgY3VycmVudCB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdXNpbmcgYSBwb3AtdXAgYmFzZWRcclxuICogT0F1dGggZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlIHJlYXV0aGVudGljYXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlIHJldHVybmVkIHJlc3VsdCB3aWxsIGNvbnRhaW4gdGhlIHVzZXIgYW5kIHRoZVxyXG4gKiBwcm92aWRlcidzIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBSZWF1dGhlbnRpY2F0ZSB1c2luZyBhIHBvcHVwLlxyXG4gKiBhd2FpdCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFBvcHVwT3BlcmF0aW9uKHVzZXJJbnRlcm5hbC5hdXRoLCBcInJlYXV0aFZpYVBvcHVwXCIgLyogUkVBVVRIX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSBhdXRoZW50aWNhdGVkIHByb3ZpZGVyIHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBwb3AtdXAgYmFzZWQgT0F1dGggZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlIGxpbmtpbmcgaXMgc3VjY2Vzc2Z1bCwgdGhlIHJldHVybmVkIHJlc3VsdCB3aWxsIGNvbnRhaW4gdGhlIHVzZXIgYW5kIHRoZSBwcm92aWRlcidzIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQb3B1cCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFBvcHVwT3BlcmF0aW9uKHVzZXJJbnRlcm5hbC5hdXRoLCBcImxpbmtWaWFQb3B1cFwiIC8qIExJTktfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogUG9wdXAgZXZlbnQgbWFuYWdlci4gSGFuZGxlcyB0aGUgcG9wdXAncyBlbnRpcmUgbGlmZWN5Y2xlOyBsaXN0ZW5zIHRvIGF1dGhcclxuICogZXZlbnRzXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBQb3B1cE9wZXJhdGlvbiBleHRlbmRzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBmaWx0ZXIsIHByb3ZpZGVyLCByZXNvbHZlciwgdXNlcikge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcjtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBpZiAoUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uKSB7XHJcbiAgICAgICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbi5jYW5jZWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gdGhpcztcclxuICAgIH1cclxuICAgIGFzeW5jIGV4ZWN1dGVOb3ROdWxsKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIF9hc3NlcnQocmVzdWx0LCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMuZmlsdGVyLmxlbmd0aCA9PT0gMSwgJ1BvcHVwIG9wZXJhdGlvbnMgb25seSBoYW5kbGUgb25lIGV2ZW50Jyk7XHJcbiAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoKTtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBhd2FpdCB0aGlzLnJlc29sdmVyLl9vcGVuUG9wdXAodGhpcy5hdXRoLCB0aGlzLnByb3ZpZGVyLCB0aGlzLmZpbHRlclswXSwgLy8gVGhlcmUncyBhbHdheXMgb25lLCBzZWUgY29uc3RydWN0b3JcclxuICAgICAgICBldmVudElkKTtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cuYXNzb2NpYXRlZEV2ZW50ID0gZXZlbnRJZDtcclxuICAgICAgICAvLyBDaGVjayBmb3Igd2ViIHN0b3JhZ2Ugc3VwcG9ydCBhbmQgb3JpZ2luIHZhbGlkYXRpb24gX2FmdGVyXyB0aGUgcG9wdXAgaXNcclxuICAgICAgICAvLyBsb2FkZWQuIFRoZXNlIG9wZXJhdGlvbnMgYXJlIHNsb3cgKH4xIHNlY29uZCBvciBzbykgUmF0aGVyIHRoYW5cclxuICAgICAgICAvLyB3YWl0aW5nIG9uIHRoZW0gYmVmb3JlIG9wZW5pbmcgdGhlIHdpbmRvdywgb3B0aW1pc3RpY2FsbHkgb3BlbiB0aGUgcG9wdXBcclxuICAgICAgICAvLyBhbmQgY2hlY2sgZm9yIHN0b3JhZ2Ugc3VwcG9ydCBhdCB0aGUgc2FtZSB0aW1lLiBJZiBzdG9yYWdlIHN1cHBvcnQgaXNcclxuICAgICAgICAvLyBub3QgYXZhaWxhYmxlLCB0aGlzIHdpbGwgY2F1c2UgdGhlIHdob2xlIHRoaW5nIHRvIHJlamVjdCBwcm9wZXJseS4gSXRcclxuICAgICAgICAvLyB3aWxsIGFsc28gY2xvc2UgdGhlIHBvcHVwLCBidXQgc2luY2UgdGhlIHByb21pc2UgaGFzIGFscmVhZHkgcmVqZWN0ZWQsXHJcbiAgICAgICAgLy8gdGhlIHBvcHVwIGNsb3NlZCBieSB1c2VyIHBvbGwgd2lsbCByZWplY3QgaW50byB0aGUgdm9pZC5cclxuICAgICAgICB0aGlzLnJlc29sdmVyLl9vcmlnaW5WYWxpZGF0aW9uKHRoaXMuYXV0aCkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZCh0aGlzLmF1dGgsIGlzU3VwcG9ydGVkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEICovKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBIYW5kbGUgdXNlciBjbG9zdXJlLiBOb3RpY2UgdGhpcyBkb2VzICpub3QqIHVzZSBhd2FpdFxyXG4gICAgICAgIHRoaXMucG9sbFVzZXJDYW5jZWxsYXRpb24oKTtcclxuICAgIH1cclxuICAgIGdldCBldmVudElkKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuYXV0aFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFzc29jaWF0ZWRFdmVudCkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGNhbmNlbCgpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIgLyogRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovKSk7XHJcbiAgICB9XHJcbiAgICBjbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmF1dGhXaW5kb3cpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoV2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBvbGxJZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucG9sbElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIHBvbGxVc2VyQ2FuY2VsbGF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHBvbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgICAgIGlmICgoX2IgPSAoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS53aW5kb3cpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZXJlIGlzIHN1ZmZpY2llbnQgdGltZSBmb3Igd2hhdGV2ZXIgYWN0aW9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wbGV0ZS4gVGhlIHdpbmRvdyBjb3VsZCBoYXZlIGNsb3NlZCBidXQgdGhlIHNpZ24gaW4gbmV0d29ya1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbCBjb3VsZCBzdGlsbCBiZSBpbiBmbGlnaHQuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGxJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIFBPUFVQX0NMT1NFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMDAwIC8qIEFVVEhfRVZFTlQgKi8pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQocG9sbCwgX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQuZ2V0KCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcG9sbCgpO1xyXG4gICAgfVxyXG59XHJcbi8vIE9ubHkgb25lIHBvcHVwIGlzIGV2ZXIgc2hvd24gYXQgb25jZS4gVGhlIGxpZmVjeWNsZSBvZiB0aGUgY3VycmVudCBwb3B1cFxyXG4vLyBjYW4gYmUgbWFuYWdlZCAvIGNhbmNlbGxlZCBieSB0aGUgY29uc3RydWN0b3IuXHJcblBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBFTkRJTkdfUkVESVJFQ1RfS0VZID0gJ3BlbmRpbmdSZWRpcmVjdCc7XHJcbi8vIFdlIG9ubHkgZ2V0IG9uZSByZWRpcmVjdCBvdXRjb21lIGZvciBhbnkgb25lIGF1dGgsIHNvIGp1c3Qgc3RvcmUgaXRcclxuLy8gaW4gaGVyZS5cclxuY29uc3QgcmVkaXJlY3RPdXRjb21lTWFwID0gbmV3IE1hcCgpO1xyXG5jbGFzcyBSZWRpcmVjdEFjdGlvbiBleHRlbmRzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBbXHJcbiAgICAgICAgICAgIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwidW5rbm93blwiIC8qIFVOS05PV04gKi9cclxuICAgICAgICBdLCByZXNvbHZlciwgdW5kZWZpbmVkLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRJZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE92ZXJyaWRlIHRoZSBleGVjdXRlIGZ1bmN0aW9uOyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSByZWRpcmVjdCByZXN1bHQsIHRoZW5cclxuICAgICAqIGp1c3QgcmV0dXJuIGl0LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBleGVjdXRlKCkge1xyXG4gICAgICAgIGxldCByZWFkeU91dGNvbWUgPSByZWRpcmVjdE91dGNvbWVNYXAuZ2V0KHRoaXMuYXV0aC5fa2V5KCkpO1xyXG4gICAgICAgIGlmICghcmVhZHlPdXRjb21lKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNQZW5kaW5nUmVkaXJlY3QgPSBhd2FpdCBfZ2V0QW5kQ2xlYXJQZW5kaW5nUmVkaXJlY3RTdGF0dXModGhpcy5yZXNvbHZlciwgdGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGhhc1BlbmRpbmdSZWRpcmVjdCA/IGF3YWl0IHN1cGVyLmV4ZWN1dGUoKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVhZHlPdXRjb21lID0gKCkgPT4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVkaXJlY3RPdXRjb21lTWFwLnNldCh0aGlzLmF1dGguX2tleSgpLCByZWFkeU91dGNvbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSdyZSBub3QgYnlwYXNzaW5nIGF1dGggc3RhdGUsIHRoZSByZWFkeSBvdXRjb21lIHNob3VsZCBiZSBzZXQgdG9cclxuICAgICAgICAvLyBudWxsLlxyXG4gICAgICAgIGlmICghdGhpcy5ieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICAgICAgcmVkaXJlY3RPdXRjb21lTWFwLnNldCh0aGlzLmF1dGguX2tleSgpLCAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVhZHlPdXRjb21lKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgc2VudGluZWwgdmFsdWUgaW5kaWNhdGluZyB0aGVyZSdzIG5vIHBlbmRpbmcgcmVkaXJlY3RcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC5ldmVudElkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmF1dGguX3JlZGlyZWN0VXNlckZvcklkKGV2ZW50LmV2ZW50SWQpO1xyXG4gICAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkV4ZWN1dGlvbigpIHsgfVxyXG4gICAgY2xlYW5VcCgpIHsgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgY29uc3Qga2V5ID0gcGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpO1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKTtcclxuICAgIGlmICghKGF3YWl0IHBlcnNpc3RlbmNlLl9pc0F2YWlsYWJsZSgpKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IChhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSkpID09PSAndHJ1ZSc7XHJcbiAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICByZXR1cm4gaGFzUGVuZGluZ1JlZGlyZWN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXIsIGF1dGgpIHtcclxuICAgIHJldHVybiByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKS5fc2V0KHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSwgJ3RydWUnKTtcclxufVxyXG5mdW5jdGlvbiBfY2xlYXJSZWRpcmVjdE91dGNvbWVzKCkge1xyXG4gICAgcmVkaXJlY3RPdXRjb21lTWFwLmNsZWFyKCk7XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSk7XHJcbn1cclxuZnVuY3Rpb24gcGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFBFTkRJTkdfUkVESVJFQ1RfS0VZLCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gaGFuZGxlIHRoZSByZXN1bHRzIGFuZCBlcnJvcnMgZm9yIHRoaXMgb3BlcmF0aW9uLCByZWZlciB0byB7QGxpbmsgZ2V0UmVkaXJlY3RSZXN1bHR9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBzY29wZXMgdG8gdGhlIHByb3ZpZGVyOlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIC8vIEFzIHRoaXMgQVBJIGNhbiBiZSB1c2VkIGZvciBzaWduLWluLCBsaW5raW5nIGFuZCByZWF1dGhlbnRpY2F0aW9uLFxyXG4gKiAvLyBjaGVjayB0aGUgb3BlcmF0aW9uVHlwZSB0byBkZXRlcm1pbmUgd2hhdCB0cmlnZ2VyZWQgdGhpcyByZWRpcmVjdFxyXG4gKiAvLyBvcGVyYXRpb24uXHJcbiAqIGNvbnN0IG9wZXJhdGlvblR5cGUgPSByZXN1bHQub3BlcmF0aW9uVHlwZTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgYXV0aEludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QoYXV0aEludGVybmFsLCBwcm92aWRlciwgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgYWdhaW4gdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsLmF1dGgpO1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IGF3YWl0IHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdG8gdGhlIHVzZXIgYWNjb3VudCB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgc29tZSBvdGhlciBwcm92aWRlci5cclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICogLy8gTGluayB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBhd2FpdCBsaW5rV2l0aFJlZGlyZWN0KHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBsaW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9saW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBwcm92aWRlci5wcm92aWRlcklkKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsLmF1dGgpO1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IGF3YWl0IHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0gZnJvbSB0aGUgcmVkaXJlY3QtYmFzZWQgc2lnbi1pbiBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBzaWduLWluIHN1Y2NlZWRlZCwgcmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIuIElmIHNpZ24taW4gd2FzIHVuc3VjY2Vzc2Z1bCwgZmFpbHMgd2l0aCBhblxyXG4gKiBlcnJvci4gSWYgbm8gcmVkaXJlY3Qgb3BlcmF0aW9uIHdhcyBjYWxsZWQsIHJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9XHJcbiAqIHdpdGggYSBudWxsIGB1c2VyYC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlcikge1xyXG4gICAgYXdhaXQgX2Nhc3RBdXRoKGF1dGgpLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICByZXR1cm4gX2dldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyLCBmYWxzZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyRXh0ZXJuLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXIgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyRXh0ZXJuKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBSZWRpcmVjdEFjdGlvbihhdXRoSW50ZXJuYWwsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWN0aW9uLmV4ZWN1dGUoKTtcclxuICAgIGlmIChyZXN1bHQgJiYgIWJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIGRlbGV0ZSByZXN1bHQudXNlci5fcmVkaXJlY3RFdmVudElkO1xyXG4gICAgICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQocmVzdWx0LnVzZXIpO1xyXG4gICAgICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fc2V0UmVkaXJlY3RVc2VyKG51bGwsIHJlc29sdmVyRXh0ZXJuKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VyKSB7XHJcbiAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZChgJHt1c2VyLnVpZH06OjpgKTtcclxuICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IGV2ZW50SWQ7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3NldFJlZGlyZWN0VXNlcih1c2VyKTtcclxuICAgIGF3YWl0IHVzZXIuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlcik7XHJcbiAgICByZXR1cm4gZXZlbnRJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgYW1vdW50IG9mIHRpbWUgdG8gc3RvcmUgdGhlIFVJRHMgb2Ygc2VlbiBldmVudHM7IHRoaXMgaXNcclxuLy8gc2V0IHRvIDEwIG1pbiBieSBkZWZhdWx0XHJcbmNvbnN0IEVWRU5UX0RVUExJQ0FUSU9OX0NBQ0hFX0RVUkFUSU9OX01TID0gMTAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEF1dGhFdmVudE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbiAgICByZWdpc3RlckNvbnN1bWVyKGF1dGhFdmVudENvbnN1bWVyKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuYWRkKGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgICAgICBpZiAodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNFdmVudEZvckNvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50LCBhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZSh0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmRlbGV0ZShhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICB9XHJcbiAgICBvbkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZFxyXG4gICAgICAgIGlmICh0aGlzLmhhc0V2ZW50QmVlbkhhbmRsZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGhhbmRsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5mb3JFYWNoKGNvbnN1bWVyID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlRXZlbnRUb0NhY2hlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCB8fCAhaXNSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHNlZW4gYSByZWRpcmVjdCBiZWZvcmUsIG9yIHRoaXMgaXMgYSBwb3B1cCBldmVudCxcclxuICAgICAgICAgICAgLy8gYmFpbCBub3dcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gdHJ1ZTtcclxuICAgICAgICAvLyBJZiB0aGUgcmVkaXJlY3Qgd2Fzbid0IGhhbmRsZWQsIGhhbmcgb24gdG8gaXRcclxuICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgIH1cclxuICAgIHNlbmRUb0NvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoZXZlbnQuZXJyb3IgJiYgIWlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSAoKF9hID0gZXZlbnQuZXJyb3IuY29kZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwbGl0KCdhdXRoLycpWzFdKSB8fFxyXG4gICAgICAgICAgICAgICAgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovO1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkVycm9yKF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIGNvZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN1bWVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRJZE1hdGNoZXMgPSBjb25zdW1lci5ldmVudElkID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICghIWV2ZW50LmV2ZW50SWQgJiYgZXZlbnQuZXZlbnRJZCA9PT0gY29uc3VtZXIuZXZlbnRJZCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN1bWVyLmZpbHRlci5pbmNsdWRlcyhldmVudC50eXBlKSAmJiBldmVudElkTWF0Y2hlcztcclxuICAgIH1cclxuICAgIGhhc0V2ZW50QmVlbkhhbmRsZWQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA+PVxyXG4gICAgICAgICAgICBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUykge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRFdmVudFVpZHMuaGFzKGV2ZW50VWlkKGV2ZW50KSk7XHJcbiAgICB9XHJcbiAgICBzYXZlRXZlbnRUb0NhY2hlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuYWRkKGV2ZW50VWlkKGV2ZW50KSk7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBldmVudFVpZChlKSB7XHJcbiAgICByZXR1cm4gW2UudHlwZSwgZS5ldmVudElkLCBlLnNlc3Npb25JZCwgZS50ZW5hbnRJZF0uZmlsdGVyKHYgPT4gdikuam9pbignLScpO1xyXG59XHJcbmZ1bmN0aW9uIGlzTnVsbFJlZGlyZWN0RXZlbnQoeyB0eXBlLCBlcnJvciB9KSB7XHJcbiAgICByZXR1cm4gKHR5cGUgPT09IFwidW5rbm93blwiIC8qIFVOS05PV04gKi8gJiZcclxuICAgICAgICAoZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmNvZGUpID09PSBgYXV0aC8ke1wibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi99YCk7XHJcbn1cclxuZnVuY3Rpb24gaXNSZWRpcmVjdEV2ZW50KGV2ZW50KSB7XHJcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcclxuICAgICAgICBjYXNlIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY2FzZSBcInVua25vd25cIiAvKiBVTktOT1dOICovOlxyXG4gICAgICAgICAgICByZXR1cm4gaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgsIHJlcXVlc3QgPSB7fSkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEdFVCAqLywgXCIvdjEvcHJvamVjdHNcIiAvKiBHRVRfUFJPSkVDVF9DT05GSUcgKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElQX0FERFJFU1NfUkVHRVggPSAvXlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9JC87XHJcbmNvbnN0IEhUVFBfUkVHRVggPSAvXmh0dHBzPy87XHJcbmFzeW5jIGZ1bmN0aW9uIF92YWxpZGF0ZU9yaWdpbihhdXRoKSB7XHJcbiAgICAvLyBTa2lwIG9yaWdpbiB2YWxpZGF0aW9uIGlmIHdlIGFyZSBpbiBhbiBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gICAgaWYgKGF1dGguY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBhdXRob3JpemVkRG9tYWlucyB9ID0gYXdhaXQgX2dldFByb2plY3RDb25maWcoYXV0aCk7XHJcbiAgICBmb3IgKGNvbnN0IGRvbWFpbiBvZiBhdXRob3JpemVkRG9tYWlucykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaERvbWFpbihkb21haW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUncyBhIFVSTCBlcnJvcjsganVzdCBjb250aW51ZSBzZWFyY2hpbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBJbiB0aGUgb2xkIFNESywgdGhpcyBlcnJvciBhbHNvIHByb3ZpZGVzIGhlbHBmdWwgbWVzc2FnZXMuXHJcbiAgICBfZmFpbChhdXRoLCBcInVuYXV0aG9yaXplZC1kb21haW5cIiAvKiBJTlZBTElEX09SSUdJTiAqLyk7XHJcbn1cclxuZnVuY3Rpb24gbWF0Y2hEb21haW4oZXhwZWN0ZWQpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRVcmwgPSBfZ2V0Q3VycmVudFVybCgpO1xyXG4gICAgY29uc3QgeyBwcm90b2NvbCwgaG9zdG5hbWUgfSA9IG5ldyBVUkwoY3VycmVudFVybCk7XHJcbiAgICBpZiAoZXhwZWN0ZWQuc3RhcnRzV2l0aCgnY2hyb21lLWV4dGVuc2lvbjovLycpKSB7XHJcbiAgICAgICAgY29uc3QgY2VVcmwgPSBuZXcgVVJMKGV4cGVjdGVkKTtcclxuICAgICAgICBpZiAoY2VVcmwuaG9zdG5hbWUgPT09ICcnICYmIGhvc3RuYW1lID09PSAnJykge1xyXG4gICAgICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gd2UncmUgbm90IHBhcnNpbmcgY2hyb21lIFVSTHMgcHJvcGVybHlcclxuICAgICAgICAgICAgcmV0dXJuIChwcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JyAmJlxyXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQucmVwbGFjZSgnY2hyb21lLWV4dGVuc2lvbjovLycsICcnKSA9PT1cclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXJsLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiYgY2VVcmwuaG9zdG5hbWUgPT09IGhvc3RuYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKCFIVFRQX1JFR0VYLnRlc3QocHJvdG9jb2wpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKElQX0FERFJFU1NfUkVHRVgudGVzdChleHBlY3RlZCkpIHtcclxuICAgICAgICAvLyBUaGUgZG9tYWluIGhhcyB0byBiZSBleGFjdGx5IGVxdWFsIHRvIHRoZSBwYXR0ZXJuLCBhcyBhbiBJUCBkb21haW4gd2lsbFxyXG4gICAgICAgIC8vIG9ubHkgY29udGFpbiB0aGUgSVAsIG5vIGV4dHJhIGNoYXJhY3Rlci5cclxuICAgICAgICByZXR1cm4gaG9zdG5hbWUgPT09IGV4cGVjdGVkO1xyXG4gICAgfVxyXG4gICAgLy8gRG90cyBpbiBwYXR0ZXJuIHNob3VsZCBiZSBlc2NhcGVkLlxyXG4gICAgY29uc3QgZXNjYXBlZERvbWFpblBhdHRlcm4gPSBleHBlY3RlZC5yZXBsYWNlKC9cXC4vZywgJ1xcXFwuJyk7XHJcbiAgICAvLyBOb24gaXAgYWRkcmVzcyBkb21haW5zLlxyXG4gICAgLy8gZG9tYWluLmNvbSA9ICouZG9tYWluLmNvbSBPUiBkb21haW4uY29tXHJcbiAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoJ14oLitcXFxcLicgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICd8JyArIGVzY2FwZWREb21haW5QYXR0ZXJuICsgJykkJywgJ2knKTtcclxuICAgIHJldHVybiByZS50ZXN0KGhvc3RuYW1lKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTkVUV09SS19USU1FT1VUID0gbmV3IERlbGF5KDMwMDAwLCA2MDAwMCk7XHJcbi8qKlxyXG4gKiBSZXNldCB1bmxhb2RlZCBHQXBpIG1vZHVsZXMuIElmIGdhcGkubG9hZCBmYWlscyBkdWUgdG8gYSBuZXR3b3JrIGVycm9yLFxyXG4gKiBpdCB3aWxsIHN0b3Agd29ya2luZyBhZnRlciBhIHJldHJpYWwuIFRoaXMgaXMgYSBoYWNrIHRvIGZpeCB0aGlzIGlzc3VlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCkge1xyXG4gICAgLy8gQ2xlYXIgbGFzdCBmYWlsZWQgZ2FwaS5sb2FkIHN0YXRlIHRvIGZvcmNlIG5leHQgZ2FwaS5sb2FkIHRvIGZpcnN0XHJcbiAgICAvLyBsb2FkIHRoZSBmYWlsZWQgZ2FwaS5pZnJhbWVzIG1vZHVsZS5cclxuICAgIC8vIEdldCBnYXBpeC5iZWFjb24gY29udGV4dC5cclxuICAgIGNvbnN0IGJlYWNvbiA9IF93aW5kb3coKS5fX19qc2w7XHJcbiAgICAvLyBHZXQgY3VycmVudCBoaW50LlxyXG4gICAgaWYgKGJlYWNvbiA9PT0gbnVsbCB8fCBiZWFjb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlYWNvbi5IKSB7XHJcbiAgICAgICAgLy8gR2V0IGdhcGkgaGludC5cclxuICAgICAgICBmb3IgKGNvbnN0IGhpbnQgb2YgT2JqZWN0LmtleXMoYmVhY29uLkgpKSB7XHJcbiAgICAgICAgICAgIC8vIFJlcXVlc3RlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5yID0gYmVhY29uLkhbaGludF0uciB8fCBbXTtcclxuICAgICAgICAgICAgLy8gTG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLkwgPSBiZWFjb24uSFtoaW50XS5MIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBTZXQgcmVxdWVzdGVkIG1vZHVsZXMgdG8gYSBjb3B5IG9mIHRoZSBsb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IFsuLi5iZWFjb24uSFtoaW50XS5MXTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgcGVuZGluZyBjYWxsYmFja3MuXHJcbiAgICAgICAgICAgIGlmIChiZWFjb24uQ1ApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmVhY29uLkNQLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBmYWlsZWQgcGVuZGluZyBjYWxsYmFja3MuXHJcbiAgICAgICAgICAgICAgICAgICAgYmVhY29uLkNQW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBsb2FkR2FwaShhdXRoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xyXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIHJ1biB3aGVuIGdhcGkubG9hZCBpcyByZWFkeS5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkR2FwaUlmcmFtZSgpIHtcclxuICAgICAgICAgICAgLy8gVGhlIGRldmVsb3BlciBtYXkgaGF2ZSB0cmllZCB0byBwcmV2aW91c2x5IHJ1biBnYXBpLmxvYWQgYW5kIGZhaWxlZC5cclxuICAgICAgICAgICAgLy8gUnVuIHRoaXMgdG8gZml4IHRoYXQuXHJcbiAgICAgICAgICAgIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpO1xyXG4gICAgICAgICAgICBnYXBpLmxvYWQoJ2dhcGkuaWZyYW1lcycsIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnYXBpLmlmcmFtZXMuZ2V0Q29udGV4dCgpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbnRpbWVvdXQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYWJvdmUgcmVzZXQgbWF5IGJlIHN1ZmZpY2llbnQsIGJ1dCBoYXZpbmcgdGhpcyByZXNldCBhZnRlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWx1cmUgZW5zdXJlcyB0aGF0IGlmIHRoZSBkZXZlbG9wZXIgY2FsbHMgZ2FwaS5sb2FkIGFmdGVyIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbm5lY3Rpb24gaXMgcmUtZXN0YWJsaXNoZWQgYW5kIGJlZm9yZSBhbm90aGVyIGF0dGVtcHQgdG8gZW1iZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaWZyYW1lLCBpdCB3b3VsZCB3b3JrIGFuZCB3b3VsZCBub3QgYmUgYnJva2VuIGJlY2F1c2Ugb2Ygb3VyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbGVkIGF0dGVtcHQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGltZW91dCB3aGVuIGdhcGkuaWZyYW1lcy5JZnJhbWUgbm90IGxvYWRlZC5cclxuICAgICAgICAgICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiBORVRXT1JLX1RJTUVPVVQuZ2V0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoX2IgPSAoX2EgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlmcmFtZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5JZnJhbWUpIHtcclxuICAgICAgICAgICAgLy8gSWYgZ2FwaS5pZnJhbWVzLklmcmFtZSBhdmFpbGFibGUsIHJlc29sdmUuXHJcbiAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCEhKChfYyA9IF93aW5kb3coKS5nYXBpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubG9hZCkpIHtcclxuICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgcmVhZHksIGxvYWQgZ2FwaS5pZnJhbWVzLlxyXG4gICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGlmcmFtZSBjYWxsYmFjayB3aGVuIHRoaXMgaXMgY2FsbGVkIHNvIGFzIG5vdCB0byBvdmVyd3JpdGVcclxuICAgICAgICAgICAgLy8gYW55IHByZXZpb3VzIGRlZmluZWQgY2FsbGJhY2suIFRoaXMgaGFwcGVucyBpZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWRcclxuICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgaW4gcGFyYWxsZWwgYW5kIGNvdWxkIHJlc3VsdCBpbiB0aGUgbGF0ZXIgY2FsbGJhY2tcclxuICAgICAgICAgICAgLy8gb3ZlcndyaXRpbmcgdGhlIHByZXZpb3VzIG9uZS4gVGhpcyB3b3VsZCBlbmQgdXAgd2l0aCBhIGlmcmFtZVxyXG4gICAgICAgICAgICAvLyB0aW1lb3V0LlxyXG4gICAgICAgICAgICBjb25zdCBjYk5hbWUgPSBfZ2VuZXJhdGVDYWxsYmFja05hbWUoJ2lmcmFtZWZjYicpO1xyXG4gICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBub3QgYXZhaWxhYmxlLCBkeW5hbWljYWxseSBsb2FkIHBsYXRmb3JtLmpzLlxyXG4gICAgICAgICAgICBfd2luZG93KClbY2JOYW1lXSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEdBcGkgbG9hZGVyIHNob3VsZCBiZSByZWFkeS5cclxuICAgICAgICAgICAgICAgIGlmICghIWdhcGkubG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRHYXBpSWZyYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHYXBpIGxvYWRlciBmYWlsZWQsIHRocm93IGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBMb2FkIEdBcGkgbG9hZGVyLlxyXG4gICAgICAgICAgICByZXR1cm4gX2xvYWRKUyhgaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvYXBpLmpzP29ubG9hZD0ke2NiTmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgY2FjaGVkIHByb21pc2UgdG8gYWxsb3cgZm9yIHJldHJpYWwuXHJcbiAgICAgICAgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxyXG5sZXQgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbmZ1bmN0aW9uIF9sb2FkR2FwaShhdXRoKSB7XHJcbiAgICBjYWNoZWRHQXBpTG9hZGVyID0gY2FjaGVkR0FwaUxvYWRlciB8fCBsb2FkR2FwaShhdXRoKTtcclxuICAgIHJldHVybiBjYWNoZWRHQXBpTG9hZGVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQSU5HX1RJTUVPVVQgPSBuZXcgRGVsYXkoNTAwMCwgMTUwMDApO1xyXG5jb25zdCBJRlJBTUVfUEFUSCA9ICdfXy9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IEVNVUxBVEVEX0lGUkFNRV9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaWZyYW1lJztcclxuY29uc3QgSUZSQU1FX0FUVFJJQlVURVMgPSB7XHJcbiAgICBzdHlsZToge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgIHRvcDogJy0xMDBweCcsXHJcbiAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgIGhlaWdodDogJzFweCdcclxuICAgIH0sXHJcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXHJcbiAgICB0YWJpbmRleDogJy0xJ1xyXG59O1xyXG4vLyBNYXAgZnJvbSBhcGlIb3N0IHRvIGVuZHBvaW50IElEIGZvciBwYXNzaW5nIGludG8gaWZyYW1lLiBJbiBjdXJyZW50IFNESywgYXBpSG9zdCBjYW4gYmUgc2V0IHRvXHJcbi8vIGFueXRoaW5nIChub3QgZnJvbSBhIGxpc3Qgb2YgZW5kcG9pbnRzIHdpdGggSURzIGFzIGluIGxlZ2FjeSksIHNvIHRoaXMgaXMgdGhlIGNsb3Nlc3Qgd2UgY2FuIGdldC5cclxuY29uc3QgRUlEX0ZST01fQVBJSE9TVCA9IG5ldyBNYXAoW1xyXG4gICAgW1wiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sICdwJ10sXHJcbiAgICBbJ3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAncyddLFxyXG4gICAgWyd0ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3QnXSAvLyB0ZXN0XHJcbl0pO1xyXG5mdW5jdGlvbiBnZXRJZnJhbWVVcmwoYXV0aCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gYXV0aC5jb25maWc7XHJcbiAgICBfYXNzZXJ0KGNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgY29uc3QgdXJsID0gY29uZmlnLmVtdWxhdG9yXHJcbiAgICAgICAgPyBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRFRF9JRlJBTUVfUEFUSClcclxuICAgICAgICA6IGBodHRwczovLyR7YXV0aC5jb25maWcuYXV0aERvbWFpbn0vJHtJRlJBTUVfUEFUSH1gO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCBlaWQgPSBFSURfRlJPTV9BUElIT1NULmdldChhdXRoLmNvbmZpZy5hcGlIb3N0KTtcclxuICAgIGlmIChlaWQpIHtcclxuICAgICAgICBwYXJhbXMuZWlkID0gZWlkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhbWV3b3JrcyA9IGF1dGguX2dldEZyYW1ld29ya3MoKTtcclxuICAgIGlmIChmcmFtZXdvcmtzLmxlbmd0aCkge1xyXG4gICAgICAgIHBhcmFtcy5mdyA9IGZyYW1ld29ya3Muam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0/JHtxdWVyeXN0cmluZyhwYXJhbXMpLnNsaWNlKDEpfWA7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX29wZW5JZnJhbWUoYXV0aCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IF9sb2FkR2FwaShhdXRoKTtcclxuICAgIGNvbnN0IGdhcGkgPSBfd2luZG93KCkuZ2FwaTtcclxuICAgIF9hc3NlcnQoZ2FwaSwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBjb250ZXh0Lm9wZW4oe1xyXG4gICAgICAgIHdoZXJlOiBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgIHVybDogZ2V0SWZyYW1lVXJsKGF1dGgpLFxyXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyc0ZpbHRlcjogZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUixcclxuICAgICAgICBhdHRyaWJ1dGVzOiBJRlJBTUVfQVRUUklCVVRFUyxcclxuICAgICAgICBkb250Y2xlYXI6IHRydWVcclxuICAgIH0sIChpZnJhbWUpID0+IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBhd2FpdCBpZnJhbWUucmVzdHlsZSh7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgaWZyYW1lIGZyb20gY2xvc2luZyBvbiBtb3VzZSBvdXQuXHJcbiAgICAgICAgICAgIHNldEhpZGVPbkxlYXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgICAgICAvLyBDb25maXJtIGlmcmFtZSBpcyBjb3JyZWN0bHkgbG9hZGVkLlxyXG4gICAgICAgIC8vIFRvIGZhbGxiYWNrIG9uIGZhaWx1cmUsIHNldCBhIHRpbWVvdXQuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yVGltZXIgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0sIFBJTkdfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGltZXIgYW5kIHJlc29sdmUgcGVuZGluZyBpZnJhbWUgcmVhZHkgcHJvbWlzZS5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVyQW5kUmVzb2x2ZSgpIHtcclxuICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrRXJyb3JUaW1lcik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyByZXR1cm5zIGFuIElUaGVuYWJsZS4gSG93ZXZlciB0aGUgcmVqZWN0IHBhcnQgZG9lcyBub3QgY2FsbFxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLlxyXG4gICAgICAgIGlmcmFtZS5waW5nKGNsZWFyVGltZXJBbmRSZXNvbHZlKS50aGVuKGNsZWFyVGltZXJBbmRSZXNvbHZlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBCQVNFX1BPUFVQX09QVElPTlMgPSB7XHJcbiAgICBsb2NhdGlvbjogJ3llcycsXHJcbiAgICByZXNpemFibGU6ICd5ZXMnLFxyXG4gICAgc3RhdHVzYmFyOiAneWVzJyxcclxuICAgIHRvb2xiYXI6ICdubydcclxufTtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDUwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFRBUkdFVF9CTEFOSyA9ICdfYmxhbmsnO1xyXG5jb25zdCBGSVJFRk9YX0VNUFRZX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuY2xhc3MgQXV0aFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZEV2ZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9vcGVuKGF1dGgsIHVybCwgbmFtZSwgd2lkdGggPSBERUZBVUxUX1dJRFRILCBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVCkge1xyXG4gICAgY29uc3QgdG9wID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSBoZWlnaHQpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gd2lkdGgpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGxldCB0YXJnZXQgPSAnJztcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEJBU0VfUE9QVVBfT1BUSU9OUyksIHsgd2lkdGg6IHdpZHRoLnRvU3RyaW5nKCksIGhlaWdodDogaGVpZ2h0LnRvU3RyaW5nKCksIHRvcCxcclxuICAgICAgICBsZWZ0IH0pO1xyXG4gICAgLy8gQ2hyb21lIGlPUyA3IGFuZCA4IGlzIHJldHVybmluZyBhbiB1bmRlZmluZWQgcG9wdXAgd2luIHdoZW4gdGFyZ2V0IGlzXHJcbiAgICAvLyBzcGVjaWZpZWQsIGV2ZW4gdGhvdWdoIHRoZSBwb3B1cCBpcyBub3QgbmVjZXNzYXJpbHkgYmxvY2tlZC5cclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB0YXJnZXQgPSBfaXNDaHJvbWVJT1ModWEpID8gVEFSR0VUX0JMQU5LIDogbmFtZTtcclxuICAgIH1cclxuICAgIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggY29tcGxhaW5zIHdoZW4gaW52YWxpZCBVUkxzIGFyZSBwb3BwZWQgb3V0LiBIYWNreSB3YXkgdG8gYnlwYXNzLlxyXG4gICAgICAgIHVybCA9IHVybCB8fCBGSVJFRk9YX0VNUFRZX1VSTDtcclxuICAgICAgICAvLyBGaXJlZm94IGRpc2FibGVzIGJ5IGRlZmF1bHQgc2Nyb2xsaW5nIG9uIHBvcHVwIHdpbmRvd3MsIHdoaWNoIGNhbiBjcmVhdGVcclxuICAgICAgICAvLyBpc3N1ZXMgd2hlbiB0aGUgdXNlciBoYXMgbWFueSBHb29nbGUgYWNjb3VudHMsIGZvciBpbnN0YW5jZS5cclxuICAgICAgICBvcHRpb25zLnNjcm9sbGJhcnMgPSAneWVzJztcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbnNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5yZWR1Y2UoKGFjY3VtLCBba2V5LCB2YWx1ZV0pID0+IGAke2FjY3VtfSR7a2V5fT0ke3ZhbHVlfSxgLCAnJyk7XHJcbiAgICBpZiAoX2lzSU9TU3RhbmRhbG9uZSh1YSkgJiYgdGFyZ2V0ICE9PSAnX3NlbGYnKSB7XHJcbiAgICAgICAgb3BlbkFzTmV3V2luZG93SU9TKHVybCB8fCAnJywgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChudWxsKTtcclxuICAgIH1cclxuICAgIC8vIGFib3V0OmJsYW5rIGdldHRpbmcgc2FuaXRpemVkIGNhdXNpbmcgYnJvd3NlcnMgbGlrZSBJRS9FZGdlIHRvIGRpc3BsYXlcclxuICAgIC8vIGJyaWVmIGVycm9yIG1lc3NhZ2UgYmVmb3JlIHJlZGlyZWN0aW5nIHRvIGhhbmRsZXIuXHJcbiAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3Blbih1cmwgfHwgJycsIHRhcmdldCwgb3B0aW9uc1N0cmluZyk7XHJcbiAgICBfYXNzZXJ0KG5ld1dpbiwgYXV0aCwgXCJwb3B1cC1ibG9ja2VkXCIgLyogUE9QVVBfQkxPQ0tFRCAqLyk7XHJcbiAgICAvLyBGbGFreSBvbiBJRSBlZGdlLCBlbmNhcHN1bGF0ZSB3aXRoIGEgdHJ5IGFuZCBjYXRjaC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3V2luLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChuZXdXaW4pO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwsIHRhcmdldCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgZWwudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpO1xyXG4gICAgY2xpY2suaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMSwgbnVsbCk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVVJMIGZvciBBdXRoZW50aWNhdGlvbiB3aWRnZXQgd2hpY2ggd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggaGFuZHNoYWtlXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgV0lER0VUX1BBVEggPSAnX18vYXV0aC9oYW5kbGVyJztcclxuLyoqXHJcbiAqIFVSTCBmb3IgZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBFTVVMQVRPUl9XSURHRVRfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2hhbmRsZXInO1xyXG5mdW5jdGlvbiBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCByZWRpcmVjdFVybCwgZXZlbnRJZCwgYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgsIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBhcGlLZXk6IGF1dGguY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgYXV0aFR5cGUsXHJcbiAgICAgICAgcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgZXZlbnRJZFxyXG4gICAgfTtcclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHByb3ZpZGVyLnNldERlZmF1bHRMYW5ndWFnZShhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgcGFyYW1zLnByb3ZpZGVySWQgPSBwcm92aWRlci5wcm92aWRlcklkIHx8ICcnO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jdXN0b21QYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBzZXQgYWRkaXRpb25hbFBhcmFtcyBmcm9tIHRoZSBwcm92aWRlciBhcyB3ZWxsP1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgQmFzZU9BdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBjb25zdCBzY29wZXMgPSBwcm92aWRlci5nZXRTY29wZXMoKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUgIT09ICcnKTtcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNjb3BlcyA9IHNjb3Blcy5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGF1dGgudGVuYW50SWQpIHtcclxuICAgICAgICBwYXJhbXMudGlkID0gYXV0aC50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBlaWQgYXMgZW5kaXBvaW50SWRcclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBmdyBhcyBGcmFtZXdvcmtzLmpvaW4oXCIsXCIpXHJcbiAgICBjb25zdCBwYXJhbXNEaWN0ID0gcGFyYW1zO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyYW1zRGljdCkpIHtcclxuICAgICAgICBpZiAocGFyYW1zRGljdFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc0RpY3Rba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7Z2V0SGFuZGxlckJhc2UoYXV0aCl9PyR7cXVlcnlzdHJpbmcocGFyYW1zRGljdCkuc2xpY2UoMSl9YDtcclxufVxyXG5mdW5jdGlvbiBnZXRIYW5kbGVyQmFzZSh7IGNvbmZpZyB9KSB7XHJcbiAgICBpZiAoIWNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2NvbmZpZy5hdXRoRG9tYWlufS8ke1dJREdFVF9QQVRIfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGNvbmZpZywgRU1VTEFUT1JfV0lER0VUX1BBVEgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lhbCB3ZWIgc3RvcmFnZSBldmVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgPSAnd2ViU3RvcmFnZVN1cHBvcnQnO1xyXG5jbGFzcyBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8gV3JhcHBpbmcgaW4gYXN5bmMgZXZlbiB0aG91Z2ggd2UgZG9uJ3QgYXdhaXQgYW55d2hlcmUgaW4gb3JkZXJcclxuICAgIC8vIHRvIG1ha2Ugc3VyZSBlcnJvcnMgYXJlIHJhaXNlZCBhcyBwcm9taXNlIHJlamVjdGlvbnNcclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KChfYSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYW5hZ2VyLCAnX2luaXRpYWxpemUoKSBub3QgY2FsbGVkIGJlZm9yZSBfb3BlblBvcHVwKCknKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICByZXR1cm4gX29wZW4oYXV0aCwgdXJsLCBfZ2VuZXJhdGVFdmVudElkKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIF9zZXRXaW5kb3dMb2NhdGlvbihfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWFuYWdlciwgcHJvbWlzZSB9ID0gdGhpcy5ldmVudE1hbmFnZXJzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hbmFnZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVidWdBc3NlcnQocHJvbWlzZSwgJ0lmIG1hbmFnZXIgaXMgbm90IHNldCwgcHJvbWlzZSBzaG91bGQgYmUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldID0geyBwcm9taXNlIH07XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0QW5kR2V0TWFuYWdlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gYXdhaXQgX29wZW5JZnJhbWUoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBBdXRoRXZlbnRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIGlmcmFtZS5yZWdpc3RlcignYXV0aEV2ZW50JywgKGlmcmFtZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQoaWZyYW1lRXZlbnQgPT09IG51bGwgfHwgaWZyYW1lRXZlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlmcmFtZUV2ZW50LmF1dGhFdmVudCwgYXV0aCwgXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBJTlZBTElEX0FVVEhfRVZFTlQgKi8pO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBDb25zaWRlciBzcGxpdHRpbmcgcmVkaXJlY3QgYW5kIHBvcHVwIGV2ZW50cyBlYXJsaWVyIG9uXHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZWQgPSBtYW5hZ2VyLm9uRXZlbnQoaWZyYW1lRXZlbnQuYXV0aEV2ZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBoYW5kbGVkID8gXCJBQ0tcIiAvKiBBQ0sgKi8gOiBcIkVSUk9SXCIgLyogRVJST1IgKi8gfTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnNbYXV0aC5fa2V5KCldID0geyBtYW5hZ2VyIH07XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzW2F1dGguX2tleSgpXSA9IGlmcmFtZTtcclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldO1xyXG4gICAgICAgIGlmcmFtZS5zZW5kKFdFQl9TVE9SQUdFX1NVUFBPUlRfS0VZLCB7IHR5cGU6IFdFQl9TVE9SQUdFX1NVUFBPUlRfS0VZIH0sIHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgY29uc3QgaXNTdXBwb3J0ZWQgPSAoX2EgPSByZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHRbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWV07XHJcbiAgICAgICAgICAgIGlmIChpc1N1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjYighIWlzU3VwcG9ydGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldID0gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XTtcclxuICAgIH1cclxuICAgIGdldCBfc2hvdWxkSW5pdFByb2FjdGl2ZWx5KCkge1xyXG4gICAgICAgIC8vIE1vYmlsZSBicm93c2VycyBhbmQgU2FmYXJpIG5lZWQgdG8gb3B0aW1pc3RpY2FsbHkgaW5pdGlhbGl6ZVxyXG4gICAgICAgIHJldHVybiBfaXNNb2JpbGVCcm93c2VyKCkgfHwgX2lzU2FmYXJpKCkgfHwgX2lzSU9TKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9IHN1aXRhYmxlIGZvciBicm93c2VyXHJcbiAqIGJhc2VkIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciA9IEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XG5cbmNsYXNzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3JJZCkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9ySWQgPSBmYWN0b3JJZDtcclxuICAgIH1cclxuICAgIF9wcm9jZXNzKGF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgc3dpdGNoIChzZXNzaW9uLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImVucm9sbFwiIC8qIEVOUk9MTCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZUVucm9sbChhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwsIGRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25pblwiIC8qIFNJR05fSU4gKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVTaWduSW4oYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ3VuZXhwZWN0ZWQgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICoge0Bpbmhlcml0ZG9jIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplRW5yb2xsKGF1dGgsIGlkVG9rZW4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZVNpZ25JbihhdXRoLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259IHRvIGNvbmZpcm0gb3duZXJzaGlwIG9mIHRoZSBwaG9uZSBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwaG9uZUF1dGhDcmVkZW50aWFsIC0gQSBjcmVkZW50aWFsIHByb3ZpZGVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsfS5cclxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259IHdoaWNoIGNhbiBiZSB1c2VkIHdpdGhcclxuICAgICAqIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyLnJlc29sdmVTaWduSW59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3NlcnRpb24oY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBwaG9uZSBzZWNvbmQgZmFjdG9yOiBgcGhvbmVgLlxyXG4gKi9cclxuUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvci5GQUNUT1JfSUQgPSAncGhvbmUnO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2F1dGhcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjE5LjJcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEludGVyb3Age1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGdldFVpZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuYXV0aC5jdXJyZW50VXNlci5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW4gfTtcclxuICAgIH1cclxuICAgIGFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuYXV0aC5vbklkVG9rZW5DaGFuZ2VkKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKCgoX2EgPSB1c2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB8fCBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLnNldChsaXN0ZW5lciwgdW5zdWJzY3JpYmUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmludGVybmFsTGlzdGVuZXJzLmdldChsaXN0ZW5lcik7XHJcbiAgICAgICAgaWYgKCF1bnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZSwgXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIk5vZGVcIiAvKiBOT0RFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIGNhc2UgXCJSZWFjdE5hdGl2ZVwiIC8qIFJFQUNUX05BVElWRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdybic7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICd3ZWJ3b3JrZXInO1xyXG4gICAgICAgIGNhc2UgXCJDb3Jkb3ZhXCIgLyogQ09SRE9WQSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdjb3Jkb3ZhJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGhcIiAvKiBBVVRIICovLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGRlcHMgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgeyBhcGlLZXksIGF1dGhEb21haW4gfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgICAgIHJldHVybiAoYXBwID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgIWFwaUtleS5pbmNsdWRlcygnOicpLCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywgeyBhcHBOYW1lOiBhcHAubmFtZSB9KTtcclxuICAgICAgICAgICAgLy8gQXV0aCBkb21haW4gaXMgb3B0aW9uYWwgaWYgSWRQIHNpZ24gaW4gaXNuJ3QgYmVpbmcgdXNlZFxyXG4gICAgICAgICAgICBfYXNzZXJ0KCEoYXV0aERvbWFpbiA9PT0gbnVsbCB8fCBhdXRoRG9tYWluID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdXRoRG9tYWluLmluY2x1ZGVzKCc6JykpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICBhdXRoRG9tYWluLFxyXG4gICAgICAgICAgICAgICAgY2xpZW50UGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICBhcGlIb3N0OiBcImlkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbVwiIC8qIEFQSV9IT1NUICovLFxyXG4gICAgICAgICAgICAgICAgdG9rZW5BcGlIb3N0OiBcInNlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tXCIgLyogVE9LRU5fQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICBhcGlTY2hlbWU6IFwiaHR0cHNcIiAvKiBBUElfU0NIRU1FICovLFxyXG4gICAgICAgICAgICAgICAgc2RrQ2xpZW50VmVyc2lvbjogX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IG5ldyBBdXRoSW1wbChhcHAsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGhJbnN0YW5jZSwgZGVwcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoSW5zdGFuY2U7XHJcbiAgICAgICAgfSkoYXBwKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEF1dGggY2FuIG9ubHkgYmUgaW5pdGlhbGl6ZWQgYnkgZXhwbGljaXRseSBjYWxsaW5nIGdldEF1dGgoKSBvciBpbml0aWFsaXplQXV0aCgpXHJcbiAgICAgICAgICogRm9yIHdoeSB3ZSBkbyB0aGlzLCBTZWUgZ28vZmlyZWJhc2UtbmV4dC1hdXRoLWluaXRcclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJlY2F1c2UgYWxsIGZpcmViYXNlIHByb2R1Y3RzIHRoYXQgZGVwZW5kIG9uIGF1dGggZGVwZW5kIG9uIGF1dGgtaW50ZXJuYWwgZGlyZWN0bHksXHJcbiAgICAgICAgICogd2UgbmVlZCB0byBpbml0aWFsaXplIGF1dGgtaW50ZXJuYWwgYWZ0ZXIgYXV0aCBpcyBpbml0aWFsaXplZCB0byBtYWtlIGl0IGF2YWlsYWJsZSB0byBvdGhlciBmaXJlYmFzZSBwcm9kdWN0cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soKGNvbnRhaW5lciwgX2luc3RhbmNlSWRlbnRpZmllciwgX2luc3RhbmNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aEludGVybmFsUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLyk7XHJcbiAgICAgICAgYXV0aEludGVybmFsUHJvdmlkZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSkpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLywgY29udGFpbmVyID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGhcIiAvKiBBVVRIICovKS5nZXRJbW1lZGlhdGUoKSk7XHJcbiAgICAgICAgcmV0dXJuIChhdXRoID0+IG5ldyBBdXRoSW50ZXJvcChhdXRoKSkoYXV0aCk7XHJcbiAgICB9LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKS5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgQXV0aCBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS5cclxuICogSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhbiBBdXRoIGluc3RhbmNlIHdpdGggcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdCBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUgRmlyZWJhc2UgQXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBdXRoKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gICAgICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcixcclxuICAgICAgICBwZXJzaXN0ZW5jZTogW1xyXG4gICAgICAgICAgICBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aChcIkJyb3dzZXJcIiAvKiBCUk9XU0VSICovKTtcblxuZXhwb3J0IHsgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCBhcyAkLCBBY3Rpb25Db2RlT3BlcmF0aW9uIGFzIEEsIHByb2RFcnJvck1hcCBhcyBCLCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgYXMgQywgaW5pdGlhbGl6ZUF1dGggYXMgRCwgY29ubmVjdEF1dGhFbXVsYXRvciBhcyBFLCBGYWN0b3JJZCBhcyBGLCBBdXRoQ3JlZGVudGlhbCBhcyBHLCBFbWFpbEF1dGhDcmVkZW50aWFsIGFzIEgsIE9BdXRoQ3JlZGVudGlhbCBhcyBJLCBQaG9uZUF1dGhDcmVkZW50aWFsIGFzIEosIGluTWVtb3J5UGVyc2lzdGVuY2UgYXMgSywgRW1haWxBdXRoUHJvdmlkZXIgYXMgTCwgRmFjZWJvb2tBdXRoUHJvdmlkZXIgYXMgTSwgR29vZ2xlQXV0aFByb3ZpZGVyIGFzIE4sIE9wZXJhdGlvblR5cGUgYXMgTywgUGhvbmVBdXRoUHJvdmlkZXIgYXMgUCwgR2l0aHViQXV0aFByb3ZpZGVyIGFzIFEsIFJlY2FwdGNoYVZlcmlmaWVyIGFzIFIsIFNpZ25Jbk1ldGhvZCBhcyBTLCBPQXV0aFByb3ZpZGVyIGFzIFQsIFNBTUxBdXRoUHJvdmlkZXIgYXMgVSwgVHdpdHRlckF1dGhQcm92aWRlciBhcyBWLCBzaWduSW5Bbm9ueW1vdXNseSBhcyBXLCBzaWduSW5XaXRoQ3JlZGVudGlhbCBhcyBYLCBsaW5rV2l0aENyZWRlbnRpYWwgYXMgWSwgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCBhcyBaLCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4gYXMgXywgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBhcyBhLCBjb25maXJtUGFzc3dvcmRSZXNldCBhcyBhMCwgYXBwbHlBY3Rpb25Db2RlIGFzIGExLCBjaGVja0FjdGlvbkNvZGUgYXMgYTIsIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlIGFzIGEzLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE1LCBzZW5kU2lnbkluTGlua1RvRW1haWwgYXMgYTYsIGlzU2lnbkluV2l0aEVtYWlsTGluayBhcyBhNywgc2lnbkluV2l0aEVtYWlsTGluayBhcyBhOCwgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwgYXMgYTksIF9nZXRSZWRpcmVjdFJlc3VsdCBhcyBhQSwgX2NsZWFyUmVkaXJlY3RPdXRjb21lcyBhcyBhQiwgX2Nhc3RBdXRoIGFzIGFDLCBVc2VySW1wbCBhcyBhRCwgQXV0aEltcGwgYXMgYUUsIF9nZXRDbGllbnRWZXJzaW9uIGFzIGFGLCBfZ2VuZXJhdGVFdmVudElkIGFzIGFHLCBBdXRoUG9wdXAgYXMgYUgsIEZldGNoUHJvdmlkZXIgYXMgYUksIFNBTUxBdXRoQ3JlZGVudGlhbCBhcyBhSiwgc2VuZEVtYWlsVmVyaWZpY2F0aW9uIGFzIGFhLCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCBhcyBhYiwgQWN0aW9uQ29kZVVSTCBhcyBhYywgcGFyc2VBY3Rpb25Db2RlVVJMIGFzIGFkLCB1cGRhdGVQcm9maWxlIGFzIGFlLCB1cGRhdGVFbWFpbCBhcyBhZiwgdXBkYXRlUGFzc3dvcmQgYXMgYWcsIGdldElkVG9rZW4gYXMgYWgsIGdldElkVG9rZW5SZXN1bHQgYXMgYWksIHVubGluayBhcyBhaiwgZ2V0QWRkaXRpb25hbFVzZXJJbmZvIGFzIGFrLCByZWxvYWQgYXMgYWwsIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIgYXMgYW0sIG11bHRpRmFjdG9yIGFzIGFuLCBfaXNJT1M3T3I4IGFzIGFvLCBkZWJ1Z0Fzc2VydCBhcyBhcCwgX2lzSU9TIGFzIGFxLCBfaXNBbmRyb2lkIGFzIGFyLCBfZmFpbCBhcyBhcywgX2dldFJlZGlyZWN0VXJsIGFzIGF0LCBfZ2V0UHJvamVjdENvbmZpZyBhcyBhdSwgX2NyZWF0ZUVycm9yIGFzIGF2LCBfYXNzZXJ0IGFzIGF3LCBfZ2V0SW5zdGFuY2UgYXMgYXgsIF9wZXJzaXN0ZW5jZUtleU5hbWUgYXMgYXksIEF1dGhFdmVudE1hbmFnZXIgYXMgYXosIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGFzIGIsIHNpZ25JbldpdGhQb3B1cCBhcyBjLCBsaW5rV2l0aFBvcHVwIGFzIGQsIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwIGFzIGUsIHNpZ25JbldpdGhSZWRpcmVjdCBhcyBmLCBsaW5rV2l0aFJlZGlyZWN0IGFzIGcsIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IGFzIGgsIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgYXMgaSwgZ2V0UmVkaXJlY3RSZXN1bHQgYXMgaiwgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciBhcyBrLCBsaW5rV2l0aFBob25lTnVtYmVyIGFzIGwsIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgbSwgZ2V0QXV0aCBhcyBuLCBQcm92aWRlcklkIGFzIG8sIHNldFBlcnNpc3RlbmNlIGFzIHAsIG9uSWRUb2tlbkNoYW5nZWQgYXMgcSwgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIgYXMgciwgc2lnbkluV2l0aFBob25lTnVtYmVyIGFzIHMsIG9uQXV0aFN0YXRlQ2hhbmdlZCBhcyB0LCB1cGRhdGVQaG9uZU51bWJlciBhcyB1LCB1c2VEZXZpY2VMYW5ndWFnZSBhcyB2LCB1cGRhdGVDdXJyZW50VXNlciBhcyB3LCBzaWduT3V0IGFzIHgsIGRlbGV0ZVVzZXIgYXMgeSwgZGVidWdFcnJvck1hcCBhcyB6IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC1hYTlhNjRlZC5qcy5tYXBcbiIsImltcG9ydCBjaGVja0lmU2VsZWN0ZWRDaGFyYWN0ZXJJc0NvcnJlY3QgZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB3YWxkb1RodW1ibmFpbCBmcm9tIFwiLi9pbWFnZXMvd2FsZG90aHVtYm5haWwuanBnXCI7XG5pbXBvcnQgb2RsYXdUaHVtYm5haWwgZnJvbSBcIi4vaW1hZ2VzL29kbGF3dGh1bWJuYWlsLmpwZ1wiO1xuaW1wb3J0IHdlbmRhVGh1bWJuYWlsIGZyb20gXCIuL2ltYWdlcy93ZW5kYXRodW1ibmFpbC5qcGdcIjtcbmltcG9ydCB3aXphcmRUaHVtYm5haWwgZnJvbSBcIi4vaW1hZ2VzL3dpemFyZHRodW1ibmFpbC5qcGVnXCI7XG5pbXBvcnQgd29vZlRodW1ibmFpbCBmcm9tIFwiLi9pbWFnZXMvd29vZnRodW1ibmFpbC5qcGdcIjtcbmltcG9ydCBCYWNrZ3JvdW5kSW1hZ2UgZnJvbSBcIi4vaW1hZ2VzL3dhbGRvLmpwZWdcIjtcbmltcG9ydCB7IGdldEF1dGggfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuXG4vLyBsb2FkcyBjaGFyYWN0ZXJzJyBpbWFnZXMgdG8gc3RhcnQgcGFnZVxuY29uc3QgYWRkSW1hZ2VzVG9TdGFydFBhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChnZXRBdXRoKCkuY3VycmVudFVzZXIgIT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY2hhcmFjdGVyc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcmFjdGVyc1RvTG9va0ZvclwiKTtcbiAgY29uc3QgYWxsQ2hhcmFjdGVycyA9IFtcbiAgICB7IG5hbWU6IFwid2FsZG90aHVtYm5haWxcIiwgZmlsZTogd2FsZG9UaHVtYm5haWwgfSxcbiAgICB7IG5hbWU6IFwib2RsYXd0aHVtYm5haWxcIiwgZmlsZTogb2RsYXdUaHVtYm5haWwgfSxcbiAgICB7IG5hbWU6IFwid2VuZGF0aHVtYm5haWxcIiwgZmlsZTogd2VuZGFUaHVtYm5haWwgfSxcbiAgICB7IG5hbWU6IFwid2l6YXJkdGh1bWJuYWlsXCIsIGZpbGU6IHdpemFyZFRodW1ibmFpbCB9LFxuICAgIHsgbmFtZTogXCJ3b29mdGh1bWJuYWlsXCIsIGZpbGU6IHdvb2ZUaHVtYm5haWwgfSxcbiAgXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBpbWcuc3JjID0gYWxsQ2hhcmFjdGVyc1tpXS5maWxlO1xuICAgIGltZy5hbHQgPSBhbGxDaGFyYWN0ZXJzW2ldLm5hbWU7XG4gICAgaW1nLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2hhcmFjdGVydGh1bWJuYWlsXCIpO1xuICAgIGNoYXJhY3RlcnNEaXYuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgfVxufTtcblxuLy8gbG9hZHMgYmFja2dyb3VuZCBpbWFnZSBhbmQgc2V0cyBjcml0aWNhbCBzdHlsZTsgaWYgc3R5bGVkIHdpdGggY3NzLCB0aGUgY2hhcmFjdGVyJ3MgbG9jYXRpb25zIHdvdWxkIGJlIGluY29ycmVjdCBvbiBkYlxuY29uc3QgZGlzcGxheUltYWdlID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBiYWNrZ3JvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kXCIpO1xuICBiYWNrZ3JvdW5kLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGltZy5zcmMgPSBCYWNrZ3JvdW5kSW1hZ2U7XG4gIGltZy5hbHQgPSBcImJhY2tncm91bmRpbWFnZVwiO1xuICBpbWcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJiYWNrZ3JvdW5kaW1hZ2VcIik7XG4gIGltZy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBpbWcuc3R5bGUubWF4SGVpZ2h0ID0gXCIxMDAlXCI7XG4gIGltZy5zdHlsZS5tYXhXaWR0aCA9IFwiMTAwJVwiO1xuICBpbWcuc3R5bGUubWFyZ2luID0gXCIwIGF1dG9cIjtcbiAgYmFja2dyb3VuZC5hcHBlbmRDaGlsZChpbWcpO1xuICAvLyBjbGlja2luZyBvbiBpbWFnZSBwb3BzIHVwIGEgbGlzdCBvZiBhbGwgY2hhcmFjdGVyc1xuICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGNyZWF0ZURyb3BEb3duKGV2ZW50KTtcbiAgfSk7XG4gIHJldHVybiBcImRvbmVcIjtcbn07XG5cbi8vIGxvYWRzIGNoYXJhY3RlcnMnIGltYWdlcyB0byBnYW1lIGFuZCBjcmVhdGVzIGhpZ2ggc2NvcmVzIGJ1dHRvblxuY29uc3QgYWRkSW1hZ2VzVG9HYW1lID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBzaWRldGh1bWJuYWlsc2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZXRodW1ibmFpbHNcIik7XG4gIGNvbnN0IGFsbENoYXJhY3RlcnMgPSBbXG4gICAgeyBhbGlhczogXCJ3YWxkb3RodW1ibmFpbFwiLCBmaWxlOiB3YWxkb1RodW1ibmFpbCwgbmFtZTogXCJXYWxkb1wiIH0sXG4gICAgeyBhbGlhczogXCJvZGxhd3RodW1ibmFpbFwiLCBmaWxlOiBvZGxhd1RodW1ibmFpbCwgbmFtZTogXCJPZGxhd1wiIH0sXG4gICAgeyBhbGlhczogXCJ3ZW5kYXRodW1ibmFpbFwiLCBmaWxlOiB3ZW5kYVRodW1ibmFpbCwgbmFtZTogXCJXZW5kYVwiIH0sXG4gICAge1xuICAgICAgYWxpYXM6IFwid2l6YXJkdGh1bWJuYWlsXCIsXG4gICAgICBmaWxlOiB3aXphcmRUaHVtYm5haWwsXG4gICAgICBuYW1lOiBcIldpemFyZCBXaGl0ZWJlYXJkXCIsXG4gICAgfSxcbiAgICB7IGFsaWFzOiBcIndvb2Z0aHVtYm5haWxcIiwgZmlsZTogd29vZlRodW1ibmFpbCwgbmFtZTogXCJXb29mXCIgfSxcbiAgXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxDaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJkaXZjaGFyYWN0ZXJ0aHVtYm5haWxcIik7XG4gICAgZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIGFsbENoYXJhY3RlcnNbaV0uYWxpYXMpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaW1nLnNyYyA9IGFsbENoYXJhY3RlcnNbaV0uZmlsZTtcbiAgICBpbWcuYWx0ID0gYWxsQ2hhcmFjdGVyc1tpXS5hbGlhcztcbiAgICBpbWcuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjaGFyYWN0ZXJ0aHVtYm5haWxnYW1lXCIpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChpbWcpO1xuICAgIHNpZGV0aHVtYm5haWxzZGl2LmFwcGVuZENoaWxkKGRpdik7XG4gIH1cbiAgY29uc3QgaGlnaHNjb3JlYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgaGlnaHNjb3JlYnV0dG9uLnRleHRDb250ZW50ID0gXCJIaWdoZXN0IFNjb3Jlc1wiO1xuICBoaWdoc2NvcmVidXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWdoZXN0c2NvcmVzbGlua1wiKTtcbiAgc2lkZXRodW1ibmFpbHNkaXYuYXBwZW5kQ2hpbGQoaGlnaHNjb3JlYnV0dG9uKTtcbn07XG5cbi8vIGNyZWF0ZXMgYSBsaXN0IG9mIGFsbCBjaGFyYWN0ZXJzIHdoZW4gdXNlciBjbGlja3MgdGhlIGJhY2tncm91bmQgaW1hZ2U7IGVhY2ggZWxlbWVudCBvbiB0aGUgbGlzdCBoYXMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHNlbGVjdGluZyB0aGUgY2hhcmFjdGVyXG5jb25zdCBjcmVhdGVEcm9wRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRpbWFnZVwiKTtcbiAgY29uc3QgYmFja2dyb3VuZGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFwiKTtcbiAgY29uc3QgaW1nd2lkdGggPSBOdW1iZXIoaW1nLmNsaWVudFdpZHRoKTtcbiAgY29uc3QgYmFja2dyb3VuZGRpdndpZHRoID0gTnVtYmVyKGJhY2tncm91bmRkaXYuY2xpZW50V2lkdGgpO1xuICBsZXQgbGVmdG1hcmdpbiA9IDA7XG4gIC8vIHRoZSBsaXN0IGlzIHBsYWNlZCBhdCB0aGUgcmlnaHQgb2YgdGhlIGNsaWNrIGxvY2F0aW9uXG4gIGlmIChiYWNrZ3JvdW5kZGl2d2lkdGggPiBpbWd3aWR0aCkge1xuICAgIGxlZnRtYXJnaW4gPSAoYmFja2dyb3VuZGRpdndpZHRoIC0gaW1nd2lkdGgpIC8gMjtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNoYXJhY3RlcnNlbGVjdGlvblwiKSAhPT0gbnVsbCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2hhcmFjdGVyc2VsZWN0aW9uXCIpLnJlbW92ZSgpO1xuICB9XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNoYXJhY3RlcnNlbGVjdGlvblwiKTtcbiAgY29uc3QgY2xvc2VkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBjbG9zZWRpdi5pbm5lckhUTUwgPSBcInhcIjtcbiAgbGV0IHRvcG9mZnNldCA9IGV2ZW50Lm9mZnNldFkgLSAyMCAtIDMyMCArIFwicHhcIjtcbiAgY29uc3QgZXh0cmFjdG51bWJlcmZyb210b3BvZmZzZXQgPSB0b3BvZmZzZXQuc3BsaXQoXCJwXCIpWzBdO1xuICBpZiAoZXh0cmFjdG51bWJlcmZyb210b3BvZmZzZXQgPCAwKSB7XG4gICAgdG9wb2Zmc2V0ID0gXCIxMHB4XCI7XG4gIH1cbiAgZGl2LnN0eWxlLnRvcCA9IHRvcG9mZnNldDtcbiAgZGl2LnN0eWxlLmxlZnQgPSBldmVudC5vZmZzZXRYICsgbGVmdG1hcmdpbiArIDIwICsgXCJweFwiO1xuICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgY29uc3QgbGl3YWxkbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgbGl3YWxkby50ZXh0Q29udGVudCA9IFwiV2FsZG9cIjtcbiAgbGl3YWxkby5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoYXJhY3RlclwiLCBcIndhbGRvTG9jYXRpb25cIik7XG4gIGNvbnN0IGxpb2RsYXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gIGxpb2RsYXcudGV4dENvbnRlbnQgPSBcIk9kbGF3XCI7XG4gIGxpb2RsYXcuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGFyYWN0ZXJcIiwgXCJvZGxhd0xvY2F0aW9uXCIpO1xuICBjb25zdCBsaXdlbmRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICBsaXdlbmRhLnRleHRDb250ZW50ID0gXCJXZW5kYVwiO1xuICBsaXdlbmRhLnNldEF0dHJpYnV0ZShcImRhdGEtY2hhcmFjdGVyXCIsIFwid2VuZGFMb2NhdGlvblwiKTtcbiAgY29uc3QgbGl3aGl0ZWJlYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICBsaXdoaXRlYmVhcmQudGV4dENvbnRlbnQgPSBcIldpemFyZCBXaGl0ZWJlYXJkXCI7XG4gIGxpd2hpdGViZWFyZC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNoYXJhY3RlclwiLCBcIndpemFyZExvY2F0aW9uXCIpO1xuICBjb25zdCBsaXdvb2YgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gIGxpd29vZi50ZXh0Q29udGVudCA9IFwiV29vZlwiO1xuICBsaXdvb2Yuc2V0QXR0cmlidXRlKFwiZGF0YS1jaGFyYWN0ZXJcIiwgXCJ3b29mTG9jYXRpb25cIik7XG5cbiAgdWwuYXBwZW5kQ2hpbGQobGl3YWxkbyk7XG4gIHVsLmFwcGVuZENoaWxkKGxpb2RsYXcpO1xuICB1bC5hcHBlbmRDaGlsZChsaXdlbmRhKTtcbiAgdWwuYXBwZW5kQ2hpbGQobGl3aGl0ZWJlYXJkKTtcbiAgdWwuYXBwZW5kQ2hpbGQobGl3b29mKTtcbiAgY29uc3QgY2xpY2tMb2NhdGlvbiA9IFtldmVudC5vZmZzZXRYLCBldmVudC5vZmZzZXRZXTtcbiAgY29uc3QgY2hhcmFjdGVycyA9IFtsaXdhbGRvLCBsaW9kbGF3LCBsaXdlbmRhLCBsaXdoaXRlYmVhcmQsIGxpd29vZl07XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcmFjdGVycy5sZW5ndGg7IGkrKykge1xuICAgIGNoYXJhY3RlcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChhbm90aGVyZXZlbnQpID0+IHtcbiAgICAgIC8vIGNoZWNrcyBpZiB0aGUgdXNlciBzZWxlY3RlZCB0aGUgY29ycmVjdCBjaGFyYWN0ZXIgZnJvbSB0aGUgbGlzdFxuICAgICAgY2hlY2tJZlNlbGVjdGVkQ2hhcmFjdGVySXNDb3JyZWN0KGNsaWNrTG9jYXRpb24sIGFub3RoZXJldmVudC50YXJnZXQpO1xuICAgICAgZGl2LnJlbW92ZSgpO1xuICAgIH0pO1xuICB9XG4gIGNsb3NlZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZGl2LnJlbW92ZSgpO1xuICB9KTtcblxuICBiYWNrZ3JvdW5kZGl2LmFwcGVuZENoaWxkKGRpdik7XG4gIGRpdi5hcHBlbmRDaGlsZChjbG9zZWRpdik7XG4gIGRpdi5hcHBlbmRDaGlsZCh1bCk7XG59O1xuXG4vLyBkcmF3cyBhIGJsYWNrIGNpcmNsZSBhcm91bmQgdGhlIGNsaWNrZWQgc3BvdCBpZiBhIGNoYXJhY3RlciB3YXMgZm91bmRcbmNvbnN0IGRyYXdDaXJjbGVBcm91bmRDaGFyYWN0ZXIgPSBmdW5jdGlvbiAoY29vcmR4LCBjb29yZHksIGNoYXJhY3Rlcikge1xuICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRpbWFnZVwiKTtcbiAgY29uc3QgYmFja2dyb3VuZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kXCIpO1xuICBjb25zdCBpbWd3aWR0aCA9IE51bWJlcihpbWcuY2xpZW50V2lkdGgpO1xuICBjb25zdCBiYWNrZ3JvdW5kZGl2d2lkdGggPSBOdW1iZXIoYmFja2dyb3VuZGl2LmNsaWVudFdpZHRoKTtcbiAgbGV0IGxlZnRtYXJnaW4gPSAwO1xuICBpZiAoYmFja2dyb3VuZGRpdndpZHRoID4gaW1nd2lkdGgpIHtcbiAgICBsZWZ0bWFyZ2luID0gKGJhY2tncm91bmRkaXZ3aWR0aCAtIGltZ3dpZHRoKSAvIDI7XG4gIH1cbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICBkaXYuc3R5bGUud2lkdGggPSBcIjQwcHhcIjtcbiAgZGl2LnN0eWxlLmhlaWdodCA9IFwiNDBweFwiO1xuICBkaXYuc3R5bGUuYm9yZGVyID0gXCIzcHggc29saWQgYmxhY2tcIjtcbiAgZGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiMjVweFwiO1xuICBkaXYuc3R5bGUudG9wID0gY29vcmR5IC0gMjAgKyBcInB4XCI7XG4gIGRpdi5zdHlsZS5sZWZ0ID0gbGVmdG1hcmdpbiArIGNvb3JkeCAtIDIwICsgXCJweFwiO1xuICBkaXYuc3R5bGUuekluZGV4ID0gXCIxXCI7XG4gIGRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBjaGFyYWN0ZXIgKyBcIkZvdW5kXCIpO1xuICBkaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjaGFyYWN0ZXJmb3VuZGNpcmNsZVwiKTtcbiAgYmFja2dyb3VuZGl2LmFwcGVuZENoaWxkKGRpdik7XG59O1xuXG4vLyBzdHlsZXMgdGhlIGNoYXJhY3RlcnMgaW1hZ2VzIGRpZmZlcmVudGx5IHdoZW4gYSBjaGFyYWN0ZXIgaXMgZm91bmRcbmNvbnN0IHVwZGF0ZVN0YXR1c1NpZGVCYXIgPSBmdW5jdGlvbiAoZGF0YXNldGNoYXJhY3Rlcikge1xuICBjb25zdCBhbGxDaGFyYWN0ZXJzID0gW1xuICAgIHsgc2V0bmFtZTogXCJ3YWxkb0xvY2F0aW9uXCIsIGFsaWFzb25kaXY6IFwid2FsZG90aHVtYm5haWxcIiB9LFxuICAgIHsgc2V0bmFtZTogXCJvZGxhd0xvY2F0aW9uXCIsIGFsaWFzb25kaXY6IFwib2RsYXd0aHVtYm5haWxcIiB9LFxuICAgIHsgc2V0bmFtZTogXCJ3ZW5kYUxvY2F0aW9uXCIsIGFsaWFzb25kaXY6IFwid2VuZGF0aHVtYm5haWxcIiB9LFxuICAgIHsgc2V0bmFtZTogXCJ3aXphcmRMb2NhdGlvblwiLCBhbGlhc29uZGl2OiBcIndpemFyZHRodW1ibmFpbFwiIH0sXG4gICAgeyBzZXRuYW1lOiBcIndvb2ZMb2NhdGlvblwiLCBhbGlhc29uZGl2OiBcIndvb2Z0aHVtYm5haWxcIiB9LFxuICBdO1xuICBjb25zdCBmaW5kY2hhcmFjdGVybmFtZSA9IGFsbENoYXJhY3RlcnMuZmluZChcbiAgICAoZWxlbWVudCkgPT4gZWxlbWVudC5zZXRuYW1lID09PSBkYXRhc2V0Y2hhcmFjdGVyXG4gICk7XG4gIGNvbnN0IGNoYXJhY3RlcmRpdm9uZG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgZmluZGNoYXJhY3Rlcm5hbWUuYWxpYXNvbmRpdlxuICApO1xuICBjaGFyYWN0ZXJkaXZvbmRvbS5jbGFzc0xpc3QuYWRkKFwiZm91bmRcIik7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNoZWNrXCIpO1xuICBjb25zdCBwYXJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gIHBhcmEuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVwibGFzIGxhLWNoZWNrXCI+PC9pPic7XG4gIGRpdi5hcHBlbmRDaGlsZChwYXJhKTtcbiAgY2hhcmFjdGVyZGl2b25kb20uYXBwZW5kQ2hpbGQoZGl2KTtcbn07XG5cbi8vIGNyZWF0ZXMgYW4gb3ZlcmxheSB0byBub3RpZnkgdGhlIHVzZXIgaWYgYSBjaGFyYWN0ZXIgd2FzIGZvdW5kIG9yIG5vdFxuY29uc3QgY3JlYXRlUHJldHR5QWxlcnQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyZm91bmQsIGV2ZW50dGFyZ2V0KSB7XG4gIGNvbnN0IG92ZXJsYXlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCBnYW1lZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lXCIpO1xuICBvdmVybGF5ZGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZm91bmRvdmVybGF5XCIpO1xuICBjb25zdCBidXR0b25kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBidXR0b25kaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjbG9zZW92ZXJsYXlcIik7XG4gIGNvbnN0IGFubm91Y2VtZW50ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgb3ZlcmxheWRpdi5hcHBlbmRDaGlsZChidXR0b25kaXYpO1xuICBvdmVybGF5ZGl2LmFwcGVuZENoaWxkKGFubm91Y2VtZW50ZGl2KTtcbiAgY29uc3QgY2xvc2VidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBjbG9zZWJ1dHRvbi5pbm5lckhUTUwgPSBcInhcIjtcbiAgYnV0dG9uZGl2LmFwcGVuZENoaWxkKGNsb3NlYnV0dG9uKTtcbiAgY2xvc2VidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvdmVybGF5ZGl2LnJlbW92ZSgpO1xuICB9KTtcbiAgY29uc3QgcGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBpZiAoY2hhcmFjdGVyZm91bmQpIHtcbiAgICBjb25zdCBhbGxDaGFyYWN0ZXJzID0gW1xuICAgICAgeyBzZXRuYW1lOiBcIndhbGRvTG9jYXRpb25cIiwgbmFtZTogXCJXYWxkb1wiIH0sXG4gICAgICB7IHNldG5hbWU6IFwib2RsYXdMb2NhdGlvblwiLCBuYW1lOiBcIk9kbGF3XCIgfSxcbiAgICAgIHsgc2V0bmFtZTogXCJ3ZW5kYUxvY2F0aW9uXCIsIG5hbWU6IFwiV2VuZGFcIiB9LFxuICAgICAgeyBzZXRuYW1lOiBcIndpemFyZExvY2F0aW9uXCIsIG5hbWU6IFwiV2l6YXJkIFdoaXRlYmVhcmRcIiB9LFxuICAgICAgeyBzZXRuYW1lOiBcIndvb2ZMb2NhdGlvblwiLCBuYW1lOiBcIldvb2ZcIiB9LFxuICAgIF07XG4gICAgY29uc3QgZm91bmRDaGFyYWN0ZXIgPSBldmVudHRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcjtcbiAgICBjb25zdCBjdXJyZW50Y2hhcmFjdGVyID0gYWxsQ2hhcmFjdGVycy5maW5kKFxuICAgICAgKGVsZW1lbnQpID0+IGVsZW1lbnQuc2V0bmFtZSA9PT0gZm91bmRDaGFyYWN0ZXJcbiAgICApO1xuXG4gICAgcGFyYS50ZXh0Q29udGVudCA9IGBZb3UgZm91bmQgJHtjdXJyZW50Y2hhcmFjdGVyLm5hbWV9IWA7XG4gIH0gZWxzZSB7XG4gICAgcGFyYS50ZXh0Q29udGVudCA9IFwiVGhlIHNlbGVjdGVkIGNoYXJhY3RlciBpc24ndCBhdCB0aGF0IGxvY2F0aW9uLlwiO1xuICB9XG5cbiAgYW5ub3VjZW1lbnRkaXYuYXBwZW5kQ2hpbGQocGFyYSk7XG4gIGdhbWVkaXYuYXBwZW5kQ2hpbGQob3ZlcmxheWRpdik7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIG92ZXJsYXlkaXYucmVtb3ZlKCk7XG4gIH0sIDI1MDApO1xufTtcblxuLy8gcHJvbXB0cyB0aGUgdXNlciB0byBwcm92aWRlIGEgbmFtZSBpZiB0aGUgdXNlciBoYXMgYSB3aW5uaW5nIHNjb3JlOyB0aGUgdXNlcm5hbWUgaXMgcmVzdHJpY3RlZCB0byAxMiBjaGFyYWN0ZXJzXG5jb25zdCBwcm9tcHRVc2VyRm9yTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHVzZXJuYW1lID0gd2luZG93LnByb21wdChcbiAgICBcIkNvbmdyYXR1bGF0aW9ucywgeW91IG1hZGUgaXQgdG8gdGhlIHNjb3JlYm9hcmQhIFdoYXQgc2hvdWxkIHdlIGNhbGwgeW91PyAobWF4IDEyIGNoYXJhY3RlcnMpXCJcbiAgKTtcbiAgaWYgKHVzZXJuYW1lLmxlbmd0aCA+IDEyKSB7XG4gICAgdXNlcm5hbWUgPSB1c2VybmFtZS5zdWJzdHJpbmcoMCwgMTIpO1xuICB9XG4gIHJldHVybiB1c2VybmFtZTtcbn07XG5cbi8vIGNyZWF0ZXMgYSB0YWJsZSB3aXRoIHRoZSBjdXJyZW50IGhpZ2ggc2NvcmVzXG5jb25zdCBkaXNwbGF5U2NvcmVib2FyZCA9IGZ1bmN0aW9uIChcbiAgcGxheWVySGFzSGlnaFNjb3JlLFxuICBzY29yZWJvYXJkYXJyYXksXG4gIGN1cnJlbnR1c2Vyc2NvcmVcbikge1xuICBsZXQgbWVzc2FnZSA9IFwiXCI7XG4gIGlmIChjdXJyZW50dXNlcnNjb3JlID09PSBudWxsKSB7XG4gICAgbWVzc2FnZSA9IFwiXCI7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHBsYXllckhhc0hpZ2hTY29yZSkge1xuICAgICAgbWVzc2FnZSA9IFwiQ29uZ3JhdHVsYXRpb25zISBZb3UgbWFkZSBpdCB0byB0aGUgSGlnaCBTY29yZSBib2FyZCFcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9IGBZb3Ugd2VyZSB0b28gc2xvdy4gSXQgdG9vayB5b3UgJHtjdXJyZW50dXNlcnNjb3JlfSBzZWNvbmRzIHRvIGZpbmQgZXZlcnlvbmUuYDtcbiAgICB9XG4gIH1cbiAgY29uc3Qgb3ZlcmxheWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnN0IGdhbWVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVcIik7XG4gIG92ZXJsYXlkaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzY29yZWJvYXJkZGl2XCIpO1xuICBjb25zdCBidXR0b25kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBidXR0b25kaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjbG9zZXNjb3JlYm9hcmRkaXZcIik7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNsb3Nlc2NvcmVib2FyZGJ1dHRvblwiKTtcbiAgYnV0dG9uLmlubmVySFRNTCA9IFwieFwiO1xuICBidXR0b25kaXYuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgY29uc3QgYW5ub3VjZW1lbnRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCBwbGF5ZXJTY29yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBwbGF5ZXJTY29yZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYXllcm1lc3NhZ2VcIik7XG4gIHBsYXllclNjb3JlLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gIHRpdGxlLnRleHRDb250ZW50ID0gXCJCZXN0IEZpdmUgUGxheWVyc1wiO1xuICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtcbiAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIik7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY29yZWJvYXJkYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBuZXdyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgY29uc3QgcGxhY2VtZW50ID0gaSArIDEgKyBcIi5cIjtcbiAgICBjb25zdCB0ZFBsYWNlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICBjb25zdCB0ZFBsYWNlbWVudFRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwbGFjZW1lbnQpO1xuICAgIHRkUGxhY2VtZW50LmFwcGVuZENoaWxkKHRkUGxhY2VtZW50VGV4dCk7XG4gICAgY29uc3QgdGROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuXG4gICAgbGV0IHBsYXllcm5hbWU7XG4gICAgbGV0IHBsYXllcnNjb3JlO1xuICAgIGlmIChzY29yZWJvYXJkYXJyYXlbaV0ubmFtZSA9PT0gXCJcIikge1xuICAgICAgcGxheWVybmFtZSA9IFwiXCI7XG4gICAgICBwbGF5ZXJzY29yZSA9IFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYXllcm5hbWUgPSBzY29yZWJvYXJkYXJyYXlbaV0ubmFtZTtcbiAgICAgIHBsYXllcnNjb3JlID0gc2NvcmVib2FyZGFycmF5W2ldLnRpbWU7XG4gICAgfVxuICAgIGNvbnN0IHRkTmFtZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwbGF5ZXJuYW1lKTtcbiAgICB0ZE5hbWUuYXBwZW5kQ2hpbGQodGROYW1lVGV4dCk7XG4gICAgY29uc3QgdGRTY29yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICBjb25zdCB0ZFNjb3JlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBsYXllcnNjb3JlKTtcbiAgICB0ZFNjb3JlLmFwcGVuZENoaWxkKHRkU2NvcmVUZXh0KTtcbiAgICBuZXdyb3cuYXBwZW5kQ2hpbGQodGRQbGFjZW1lbnQpO1xuICAgIG5ld3Jvdy5hcHBlbmRDaGlsZCh0ZE5hbWUpO1xuICAgIG5ld3Jvdy5hcHBlbmRDaGlsZCh0ZFNjb3JlKTtcbiAgICB0Ym9keS5hcHBlbmRDaGlsZChuZXdyb3cpO1xuICB9XG4gIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgYW5ub3VjZW1lbnRkaXYuYXBwZW5kQ2hpbGQocGxheWVyU2NvcmUpO1xuICBhbm5vdWNlbWVudGRpdi5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gIGFubm91Y2VtZW50ZGl2LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgb3ZlcmxheWRpdi5hcHBlbmRDaGlsZChidXR0b25kaXYpO1xuICBvdmVybGF5ZGl2LmFwcGVuZENoaWxkKGFubm91Y2VtZW50ZGl2KTtcbiAgZ2FtZWRpdi5hcHBlbmRDaGlsZChvdmVybGF5ZGl2KTtcbn07XG5cbi8vIGlmIHRoZSB1c2VyIHJlZnJlc2hlZCB0aGUgcGFnZSBvdSBjbG9zZWQgdGhlIHRhYiwgcmVzdHlsZXMgcGFnZSB0byBtYXRjaCBjaGFyYWN0ZXJzIGZvdW5kXG5jb25zdCB1cGRhdGVEb21BZnRlclJlZnJlc2ggPSBmdW5jdGlvbiAoZGF0YSkge1xuICBjb25zdCBudW1iZXJvZmZvdW5kY2hhcmFjdGVycyA9IGRhdGEuZm91bmRjaGFyYWN0ZXJzO1xuICBjb25zdCBhbGxjaGFyYWN0ZXJzID0gW1xuICAgIHsgbmFtZTogXCJ3YWxkb0xvY2F0aW9uXCIsIGNoYXJhY3RlcmRhdGE6IGRhdGEud2FsZG9Mb2NhdGlvbiB9LFxuICAgIHsgbmFtZTogXCJvZGxhd0xvY2F0aW9uXCIsIGNoYXJhY3RlcmRhdGE6IGRhdGEub2RsYXdMb2NhdGlvbiB9LFxuICAgIHsgbmFtZTogXCJ3ZW5kYUxvY2F0aW9uXCIsIGNoYXJhY3RlcmRhdGE6IGRhdGEud2VuZGFMb2NhdGlvbiB9LFxuICAgIHsgbmFtZTogXCJ3aXphcmRMb2NhdGlvblwiLCBjaGFyYWN0ZXJkYXRhOiBkYXRhLndpemFyZExvY2F0aW9uIH0sXG4gICAgeyBuYW1lOiBcIndvb2RMb2NhdGlvblwiLCBjaGFyYWN0ZXJkYXRhOiBkYXRhLndvb2ZMb2NhdGlvbiB9LFxuICBdO1xuICBsZXQgZm91bmRjaGFyYWN0ZXJzID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbGNoYXJhY3RlcnNbaV0uY2hhcmFjdGVyZGF0YS5mb3VuZCkge1xuICAgICAgZm91bmRjaGFyYWN0ZXJzKys7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJzTG9jYXRpb24gPSBhbGxjaGFyYWN0ZXJzW2ldLmNoYXJhY3RlcmRhdGEubG9jYXRpb247XG4gICAgICBjb25zdCBjb29yZHggPVxuICAgICAgICBOdW1iZXIoY2hhcmFjdGVyc0xvY2F0aW9uLm1pbndpZHRoKSAtXG4gICAgICAgIDIgK1xuICAgICAgICAoTnVtYmVyKGNoYXJhY3RlcnNMb2NhdGlvbi5tYXh3aWR0aCkgLVxuICAgICAgICAgIE51bWJlcihjaGFyYWN0ZXJzTG9jYXRpb24ubWlud2lkdGgpKSAvXG4gICAgICAgICAgMjtcbiAgICAgIGNvbnN0IGNvb3JkeSA9XG4gICAgICAgIE51bWJlcihjaGFyYWN0ZXJzTG9jYXRpb24ubWluaGVpZ2h0KSAtXG4gICAgICAgIDQgK1xuICAgICAgICAoTnVtYmVyKGNoYXJhY3RlcnNMb2NhdGlvbi5tYXhoZWlnaHQpIC1cbiAgICAgICAgICBOdW1iZXIoY2hhcmFjdGVyc0xvY2F0aW9uLm1pbmhlaWdodCkpIC9cbiAgICAgICAgICAyO1xuICAgICAgZHJhd0NpcmNsZUFyb3VuZENoYXJhY3Rlcihjb29yZHgsIGNvb3JkeSwgYWxsY2hhcmFjdGVyc1tpXS5uYW1lKTtcbiAgICAgIHVwZGF0ZVN0YXR1c1NpZGVCYXIoYWxsY2hhcmFjdGVyc1tpXS5uYW1lKTtcbiAgICAgIGlmIChmb3VuZGNoYXJhY3RlcnMgPT09IG51bWJlcm9mZm91bmRjaGFyYWN0ZXJzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IHtcbiAgZHJhd0NpcmNsZUFyb3VuZENoYXJhY3RlcixcbiAgYWRkSW1hZ2VzVG9TdGFydFBhZ2UsXG4gIGFkZEltYWdlc1RvR2FtZSxcbiAgdXBkYXRlU3RhdHVzU2lkZUJhcixcbiAgY3JlYXRlUHJldHR5QWxlcnQsXG4gIHByb21wdFVzZXJGb3JOYW1lLFxuICBkaXNwbGF5U2NvcmVib2FyZCxcbiAgZGlzcGxheUltYWdlLFxuICB1cGRhdGVEb21BZnRlclJlZnJlc2gsXG59O1xuIiwiY29uc3QgY29uZmlnID0ge1xuICBhcGlLZXk6IFwiQUl6YVN5QUU0M1plVHdzX0g0QVpzT2JoQ0pLMU9abjdrVk52UjBzXCIsXG4gIGF1dGhEb21haW46IFwid2hlcmVzd2FsZG8tOWQwNjYuZmlyZWJhc2VhcHAuY29tXCIsXG4gIHByb2plY3RJZDogXCJ3aGVyZXN3YWxkby05ZDA2NlwiLFxuICBzdG9yYWdlQnVja2V0OiBcIndoZXJlc3dhbGRvLTlkMDY2LmFwcHNwb3QuY29tXCIsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjEzNjczNTUwNzMzN1wiLFxuICBhcHBJZDogXCIxOjEzNjczNTUwNzMzNzp3ZWI6NTU2OGRmZTc2NDg5MTI3Y2RhZDc1OFwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcmViYXNlQ29uZmlnKCkge1xuICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmFwaUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gRmlyZWJhc2UgY29uZmlndXJhdGlvbiBvYmplY3QgcHJvdmlkZWQuXCIgK1xuICAgICAgICBcIlxcblwiICtcbiAgICAgICAgXCJBZGQgeW91ciB3ZWIgYXBwJ3MgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gZmlyZWJhc2UtY29uZmlnLmpzXCJcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjkuNC4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzRWxlY3Ryb24sIGlzSUUsIGlzVVdQLCBpc0Jyb3dzZXJFeHRlbnNpb24gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgUyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBEIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBELlVOQVVUSEVOVElDQVRFRCA9IG5ldyBEKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cbkQuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IEQoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBELkZJUlNUX1BBUlRZID0gbmV3IEQoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuRC5NT0NLX1VTRVIgPSBuZXcgRChcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBDID0gXCI5LjQuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTiA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIHgoKSB7XG4gICAgcmV0dXJuIE4ubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiBrKHQpIHtcbiAgICBOLnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiAkKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTSk7XG4gICAgICAgIE4uZGVidWcoYEZpcmVzdG9yZSAoJHtDfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE8odCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi5lcnJvcihgRmlyZXN0b3JlICgke0N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBGKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi53YXJuKGBGaXJlc3RvcmUgKCR7Q30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBNKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIEwodCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7Q30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IE8oZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBCKHQsIGUpIHtcbiAgICB0IHx8IEwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gVSh0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBxKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSyA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgaiBleHRlbmRzIEVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5jb2RlID0gdCwgdGhpcy5tZXNzYWdlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlc3RvcmVFcnJvcnMuICovXG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmlyZWJhc2VFcnJvclwiLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5hdXRoSGVhZGVycyA9IHt9LCBcbiAgICAgICAgLy8gU2V0IHRoZSBoZWFkZXJzIHVzaW5nIE9iamVjdCBMaXRlcmFsIG5vdGF0aW9uIHRvIGF2b2lkIG1pbmlmaWNhdGlvblxuICAgICAgICB0aGlzLmF1dGhIZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgRyB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBlLCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgSCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnQgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gRC5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIGUodCkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgaSA9IG5ldyBRO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBRLCB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IHModGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpO1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZS5wcm9taXNlLCBhd2FpdCBzKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBvID0gdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgICQoXCJGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIHIoKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKCQoXCJGaXJlYmFzZUNyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoQihcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IFcoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBCKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBEKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIEoge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IEQuRklSU1RfUEFSVFk7XG4gICAgfVxuICAgIGdldCBhdXRoSGVhZGVycygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIFwiWC1Hb29nLUF1dGhVc2VyXCI6IHRoaXMubFxuICAgICAgICB9LCBlID0gdGhpcy5oLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XG4gICAgICAgIC8vIFVzZSBhcnJheSBub3RhdGlvbiB0byBwcmV2ZW50IG1pbmlmaWNhdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiBlICYmICh0LkF1dGhvcml6YXRpb24gPSBlKSwgdGhpcy5tICYmICh0W1wiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCJdID0gdGhpcy5tKSwgXG4gICAgICAgIHQ7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgSih0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBYIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLmcodCksIHRoaXMucCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgZyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucCAmJiB0aGlzLnAodCksIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBaKHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIFguVCA9IC0xO1xuXG5jbGFzcyB0dCB7XG4gICAgc3RhdGljIEkoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gWig0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBldCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gbnQodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGl0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGl0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBpdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IGV0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogZXQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgcnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQobmV3IGl0KDAsIDApKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIG90KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKys7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGN0KHQsIGUpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUobiwgdFtuXSk7XG59XG5cbmZ1bmN0aW9uIGF0KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBlKSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyB1dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB2b2lkIDAgPT09IGUgPyBlID0gMCA6IGUgPiB0Lmxlbmd0aCAmJiBMKCksIHZvaWQgMCA9PT0gbiA/IG4gPSB0Lmxlbmd0aCAtIGUgOiBuID4gdC5sZW5ndGggLSBlICYmIEwoKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSB0LCB0aGlzLm9mZnNldCA9IGUsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHV0LmNvbXBhcmF0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGNoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdXQgPyB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSkgOiBlLnB1c2godCksIHRoaXMuY29uc3RydWN0KGUpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QodCkge1xuICAgICAgICByZXR1cm4gdCA9IHZvaWQgMCA9PT0gdCA/IDEgOiB0LCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHQsIHRoaXMubGVuZ3RoIC0gdCk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyB0XTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKHQpIHtcbiAgICAgICAgaWYgKHQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZih0KSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHQubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBmb3IgKGxldCBlID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IGUgPCBuOyBlKyspIHQodGhpcy5zZWdtZW50c1tlXSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbih0Lmxlbmd0aCwgZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG47IHMrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KHMpLCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoIDwgZS5sZW5ndGggPyAtMSA6IHQubGVuZ3RoID4gZS5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGh0IGV4dGVuZHMgdXQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodCwgZSwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4udCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigodCA9PiB0Lmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBodChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBsdCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgZnQgZXh0ZW5kcyB1dCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGx0LnRlc3QodCk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgodCA9PiAodCA9IHQucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIGZ0LmlzVmFsaWRJZGVudGlmaWVyKHQpIHx8ICh0ID0gXCJgXCIgKyB0ICsgXCJgXCIpLCB0KSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZ0KFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICBlLnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKDtzIDwgdC5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRbc107XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocyArIDEgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdFtzICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSBlICYmIFwiLlwiICE9PSBlICYmIFwiYFwiICE9PSBlKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgbiArPSBlLCBzICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IGUgPyAociA9ICFyLCBzKyspIDogXCIuXCIgIT09IGUgfHwgciA/IChuICs9IGUsIHMrKykgOiAoaSgpLCBzKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpKCksIHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIHQpO1xuICAgICAgICByZXR1cm4gbmV3IGZ0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZ0KFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIGR0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gdCwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICB0LnNvcnQoZnQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG50KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gd3QoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGF0b2IodCk7XG4gICAgICAgIHJldHVybiBuZXcgX3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IF90KGUpO1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB0aGlzLmJpbmFyeVN0cmluZywgYnRvYSh0KTtcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi9cbiAgICAgICAgdmFyIHQ7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGVbbl0gPSB0LmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGV0KHRoaXMuYmluYXJ5U3RyaW5nLCB0LmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IHQuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxuX3QuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgX3QoXCJcIik7XG5cbmNvbnN0IG10ID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIGd0KHQpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoQighIXQpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgY29uc3QgbiA9IG10LmV4ZWModCk7XG4gICAgICAgIGlmIChCKCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgdCA9IG5bMV07XG4gICAgICAgICAgICB0ID0gKHQgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIGUgPSBOdW1iZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Iocy5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogeXQodC5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IHl0KHQubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiB5dCh0KSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgOiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gTnVtYmVyKHQpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIHB0KHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IF90LmZyb21CYXNlNjRTdHJpbmcodCkgOiBfdC5mcm9tVWludDhBcnJheSh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBUdCh0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09IChlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBFdCh0KSB7XG4gICAgY29uc3QgZSA9IHQubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gVHQoZSkgPyBFdChlKSA6IGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIEl0KHQpIHtcbiAgICBjb25zdCBlID0gZ3QodC5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZW50aW5lbCB2YWx1ZSB0aGF0IHNvcnRzIGJlZm9yZSBhbnkgTXV0YXRpb24gQmF0Y2ggSUQuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gQXQodCkge1xuICAgIHJldHVybiBudWxsID09IHQ7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIFJ0KHQpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gdCAmJiAxIC8gdCA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gYnQodCkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIE51bWJlci5pc0ludGVnZXIodCkgJiYgIVJ0KHQpICYmIHQgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgdCA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChodC5mcm9tU3RyaW5nKHQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChodC5mcm9tU3RyaW5nKHQpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IHQ7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSBodC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gaHQuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQdChuZXcgaHQodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqLyBmdW5jdGlvbiB2dCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gMSAvKiBCb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIE51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyA1IC8qIFN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIEFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IFR0KHQpID8gNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6IDEwIC8qIE9iamVjdFZhbHVlICovIDogTCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIFZ0KHQsIGUpIHtcbiAgICBjb25zdCBuID0gdnQodCk7XG4gICAgaWYgKG4gIT09IHZ0KGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEl0KHQpLmlzRXF1YWwoSXQoZSkpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gZ3QodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBndChlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHQodC5ieXRlc1ZhbHVlKS5pc0VxdWFsKHB0KGUuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHl0KHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IHl0KGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgeXQodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IHl0KGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIGUpIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSkgPT09IHl0KGUuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB5dCh0LmRvdWJsZVZhbHVlKSwgcyA9IHl0KGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBzID8gUnQobikgPT09IFJ0KHMpIDogaXNOYU4obikgJiYgaXNOYU4ocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG50KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIFZ0KTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChvdChuKSAhPT0gb3QocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFWdChuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU3QodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBWdCh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiBEdCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHZ0KHQpLCBzID0gdnQoZSk7XG4gICAgaWYgKG4gIT09IHMpIHJldHVybiBldChuLCBzKTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gMDtcblxuICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LmJvb2xlYW5WYWx1ZSwgZS5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHl0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpLCBzID0geXQoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHMgPyAtMSA6IG4gPiBzID8gMSA6IG4gPT09IHMgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihzKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBDdCh0LnRpbWVzdGFtcFZhbHVlLCBlLnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEN0KEl0KHQpLCBJdChlKSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LnN0cmluZ1ZhbHVlLCBlLnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcHQodCksIHMgPSBwdChlKTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhzKTtcbiAgICAgICAgfSh0LmJ5dGVzVmFsdWUsIGUuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdChcIi9cIiksIHMgPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5yZWZlcmVuY2VWYWx1ZSwgZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBldCh5dCh0LmxhdGl0dWRlKSwgeXQoZS5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIGV0KHl0KHQubG9uZ2l0dWRlKSwgeXQoZS5sb25naXR1ZGUpKTtcbiAgICAgICAgfSh0Lmdlb1BvaW50VmFsdWUsIGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXSwgcyA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBEdChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LmFycmF5VmFsdWUsIGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMobiksIGkgPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHMuc29ydCgpLCByLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGggJiYgdCA8IHIubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoc1t0XSwgclt0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBEdChuW3NbdF1dLCBpW3JbdF1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZXQocy5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAodC5tYXBWYWx1ZSwgZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEN0KHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQubGVuZ3RoID09PSBlLmxlbmd0aCkgcmV0dXJuIGV0KHQsIGUpO1xuICAgIGNvbnN0IG4gPSBndCh0KSwgcyA9IGd0KGUpLCBpID0gZXQobi5zZWNvbmRzLCBzLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IGV0KG4ubmFub3MsIHMubmFub3MpO1xufVxuXG5mdW5jdGlvbiBOdCh0KSB7XG4gICAgcmV0dXJuIHh0KHQpO1xufVxuXG5mdW5jdGlvbiB4dCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gZ3QodCk7XG4gICAgICAgIHJldHVybiBgdGltZSgke2Uuc2Vjb25kc30sJHtlLm5hbm9zfSlgO1xuICAgIH0odC50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHQuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gcHQodC5ieXRlc1ZhbHVlKS50b0Jhc2U2NCgpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyAobiA9IHQucmVmZXJlbmNlVmFsdWUsIFxuICAgIFB0LmZyb21OYW1lKG4pLnRvU3RyaW5nKCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IGBnZW8oJHsoZSA9IHQuZ2VvUG9pbnRWYWx1ZSkubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWAgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0LnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IGUgKz0gXCIsXCIsIGUgKz0geHQocyk7XG4gICAgICAgIHJldHVybiBlICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKHQuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0LmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCBzID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBzID8gcyA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke3h0KHQuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0odC5tYXBWYWx1ZSkgOiBMKCk7XG4gICAgdmFyIGUsIG47XG59XG5cbmZ1bmN0aW9uIGt0KHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7dC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3QuZGF0YWJhc2V9L2RvY3VtZW50cy8ke2UucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uICR0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIE90KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiYXJyYXlWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gRnQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJudWxsVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBNdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJtYXBWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiBCdCh0KSB7XG4gICAgaWYgKHQuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjdCh0Lm1hcFZhbHVlLmZpZWxkcywgKCh0LCBuKSA9PiBlLm1hcFZhbHVlLmZpZWxkc1t0XSA9IEJ0KG4pKSksIGU7XG4gICAgfVxuICAgIGlmICh0LmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSBlLmFycmF5VmFsdWUudmFsdWVzW25dID0gQnQodC5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIFV0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIUx0KGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSBCdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IGZ0LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0gQnQodCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBMdChlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBWdCh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBMdChzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGN0KGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVdChCdCh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gcXQodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gY3QodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IGZ0KFsgdCBdKTtcbiAgICAgICAgaWYgKEx0KG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcXQobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgZHQoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBLdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAwIC8qIElOVkFMSUQgKi8gLCBydC5taW4oKSwgVXQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3Qgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBhdCB0aGVcbiAgICAgKiBnaXZlbiB2ZXJzaW9uLlxuICAgICAqLyAgICBzdGF0aWMgbmV3Rm91bmREb2N1bWVudCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgS3QodCwgMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIGUsIG4sIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAyIC8qIE5PX0RPQ1VNRU5UICovICwgZSwgVXQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLdCh0LCAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCBlLCBVdC5lbXB0eSgpLCAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBOT19ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IFV0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gVXQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBOT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgS3QgJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgS3QodGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBqdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5BID0gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBUYXJnZXQgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICpcbiAqIE5PVEU6IHlvdSBzaG91bGQgYWx3YXlzIGNvbnN0cnVjdCBgVGFyZ2V0YCBmcm9tIGBRdWVyeS50b1RhcmdldGAgaW5zdGVhZCBvZlxuICogdXNpbmcgdGhpcyBmYWN0b3J5IG1ldGhvZCwgYmVjYXVzZSBgUXVlcnlgIHByb3ZpZGVzIGFuIGltcGxpY2l0IGBvcmRlckJ5YFxuICogcHJvcGVydHkuXG4gKi8gZnVuY3Rpb24gUXQodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBqdCh0LCBlLCBuLCBzLCBpLCByLCBvKTtcbn1cblxuZnVuY3Rpb24gV3QodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIGlmIChudWxsID09PSBlLkEpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiBZdCh0KSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBBdChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGNlKGUuc3RhcnRBdCkpLCBlLmVuZEF0ICYmICh0ICs9IFwifHViOlwiLCB0ICs9IGNlKGUuZW5kQXQpKSwgZS5BID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuQTtcbn1cblxuZnVuY3Rpb24gR3QodCkge1xuICAgIGxldCBlID0gdC5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4ge1xuICAgICAgICByZXR1cm4gYCR7KGUgPSB0KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke050KGUudmFsdWUpfWA7XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqL1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gICAgfSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgIEF0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICB9KHQpKSkuam9pbihcIiwgXCIpfV1gKSwgdC5zdGFydEF0ICYmIChlICs9IFwiLCBzdGFydEF0OiBcIiArIGNlKHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChlICs9IFwiLCBlbmRBdDogXCIgKyBjZSh0LmVuZEF0KSksIFxuICAgIGBUYXJnZXQoJHtlfSlgO1xufVxuXG5mdW5jdGlvbiB6dCh0LCBlKSB7XG4gICAgaWYgKHQubGltaXQgIT09IGUubGltaXQpIHJldHVybiAhMTtcbiAgICBpZiAodC5vcmRlckJ5Lmxlbmd0aCAhPT0gZS5vcmRlckJ5Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5vcmRlckJ5Lmxlbmd0aDsgbisrKSBpZiAoIXVlKHQub3JkZXJCeVtuXSwgZS5vcmRlckJ5W25dKSkgcmV0dXJuICExO1xuICAgIGlmICh0LmZpbHRlcnMubGVuZ3RoICE9PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LmZpbHRlcnMubGVuZ3RoOyBpKyspIGlmIChuID0gdC5maWx0ZXJzW2ldLCBzID0gZS5maWx0ZXJzW2ldLCBcbiAgICBuLm9wICE9PSBzLm9wIHx8ICFuLmZpZWxkLmlzRXF1YWwocy5maWVsZCkgfHwgIVZ0KG4udmFsdWUsIHMudmFsdWUpKSByZXR1cm4gITE7XG4gICAgdmFyIG4sIHM7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAoISF0LnBhdGguaXNFcXVhbChlLnBhdGgpICYmICghIWxlKHQuc3RhcnRBdCwgZS5zdGFydEF0KSAmJiBsZSh0LmVuZEF0LCBlLmVuZEF0KSkpO1xufVxuXG5mdW5jdGlvbiBIdCh0KSB7XG4gICAgcmV0dXJuIFB0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xufVxuXG5jbGFzcyBKdCBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmllbGQgPSB0LCB0aGlzLm9wID0gZSwgdGhpcy52YWx1ZSA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0LmlzS2V5RmllbGQoKSA/IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IHRoaXMuUih0LCBlLCBuKSA6IG5ldyBYdCh0LCBlLCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gZSA/IG5ldyBuZSh0LCBuKSA6IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBzZSh0LCBuKSA6IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gbmV3IGllKHQsIG4pIDogXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUgPyBuZXcgcmUodCwgbikgOiBuZXcgSnQodCwgZSwgbik7XG4gICAgfVxuICAgIHN0YXRpYyBSKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBadCh0LCBuKSA6IG5ldyB0ZSh0LCBuKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIC8vIFR5cGVzIGRvIG5vdCBoYXZlIHRvIG1hdGNoIGluIE5PVF9FUVVBTCBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0aGlzLm9wID8gbnVsbCAhPT0gZSAmJiB0aGlzLlAoRHQoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiB2dCh0aGlzLnZhbHVlKSA9PT0gdnQoZSkgJiYgdGhpcy5QKER0KGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBQKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdDtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gdDtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdigpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogTEVTU19USEFOICovICwgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBZdCh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQub3AudG9TdHJpbmcoKSArIE50KHQudmFsdWUpO1xufVxuXG5jbGFzcyBYdCBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IFB0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFB0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUChlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBadCBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBlZShcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgdGUgZXh0ZW5kcyBKdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBlZShcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlZSh0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IFB0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBuZSBleHRlbmRzIEp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIE90KGUpICYmIFN0KGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3Mgc2UgZXh0ZW5kcyBKdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIFN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIGllIGV4dGVuZHMgSnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChTdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIVN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIHJlIGV4dGVuZHMgSnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFPdChlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IFN0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovIGNsYXNzIG9lIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmJlZm9yZSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjZSh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgcmV0dXJuIGAke3QuYmVmb3JlID8gXCJiXCIgOiBcImFcIn06JHt0LnBvc2l0aW9uLm1hcCgodCA9PiBOdCh0KSkpLmpvaW4oXCIsXCIpfWA7XG59XG5cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgYWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIEFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy5kaXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdWUodCwgZSkge1xuICAgIHJldHVybiB0LmRpciA9PT0gZS5kaXIgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBoZSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IFB0LmNvbXBhcmF0b3IoUHQuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0gRHQobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gci5kaXIgJiYgKHMgKj0gLTEpLCAwICE9PSBzKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHQuYmVmb3JlID8gcyA8PSAwIDogcyA8IDA7XG59XG5cbmZ1bmN0aW9uIGxlKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5iZWZvcmUgIT09IGUuYmVmb3JlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIVZ0KHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gY2xhc3MgZmUge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogRmlyc3QgKi8gLCBvID0gbnVsbCwgYyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSByLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gYywgdGhpcy5WID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5TID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24gZGUodCwgZSwgbiwgcywgaSwgciwgbywgYykge1xuICAgIHJldHVybiBuZXcgZmUodCwgZSwgbiwgcywgaSwgciwgbywgYyk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiB3ZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBmZSh0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqLyBmdW5jdGlvbiBfZSh0KSB7XG4gICAgcmV0dXJuICFBdCh0LmxpbWl0KSAmJiBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIG1lKHQpIHtcbiAgICByZXR1cm4gIUF0KHQubGltaXQpICYmIFwiTFwiIC8qIExhc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBnZSh0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHllKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZS52KCkpIHJldHVybiBlLmZpZWxkO1xuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxuICogcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBwZSh0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIFRlKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5WKSB7XG4gICAgICAgIGUuViA9IFtdO1xuICAgICAgICBjb25zdCB0ID0geWUoZSksIG4gPSBnZShlKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCA9PT0gbikgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcbiAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxuICAgICAgICB0LmlzS2V5RmllbGQoKSB8fCBlLlYucHVzaChuZXcgYWUodCkpLCBlLlYucHVzaChuZXcgYWUoZnQua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pKTsgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZXhwbGljaXRPcmRlckJ5KSBlLlYucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLlYucHVzaChuZXcgYWUoZnQua2V5RmllbGQoKSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlLlY7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBFZSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgaWYgKCFlLlMpIGlmIChcIkZcIiAvKiBGaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIGUuUyA9IFF0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIFRlKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIFRlKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IGFlKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IG9lKGUuZW5kQXQucG9zaXRpb24sICFlLmVuZEF0LmJlZm9yZSkgOiBudWxsLCBzID0gZS5zdGFydEF0ID8gbmV3IG9lKGUuc3RhcnRBdC5wb3NpdGlvbiwgIWUuc3RhcnRBdC5iZWZvcmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5TID0gUXQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGUuUztcbn1cblxuZnVuY3Rpb24gSWUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIEFlKHQsIGUpIHtcbiAgICByZXR1cm4genQoRWUodCksIEVlKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gUmUodCkge1xuICAgIHJldHVybiBgJHtXdChFZSh0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gYmUodCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7R3QoRWUodCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gUGUodCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiBQdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFoZSh0LnN0YXJ0QXQsIFRlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiBoZSh0LmVuZEF0LCBUZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBuZXcgY29tcGFyYXRvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXBhcmUgdHdvIGRvY3VtZW50c1xuICogYmFzZWQgb24gdGhlIFF1ZXJ5J3Mgb3JkZXJpbmcgY29uc3RyYWludC5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHZlKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIFRlKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gVmUoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBWZSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8gUHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8gRHQocywgaSkgOiBMKCk7XG4gICAgfSh0LmZpZWxkLCBlLCBuKTtcbiAgICBzd2l0Y2ggKHQuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiAtMSAqIHM7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBTZSh0LCBlKSB7XG4gICAgaWYgKHQuRCkge1xuICAgICAgICBpZiAoaXNOYU4oZSkpIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJOYU5cIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJJbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAtMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCItSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb3VibGVWYWx1ZTogUnQoZSkgPyBcIi0wXCIgOiBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIEludGVnZXJWYWx1ZSBmb3IgYHZhbHVlYC5cbiAqLyBmdW5jdGlvbiBEZSh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiBcIlwiICsgdFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqIFRoZSByZXR1cm4gdmFsdWUgaXMgYW4gSW50ZWdlclZhbHVlIGlmIGl0IGNhbiBzYWZlbHkgcmVwcmVzZW50IHRoZSB2YWx1ZSxcbiAqIG90aGVyd2lzZSBhIERvdWJsZVZhbHVlIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIENlKHQsIGUpIHtcbiAgICByZXR1cm4gYnQoZSkgPyBEZShlKSA6IFNlKHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzIE5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHN0cnVjdHVyYWwgdHlwZSBvZiBgVHJhbnNmb3JtT3BlcmF0aW9uYCBpcyB1bmlxdWUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU0NTFcbiAgICAgICAgdGhpcy5fID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbG9jYWwgdHJhbnNmb3JtIHJlc3VsdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJldmlvdXNWYWx1ZWAsXG4gKiBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiB4ZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBPZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcInNlcnZlcl90aW1lc3RhbXBcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX19sb2NhbF93cml0ZV90aW1lX186IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHQuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBlICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSBlKSwge1xuICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgfTtcbiAgICB9KG4sIGUpIDogdCBpbnN0YW5jZW9mIEZlID8gTWUodCwgZSkgOiB0IGluc3RhbmNlb2YgTGUgPyBCZSh0LCBlKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cbiAgICAgICAgY29uc3QgbiA9ICRlKHQsIGUpLCBzID0gcWUobikgKyBxZSh0LkMpO1xuICAgICAgICByZXR1cm4gJHQobikgJiYgJHQodC5DKSA/IERlKHMpIDogU2UodC5OLCBzKTtcbiAgICB9KHQsIGUpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24ga2UodCwgZSwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEZlID8gTWUodCwgZSkgOiB0IGluc3RhbmNlb2YgTGUgPyBCZSh0LCBlKSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gJGUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgVWUgPyAkdChuID0gZSkgfHwgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqLyAobikgPyBlIDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbiAgICB2YXIgbjtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBPZSBleHRlbmRzIE5lIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgRmUgZXh0ZW5kcyBOZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1lKHQsIGUpIHtcbiAgICBjb25zdCBuID0gS2UoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4uc29tZSgodCA9PiBWdCh0LCBlKSkpIHx8IG4ucHVzaChlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIExlIGV4dGVuZHMgTmUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCZSh0LCBlKSB7XG4gICAgbGV0IG4gPSBLZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbiA9IG4uZmlsdGVyKCh0ID0+ICFWdCh0LCBlKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgVWUgZXh0ZW5kcyBOZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLk4gPSB0LCB0aGlzLkMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcWUodCkge1xuICAgIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcbn1cblxuZnVuY3Rpb24gS2UodCkge1xuICAgIHJldHVybiBPdCh0KSAmJiB0LmFycmF5VmFsdWUudmFsdWVzID8gdC5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpIDogW107XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi8gY2xhc3MgamUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMudHJhbnNmb3JtID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFFlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBGZSAmJiBlIGluc3RhbmNlb2YgRmUgfHwgdCBpbnN0YW5jZW9mIExlICYmIGUgaW5zdGFuY2VvZiBMZSA/IG50KHQuZWxlbWVudHMsIGUuZWxlbWVudHMsIFZ0KSA6IHQgaW5zdGFuY2VvZiBVZSAmJiBlIGluc3RhbmNlb2YgVWUgPyBWdCh0LkMsIGUuQykgOiB0IGluc3RhbmNlb2YgT2UgJiYgZSBpbnN0YW5jZW9mIE9lO1xuICAgIH0odC50cmFuc2Zvcm0sIGUudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBXZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBHZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB0LCB0aGlzLmV4aXN0cyA9IGU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2U7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR2UodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSB0LmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISF0LnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6ICF0LnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiB6ZSh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSB0LmV4aXN0cyB8fCB0LmV4aXN0cyA9PT0gZS5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIEhlIHt9XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gSmUodCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBlbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IHJuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcykuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBubiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF6ZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHMgPSBybih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoc24odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgZSwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBBIHRpbWVzdGFtcCBpbmRpY2F0aW5nIHRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZVxuICogICAgIGJhdGNoIHRoaXMgbXV0YXRpb24gaXMgYSBwYXJ0IG9mLlxuICovIGZ1bmN0aW9uIFllKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2YgZW4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghemUodC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gVGhlIG11dGF0aW9uIGZhaWxlZCB0byBhcHBseSAoZS5nLiBhIGRvY3VtZW50IElEIGNyZWF0ZWQgd2l0aCBhZGQoKVxuICAgICAgICAvLyBjYXVzZWQgYSBuYW1lIGNvbGxpc2lvbikuXG4gICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IG9uKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudCh0bihlKSwgcykuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAodCwgZSwgbikgOiB0IGluc3RhbmNlb2Ygbm4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghemUodC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSBvbih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKHNuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudCh0bihlKSwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRQYXRoL1ZhbHVlIG1hcCB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBQYXRjaE11dGF0aW9uLlxuICovICh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgemUodC5wcmVjb25kaXRpb24sIGUpICYmIFxuICAgICAgICAvLyBXZSBkb24ndCBjYWxsIGBzZXRIYXNMb2NhbE11dGF0aW9ucygpYCBzaW5jZSB3ZSB3YW50IHRvIGJlIGJhY2t3YXJkc1xuICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIFNESyBiZWhhdmlvci5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KHJ0Lm1pbigpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgdmVyaWZpZXMgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoXG4gKiB0aGUgcHJvdmlkZWQgcHJlY29uZGl0aW9uLlxuICpcbiAqIFRoZSBgdmVyaWZ5YCBvcGVyYXRpb24gaXMgb25seSB1c2VkIGluIFRyYW5zYWN0aW9ucywgYW5kIHRoaXMgY2xhc3Mgc2VydmVzXG4gKiBwcmltYXJpbHkgdG8gZmFjaWxpdGF0ZSBzZXJpYWxpemF0aW9uIGludG8gcHJvdG9zLlxuICovICh0LCBlKTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIG11dGF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvIHBlcnNpc3Qgd2l0aFxuICogdGhpcyBtdXRhdGlvbi4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgbXV0YXRpb24gaXMgYWx3YXlzIGFwcGxpZWRcbiAqIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXMgYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGJhc2UgdmFsdWUgaXMgYSBzcGFyc2Ugb2JqZWN0IHRoYXQgY29uc2lzdHMgb2Ygb25seSB0aGUgZG9jdW1lbnRcbiAqIGZpZWxkcyBmb3Igd2hpY2ggdGhpcyBtdXRhdGlvbiBjb250YWlucyBhIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybWF0aW9uXG4gKiAoZS5nLiBhIG51bWVyaWMgaW5jcmVtZW50KS4gVGhlIHByb3ZpZGVkIHZhbHVlIGd1YXJhbnRlZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZVxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlXG4gKiBtdXRhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3IgaWRlbXBvdGVudCBtdXRhdGlvbnMsIGFzIHRoZXkgY2FuIGJlXG4gKiByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gWGUodCwgZSkge1xuICAgIGxldCBuID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5maWVsZFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZChzLmZpZWxkKSwgaSA9ICRlKHMudHJhbnNmb3JtLCB0IHx8IG51bGwpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG51bGwgPT0gbiAmJiAobiA9IFV0LmVtcHR5KCkpLCBuLnNldChzLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIFplKHQsIGUpIHtcbiAgICByZXR1cm4gdC50eXBlID09PSBlLnR5cGUgJiYgKCEhdC5rZXkuaXNFcXVhbChlLmtleSkgJiYgKCEhdC5wcmVjb25kaXRpb24uaXNFcXVhbChlLnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmIHZvaWQgMCA9PT0gZSB8fCAhKCF0IHx8ICFlKSAmJiBudCh0LCBlLCAoKHQsIGUpID0+IFFlKHQsIGUpKSk7XG4gICAgfSh0LmZpZWxkVHJhbnNmb3JtcywgZS5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIFNldCAqLyA9PT0gdC50eXBlID8gdC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpIDogMSAvKiBQYXRjaCAqLyAhPT0gdC50eXBlIHx8IHQuZGF0YS5pc0VxdWFsKGUuZGF0YSkgJiYgdC5maWVsZE1hc2suaXNFcXVhbChlLmZpZWxkTWFzaykpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZlcnNpb24gZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHVzZSBhcyB0aGUgcmVzdWx0IG9mIGFcbiAqIG11dGF0aW9uLiBNdXRhdGlvbnMgYXJlIGRlZmluZWQgdG8gcmV0dXJuIHRoZSB2ZXJzaW9uIG9mIHRoZSBiYXNlIGRvY3VtZW50XG4gKiBvbmx5IGlmIGl0IGlzIGFuIGV4aXN0aW5nIGRvY3VtZW50LiBEZWxldGVkIGFuZCB1bmtub3duIGRvY3VtZW50cyBoYXZlIGFcbiAqIHBvc3QtbXV0YXRpb24gdmVyc2lvbiBvZiBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gKi8gZnVuY3Rpb24gdG4odCkge1xuICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpID8gdC52ZXJzaW9uIDogcnQubWluKCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBlbiBleHRlbmRzIEhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHMsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIFNldCAqLztcbiAgICB9XG59XG5cbmNsYXNzIG5uIGV4dGVuZHMgSGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSBzLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIFBhdGNoICovO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc24odCkge1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiB0LmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgfVxuICAgIH0pKSwgZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIHJuKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBCKHQubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0W2ldLCBvID0gci50cmFuc2Zvcm0sIGMgPSBlLmRhdGEuZmllbGQoci5maWVsZCk7XG4gICAgICAgIHMuc2V0KHIuZmllbGQsIGtlKG8sIGMsIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogICAgIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIG9uKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gaS50cmFuc2Zvcm0sIHIgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHMuc2V0KGkuZmllbGQsIHhlKHQsIHIsIGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgY24gZXh0ZW5kcyBIZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMiAvKiBEZWxldGUgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgYW4gZXh0ZW5kcyBIZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMyAvKiBWZXJpZnkgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdW4ge1xuICAgIC8vIFRPRE8oYi8zMzA3ODE2Myk6IGp1c3QgdXNlIHNpbXBsZXN0IGZvcm0gb2YgZXhpc3RlbmNlIGZpbHRlciBmb3Igbm93XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgaG4sIGxuO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gZm4odCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcblxuICAgICAgY2FzZSBLLkNBTkNFTExFRDpcbiAgICAgIGNhc2UgSy5VTktOT1dOOlxuICAgICAgY2FzZSBLLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBLLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgSy5JTlRFUk5BTDpcbiAgICAgIGNhc2UgSy5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBLLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIEsuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgSy5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIEsuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIEsuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIEsuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIEsuQUJPUlRFRDpcbiAgICAgIGNhc2UgSy5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIEsuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgSy5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIGRuKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gTyhcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBLLlVOS05PV047XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIGhuLk9LOlxuICAgICAgICByZXR1cm4gSy5PSztcblxuICAgICAgY2FzZSBobi5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBLLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBobi5VTktOT1dOOlxuICAgICAgICByZXR1cm4gSy5VTktOT1dOO1xuXG4gICAgICBjYXNlIGhuLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gSy5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBobi5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBLLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBobi5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIEsuSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgaG4uVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBLLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIGhuLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIGhuLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBLLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgaG4uTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gSy5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgaG4uQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBLLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIGhuLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gSy5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBobi5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gSy5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIGhuLkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBLLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgaG4uT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gSy5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgaG4uVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBobi5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBLLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxuICpcbiAqIEBwYXJhbSBzdGF0dXMgLSBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gKiBcIlVOS05PV05cIiwgZXRjLilcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xuICogICAgIENvZGUuVU5LTk9XTi5cbiAqLyAobG4gPSBobiB8fCAoaG4gPSB7fSkpW2xuLk9LID0gMF0gPSBcIk9LXCIsIGxuW2xuLkNBTkNFTExFRCA9IDFdID0gXCJDQU5DRUxMRURcIiwgXG5sbltsbi5VTktOT1dOID0gMl0gPSBcIlVOS05PV05cIiwgbG5bbG4uSU5WQUxJRF9BUkdVTUVOVCA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCIsIFxubG5bbG4uREVBRExJTkVfRVhDRUVERUQgPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIiwgbG5bbG4uTk9UX0ZPVU5EID0gNV0gPSBcIk5PVF9GT1VORFwiLCBcbmxuW2xuLkFMUkVBRFlfRVhJU1RTID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCIsIGxuW2xuLlBFUk1JU1NJT05fREVOSUVEID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCIsIFxubG5bbG4uVU5BVVRIRU5USUNBVEVEID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIiwgbG5bbG4uUkVTT1VSQ0VfRVhIQVVTVEVEID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiLCBcbmxuW2xuLkZBSUxFRF9QUkVDT05ESVRJT04gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLCBsbltsbi5BQk9SVEVEID0gMTBdID0gXCJBQk9SVEVEXCIsIFxubG5bbG4uT1VUX09GX1JBTkdFID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIiwgbG5bbG4uVU5JTVBMRU1FTlRFRCA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiLCBcbmxuW2xuLklOVEVSTkFMID0gMTNdID0gXCJJTlRFUk5BTFwiLCBsbltsbi5VTkFWQUlMQUJMRSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIiwgbG5bbG4uREFUQV9MT1NTID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyB3biB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLnJvb3QgPSBlIHx8IG1uLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgd24odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KHQsIGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBtbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3bih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUodCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIG1uLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IodCwgZS5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiBlLnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyBlID0gZS5sZWZ0IDogbiA+IDAgJiYgKGUgPSBlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgZSA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wYXJhdG9yKHQsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZSArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgcyA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIGUgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlLCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodC5wdXNoKGAke2V9OiR7bn1gKSwgITEpKSksIGB7JHt0LmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX24odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIF9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gcywgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkgaWYgKGkgPSBlID8gbih0LmtleSwgZSkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHMgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQubGVmdCA6IHQucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LnJpZ2h0IDogdC5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKHQgPSB0LmxlZnQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdC5yaWdodDsgZWxzZSBmb3IgKHQgPSB0LnJpZ2h0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgXG4gICAgICAgIHQgPSB0LmxlZnQ7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IG1uLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSBzID8gcyA6IG1uLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBtbi5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgbW4obnVsbCAhPSB0ID8gdCA6IHRoaXMua2V5LCBudWxsICE9IGUgPyBlIDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gcyA/IHMgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKHQsIHMua2V5KTtcbiAgICAgICAgcmV0dXJuIHMgPSBpIDwgMCA/IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQuaW5zZXJ0KHQsIGUsIG4pLCBudWxsKSA6IDAgPT09IGkgPyBzLmNvcHkobnVsbCwgZSwgbnVsbCwgbnVsbCwgbnVsbCkgOiBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5pbnNlcnQodCwgZSwgbikpLCBcbiAgICAgICAgcy5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gbW4uRU1QVFk7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQubGVmdC5pc1JlZCgpIHx8IHQubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHQgPSB0Lm1vdmVSZWRMZWZ0KCkpLCB0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIHQubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICB0LmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMgPSB0aGlzO1xuICAgICAgICBpZiAoZSh0LCBzLmtleSkgPCAwKSBzLmxlZnQuaXNFbXB0eSgpIHx8IHMubGVmdC5pc1JlZCgpIHx8IHMubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQucmVtb3ZlKHQsIGUpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAocy5sZWZ0LmlzUmVkKCkgJiYgKHMgPSBzLnJvdGF0ZVJpZ2h0KCkpLCBzLnJpZ2h0LmlzRW1wdHkoKSB8fCBzLnJpZ2h0LmlzUmVkKCkgfHwgcy5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSBlKHQsIHMua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChzLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIG1uLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSBzLnJpZ2h0Lm1pbigpLCBzID0gcy5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmUodCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmlzUmVkKCkgJiYgIXQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVMZWZ0KCkpLCB0LmxlZnQuaXNSZWQoKSAmJiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQubGVmdC5pc1JlZCgpICYmIHQucmlnaHQuaXNSZWQoKSAmJiAodCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdC5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQgPSB0LnJvdGF0ZUxlZnQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBtbi5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIG1uLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIHQpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgZSA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIHQsIGUpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgdCkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgTCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKHQgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgTCgpO1xuICAgICAgICByZXR1cm4gdCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbm1uLkVNUFRZID0gbnVsbCwgbW4uUkVEID0gITAsIG1uLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5tbi5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtbih0LCBlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgZ24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5kYXRhID0gbmV3IHduKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih0KTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHMua2V5LCB0WzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICBlKHMua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSBlID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIXQobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpO1xuICAgICAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkuaW5zZXJ0KHQsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgPCB0LnNpemUgJiYgKGUgPSB0LCB0ID0gdGhpcyksIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5hZGQodCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBnbikpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcih0LCBzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCBcIlNvcnRlZFNldChcIiArIHQudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBnbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gZS5kYXRhID0gdCwgZTtcbiAgICB9XG59XG5cbmNsYXNzIHluIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXRlciA9IHQ7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBwbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gVG4oKSB7XG4gICAgcmV0dXJuIHBuO1xufVxuXG5jb25zdCBFbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gSW4oKSB7XG4gICAgcmV0dXJuIEVuO1xufVxuXG5jb25zdCBBbiA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gUm4oKSB7XG4gICAgcmV0dXJuIEFuO1xufVxuXG5jb25zdCBibiA9IG5ldyBnbihQdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gUG4oLi4udCkge1xuICAgIGxldCBlID0gYm47XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3Qgdm4gPSBuZXcgZ24oZXQpO1xuXG5mdW5jdGlvbiBWbigpIHtcbiAgICByZXR1cm4gdm47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgU24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudC4gTGlzdGVucyBmb3IgdGhlc2VcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIERuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSksIG5ldyBTbihydC5taW4oKSwgbiwgVm4oKSwgVG4oKSwgUG4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgRG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG4oX3QuRU1QVFlfQllURV9TVFJJTkcsIGUsIFBuKCksIFBuKCksIFBuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIENuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5rID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLiQgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgTm4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuTyA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyB4biB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IF90LkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHMgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCB0aGlzLnRhcmdldElkcyA9IGUsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcztcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk0gPSBGbigpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5MID0gX3QuRU1QVFlfQllURV9TVFJJTkcsIHRoaXMuQiA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CO1xuICAgIH1cbiAgICAvKiogVGhlIGxhc3QgcmVzdW1lIHRva2VuIHNlbnQgdG8gdXMgZm9yIHRoaXMgdGFyZ2V0LiAqLyAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkw7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgcSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuRjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgd2UgaGF2ZSBtb2RpZmllZCBhbnkgc3RhdGUgdGhhdCBzaG91bGQgdHJpZ2dlciBhIHNuYXBzaG90LiAqLyAgICBnZXQgSygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBqKHQpIHtcbiAgICAgICAgdC5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh0aGlzLlUgPSAhMCwgdGhpcy5MID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgVygpIHtcbiAgICAgICAgbGV0IHQgPSBQbigpLCBlID0gUG4oKSwgbiA9IFBuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLk0uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBEbih0aGlzLkwsIHRoaXMuQiwgdCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICBHKCkge1xuICAgICAgICB0aGlzLlUgPSAhMSwgdGhpcy5NID0gRm4oKTtcbiAgICB9XG4gICAgSCh0LCBlKSB7XG4gICAgICAgIHRoaXMuVSA9ICEwLCB0aGlzLk0gPSB0aGlzLk0uaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBKKHQpIHtcbiAgICAgICAgdGhpcy5VID0gITAsIHRoaXMuTSA9IHRoaXMuTS5yZW1vdmUodCk7XG4gICAgfVxuICAgIFkoKSB7XG4gICAgICAgIHRoaXMuRiArPSAxO1xuICAgIH1cbiAgICBYKCkge1xuICAgICAgICB0aGlzLkYgLT0gMTtcbiAgICB9XG4gICAgWigpIHtcbiAgICAgICAgdGhpcy5VID0gITAsIHRoaXMuQiA9ICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxuICovXG5jbGFzcyAkbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR0ID0gdCwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5ldCA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLm50ID0gVG4oKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5zdCA9IE9uKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXQgPSBuZXcgZ24oZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIHJ0KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuaykgdC4kICYmIHQuJC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMub3QoZSwgdC4kKSA6IHRoaXMuY3QoZSwgdC5rZXksIHQuJCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuY3QoZSwgdC5rZXksIHQuJCk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBhdCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy51dChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuaHQoZSkgJiYgbi5qKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlgoKSwgbi5xIHx8IFxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgICAgIG4uRygpLCBuLmoodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlgoKSwgbi5xIHx8IHRoaXMucmVtb3ZlVGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMyAvKiBDdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmh0KGUpICYmIChuLlooKSwgbi5qKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogUmVzZXQgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMuaHQoZSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0YXJnZXQgYW5kIHN5bnRoZXNpemVzIHJlbW92ZXMgZm9yIGFsbCBleGlzdGluZ1xuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cy4gVGhlIGJhY2tlbmQgd2lsbCByZS1hZGQgYW55IGRvY3VtZW50cyB0aGF0IHN0aWxsXG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggdGhlIHRhcmdldCBiZWZvcmUgaXQgc2VuZHMgdGhlIG5leHQgZ2xvYmFsIHNuYXBzaG90LlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSksIG4uaih0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMuZXQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaHQobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgZnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZCwgbiA9IHQuTy5jb3VudCwgcyA9IHRoaXMuZHQoZSk7XG4gICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoSHQodCkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IFB0KHQucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdChlLCBuLCBLdC5uZXdOb0RvY3VtZW50KG4sIHJ0Lm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgQigxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy53dChlKSAhPT0gbiAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaDogV2UgcmVzZXQgdGhlIG1hcHBpbmcgYW5kIHJhaXNlIGEgbmV3XG4gICAgICAgICAgICAgICAgLy8gc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSwgdGhpcy5pdCA9IHRoaXMuaXQuYWRkKGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIF90KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuZXQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmR0KHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIEh0KGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBQdChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5udC5nZXQoZSkgfHwgdGhpcy5ndChzLCBlKSB8fCB0aGlzLmN0KHMsIGUsIEt0Lm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLksgJiYgKGUuc2V0KHMsIG4uVygpKSwgbi5HKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gUG4oKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5zdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kdCh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTbih0LCBlLCB0aGlzLml0LCB0aGlzLm50LCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnQgPSBUbigpLCB0aGlzLnN0ID0gT24oKSwgdGhpcy5pdCA9IG5ldyBnbihldCksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIG90KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmh0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmd0KHQsIGUua2V5KSA/IDIgLyogTW9kaWZpZWQgKi8gOiAwIC8qIEFkZGVkICovO1xuICAgICAgICB0aGlzLnV0KHQpLkgoZS5rZXksIG4pLCB0aGlzLm50ID0gdGhpcy5udC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZS5rZXksIHRoaXMueXQoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGN0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmh0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnV0KHQpO1xuICAgICAgICB0aGlzLmd0KHQsIGUpID8gcy5IKGUsIDEgLyogUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLkooZSksIHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydChlLCB0aGlzLnl0KGUpLmRlbGV0ZSh0KSksIG4gJiYgKHRoaXMubnQgPSB0aGlzLm50Lmluc2VydChlLCBuKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuZXQuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxuICAgICAqLyAgICB3dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnV0KHQpLlcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBZKHQpIHtcbiAgICAgICAgdGhpcy51dCh0KS5ZKCk7XG4gICAgfVxuICAgIHV0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmV0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcga24sIHRoaXMuZXQuc2V0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgeXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuc3QuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBnbihldCksIHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydCh0LCBlKSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xuICAgICAqIGZyb20gd2F0Y2guXG4gICAgICovICAgIGh0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgIT09IHRoaXMuZHQodCk7XG4gICAgICAgIHJldHVybiBlIHx8ICQoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgdCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXG4gICAgICovICAgIGR0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSAmJiBlLnEgPyBudWxsIDogdGhpcy50dC5UdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBsdCh0KSB7XG4gICAgICAgIHRoaXMuZXQuc2V0KHQsIG5ldyBrbik7XG4gICAgICAgIHRoaXMudHQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3QodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBndCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gT24oKSB7XG4gICAgcmV0dXJuIG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gRm4oKSB7XG4gICAgcmV0dXJuIG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgTW4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgTG4gPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvclxuICogc2VuZGluZyB0byBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXG4gKlxuICogVGhlIHNlcmlhbGl6ZXIgc3VwcG9ydHMgYm90aCBQcm90b2J1Zi5qcyBhbmQgUHJvdG8zIEpTT04gZm9ybWF0cy4gQnlcbiAqIHNldHRpbmcgYHVzZVByb3RvM0pzb25gIHRvIHRydWUsIHRoZSBzZXJpYWxpemVyIHdpbGwgdXNlIHRoZSBQcm90bzMgSlNPTlxuICogZm9ybWF0LlxuICpcbiAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBQcm90bzMgSlNPTiBmb3JtYXQgY2hlY2tcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb3RvY29sLWJ1ZmZlcnMvZG9jcy9wcm90bzMjanNvblxuICpcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBCbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLkQgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gVW4odCwgZSkge1xuICAgIGlmICh0LkQpIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIGUuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyBlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBxbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuRCA/IGUudG9CYXNlNjQoKSA6IGUudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBLbih0LCBlKSB7XG4gICAgcmV0dXJuIFVuKHQsIGUudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIGpuKHQpIHtcbiAgICByZXR1cm4gQighIXQpLCBydC5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIFFuKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KFsgXCJwcm9qZWN0c1wiLCB0LnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZSBdKTtcbiAgICB9KHQpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBXbih0KSB7XG4gICAgY29uc3QgZSA9IGh0LmZyb21TdHJpbmcodCk7XG4gICAgcmV0dXJuIEIoVHMoZSkpLCBlO1xufVxuXG5mdW5jdGlvbiBHbih0LCBlKSB7XG4gICAgcmV0dXJuIFFuKHQuZGF0YWJhc2VJZCwgZS5wYXRoKTtcbn1cblxuZnVuY3Rpb24gem4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBXbihlKTtcbiAgICBpZiAobi5nZXQoMSkgIT09IHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBQdChYbihuKSk7XG59XG5cbmZ1bmN0aW9uIEhuKHQsIGUpIHtcbiAgICByZXR1cm4gUW4odC5kYXRhYmFzZUlkLCBlKTtcbn1cblxuZnVuY3Rpb24gSm4odCkge1xuICAgIGNvbnN0IGUgPSBXbih0KTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoID8gaHQuZW1wdHlQYXRoKCkgOiBYbihlKTtcbn1cblxuZnVuY3Rpb24gWW4odCkge1xuICAgIHJldHVybiBuZXcgaHQoWyBcInByb2plY3RzXCIsIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSBdKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gWG4odCkge1xuICAgIHJldHVybiBCKHQubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSB0LmdldCg0KSksIHQucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gWm4odCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEduKHQsIGUpLFxuICAgICAgICBmaWVsZHM6IG4udmFsdWUubWFwVmFsdWUuZmllbGRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdHModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB6bih0LCBlLm5hbWUpLCBpID0gam4oZS51cGRhdGVUaW1lKSwgciA9IG5ldyBVdCh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgbyA9IEt0Lm5ld0ZvdW5kRG9jdW1lbnQocywgaSwgcik7XG4gICAgcmV0dXJuIG4gJiYgby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSwgbiA/IG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBvO1xufVxuXG5mdW5jdGlvbiBlcyh0LCBlKSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBCKCEhZS5mb3VuZCksIGUuZm91bmQubmFtZSwgZS5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gem4odCwgZS5mb3VuZC5uYW1lKSwgcyA9IGpuKGUuZm91bmQudXBkYXRlVGltZSksIGkgPSBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gS3QubmV3Rm91bmREb2N1bWVudChuLCBzLCBpKTtcbiAgICB9KHQsIGUpIDogXCJtaXNzaW5nXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgQighIWUubWlzc2luZyksIEIoISFlLnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHpuKHQsIGUubWlzc2luZyksIHMgPSBqbihlLnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIEt0Lm5ld05vRG9jdW1lbnQobiwgcyk7XG4gICAgfSh0LCBlKSA6IEwoKTtcbn1cblxuZnVuY3Rpb24gbnModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IHQgPyAwIC8qIE5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBSZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IHQgPyAzIC8qIEN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFJlc2V0ICovIDogTCgpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5EID8gKEIodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBfdC5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKEIodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBfdC5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIGMgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IEsuVU5LTk9XTiA6IGRuKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGooZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovIChvKTtcbiAgICAgICAgbiA9IG5ldyB4bihzLCBpLCByLCBjIHx8IG51bGwpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIHMuZG9jdW1lbnQsIHMuZG9jdW1lbnQubmFtZSwgcy5kb2N1bWVudC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudC5uYW1lKSwgciA9IGpuKHMuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSBuZXcgVXQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHMuZG9jdW1lbnQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCBjID0gS3QubmV3Rm91bmREb2N1bWVudChpLCByLCBvKSwgYSA9IHMudGFyZ2V0SWRzIHx8IFtdLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IENuKGEsIHUsIGMua2V5LCBjKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlYWRUaW1lID8gam4ocy5yZWFkVGltZSkgOiBydC5taW4oKSwgbyA9IEt0Lm5ld05vRG9jdW1lbnQoaSwgciksIGMgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgQ24oW10sIGMsIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gem4odCwgcy5kb2N1bWVudCksIHIgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgQ24oW10sIHIsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gZSkpIHJldHVybiBMKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGUuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyO1xuICAgICAgICAgICAgdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmNvdW50IHx8IDAsIGkgPSBuZXcgdW4ocyksIHIgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBObihyLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gc3ModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlIGluc3RhbmNlb2YgZW4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogWm4odCwgZS5rZXksIGUudmFsdWUpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIGNuKSBuID0ge1xuICAgICAgICBkZWxldGU6IEduKHQsIGUua2V5KVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBubikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBabih0LCBlLmtleSwgZS5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogcHMoZS5maWVsZE1hc2spXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBhbikpIHJldHVybiBMKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IEduKHQsIGUua2V5KVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCAmJiAobi51cGRhdGVUcmFuc2Zvcm1zID0gZS5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudHJhbnNmb3JtO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIE9lKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIEZlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgTGUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBVZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGluY3JlbWVudDogbi5DXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBLbih0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTCgpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gaXModCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gR2UudXBkYXRlVGltZShqbih0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBHZS5leGlzdHModC5leGlzdHMpIDogR2Uubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogR2Uubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIEIoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBPZTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBGZSh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IExlKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyBVZSh0LCBlLmluY3JlbWVudCkgOiBMKCk7XG4gICAgICAgIGNvbnN0IHMgPSBmdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBqZShzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IHpuKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IFV0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGR0KGUubWFwKCh0ID0+IGZ0LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG5uKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgZW4oaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gem4odCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IGNuKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IHpuKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhbihzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuZnVuY3Rpb24gcnModCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChCKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gam4odC51cGRhdGVUaW1lKSA6IGpuKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKHJ0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gam4oZSkpLCBuZXcgV2UobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIG9zKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgSG4odCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY3ModCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBIbih0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gSG4odCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmIChcIj09XCIgLyogRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoTXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoRnQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoTXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKEZ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogd3ModC5vcCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IFwiQU5EXCIsXG4gICAgICAgICAgICAgICAgZmlsdGVyczogZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX3ModC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkcyh0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LkQgfHwgQXQoZSkgPyBlIDoge1xuICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi8gKHQsIGUubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBscyhlLnN0YXJ0QXQpKSwgXG4gICAgZS5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBscyhlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIGFzKHQpIHtcbiAgICBsZXQgZSA9IEpuKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIEIoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IGhzKG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGFlKG1zKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKHQuZGlyZWN0aW9uKSk7XG4gICAgfSh0KSkpKTtcbiAgICBsZXQgYyA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAoYyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBBdChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmcyhuLnN0YXJ0QXQpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKHUgPSBmcyhuLmVuZEF0KSksIGRlKGUsIGksIG8sIHIsIGMsIFwiRlwiIC8qIEZpcnN0ICovICwgYSwgdSk7XG59XG5cbmZ1bmN0aW9uIHVzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSgwLCBlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhzKHQpIHtcbiAgICByZXR1cm4gdCA/IHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IFsgeXModCkgXSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IFsgZ3ModCkgXSA6IHZvaWQgMCAhPT0gdC5jb21wb3NpdGVGaWx0ZXIgPyB0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiBocyh0KSkpLnJlZHVjZSgoKHQsIGUpID0+IHQuY29uY2F0KGUpKSkgOiBMKCkgOiBbXTtcbn1cblxuZnVuY3Rpb24gbHModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJlZm9yZTogdC5iZWZvcmUsXG4gICAgICAgIHZhbHVlczogdC5wb3NpdGlvblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICBjb25zdCBlID0gISF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgIHJldHVybiBuZXcgb2UobiwgZSk7XG59XG5cbi8vIHZpc2libGUgZm9yIHRlc3RpbmdcbmZ1bmN0aW9uIGRzKHQpIHtcbiAgICByZXR1cm4gTW5bdF07XG59XG5cbmZ1bmN0aW9uIHdzKHQpIHtcbiAgICByZXR1cm4gTG5bdF07XG59XG5cbmZ1bmN0aW9uIF9zKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtcyh0KSB7XG4gICAgcmV0dXJuIGZ0LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBncyh0KSB7XG4gICAgcmV0dXJuIEp0LmNyZWF0ZShtcyh0LmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24odCkge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE5PVF9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBMRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSh0LmZpZWxkRmlsdGVyLm9wKSwgdC5maWVsZEZpbHRlci52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICBzd2l0Y2ggKHQudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgIGNhc2UgXCJJU19OQU5cIjpcbiAgICAgICAgY29uc3QgZSA9IG1zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gSnQuY3JlYXRlKGUsIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgIGNvbnN0IG4gPSBtcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEp0LmNyZWF0ZShuLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICBjb25zdCBzID0gbXModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBKdC5jcmVhdGUocywgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTlVMTFwiOlxuICAgICAgICBjb25zdCBpID0gbXModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBKdC5jcmVhdGUoaSwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwcyh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiB0LmZpZWxkcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0LmNhbm9uaWNhbFN0cmluZygpKSkpLCB7XG4gICAgICAgIGZpZWxkUGF0aHM6IGVcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBUcyh0KSB7XG4gICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxuICAgIHJldHVybiB0Lmxlbmd0aCA+PSA0ICYmIFwicHJvamVjdHNcIiA9PT0gdC5nZXQoMCkgJiYgXCJkYXRhYmFzZXNcIiA9PT0gdC5nZXQoMik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cbiAqL1xuZnVuY3Rpb24gRXModCkge1xuICAgIGxldCBlID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGUubGVuZ3RoID4gMCAmJiAoZSA9IEFzKGUpKSwgZSA9IElzKHQuZ2V0KG4pLCBlKTtcbiAgICByZXR1cm4gQXMoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgc2luZ2xlIHNlZ21lbnQgb2YgYSByZXNvdXJjZSBwYXRoIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBJcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBlO1xuICAgIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHM7IGUrKykge1xuICAgICAgICBjb25zdCBzID0gdC5jaGFyQXQoZSk7XG4gICAgICAgIHN3aXRjaCAocykge1xuICAgICAgICAgIGNhc2UgXCJcXDBcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMVwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbiArPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG4vKiogRW5jb2RlcyBhIHBhdGggc2VwYXJhdG9yIGludG8gdGhlIGdpdmVuIHJlc3VsdCAqLyBmdW5jdGlvbiBBcyh0KSB7XG4gICAgcmV0dXJuIHQgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gUnModCkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKEIoZSA+PSAyKSwgMiA9PT0gZSkgcmV0dXJuIEIoXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMCkgJiYgXCJcdTAwMDFcIiA9PT0gdC5jaGFyQXQoMSkpLCBodC5lbXB0eVBhdGgoKTtcbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyBjYW5ub3QgZXhpc3QgcGFzdCB0aGUgc2Vjb25kLXRvLWxhc3QgcG9zaXRpb24gaW4gdGhlXG4gICAgLy8gc291cmNlIHZhbHVlLlxuICAgICAgICBjb25zdCBuID0gZSAtIDIsIHMgPSBbXTtcbiAgICBsZXQgaSA9IFwiXCI7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBlOyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCBlID0gdC5pbmRleE9mKFwiXHUwMDAxXCIsIHIpO1xuICAgICAgICAoZSA8IDAgfHwgZSA+IG4pICYmIEwoKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zdWJzdHJpbmcociwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IGkubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSBuIDogKGkgKz0gbiwgbyA9IGksIGkgPSBcIlwiKSwgcy5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUpLCBpICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTCgpO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBodChzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICovXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgdG8gc3RvcmUgdGltZXN0YW1wcyAoc2Vjb25kcyBhbmQgbmFub3MpIGluIEluZGV4ZWREYiBvYmplY3RzLlxuICovXG5jbGFzcyBicyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzaW5nbGV0b24gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ293bmVyJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcbiAqIHRhYiBtdXN0IHZhbGlkYXRlIHRoYXQgaXQgaXMgc3RpbGwgaG9sZGluZyB0aGUgcHJpbWFyeSBsZWFzZSBiZWZvcmUgZXZlcnlcbiAqIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIGxvY2tlZCBhY2Nlc3MuIFRoZSBwcmltYXJ5IHRhYiBzaG91bGQgcmVndWxhcmx5XG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXG4gKiBcInN0ZWFsaW5nXCIgdGhlIHByaW1hcnkgbGVhc2VcbiAqLyBjbGFzcyBQcyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIFdoZXRoZXIgdG8gYWxsb3cgc2hhcmVkIGFjY2VzcyBmcm9tIG11bHRpcGxlIHRhYnMuICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLm93bmVySWQgPSB0LCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5sZWFzZVRpbWVzdGFtcE1zID0gbjtcbiAgICB9XG59XG5cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovIFBzLnN0b3JlID0gXCJvd25lclwiLCBcbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlByaW1hcnlDbGllbnQgc3RvcmUuXG4gKi9cblBzLmtleSA9IFwib3duZXJcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25RdWV1ZXMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBFYWNoIHVzZXIgZ2V0cyBhIHNpbmdsZSBxdWV1ZSBvZiBNdXRhdGlvbkJhdGNoZXMgdG8gYXBwbHkgdG8gdGhlIHNlcnZlci5cbiAqIERiTXV0YXRpb25RdWV1ZSB0cmFja3MgdGhlIG1ldGFkYXRhIGFib3V0IHRoZSBxdWV1ZS5cbiAqL1xuY2xhc3MgdnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBxdWV1ZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoZSBoaWdoZXN0IG51bWJlcmVkIGJhdGNoIHRoYXQgaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gICAgICogYnkgdGhlIHNlcnZlci4gQWxsIE11dGF0aW9uQmF0Y2hlcyBpbiB0aGlzIHF1ZXVlIHdpdGggYmF0Y2hJZHMgbGVzc1xuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XG4gICAgICogdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBTZWUgU3RyZWFtaW5nV3JpdGVSZXF1ZXN0IGluIGRhdGFzdG9yZS5wcm90byBmb3IgbW9yZSBkZXRhaWxzIGFib3V0XG4gICAgICogdXNhZ2UuXG4gICAgICpcbiAgICAgKiBBZnRlciBzZW5kaW5nIHRoaXMgdG9rZW4sIGVhcmxpZXIgdG9rZW5zIG1heSBub3QgYmUgdXNlZCBhbnltb3JlIHNvXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkID0gZSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyB2cy5zdG9yZSA9IFwibXV0YXRpb25RdWV1ZXNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cbnZzLmtleVBhdGggPSBcInVzZXJJZFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXG4gKiBpbiBhIHNpbmdsZSB3cml0ZS4gRWFjaCB1c2VyLWxldmVsIGJhdGNoIGdldHMgYSBzZXBhcmF0ZSBEYk11dGF0aW9uQmF0Y2hcbiAqIHdpdGggYSBuZXcgYmF0Y2hJZC5cbiAqL1xuY2xhc3MgVnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXIgSUQgdG8gd2hpY2ggdGhpcyBiYXRjaCBiZWxvbmdzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIGlkZW50aWZpZXIgZm9yIHRoaXMgYmF0Y2gsIGFsbG9jYXRlZCB1c2luZyBhbiBhdXRvLWdlbmVyYXRlZCBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlIGJhdGNoLCBzdG9yZWQgYXMgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZVxuICAgICAqIGVwb2NoLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBcIm11dGF0aW9uc1wiIHRoYXQgcmVwcmVzZW50IGEgcGFydGlhbCBiYXNlIHN0YXRlIGZyb20gd2hlbiB0aGlzXG4gICAgICogd3JpdGUgYmF0Y2ggd2FzIGluaXRpYWxseSBjcmVhdGVkLiBEdXJpbmcgbG9jYWwgYXBwbGljYXRpb24gb2YgdGhlIHdyaXRlXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXG4gICAgICogdG8gb3ZlcnJpZGUgY2VydGFpbiBkb2N1bWVudCBmaWVsZHMgZnJvbSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBUaGlzXG4gICAgICogaXMgbmVjZXNzYXJ5IGluIHRoZSBjYXNlIG9mIG5vbi1pZGVtcG90ZW50IHdyaXRlcyAoZS5nLiBgaW5jcmVtZW50KClgXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xuICAgICAqIGRvZXNuJ3QgZmxpY2tlciBpZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHJlY2VpdmVzIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbm9uLWlkZW1wb3RlbnQgd3JpdGUgYmVmb3JlIHRoZSB3cml0ZSBpcyByZW1vdmVkIGZyb20gdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogVGhlc2UgbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBtdXRhdGlvbnMgdG8gYXBwbHkuIEFsbCBtdXRhdGlvbnMgd2lsbCBiZSBhcHBsaWVkIGF0b21pY2FsbHkuXG4gICAgICpcbiAgICAgKiBNdXRhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgdmlhIHRvTXV0YXRpb24oKS5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbiwgdGhpcy5iYXNlTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gaTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gVnMuc3RvcmUgPSBcIm11dGF0aW9uc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkLCBiYXRjaElkIHByb3BlcnRpZXMuICovXG5Wcy5rZXlQYXRoID0gXCJiYXRjaElkXCIsIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciBsb29rdXAgb2YgbXV0YXRpb25zIGJ5IHVzZXIuICovXG5Wcy51c2VyTXV0YXRpb25zSW5kZXggPSBcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBcbi8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXG5Wcy51c2VyTXV0YXRpb25zS2V5UGF0aCA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnZG9jdW1lbnRNdXRhdGlvbnMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cbiAqIGRvY3VtZW50IGtleS4gVGhlIHJvd3MgaW4gdGhpcyB0YWJsZSBhcmUgcmVmZXJlbmNlcyBiYXNlZCBvbiB0aGUgY29udGVudHMgb2ZcbiAqIERiTXV0YXRpb25CYXRjaC5tdXRhdGlvbnMuXG4gKi9cbmNsYXNzIFNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAgICAgKiBvdmVyIGFsbCBvZiBhIHVzZXIncyBkb2N1bWVudCBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JVc2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIFsgdCBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclBhdGgodCwgZSkge1xuICAgICAgICByZXR1cm4gWyB0LCBFcyhlKSBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAgICAgKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAgICAgKi8gICAgc3RhdGljIGtleSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBbIHQsIEVzKGUpLCBuIF07XG4gICAgfVxufVxuXG5Tcy5zdG9yZSA9IFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi9cblNzLlBMQUNFSE9MREVSID0gbmV3IFNzO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGtub3duIGFic2VuY2Ugb2YgYSBkb2N1bWVudCBhdCBhIHBhcnRpY3VsYXIgdmVyc2lvbi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovXG5jbGFzcyBEcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnJlYWRUaW1lID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYnV0IHdob3NlIGRhdGEgaXMgdW5rbm93bi5cbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxuICovIGNsYXNzIENzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMudmVyc2lvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyOlxuICpcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cbiAqIC0gQSBcIm5vIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biBub3QgdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pLlxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKSBidXQgd2hvc2UgY29udGVudHMgYXJlIHVua25vd24uXG4gKlxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXG4gKiBiZSBtYWRlIG1vcmUgZ2VuZXJhbCBpZiBuZWNlc3NhcnkuXG4gKi8gY2xhc3MgTnMge1xuICAgIC8vIFRPRE86IFdlIGFyZSBjdXJyZW50bHkgc3RvcmluZyBmdWxsIGRvY3VtZW50IGtleXMgYWxtb3N0IHRocmVlIHRpbWVzXG4gICAgLy8gKG9uY2UgYXMgcGFydCBvZiB0aGUgcHJpbWFyeSBrZXksIG9uY2UgLSBwYXJ0bHkgLSBhcyBgcGFyZW50UGF0aGAgYW5kIG9uY2VcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXG4gICAgLy8gcmV3cml0ZSB0aGUgcHJpbWFyeSBrZXkgYXMgcGFyZW50UGF0aCArIGRvY3VtZW50IElEIHdoaWNoIHdvdWxkIGFsbG93IHVzXG4gICAgLy8gdG8gZHJvcCBvbmUgdmFsdWUuXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXG4gICAgICogbm90IGtub3duLCBidXQgaXQgaXMga25vd24gdGhhdCBhIGRvY3VtZW50IGV4aXN0cyBhdCB0aGUgc3BlY2lmaWVkXG4gICAgICogdmVyc2lvbiAoZS5nLiBpdCBoYWQgYSBzdWNjZXNzZnVsIHVwZGF0ZSBhcHBsaWVkIHRvIGl0KVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERiTm9Eb2N1bWVudCBpZiBpdCBpcyBrbm93biB0aGF0IG5vIGRvY3VtZW50XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcbiAgICAgKiBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBEb2N1bWVudHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBzdG9yZSBiYXNlZCBvblxuICAgICAqIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgYXJlIG1hcmtlZCB3aXRoIGBoYXNDb21taXR0ZWRNdXRhdGlvbnNgLiBUaGVzZVxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcbiAgICAgKiB0aGUgd3JpdGUncyBjb21taXQgdmVyc2lvbiBhcyB0aGVpciBkb2N1bWVudCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXG4gICAgICogcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBvZiB0aGUgY29sbGVjdGlvbiB0aGlzIGRvY3VtZW50IGlzIHBhcnQgb2YuIFVuZGVmaW5lZCBmb3IgZGF0YVxuICAgICAqIHdyaXR0ZW4gcHJpb3IgdG8gc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMudW5rbm93bkRvY3VtZW50ID0gdCwgdGhpcy5ub0RvY3VtZW50ID0gZSwgdGhpcy5kb2N1bWVudCA9IG4sIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID0gcywgXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSBpLCB0aGlzLnBhcmVudFBhdGggPSByO1xuICAgIH1cbn1cblxuTnMuc3RvcmUgPSBcInJlbW90ZURvY3VtZW50c1wiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcbiAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxuICovXG5Ocy5yZWFkVGltZUluZGV4ID0gXCJyZWFkVGltZUluZGV4XCIsIE5zLnJlYWRUaW1lSW5kZXhQYXRoID0gXCJyZWFkVGltZVwiLCBcbi8qKlxuICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxuICogdGltZS5cbiAqXG4gKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxuICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cbiAqL1xuTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXggPSBcImNvbGxlY3Rpb25SZWFkVGltZUluZGV4XCIsIE5zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsgXCJwYXJlbnRQYXRoXCIsIFwicmVhZFRpbWVcIiBdO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgc2luZ2xlIGVudHJ5IHRoYXQgaGFzIG1ldGFkYXRhIGFib3V0IHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gKi9cbmNsYXNzIHhzIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYnl0ZVNpemUgLSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW4gdGhlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ieXRlU2l6ZSA9IHQ7XG4gICAgfVxufVxuXG54cy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiwgeHMua2V5ID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICd0YXJnZXRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcbiAqIGNsaWVudC5cbiAqXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXG4gKiB0aGF0IHRoZSBxdWVyeSBjYW4gYmUgZWZmaWNpZW50bHkgcmVzdW1lZCBvbiByZXN0YXJ0LlxuICovXG5jbGFzcyBrcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cbiAgICAgKlxuICAgICAqIFF1ZXJpZXMgYXJlIHN0b3JlZCB1c2luZyB0aGVpciBjYW5vbmljYWxJZCBhcyB0aGUga2V5LCBidXQgdGhlc2VcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxuICAgICAqIHF1ZXJ5SWQgd2hpY2ggY2FuIGJlIHVzZWQgYnkgcmVmZXJlbmNlZCBkYXRhIHN0cnVjdHVyZXMgKGUuZy5cbiAgICAgKiBpbmRleGVzKSB0byBtaW5pbWl6ZSB0aGUgb24tZGlzayBjb3N0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBjYW5vbmljYWwgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIHF1ZXJ5LiBUaGlzIGlzIG5vdCB1bmlxdWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVhZFRpbWUgcmVjZWl2ZWQgZnJvbSB0aGUgV2F0Y2ggU2VydmljZSBmb3IgdGhpcyBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlYWRfdGltZSBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGFcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxuICAgICAqIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cbiAgICAgKiBlZmZlY3RpdmVseSBhbHNvIGVuY29kZXMgdGhhdCB2YWx1ZSwgYnV0IHRoZSByZXN1bWVUb2tlbiBpcyBvcGFxdWVcbiAgICAgKiBhbmQgc29tZXRpbWVzIGVuY29kZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0IHRoZSByZXN1bWVUb2tlbiBzaG91bGQgYmUgdXNlZCB3aGVuXG4gICAgICogYXNraW5nIHRoZSBzZXJ2ZXIgdG8gcmVhc29uIGFib3V0IHdoZXJlIHRoaXMgY2xpZW50IGlzIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXG4gICAgICogcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xuICAgICAqIGxpc3RlbmVkIHRvLCB1c2VkIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuXG4gICAgICpcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXG4gICAgICogY2xvY2tzIGFyZSB1bnJlbGlhYmxlIGFuZCB0aGV5IG11c3QgYmUgYWJsZSB0byBjcmVhdGUgbmV3IGxpc3RlbnNcbiAgICAgKiBldmVuIHdoaWxlIGRpc2Nvbm5lY3RlZC4gSW5zdGVhZCB0aGlzIHNob3VsZCBiZSBhIG1vbm90b25pY2FsbHlcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gdGhlIHF1ZXJ5SWQgc2luY2UgdGhlIHF1ZXJ5SWQgaXMgYW5cbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXG4gICAgICogbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIHVwZGF0ZWQgZXZlcnkgdGltZSB0aGUgcXVlcnkgaXNcbiAgICAgKiBsaXN0ZW5lZCB0by5cbiAgICAgKi9cbiAgICBpLCBcbiAgICAvKipcbiAgICAgKiBEZW5vdGVzIHRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgcXVlcnkgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuICBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlbiBwcmlvciB0b1xuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGZvciB0aGlzIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXG4gICAgICogdXNlIHRoZSBwcm90byB0byBoYXZlIGFuIG9iamVjdCB3ZSBjYW4gcGVyc2lzdCB3aXRob3V0IGhhdmluZyB0b1xuICAgICAqIGR1cGxpY2F0ZSB0cmFuc2xhdGlvbiBsb2dpYyB0byBhbmQgZnJvbSBhIGBRdWVyeWAgb2JqZWN0LlxuICAgICAqL1xuICAgIG8pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuY2Fub25pY2FsSWQgPSBlLCB0aGlzLnJlYWRUaW1lID0gbiwgdGhpcy5yZXN1bWVUb2tlbiA9IHMsIFxuICAgICAgICB0aGlzLmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGksIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucXVlcnkgPSBvO1xuICAgIH1cbn1cblxua3Muc3RvcmUgPSBcInRhcmdldHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkIHByb3BlcnR5LiAqL1xua3Mua2V5UGF0aCA9IFwidGFyZ2V0SWRcIiwgXG4vKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleC4gKi9cbmtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgXG4vKipcbiAqIFRoZSBpbmRleCBvZiBhbGwgY2Fub25pY2FsSWRzIHRvIHRoZSB0YXJnZXRzIHRoYXQgdGhleSBtYXRjaC4gVGhpcyBpcyBub3RcbiAqIGEgdW5pcXVlIG1hcHBpbmcgYmVjYXVzZSBjYW5vbmljYWxJZCBkb2VzIG5vdCBwcm9taXNlIGEgdW5pcXVlIG5hbWUgZm9yIGFsbFxuICogcG9zc2libGUgcXVlcmllcywgc28gd2UgYXBwZW5kIHRoZSB0YXJnZXRJZCB0byBtYWtlIHRoZSBtYXBwaW5nIHVuaXF1ZS5cbiAqL1xua3MucXVlcnlUYXJnZXRzS2V5UGF0aCA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSB0YXJnZXQgYW5kIGEgZG9jdW1lbnQsIG9yIGFcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxuICogRWFjaCBkb2N1bWVudCBjYWNoZWQgbXVzdCBoYXZlIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3cgYmVmb3JlIGxydVxuICogZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIGVuYWJsZWQuXG4gKlxuICogVGhlIHRhcmdldCBhc3NvY2lhdGlvbnMgYW5kIHNlbnRpbmVsIHJvd3MgYXJlIGNvLWxvY2F0ZWQgc28gdGhhdCBvcnBoYW5lZFxuICogZG9jdW1lbnRzIGFuZCB0aGVpciBzZXF1ZW5jZSBudW1iZXJzIGNhbiBiZSBpZGVudGlmaWVkIGVmZmljaWVudGx5IHZpYSBhIHNjYW5cbiAqIG9mIHRoaXMgc3RvcmUuXG4gKi9cbmNsYXNzICRzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0SWQgaWRlbnRpZnlpbmcgYSB0YXJnZXQgb3IgMCBmb3IgYSBzZW50aW5lbCByb3cuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIGRvY3VtZW50LCBhcyBlbmNvZGVkIGluIHRoZSBrZXkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogSWYgdGhpcyBpcyBhIHNlbnRpbmVsIHJvdywgdGhpcyBzaG91bGQgYmUgdGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdFxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wYXRoID0gZSwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovICRzLnN0b3JlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHRhcmdldElkLCBwYXRoIHByb3BlcnRpZXMuICovXG4kcy5rZXlQYXRoID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIFxuLyoqIFRoZSBpbmRleCBuYW1lIGZvciB0aGUgcmV2ZXJzZSBpbmRleC4gKi9cbiRzLmRvY3VtZW50VGFyZ2V0c0luZGV4ID0gXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCBcbi8qKiBXZSBhbHNvIG5lZWQgdG8gY3JlYXRlIHRoZSByZXZlcnNlIGluZGV4IGZvciB0aGVzZSBwcm9wZXJ0aWVzLiAqL1xuJHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIGdsb2JhbCBzdGF0ZSB0cmFja2VkIGFjcm9zcyBhbGwgVGFyZ2V0cywgdHJhY2tlZCBzZXBhcmF0ZWx5XG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IGluLXN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TIGNsaWVudC5cbiAqL1xuY2xhc3MgT3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBpZCBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxuICAgICAqIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQuIFRoaXMgaXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIGFuZCBhbnlcbiAgICAgKiBzbmFwc2hvdHMgcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCBwcmlvciB0byB0aGlzIHZlcnNpb24gKGUuZy4gZm9yXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxuICAgICAqIHVudGlsIHRoZSBiYWNrZW5kIGhhcyBjYXVnaHQgdXAgdG8gdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIGFnYWluLiBUaGlzXG4gICAgICogcHJldmVudHMgb3VyIGNhY2hlIGZyb20gZXZlciBnb2luZyBiYWNrd2FyZHMgaW4gdGltZS5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0LCB0aGlzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4sIFxuICAgICAgICB0aGlzLnRhcmdldENvdW50ID0gcztcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGtleSBzdHJpbmcgdXNlZCBmb3IgdGhlIHNpbmdsZSBvYmplY3QgdGhhdCBleGlzdHMgaW4gdGhlXG4gKiBEYlRhcmdldEdsb2JhbCBzdG9yZS5cbiAqLyBPcy5rZXkgPSBcInRhcmdldEdsb2JhbEtleVwiLCBPcy5zdG9yZSA9IFwidGFyZ2V0R2xvYmFsXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgQ29sbGVjdGlvbiBpZCAoZS5nLiAnbWVzc2FnZXMnKVxuICogdG8gYSBwYXJlbnQgcGF0aCAoZS5nLiAnL2NoYXRzLzEyMycpIHRoYXQgY29udGFpbnMgaXQgYXMgYSAoc3ViKWNvbGxlY3Rpb24uXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXG4gKiBhIENvbGxlY3Rpb24gR3JvdXAgcXVlcnkuXG4gKi9cbmNsYXNzIEZzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbklkIChlLmcuICdtZXNzYWdlcycpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcbiAgICAgKiBhIHJvb3QtbGV2ZWwgY29sbGVjdGlvbikuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IHQsIHRoaXMucGFyZW50ID0gZTtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBGcy5zdG9yZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXG5Gcy5rZXlQYXRoID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpLXRhYiBzdGF0ZSBhbmQgZG9lcyBub3QgbmVlZFxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxuICovXG5jbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcbiAgICAvLyBcImxhc3RQcm9jZXNzZWREb2N1bWVudENoYW5nZUlkXCIuIERvbid0IHVzZSBhbnltb3JlLlxuICAgIC8qKiBUaGUgYXV0by1nZW5lcmF0ZWQgY2xpZW50IGlkIGFzc2lnbmVkIGF0IGNsaWVudCBzdGFydHVwLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXG4gICAgZSwgXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xuICAgIG4sIFxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY2xpZW50IGlzIHJ1bm5pbmcgaW4gYSBmb3JlZ3JvdW5kIHRhYi4gKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLnVwZGF0ZVRpbWVNcyA9IGUsIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuLCB0aGlzLmluRm9yZWdyb3VuZCA9IHM7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gTXMuc3RvcmUgPSBcImNsaWVudE1ldGFkYXRhXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjbGllbnRJZCBwcm9wZXJ0aWVzLiAqL1xuTXMua2V5UGF0aCA9IFwiY2xpZW50SWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBidW5kbGUgbG9hZGVkIGJ5IHRoZSBTREsuXG4gKi9cbmNsYXNzIExzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIElEIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY3JlYXRlIHRpbWUgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuYnVuZGxlSWQgPSB0LCB0aGlzLmNyZWF0ZVRpbWUgPSBlLCB0aGlzLnZlcnNpb24gPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIExzLnN0b3JlID0gXCJidW5kbGVzXCIsIExzLmtleVBhdGggPSBcImJ1bmRsZUlkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgbmFtZWQgcXVlcnkgbG9hZGVkIGJ5IHRoZSBTREsgdmlhIGEgYnVuZGxlLlxuICovXG5jbGFzcyBCcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHJlYWQgdGltZSBvZiB0aGUgcmVzdWx0cyBzYXZlZCBpbiB0aGUgYnVuZGxlIGZyb20gdGhlIG5hbWVkIHF1ZXJ5LiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcXVlcnkgc2F2ZWQgaW4gdGhlIGJ1bmRsZS4gKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzLmJ1bmRsZWRRdWVyeSA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gQnMuc3RvcmUgPSBcIm5hbWVkUXVlcmllc1wiLCBCcy5rZXlQYXRoID0gXCJuYW1lXCI7XG5cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNvbnN0IFVzID0gWyAuLi5bIC4uLlsgLi4uWyAuLi5bIHZzLnN0b3JlLCBWcy5zdG9yZSwgU3Muc3RvcmUsIE5zLnN0b3JlLCBrcy5zdG9yZSwgUHMuc3RvcmUsIE9zLnN0b3JlLCAkcy5zdG9yZSBdLCBNcy5zdG9yZSBdLCB4cy5zdG9yZSBdLCBGcy5zdG9yZSBdLCBMcy5zdG9yZSwgQnMuc3RvcmUgXSwgcXMgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLy8gVjIgaXMgbm8gbG9uZ2VyIHVzYWJsZSAoc2VlIGNvbW1lbnQgYXQgdG9wIG9mIGZpbGUpXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqL1xuY2xhc3MgS3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIGpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIE5PVEU6IG5leHQvY2F0Y2hDYWxsYmFjayB3aWxsIGFsd2F5cyBwb2ludCB0byBvdXIgb3duIHdyYXBwZXIgZnVuY3Rpb25zLFxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxuICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IG51bGwsIHRoaXMuY2F0Y2hDYWxsYmFjayA9IG51bGwsIFxuICAgICAgICAvLyBXaGVuIHRoZSBvcGVyYXRpb24gcmVzb2x2ZXMsIHdlJ2xsIHNldCByZXN1bHQgb3IgZXJyb3IgYW5kIG1hcmsgaXNEb25lLlxuICAgICAgICB0aGlzLnJlc3VsdCA9IHZvaWQgMCwgdGhpcy5lcnJvciA9IHZvaWQgMCwgdGhpcy5pc0RvbmUgPSAhMSwgXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXG4gICAgICAgIC8vIGNoYWluaW5nLlxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMSwgdCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLnJlc3VsdCA9IHQsIHRoaXMubmV4dENhbGxiYWNrICYmIFxuICAgICAgICAgICAgLy8gdmFsdWUgc2hvdWxkIGJlIGRlZmluZWQgdW5sZXNzIFQgaXMgVm9pZCwgYnV0IHdlIGNhbid0IGV4cHJlc3NcbiAgICAgICAgICAgIC8vIHRoYXQgaW4gdGhlIHR5cGUgc3lzdGVtLlxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sodCk7XG4gICAgICAgIH0pLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzRG9uZSA9ICEwLCB0aGlzLmVycm9yID0gdCwgdGhpcy5jYXRjaENhbGxiYWNrICYmIHRoaXMuY2F0Y2hDYWxsYmFjayh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodm9pZCAwLCB0KTtcbiAgICB9XG4gICAgbmV4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgJiYgTCgpLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZShlLCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3ModCwgdGhpcy5yZXN1bHQpIDogbmV3IGpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBTdWNjZXNzKHQsIGUpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9LCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyYXBGYWlsdXJlKGUsIHQpLm5leHQobiwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRvUHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyYXBVc2VyRnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQoKTtcbiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YganMgPyBlIDoganMucmVzb2x2ZShlKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIGpzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cmFwU3VjY2Vzcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBqcy5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiB0KGUpKSkgOiBqcy5yZWplY3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGUodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcganMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0KSB7XG4gICAgICAgIHJldHVybiBuZXcganMoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9IDAsIGkgPSAwLCByID0gITE7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICsrcywgdC5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgciAmJiBpID09PSBzICYmIGUoKTtcbiAgICAgICAgICAgICAgICB9KSwgKHQgPT4gbih0KSkpO1xuICAgICAgICAgICAgfSkpLCByID0gITAsIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcih0KSB7XG4gICAgICAgIGxldCBlID0ganMucmVzb2x2ZSghMSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlID0gZS5uZXh0KCh0ID0+IHQgPyBqcy5yZXNvbHZlKHQpIDogbigpKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaChlLmNhbGwodGhpcywgdCwgcykpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIFFzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkV0ID0gbmV3IFEsIHRoaXMudHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBlLmVycm9yID8gdGhpcy5FdC5yZWplY3QobmV3IHpzKHQsIGUuZXJyb3IpKSA6IHRoaXMuRXQucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBacyhlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB0aGlzLkV0LnJlamVjdChuZXcgenModCwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgb3Blbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFFzKGUsIHQudHJhbnNhY3Rpb24ocywgbikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgenMoZSwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IEl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5FdC5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydCh0KSB7XG4gICAgICAgIHQgJiYgdGhpcy5FdC5yZWplY3QodCksIHRoaXMuYWJvcnRlZCB8fCAoJChcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQgPyB0Lm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgSnMoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgV3Mge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLkF0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBXcy5SdChnZXRVQSgpKSAmJiBPKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gJChcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCBZcyh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgYnQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoV3MuUHQoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IFdzLlJ0KHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gV3MudnQodCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgUHQoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5WdCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyBTdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgUnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyB2dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgRHQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoJChcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgenModCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyB6cyh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLkF0LkN0KGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMuTnQgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLk50KHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgeHQodCkge1xuICAgICAgICB0aGlzLk50ID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5EdCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gUXMub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIGpzLnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5JdCwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICBpZiAoJChcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgZSksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIWUpIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIEdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua3QgPSB0LCB0aGlzLiR0ID0gITEsIHRoaXMuT3QgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdDtcbiAgICB9XG4gICAgZ2V0IEZ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5PdDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMua3QgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLiR0ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgTXQodCkge1xuICAgICAgICB0aGlzLk90ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBZcyh0aGlzLmt0LmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIHpzIGV4dGVuZHMgaiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihLLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gSHModCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIEpzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6ICgkKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCBZcyhuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4gWXModGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gWXModGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCAkKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiBZcyh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIFlzKHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIEx0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3Vyc29yKHRoaXMub3B0aW9ucyh0LCBlKSksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnQobiwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIFV0KHQsIGUpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLnF0ID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnQocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIEt0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5CdChzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAganQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IGpzKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFpzKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBqcygoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgR3MoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBqcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIGpzLnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuRnQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuRnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGpzLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5xdCA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIFlzKHQpIHtcbiAgICByZXR1cm4gbmV3IGpzKCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IFpzKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBYcyA9ICExO1xuXG5mdW5jdGlvbiBacyh0KSB7XG4gICAgY29uc3QgZSA9IFdzLlJ0KGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIFhzIHx8IChYcyA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgdGkgZXh0ZW5kcyBLcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlF0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZWkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBXcy5TdChuLlF0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3Mgbmkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gZSwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubXV0YXRpb25zW2VdO1xuICAgICAgICAgICAgaWYgKHMua2V5LmlzRXF1YWwodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgSmUocywgdCwgbltlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgWWUoZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLm11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgWWUoZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KGUua2V5KSwgcyA9IG47XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMpLCBuLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIFBuKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG50KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBaZSh0LCBlKSkpICYmIG50KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IFplKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBzaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIEIodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gUm4oKTtcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBzaSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBpaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBydC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IF90LkVNUFRZX0JZVEVfU1RSSU5HKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgaWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBpaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIHJpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuV3QgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gb2kodCwgZSkge1xuICAgIGlmIChlLmRvY3VtZW50KSByZXR1cm4gdHModC5XdCwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gUHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgbiA9IGxpKGUubm9Eb2N1bWVudC5yZWFkVGltZSksIHMgPSBLdC5uZXdOb0RvY3VtZW50KHQsIG4pO1xuICAgICAgICByZXR1cm4gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPyBzLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogcztcbiAgICB9XG4gICAgaWYgKGUudW5rbm93bkRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBQdC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIG4gPSBsaShlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIEt0Lm5ld1Vua25vd25Eb2N1bWVudCh0LCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBjaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGFpKG4pLCBpID0gZS5rZXkucGF0aC5wb3BMYXN0KCkudG9BcnJheSgpO1xuICAgIGlmIChlLmlzRm91bmREb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IEduKHQsIGUua2V5KSxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZTogVW4odCwgZS52ZXJzaW9uLnRvVGltZXN0YW1wKCkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQuV3QsIGUpLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgTnMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIG4sIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc05vRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSBoaShlLnZlcnNpb24pLCByID0gZS5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgICAgIHJldHVybiBuZXcgTnMoXG4gICAgICAgIC8qIHVua25vd25Eb2N1bWVudD0gKi8gbnVsbCwgbmV3IERzKHQsIG4pLCBcbiAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIHIsIHMsIGkpO1xuICAgIH1cbiAgICBpZiAoZS5pc1Vua25vd25Eb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoLnRvQXJyYXkoKSwgbiA9IGhpKGUudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgTnMobmV3IENzKHQsIG4pLCBcbiAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogaGFzQ29tbWl0dGVkTXV0YXRpb25zPSAqLyAhMCwgcywgaSk7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbmZ1bmN0aW9uIGFpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiB1aSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0WzBdLCB0WzFdKTtcbiAgICByZXR1cm4gcnQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuZnVuY3Rpb24gaGkodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIG5ldyBicyhlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xufVxuXG5mdW5jdGlvbiBsaSh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBpdCh0LnNlY29uZHMsIHQubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIGJhdGNoIG9mIG11dGF0aW9ucyBpbnRvIGEgRGJNdXRhdGlvbkJhdGNoIGZvciBsb2NhbCBzdG9yYWdlLiAqL1xuLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cbmZ1bmN0aW9uIGZpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gKGUuYmFzZU11dGF0aW9ucyB8fCBbXSkubWFwKChlID0+IGlzKHQuV3QsIGUpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLm11dGF0aW9ucy5sZW5ndGggLSAxOyArK3QpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25zW3RdO1xuICAgICAgICBpZiAodCArIDEgPCBlLm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSBlLm11dGF0aW9uc1t0ICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5tdXRhdGlvbnNbdCArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gcy50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCBlLm11dGF0aW9ucy5zcGxpY2UodCArIDEsIDEpLCBcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzID0gZS5tdXRhdGlvbnMubWFwKChlID0+IGlzKHQuV3QsIGUpKSksIGkgPSBpdC5mcm9tTWlsbGlzKGUubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBuaShlLmJhdGNoSWQsIGksIG4sIHMpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IGxpKHQucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBsaSh0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogcnQubWluKCk7XG4gICAgbGV0IHM7XG4gICAgdmFyIGk7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5xdWVyeS5kb2N1bWVudHMgPyAoQigxID09PSAoaSA9IHQucXVlcnkpLmRvY3VtZW50cy5sZW5ndGgpLCBcbiAgICBzID0gRWUod2UoSm4oaS5kb2N1bWVudHNbMF0pKSkpIDogcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIEVlKGFzKHQpKTtcbiAgICB9KHQucXVlcnkpLCBuZXcgaWkocywgdC50YXJnZXRJZCwgMCAvKiBMaXN0ZW4gKi8gLCB0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgZSwgbiwgX3QuZnJvbUJhc2U2NFN0cmluZyh0LnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIHdpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gaGkoZS5zbmFwc2hvdFZlcnNpb24pLCBzID0gaGkoZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gSHQoZS50YXJnZXQpID8gb3ModC5XdCwgZS50YXJnZXQpIDogY3ModC5XdCwgZS50YXJnZXQpO1xuICAgIC8vIFdlIGNhbid0IHN0b3JlIHRoZSByZXN1bWVUb2tlbiBhcyBhIEJ5dGVTdHJpbmcgaW4gSW5kZXhlZERiLCBzbyB3ZVxuICAgIC8vIGNvbnZlcnQgaXQgdG8gYSBiYXNlNjQgc3RyaW5nIGZvciBzdG9yYWdlLlxuICAgICAgICBjb25zdCByID0gZS5yZXN1bWVUb2tlbi50b0Jhc2U2NCgpO1xuICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxuICAgICAgICByZXR1cm4gbmV3IGtzKGUudGFyZ2V0SWQsIFd0KGUudGFyZ2V0KSwgbiwgciwgZS5zZXF1ZW5jZU51bWJlciwgcywgaSk7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9pKHQpIHtcbiAgICBjb25zdCBlID0gYXMoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IEllKGUsIGUubGltaXQsIFwiTFwiIC8qIExhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIG1pIHtcbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBnaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogKGUgPSB0KS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBsaShlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgdG8gYSBEYkJ1bmRsZS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGdpKHQpLnB1dCh7XG4gICAgICAgICAgICBidW5kbGVJZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IGhpKGpuKG4uY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgLyoqIEVuY29kZXMgYSBEYk5hbWVkUXVlcnkgdG8gYSBOYW1lZFF1ZXJ5LiAqLyAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB5aSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAoZSA9IHQpLm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IF9pKGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogbGkoZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIC8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBmcm9tIGEgYnVuZGxlIHByb3RvIHRvIGEgRGJOYW1lZFF1ZXJ5LiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB5aSh0KS5wdXQoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGhpKGpuKHQucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IHQuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBnaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIExzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24geWkodCkge1xuICAgIHJldHVybiBlaSh0LCBCcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgcGkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkd0ID0gbmV3IFRpO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkd0LmFkZChlKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMuR3QuZ2V0RW50cmllcyhlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBUaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB7fTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBmYWxzZSBpZiB0aGUgZW50cnkgYWxyZWFkeSBleGlzdGVkLlxuICAgIGFkZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV0gfHwgbmV3IGduKGh0LmNvbXBhcmF0b3IpLCBpID0gIXMuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFtlXSA9IHMuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdO1xuICAgICAgICByZXR1cm4gcyAmJiBzLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFt0XSB8fCBuZXcgZ24oaHQuY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBFaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZSB1c2VkIHRvXG4gICAgICAgICAqIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnp0ID0gbmV3IFRpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IGVudHJ5IHRvIHRoZSBjb2xsZWN0aW9uIHBhcmVudCBpbmRleC5cbiAgICAgKlxuICAgICAqIFJlcGVhdGVkIGNhbGxzIGZvciB0aGUgc2FtZSBjb2xsZWN0aW9uUGF0aCBzaG91bGQgYmUgYXZvaWRlZCB3aXRoaW4gYVxuICAgICAqIHRyYW5zYWN0aW9uIGFzIEluZGV4ZWREYkluZGV4TWFuYWdlciBvbmx5IGNhY2hlcyB3cml0ZXMgb25jZSBhIHRyYW5zYWN0aW9uXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAqLyAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy56dC5oYXMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmxhc3RTZWdtZW50KCksIHMgPSBlLnBvcExhc3QoKTtcbiAgICAgICAgICAgIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgY29sbGVjdGlvbiB0byB0aGUgaW4gbWVtb3J5IGNhY2hlIG9ubHkgaWYgdGhlIHRyYW5zYWN0aW9uIHdhc1xuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXG4gICAgICAgICAgICAgICAgdGhpcy56dC5hZGQoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogbixcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IEVzKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIElpKHQpLnB1dChpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSwgXCJcIiBdLCBbIHN0KGUpLCBcIlwiIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIElpKHQpLkx0KHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAocy5jb2xsZWN0aW9uSWQgIT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChScyhzLnBhcmVudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gSWkodCkge1xuICAgIHJldHVybiBlaSh0LCBGcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEFpID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIFJpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJpKHQsIFJpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBSaS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIGJpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShWcy5zdG9yZSksIGkgPSB0LnN0b3JlKFNzLnN0b3JlKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCBjID0gMDtcbiAgICBjb25zdCBhID0gcy5LdCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAoYysrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChhLm5leHQoKCgpID0+IHtcbiAgICAgICAgQigxID09PSBjKTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IHUgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IFNzLmtleShlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCB1LnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4ganMud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB1KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gUGkodCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IEwoKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIFJpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuUmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBSaS5ERUZBVUxUID0gbmV3IFJpKDQxOTQzMDQwLCBSaS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgUmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5SaS5ESVNBQkxFRCA9IG5ldyBSaSgtMSwgMCwgMCk7XG5cbmNsYXNzIHZpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5OID0gZSwgdGhpcy5IdCA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLkp0ID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBZdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBCKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgdmkoaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIFNpKHQpLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBWcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUgPSAhMSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gRGkodCksIHIgPSBTaSh0KTtcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcbiAgICAgICAgLy8gY29tcG91bmQgaW5kaWNlcyB0aGF0IGluY2x1ZGUgYXV0by1nZW5lcmF0ZWQga2V5cyBjb3JyZWN0bHkuIFRvIGVuc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSBpbmRleCBlbnRyeSBpcyBhZGRlZCBjb3JyZWN0bHkgaW4gYWxsIGJyb3dzZXJzLCB3ZSBwZXJmb3JtIHR3b1xuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXG4gICAgICAgIC8vIElELCBhbmQgdGhlIHNlY29uZCB3cml0ZSBwb3B1bGF0ZXMgdGhlIGluZGV4IGFuZCBzdG9yZXMgdGhlIGFjdHVhbFxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcbiAgICAgICAgLy8gV2Ugd3JpdGUgYW4gZW1wdHkgb2JqZWN0IHRvIG9idGFpbiBrZXlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHIuYWRkKHt9KS5uZXh0KChvID0+IHtcbiAgICAgICAgICAgIEIoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBjID0gbmV3IG5pKG8sIGUsIG4sIHMpLCBhID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmJhc2VNdXRhdGlvbnMubWFwKChlID0+IHNzKHQuV3QsIGUpKSksIGkgPSBuLm11dGF0aW9ucy5tYXAoKGUgPT4gc3ModC5XdCwgZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZzKGUsIG4uYmF0Y2hJZCwgbi5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLCBzLCBpKTtcbiAgICAgICAgICAgIH0odGhpcy5OLCB0aGlzLnVzZXJJZCwgYyksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3IGduKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFNzLmtleSh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgdS5wdXNoKHIucHV0KGEpKSwgdS5wdXNoKGkucHV0KGUsIFNzLlBMQUNFSE9MREVSKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB1LnB1c2godGhpcy5IdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuSnRbb10gPSBjLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwganMud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBjKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBTaSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgZmkodGhpcy5OLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBYdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0W2VdID8ganMucmVzb2x2ZSh0aGlzLkp0W2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkp0W2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBTaSh0KS5LdCh7XG4gICAgICAgICAgICBpbmRleDogVnMudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKEIoZS5iYXRjaElkID49IG4pLCBpID0gZmkodGhpcy5OLCBlKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgbiA9IC0xO1xuICAgICAgICByZXR1cm4gU2kodCkuS3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFZzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIFNpKHQpLkx0KFZzLnVzZXJNdXRhdGlvbnNJbmRleCwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBmaSh0aGlzLk4sIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobiksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgobiwgcywgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgW28sIGMsIGFdID0gbiwgdSA9IFJzKGMpO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIFNpKHQpLmdldChhKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXQpIHRocm93IEwoKTtcbiAgICAgICAgICAgICAgICBCKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIGkucHVzaChmaSh0aGlzLk4sIHQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBnbihldCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBEaSh0KS5LdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCBjXSA9IHQsIGEgPSBScyhvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQoYykgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMuWnQodCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0gU3MucHJlZml4Rm9yUGF0aCh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3IGduKGV0KTtcbiAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIGMsIGFdID0gdCwgdSA9IFJzKGMpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChhKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuWnQodCwgbykpKTtcbiAgICB9XG4gICAgWnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKFNpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKGZpKHRoaXMuTiwgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBiaSh0LlF0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRlKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwganMuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICB0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLkp0W3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBqcy5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFNzLnByZWZpeEZvclVzZXIodGhpcy51c2VySWQpKSwgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBScyh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgQigwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gVmkodCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBlZSh0KSB7XG4gICAgICAgIHJldHVybiBDaSh0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCBuZXcgdnModGhpcy51c2VySWQsIC0xLCBcbiAgICAgICAgLypsYXN0U3RyZWFtVG9rZW49Ki8gXCJcIikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiBWaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFNzLnByZWZpeEZvclBhdGgoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIERpKHQpLkt0KHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIHF0OiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgYywgLypiYXRjaElEKi8gYV0gPSB0O1xuICAgICAgICByID09PSBlICYmIGMgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBTaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIFZzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBEaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIFNzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBDaSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIHZzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBOaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm5lID0gdDtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmUgKz0gMiwgdGhpcy5uZTtcbiAgICB9XG4gICAgc3RhdGljIHNlKCkge1xuICAgICAgICAvLyBUaGUgdGFyZ2V0IGNhY2hlIGdlbmVyYXRvciBtdXN0IHJldHVybiAnMicgaW4gaXRzIGZpcnN0IGNhbGwgdG8gYG5leHQoKWBcbiAgICAgICAgLy8gYXMgdGhlcmUgaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0XG4gICAgICAgIC8vIG51bWJlciBhbmQgdGhlIG51bWJlciAnMCcuIElmIHdlIHdlcmUgdG8gc2VudCBhIHRhcmdldCB3aXRoIHRhcmdldCBJRFxuICAgICAgICAvLyAnMCcsIHRoZSBiYWNrZW5kIHdvdWxkIGNvbnNpZGVyIGl0IHVuc2V0IGFuZCByZXBsYWNlIGl0IHdpdGggaXRzIG93biBJRC5cbiAgICAgICAgcmV0dXJuIG5ldyBOaSgwKTtcbiAgICB9XG4gICAgc3RhdGljIGllKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBOaSgtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB4aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCwgdGhpcy5OID0gZTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCBjYWNoZSBnbG9iYWwgbWV0YWRhdGEgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIHNpbmNlXG4gICAgLy8gc29tZSBvZiBpdCAoaW4gcGFydGljdWxhciBgaGlnaGVzdFRhcmdldElkYCkgY2FuIGJlIG1vZGlmaWVkIGJ5IHNlY29uZGFyeVxuICAgIC8vIHRhYnMuIFdlIGNvdWxkIHBlcmhhcHMgYmUgbW9yZSBncmFudWxhciAoYW5kIGUuZy4gc3RpbGwgY2FjaGVcbiAgICAvLyBgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbmAgaW4gbWVtb3J5KSBidXQgZm9yIHNpbXBsaWNpdHkgd2UgY3VycmVudGx5IGdvXG4gICAgLy8gdG8gSW5kZXhlZERiIHdoZW5ldmVyIHdlIG5lZWQgdG8gcmVhZCBtZXRhZGF0YS4gV2UgY2FuIHJldmlzaXQgaWYgaXQgdHVybnNcbiAgICAvLyBvdXQgdG8gaGF2ZSBhIG1lYW5pbmdmdWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTmkoZS5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMub2UodCwgZSkubmV4dCgoKCkgPT4gZS5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgodCA9PiBydC5mcm9tVGltZXN0YW1wKG5ldyBpdCh0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24uc2Vjb25kcywgdC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmUodCkubmV4dCgodCA9PiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KChzID0+IChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUsIG4gJiYgKHMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4udG9UaW1lc3RhbXAoKSksIFxuICAgICAgICBlID4gcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSksIHRoaXMub2UodCwgcykpKSk7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZSh0LCBlKS5uZXh0KCgoKSA9PiB0aGlzLnJlKHQpLm5leHQoKG4gPT4gKG4udGFyZ2V0Q291bnQgKz0gMSwgdGhpcy5hZShlLCBuKSwgXG4gICAgICAgIHRoaXMub2UodCwgbikpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgoKCkgPT4ga2kodCkuZGVsZXRlKGUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5yZSh0KSkpLm5leHQoKGUgPT4gKEIoZS50YXJnZXRDb3VudCA+IDApLCBcbiAgICAgICAgZS50YXJnZXRDb3VudCAtPSAxLCB0aGlzLm9lKHQsIGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcm9wcyBhbnkgdGFyZ2V0cyB3aXRoIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kLCBleGNlcHRpbmcgdGhvc2VcbiAgICAgKiBwcmVzZW50IGluIGBhY3RpdmVUYXJnZXRJZHNgLiBEb2N1bWVudCBhc3NvY2lhdGlvbnMgZm9yIHRoZSByZW1vdmVkIHRhcmdldHMgYXJlIGFsc28gcmVtb3ZlZC5cbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxuICAgICAqLyAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBraSh0KS5LdCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBkaShvKTtcbiAgICAgICAgICAgIGMuc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChjLnRhcmdldElkKSAmJiAocysrLCBpLnB1c2godGhpcy5yZW1vdmVUYXJnZXREYXRhKHQsIGMpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBqcy53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBraSh0KS5LdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBkaShuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmUodCkge1xuICAgICAgICByZXR1cm4gJGkodCkuZ2V0KE9zLmtleSkubmV4dCgodCA9PiAoQihudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgb2UodCwgZSkge1xuICAgICAgICByZXR1cm4gJGkodCkucHV0KE9zLmtleSwgZSk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGtpKHQpLnB1dCh3aSh0aGlzLk4sIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZSh0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IFd0KGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGtpKHQpLkt0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IGtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBkaShuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICB6dChlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBPaSh0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gRXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dChuZXcgJHMobiwgcikpKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IE9pKHQpO1xuICAgICAgICByZXR1cm4ganMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gRXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBqcy53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBPaSh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBPaSh0KTtcbiAgICAgICAgbGV0IGkgPSBQbigpO1xuICAgICAgICByZXR1cm4gcy5LdCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIHF0OiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBScyh0WzFdKSwgciA9IG5ldyBQdChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRXMoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIHN0KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gT2kodCkuS3Qoe1xuICAgICAgICAgICAgaW5kZXg6ICRzLmRvY3VtZW50VGFyZ2V0c0luZGV4LFxuICAgICAgICAgICAgcXQ6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBUdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBraSh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gZGkodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24ga2kodCkge1xuICAgIHJldHVybiBlaSh0LCBrcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gJGkodCkge1xuICAgIHJldHVybiBlaSh0LCBPcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIE9pKHQpIHtcbiAgICByZXR1cm4gZWkodCwgJHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gRmkodCkge1xuICAgIGlmICh0LmNvZGUgIT09IEsuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0Lm1lc3NhZ2UgIT09IHFzKSB0aHJvdyB0O1xuICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gTWkoW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gZXQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBldChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIExpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWUgPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBnbihNaSksIHRoaXMuaGUgPSAwO1xuICAgIH1cbiAgICBsZSgpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5oZTtcbiAgICB9XG4gICAgZmUodCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLmxlKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLnVlKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgTWkoZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgQmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5kZSA9ICExLCB0aGlzLndlID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuX2UodCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMud2UgJiYgKHRoaXMud2UuY2FuY2VsKCksIHRoaXMud2UgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLndlO1xuICAgIH1cbiAgICBfZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlID8gM2U1IDogNmU0O1xuICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy53ZSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImxydV9nYXJiYWdlX2NvbGxlY3Rpb25cIiAvKiBMcnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndlID0gbnVsbCwgdGhpcy5kZSA9ICEwO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgSHModCkgPyAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCBGaSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2UodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gKi8gY2xhc3MgVWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tZSA9IHQsIHRoaXMucGFyYW1zID0gZTtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5nZSh0KS5uZXh0KCh0ID0+IE1hdGguZmxvb3IoZSAvIDEwMCAqIHQpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKHQsIGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUpIHJldHVybiBqcy5yZXNvbHZlKFguVCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTGkoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1lLmZvckVhY2hUYXJnZXQodCwgKHQgPT4gbi5mZSh0LnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMubWUueWUodCwgKHQgPT4gbi5mZSh0KSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKTtcbiAgICB9XG4gICAgY29sbGVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIGpzLnJlc29sdmUoQWkpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKHQpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgQWkpIDogdGhpcy5wZSh0LCBlKSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZS5nZXRDYWNoZVNpemUodCk7XG4gICAgfVxuICAgIHBlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMsIGksIHIsIG8sIGEsIHU7XG4gICAgICAgIGNvbnN0IGggPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0LCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICBlID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHtlfWApLCBcbiAgICAgICAgcyA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogcyA9IGUsIHIgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKHQsIHMpKSkpLm5leHQoKHMgPT4gKG4gPSBzLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyh0LCBuLCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgYSA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIG4pKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHUgPSBEYXRlLm5vdygpLCB4KCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXG5jbGFzcyBxaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaSh0LCBlKTtcbiAgICAgICAgfSh0aGlzLCBlKTtcbiAgICB9XG4gICAgZ2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5UZSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIFRlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy55ZSh0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRWUodCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBLaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEtpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBLaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgSWUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBDaSh0KS5qdCgocyA9PiBWaSh0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCBqcy5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5FZSh0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5JZSh0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociksIE9pKHQpLmRlbGV0ZShbIDAsIEVzKHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGpzLndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gS2kodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgRWUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gT2kodCk7XG4gICAgICAgIGxldCBzLCBpID0gWC5UO1xuICAgICAgICByZXR1cm4gbi5LdCh7XG4gICAgICAgICAgICBpbmRleDogJHMuZG9jdW1lbnRUYXJnZXRzSW5kZXhcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IFguVCAmJiBlKG5ldyBQdChScyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBYLlQ7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gWC5UICYmIGUobmV3IFB0KFJzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBLaSh0LCBlKSB7XG4gICAgcmV0dXJuIE9pKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgJHMoMCwgRXModC5wYXRoKSwgZSk7XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyBqaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgICAgICBzLnB1c2goWyB0LCBlIF0pO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGN0KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gYXQodGhpcy5pbm5lcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgUWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgamkoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICBnZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IGUucmVhZFRpbWUgOiBydC5taW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdCxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCksXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IGpzLnJlc29sdmUobi5kb2N1bWVudCkgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBXaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk4gPSB0LCB0aGlzLkh0ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gSGkodCkucHV0KEppKGUpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBIaSh0KSwgcyA9IEppKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5BZSh0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICByZXR1cm4gSGkodCkuZ2V0KEppKGUpKS5uZXh0KCh0ID0+IHRoaXMuUmUoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgYmUodCwgZSkge1xuICAgICAgICByZXR1cm4gSGkodCkuZ2V0KEppKGUpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudDogdGhpcy5SZShlLCB0KSxcbiAgICAgICAgICAgIHNpemU6IFBpKHQpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IFRuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLlBlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuUmUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIHZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBUbigpLCBzID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5QZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLlJlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgUGkoZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFZlOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIFBlKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4ganMucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBlLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSksIGkgPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBIaSh0KS5LdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBQdC5mcm9tU2VnbWVudHModCk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ciAmJiBQdC5jb21wYXJhdG9yKHIsIG8pIDwgMDsgKSBuKHIsIG51bGwpLCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgICAgICByICYmIHIuaXNFcXVhbChvKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKHIsIGUpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgciA/IHMuTXQoci5wYXRoLnRvQXJyYXkoKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO3I7ICkgbihyLCBudWxsKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFRuKCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgubGVuZ3RoICsgMSwgciA9IHt9O1xuICAgICAgICBpZiAobi5pc0VxdWFsKHJ0Lm1pbigpKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKSwgcyA9IGFpKG4pO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0LCBzIF0sIFxuICAgICAgICAgICAgLyogb3Blbj0gKi8gITApLCByLmluZGV4ID0gTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhpKHQpLkt0KHIsICgodCwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXG4gICAgICAgICAgICBpZiAodC5sZW5ndGggIT09IGkpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBvaSh0aGlzLk4sIG4pO1xuICAgICAgICAgICAgZS5wYXRoLmlzUHJlZml4T2Yoby5rZXkucGF0aCkgPyBQZShlLCBvKSAmJiAocyA9IHMuaW5zZXJ0KG8ua2V5LCBvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHaSh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiB6aSh0KS5nZXQoeHMua2V5KS5uZXh0KCh0ID0+IChCKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIEFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHppKHQpLnB1dCh4cy5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgUmUodCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG9pKHRoaXMuTiwgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgR2kgZXh0ZW5kcyBRaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkRlID0gbmV3IGppKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IGduKCgodCwgZSkgPT4gZXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuRGUuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHIuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gY2kodGhpcy5TZS5OLCByLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IFBpKGMpO1xuICAgICAgICAgICAgICAgIG4gKz0gYSAtIG8sIGUucHVzaCh0aGlzLlNlLmFkZEVudHJ5KHQsIGksIGMpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gY2kodGhpcy5TZS5OLCBLdC5uZXdOb0RvY3VtZW50KGksIHJ0Lm1pbigpKSwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfSBlbHNlIGUucHVzaCh0aGlzLlNlLnJlbW92ZUVudHJ5KHQsIGkpKTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMuU2UuSHQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLlNlLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwganMud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5TZS5iZSh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLkRlLnNldChlLCB0LnNpemUpLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLlNlLnZlKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBWZTogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRGUuc2V0KHQsIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB6aSh0KSB7XG4gICAgcmV0dXJuIGVpKHQsIHhzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gSGkodCkge1xuICAgIHJldHVybiBlaSh0LCBOcy5zdG9yZSk7XG59XG5cbmZ1bmN0aW9uIEppKHQpIHtcbiAgICByZXR1cm4gdC5wYXRoLnRvQXJyYXkoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyBZaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk4gPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIEN0KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgQihuIDwgcyAmJiBuID49IDAgJiYgcyA8PSAxMSk7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgUXMoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShQcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUodnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiB2cy5rZXlQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoVnMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBWcy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChWcy51c2VyTXV0YXRpb25zSW5kZXgsIFZzLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoU3Muc3RvcmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgWGkodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0ganMucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKCRzLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShrcy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpO1xuICAgICAgICB9KHQpLCBYaSh0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoT3Muc3RvcmUpLCBuID0gbmV3IE9zKFxuICAgICAgICAgICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXG4gICAgICAgICAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCBydC5taW4oKS50b1RpbWVzdGFtcCgpLCBcbiAgICAgICAgICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoT3Mua2V5LCBuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICovIChpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShWcy5zdG9yZSkuTHQoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFZzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFZzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFZzLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoVnMudXNlck11dGF0aW9uc0luZGV4LCBWcy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoVnMuc3RvcmUpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ganMud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE1zLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IE1zLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5DZShpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZSh4cy5zdG9yZSk7XG4gICAgICAgIH0odCksIHRoaXMuTmUoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMueGUoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5rZSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5vYmplY3RTdG9yZShOcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChOcy5yZWFkVGltZUluZGV4LCBOcy5yZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoTnMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsIE5zLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy4kZShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShMcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBMcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShCcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBCcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgIH0pKSksIHI7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShOcy5zdG9yZSkuS3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IFBpKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB4cyhlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKHhzLnN0b3JlKS5wdXQoeHMua2V5LCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKHZzLnN0b3JlKSwgbiA9IHQuc3RvcmUoVnMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKGUgPT4ganMuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLkx0KFZzLnVzZXJNdXRhdGlvbnNJbmRleCwgcykubmV4dCgobiA9PiBqcy5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBCKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGZpKHRoaXMuTiwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoJHMuc3RvcmUpLCBuID0gdC5zdG9yZShOcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKE9zLnN0b3JlKS5nZXQoT3Mua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLkt0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgaHQobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIEVzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8ganMucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQobmV3ICRzKDAsIEVzKG4pLCB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBqcy53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2UodCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEZzLnN0b3JlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBGcy5rZXlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShGcy5zdG9yZSksIHMgPSBuZXcgVGksIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogRXMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoTnMuc3RvcmUpLkt0KHtcbiAgICAgICAgICAgIHF0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgaHQodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKFNzLnN0b3JlKS5LdCh7XG4gICAgICAgICAgICBxdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBScyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgICRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoa3Muc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5LdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBkaShuKSwgaSA9IHdpKHRoaXMuTiwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFhpKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKCRzLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6ICRzLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleCgkcy5kb2N1bWVudFRhcmdldHNJbmRleCwgJHMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoa3Muc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDoga3Mua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KGtzLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwga3MucXVlcnlUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpO1xufVxuXG5jb25zdCBaaSA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyB0ciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIGMsIGEsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLk9lID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5GZSA9IGEsIHRoaXMuTWUgPSB1LCB0aGlzLkxlID0gbnVsbCwgXG4gICAgICAgIHRoaXMuQmUgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuVWUgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5xZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuS2UgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuamUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLlFlID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIXRyLmJ0KCkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IHFpKHRoaXMsIHMpLCB0aGlzLldlID0gZSArIFwibWFpblwiLCB0aGlzLk4gPSBuZXcgcmkoYyksIFxuICAgICAgICB0aGlzLkdlID0gbmV3IFdzKHRoaXMuV2UsIDExLCBuZXcgWWkodGhpcy5OKSksIHRoaXMuemUgPSBuZXcgeGkodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5OKSwgXG4gICAgICAgIHRoaXMuSHQgPSBuZXcgRWksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFdpKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcbiAqIHRpbWUuXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgKHRoaXMuTiwgdGhpcy5IdCksIHRoaXMuSmUgPSBuZXcgbWksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuWWUgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5ZZSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlhlKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFppKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlplKCksIHRoaXMudG4oKSwgdGhpcy5lbigpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy56ZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5MZSA9IG5ldyBYKHQsIHRoaXMuRmUpO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5CZSA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuR2UgJiYgdGhpcy5HZS5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIG5uKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWUgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLkdlLnh0KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuWGUoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBYZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbnIodCkucHV0KG5ldyBNcyh0aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCB0aGlzLm5ldHdvcmtFbmFibGVkLCB0aGlzLmluRm9yZWdyb3VuZCkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuc24odCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMucm4odCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5vbih0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuY24odCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKEhzKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuUWUodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNuKHQpIHtcbiAgICAgICAgcmV0dXJuIGVyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4ganMucmVzb2x2ZSh0aGlzLmFuKHQpKSkpO1xuICAgIH1cbiAgICB1bih0KSB7XG4gICAgICAgIHJldHVybiBucih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBobigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmxuKHRoaXMuamUsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmplID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGVpKHQsIE1zLnN0b3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5MdCgpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5mbih0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpzLmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ZZSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuWWUucmVtb3ZlSXRlbSh0aGlzLmRuKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIGVuKCkge1xuICAgICAgICB0aGlzLktlID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5YZSgpLnRoZW4oKCgpID0+IHRoaXMuaG4oKSkpLnRoZW4oKCgpID0+IHRoaXMuZW4oKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICBhbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgdC5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBybih0KSB7XG4gICAgICAgIGlmICh0aGlzLk1lKSByZXR1cm4ganMucmVzb2x2ZSghMCk7XG4gICAgICAgIHJldHVybiBlcih0KS5nZXQoUHMua2V5KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLmxuKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy53bihlLm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW4oZSkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hbihlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgWmkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICEoIXRoaXMubmV0d29ya0VuYWJsZWQgfHwgIXRoaXMuaW5Gb3JlZ3JvdW5kKSB8fCBucih0KS5MdCgpLm5leHQoKHQgPT4gdm9pZCAwID09PSB0aGlzLmZuKHQsIDVlMykuZmluZCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IHQuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIHQubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgdC5pbkZvcmVncm91bmQsIHMgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSB0Lm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZSB8fCBuICYmIHMpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAke3QgPyBcImlzXCIgOiBcImlzIG5vdFwifSBlbGlnaWJsZSBmb3IgYSBwcmltYXJ5IGxlYXNlLmApLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIFRoZSBzaHV0ZG93bigpIG9wZXJhdGlvbnMgYXJlIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSBjYWxsZWQgZXZlbiB3aGVuXG4gICAgICAgIC8vIHN0YXJ0KCkgYWJvcnRlZCAoZS5nLiBiZWNhdXNlIGl0IGNvdWxkbid0IGFjcXVpcmUgdGhlIHBlcnNpc3RlbmNlIGxlYXNlKS5cbiAgICAgICAgdGhpcy5CZSA9ICExLCB0aGlzLl9uKCksIHRoaXMuS2UgJiYgKHRoaXMuS2UuY2FuY2VsKCksIHRoaXMuS2UgPSBudWxsKSwgdGhpcy5tbigpLCBcbiAgICAgICAgdGhpcy5nbigpLCBcbiAgICAgICAgLy8gVXNlIGBTaW1wbGVEYi5ydW5UcmFuc2FjdGlvbmAgZGlyZWN0bHkgdG8gYXZvaWQgZmFpbGluZyBpZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBoYXMgb2J0YWluZWQgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgIGF3YWl0IHRoaXMuR2UucnVuVHJhbnNhY3Rpb24oXCJzaHV0ZG93blwiLCBcInJlYWR3cml0ZVwiLCBbIFBzLnN0b3JlLCBNcy5zdG9yZSBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHRpKHQsIFguVCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbihlKS5uZXh0KCgoKSA9PiB0aGlzLnVuKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5HZS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMueW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgZm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5maWx0ZXIoKHQgPT4gdGhpcy5sbih0LnVwZGF0ZVRpbWVNcywgZSkgJiYgIXRoaXMud24odC5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgcG4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IG5yKHQpLkx0KCkubmV4dCgodCA9PiB0aGlzLmZuKHQsIDE4ZTUpLm1hcCgodCA9PiB0LmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCkge1xuICAgICAgICByZXR1cm4gdmkuWXQodCwgdGhpcy5OLCB0aGlzLkh0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnplO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IdDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IFwicmVhZG9ubHlcIiA9PT0gZSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5HZS5ydW5UcmFuc2FjdGlvbih0LCBzLCBVcywgKHMgPT4gKGkgPSBuZXcgdGkocywgdGhpcy5MZSA/IHRoaXMuTGUubmV4dCgpIDogWC5UKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMuc24oaSkubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5ybihpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBPKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFlKCExKSkpLCBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIHFzKTtcbiAgICAgICAgICAgIHJldHVybiBuKGkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLmNuKGkpLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5UbihpKS5uZXh0KCgoKSA9PiBuKGkpKSkpKSkudGhlbigodCA9PiAoaS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIFRuKHQpIHtcbiAgICAgICAgcmV0dXJuIGVyKHQpLmdldChQcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5sbih0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMud24odC5vd25lcklkKSAmJiAhdGhpcy5hbih0KSAmJiAhKHRoaXMuTWUgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBaaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBjbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUHModGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiBlcih0KS5wdXQoUHMua2V5LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIGJ0KCkge1xuICAgICAgICByZXR1cm4gV3MuYnQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgb24odCkge1xuICAgICAgICBjb25zdCBlID0gZXIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChQcy5rZXkpLm5leHQoKHQgPT4gdGhpcy5hbih0KSA/ICgkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShQcy5rZXkpKSA6IGpzLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgbG4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKE8oYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIFplKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLnFlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5YZSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIG1uKCkge1xuICAgICAgICB0aGlzLnFlICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMucWUpLCB0aGlzLnFlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB0bigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMuVWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5fbigpLCBpc1NhZmFyaSgpICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKFwiVmVyc2lvbi8xNFwiKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0IHRyaWdnZXJcbiAgICAgICAgICAgIC8vIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5PZS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5VZSkpO1xuICAgIH1cbiAgICBnbigpIHtcbiAgICAgICAgdGhpcy5VZSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuVWUpLCB0aGlzLlVlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIHduKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09IChlID0gdGhpcy5ZZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5nZXRJdGVtKHRoaXMuZG4odCkpKTtcbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgYENsaWVudCAnJHt0fScgJHtuID8gXCJpc1wiIDogXCJpcyBub3RcIn0gem9tYmllZCBpbiBMb2NhbFN0b3JhZ2VgKSwgXG4gICAgICAgICAgICBuO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZ2V0IHpvbWJpZWQgY2xpZW50IGlkLlwiLCB0KSwgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIF9uKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWWUuc2V0SXRlbSh0aGlzLmRuKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIE8oXCJGYWlsZWQgdG8gc2V0IHpvbWJpZSBjbGllbnQgaWQuXCIsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZW1vdmVzIHRoZSB6b21iaWVkIGNsaWVudCBlbnRyeSBpZiBpdCBleGlzdHMuICovICAgIHluKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuWWUucmVtb3ZlSXRlbSh0aGlzLmRuKHRoaXMuY2xpZW50SWQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH1cbiAgICB9XG4gICAgZG4odCkge1xuICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV96b21iaWVfJHt0aGlzLnBlcnNpc3RlbmNlS2V5fV8ke3R9YDtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBlaSh0LCBQcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIG5yKHQpIHtcbiAgICByZXR1cm4gZWkodCwgTXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBzcih0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgaXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHQsIHRoaXMuRW4gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyByciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLkhlID0gdCwgdGhpcy5JbiA9IGUsIHRoaXMuSHQgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IGlkZW50aWZpZWQgYnkgYGtleWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBMb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBvciBudWxsIGlmIHdlIGRvbid0IGhhdmUgYW55IGNhY2hlZFxuICAgICAqIHN0YXRlIGZvciBpdC5cbiAgICAgKi8gICAgQW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKS5uZXh0KChuID0+IHRoaXMuUm4odCwgZSwgbikpKTtcbiAgICB9XG4gICAgLyoqIEludGVybmFsIHZlcnNpb24gb2YgYGdldERvY3VtZW50YCB0aGF0IGFsbG93cyByZXVzaW5nIGJhdGNoZXMuICovICAgIFJuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZS5hcHBseVRvTG9jYWxWaWV3KHQpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gYGRvY3NgIGFzIHRoZXkgd291bGQgYXBwZWFyIGFmdGVyIGFwcGx5aW5nXG4gICAgLy8gYWxsIG11dGF0aW9ucyBpbiB0aGUgZ2l2ZW4gYGJhdGNoZXNgLlxuICAgIGJuKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHQuYXBwbHlUb0xvY2FsVmlldyhuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXG4gICAgICpcbiAgICAgKiBJZiB3ZSBkb24ndCBoYXZlIGNhY2hlZCBzdGF0ZSBmb3IgYSBkb2N1bWVudCBpbiBga2V5c2AsIGEgTm9Eb2N1bWVudCB3aWxsXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cbiAgICAgKi8gICAgUG4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZS5nZXRFbnRyaWVzKHQsIGUpLm5leHQoKGUgPT4gdGhpcy52bih0LCBlKS5uZXh0KCgoKSA9PiBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbG9jYWwgdmlldyB0aGUgZ2l2ZW4gYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzXG4gICAgICogZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICovICAgIHZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4gdGhpcy5ibihlLCB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHZpZXcgb2YgYWxsIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbi5cbiAgICAgKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgdG8gbWF0Y2ggZG9jdW1lbnRzIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHNpbmNlUmVhZFRpbWUgLSBJZiBub3Qgc2V0IHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcmV0dXJuIG9ubHlcbiAgICAgKiAgICAgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHJlYWQgc2luY2UgdGhpcyBzbmFwc2hvdCB2ZXJzaW9uIChleGNsdXNpdmUpLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBQdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuVm4odCwgZS5wYXRoKSA6IHBlKGUpID8gdGhpcy5Tbih0LCBlLCBuKSA6IHRoaXMuRG4odCwgZSwgbik7XG4gICAgfVxuICAgIFZuKHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLkFuKHQsIG5ldyBQdChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IEluKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgU24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gSW4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHQuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiBqcy5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBmZShlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovIChlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkRuKHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBEbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHMsIGk7XG4gICAgICAgIHJldHVybiB0aGlzLkhlLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgobiA9PiAocyA9IG4sIHRoaXMuSW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIFxuICAgICAgICB0aGlzLkNuKHQsIGksIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgaSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5O1xuICAgICAgICAgICAgICAgIGxldCBpID0gcy5nZXQobik7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpICYmIChcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW52YWxpZCBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgb24gdG9wIG9mXG4gICAgICAgICAgICAgICAgaSA9IEt0Lm5ld0ludmFsaWREb2N1bWVudChuKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSwgWWUoZSwgaSwgdC5sb2NhbFdyaXRlVGltZSksIGkuaXNGb3VuZERvY3VtZW50KCkgfHwgKHMgPSBzLnJlbW92ZShuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiAoXG4gICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXG4gICAgICAgIC8vIHRoZSBxdWVyeS5cbiAgICAgICAgcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgUGUoZSwgbikgfHwgKHMgPSBzLnJlbW92ZSh0KSk7XG4gICAgICAgIH0pKSwgcykpKTtcbiAgICB9XG4gICAgQ24odCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFBuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIGUgaW5zdGFuY2VvZiBubiAmJiBudWxsID09PSBuLmdldChlLmtleSkgJiYgKHMgPSBzLmFkZChlLmtleSkpO1xuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIHJldHVybiB0aGlzLkhlLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiAodC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuaW5zZXJ0KHQsIGUpKTtcbiAgICAgICAgfSkpLCBpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqLyBjbGFzcyBvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLk5uID0gbiwgdGhpcy54biA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyBrbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gUG4oKSwgcyA9IFBuKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZCh0LmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICBzID0gcy5hZGQodC5kb2Mua2V5KTtcbiAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IG9yKHQsIGUuZnJvbUNhY2hlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcXVlcnkgZW5naW5lIHRoYXQgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSB0YXJnZXQgZG9jdW1lbnQgbWFwcGluZyBpbiB0aGVcbiAqIFF1ZXJ5Q2FjaGUuIFF1ZXJ5IGV4ZWN1dGlvbiBpcyBvcHRpbWl6ZWQgYnkgb25seSByZWFkaW5nIHRoZSBkb2N1bWVudHMgdGhhdFxuICogcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnkgZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlXG4gKiBxdWVyeSB3YXMgbGFzdCBsaXN0ZW5lZCB0by5cbiAqXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVuIHRoaXMgb3B0aW1pemF0aW9uIGlzIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcbiAqIHRoZSBzYW1lIHJlc3VsdHMgYXMgZnVsbCBjb2xsZWN0aW9uIHNjYW5zLiBJbiB0aGVzZSBjYXNlcywgcXVlcnlcbiAqIHByb2Nlc3NpbmcgZmFsbHMgYmFjayB0byBmdWxsIHNjYW5zLiBUaGVzZSBjYXNlcyBhcmU6XG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxuICogICBtYXRjaGVzIHRoZSBxdWVyeS5cbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xuICogICBhbm90aGVyIGRvY3VtZW50IHRoYXQgaXMgaW4gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgbGltYm8gZG9jdW1lbnRzLlxuICovIGNsYXNzIGNyIHtcbiAgICAvKiogU2V0cyB0aGUgZG9jdW1lbnQgdmlldyB0byBxdWVyeSBhZ2FpbnN0LiAqL1xuICAgICRuKHQpIHtcbiAgICAgICAgdGhpcy5PbiA9IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xuICAgICAgICB9KGUpIHx8IG4uaXNFcXVhbChydC5taW4oKSkgPyB0aGlzLkZuKHQsIGUpIDogdGhpcy5Pbi5Qbih0LCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLk1uKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIChfZShlKSB8fCBtZShlKSkgJiYgdGhpcy5MbihlLmxpbWl0VHlwZSwgciwgcywgbikgPyB0aGlzLkZuKHQsIGUpIDogKHgoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiAkKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBuLnRvU3RyaW5nKCksIGJlKGUpKSwgXG4gICAgICAgICAgICB0aGlzLk9uLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikubmV4dCgodCA9PiAoXG4gICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcbiAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXG4gICAgICAgICAgICByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgICAgICB9KSksIHQpKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgTW4odCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgZ24odmUodCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgUGUodCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBMbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdCA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBGbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB4KCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgJChcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgYmUoZSkpLCBcbiAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIHJ0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkJuID0gZSwgdGhpcy5OID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VbiA9IG5ldyB3bihldCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLnFuID0gbmV3IGppKCh0ID0+IFd0KHQpKSwgenQpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByZWFkIHRpbWUgb2YgdGhlIGxhc3QgZW50cnkgcHJvY2Vzc2VkIGJ5IGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLktuID0gcnQubWluKCksIHRoaXMuSW4gPSB0LmdldE11dGF0aW9uUXVldWUobiksIHRoaXMuam4gPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuemUgPSB0LmdldFRhcmdldENhY2hlKCksIHRoaXMuUW4gPSBuZXcgcnIodGhpcy5qbiwgdGhpcy5JbiwgdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIFxuICAgICAgICB0aGlzLkplID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLkJuLiRuKHRoaXMuUW4pO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMuVW4pKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IGFyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIGhyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBsZXQgcyA9IG4uSW4sIGkgPSBuLlFuO1xuICAgIGNvbnN0IHIgPSBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLkluLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChvID0+IChyID0gbywgcyA9IG4ucGVyc2lzdGVuY2UuZ2V0TXV0YXRpb25RdWV1ZShlKSwgXG4gICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xuICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxuICAgICAgICBpID0gbmV3IHJyKG4uam4sIHMsIG4ucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBQbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgICAgICBuLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgIHMucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgc2V0IG9mIGFsbCAocG90ZW50aWFsbHkpIGNoYW5nZWQgZG9jdW1lbnRzIGFuZCB0aGUgbGlzdFxuICAgICAgICAgICAgLy8gb2YgbXV0YXRpb24gYmF0Y2ggSURzIHRoYXQgd2VyZSBhZmZlY3RlZCBieSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5Qbih0LCBvKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgV246IHQsXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiBuLFxuICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHM6IHNcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKTtcbiAgICB9KSk7XG4gICAgcmV0dXJuIG4uSW4gPSBzLCBuLlFuID0gaSwgbi5Cbi4kbihuLlFuKSwgcjtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGxyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IGpzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBCKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBzLmFkZEVudHJ5KGUsIG4uY29tbWl0VmVyc2lvbikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiB0LkluLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgaSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IGEgbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuLCB0LCBlLCBpKS5uZXh0KCgoKSA9PiBpLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Jbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uUW4uUG4odCwgcykpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCBwcm9jZXNzZWQgKHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvXG4gKiBkZXRlcm1pbmUgd2hldGhlciB0byBidWZmZXIgaW5jb21pbmcgc25hcHNob3RzIGZyb20gdGhlIGJhY2tlbmQpLlxuICovXG5mdW5jdGlvbiBmcih0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gZHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLlVuO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gbi5qbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4uVW47XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gaS5nZXQocik7XG4gICAgICAgICAgICBpZiAoIWMpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi56ZS5yZW1vdmVNYXRjaGluZ0tleXModCwgZS5yZW1vdmVkRG9jdW1lbnRzLCByKS5uZXh0KCgoKSA9PiBuLnplLmFkZE1hdGNoaW5nS2V5cyh0LCBlLmFkZGVkRG9jdW1lbnRzLCByKSkpKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBlLnJlc3VtZVRva2VuO1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXN1bWUgdG9rZW4gaWYgdGhlIGNoYW5nZSBpbmNsdWRlcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYS5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGMud2l0aFJlc3VtZVRva2VuKGEsIHMpLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHIsIHUpLCBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgICAgICAvLyBzdWZmaWNpZW50IHRpbWUgaGFzIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLlxuICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChCKGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksIDAgPT09IHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaXQncyBub3Qgd29ydGggcGVyc2lzdGluZy4gTm90ZSB0aGF0IHRoZSBSZW1vdGVTdG9yZSBrZWVwcyBhblxuICAgICAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwLXRvLWRhdGUgcmVzdW1lIHRva2VuIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB3ZSBkbyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChjLCB1LCBlKSAmJiBvLnB1c2gobi56ZS51cGRhdGVUYXJnZXREYXRhKHQsIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgYyA9IFRuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgZS5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhzKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KHQsIHMpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbCB0aGUgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaCh3cih0LCByLCBlLmRvY3VtZW50VXBkYXRlcywgcywgdm9pZCAwKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGMgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKHJ0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4uemUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4uemUuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqcy53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLlFuLnZuKHQsIGMpKSkubmV4dCgoKCkgPT4gYykpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLlVuID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24gd3IodCwgZSwgbiwgcywgXG4vLyBUT0RPKHd1YW5keSk6IFdlIGNvdWxkIGFkZCBgcmVhZFRpbWVgIHRvIE1heWJlRG9jdW1lbnQgaW5zdGVhZCB0byByZW1vdmVcbi8vIHRoaXMgcGFyYW1ldGVyLlxuaSkge1xuICAgIGxldCByID0gUG4oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIgPSByLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcikubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCByID0gVG4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSB0LmdldChuKSwgYSA9IChudWxsID09IGkgPyB2b2lkIDAgOiBpLmdldChuKSkgfHwgcztcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICBvLmlzTm9Eb2N1bWVudCgpICYmIG8udmVyc2lvbi5pc0VxdWFsKHJ0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBhKSwgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICFjLmlzVmFsaWREb2N1bWVudCgpIHx8IG8udmVyc2lvbi5jb21wYXJlVG8oYy52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gby52ZXJzaW9uLmNvbXBhcmVUbyhjLnZlcnNpb24pICYmIGMuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KG8sIGEpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBvKSkgOiAkKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIGMudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgby52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCByO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uSW4uZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBtcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4uemUuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIGpzLnJlc29sdmUocykpIDogbi56ZS5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgaWkoZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLnplLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5Vbi5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uVW4gPSBuLlVuLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4ucW4uc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBncih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBzLlVuLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIUhzKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgJChcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5VbiA9IHMuVW4ucmVtb3ZlKGUpLCBzLnFuLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIHlyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICBsZXQgaSA9IHJ0Lm1pbigpLCByID0gUG4oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xbi5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyBqcy5yZXNvbHZlKHMuVW4uZ2V0KGkpKSA6IHMuemUuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIEVlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLnplLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5Cbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4gPyBpIDogcnQubWluKCksIG4gPyByIDogUG4oKSkpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgR246IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBwcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBxKG4uemUpLCBpID0gbi5Vbi5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuVHQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gVHIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KTtcbiAgICAgICAgbGV0IGkgPSBUbigpLCByID0gYWkobik7XG4gICAgICAgIGNvbnN0IG8gPSBIaShlKSwgYyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQociwgITApO1xuICAgICAgICByZXR1cm4gby5LdCh7XG4gICAgICAgICAgICBpbmRleDogTnMucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBjXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgLy8gVW5saWtlIGBnZXRFbnRyeSgpYCBhbmQgb3RoZXJzLCBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgIHBhcnNlc1xuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBvaShzLk4sIGUpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KG4ua2V5LCBuKSwgciA9IGUucmVhZFRpbWU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgRW46IGksXG4gICAgICAgICAgICByZWFkVGltZTogdWkocilcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSByZWFkIHRpbWUgb2YgdGhlIG1vc3QgcmVjZW50bHkgcmVhZCBkb2N1bWVudCBpbiB0aGUgY2FjaGUsIG9yXG4gKiBTbmFwc2hvdFZlcnNpb24ubWluKCkgaWYgbm90IGF2YWlsYWJsZS5cbiAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgKGUuam4sIHQsIGUuS24pKSkudGhlbigoKHtFbjogdCwgcmVhZFRpbWU6IG59KSA9PiAoZS5LbiA9IG4sIHQpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgbW92ZXMgdGhlIGludGVybmFsXG4gKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIGZvcndhcmQgc28gdGhhdCBjYWxscyB0byBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gKiBvbmx5IHJldHVybiBjaGFuZ2VzIHRoYXQgaGFwcGVuZWQgYWZ0ZXIgY2xpZW50IGluaXRpYWxpemF0aW9uLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gRXIodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gSGkodCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgICAgIGxldCBuID0gcnQubWluKCk7XG4gICAgICAgIHJldHVybiBlLkt0KHtcbiAgICAgICAgICAgIGluZGV4OiBOcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBlLnJlYWRUaW1lICYmIChuID0gdWkoZS5yZWFkVGltZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9KHQpKSkudGhlbigodCA9PiB7XG4gICAgICAgIGUuS24gPSB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBJcih0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgbGV0IHIgPSBQbigpLCBvID0gVG4oKSwgYyA9IFJuKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUuem4odC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKSwgbyA9IG8uaW5zZXJ0KG4sIGUuSG4odCkpLCBjID0gYy5pbnNlcnQobiwgZS5Kbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpLmpuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIHUgPSBhd2FpdCBtcihpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBFZSh3ZShodC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gd3IodCwgYSwgbywgcnQubWluKCksIGMpLm5leHQoKGUgPT4gKGEuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLnplLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHUudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIHUudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5Rbi52bih0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBBcih0LCBlLCBuID0gUG4oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IG1yKHQsIEVlKF9pKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gcSh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gam4oZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4oX3QuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5VbiA9IGkuVW4uaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLnplLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS56ZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuemUuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5KZS5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5OID0gdCwgdGhpcy5ZbiA9IG5ldyBNYXAsIHRoaXMuWG4gPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMuWW4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4uc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogam4obi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Ybi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlhuLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfaSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGpuKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBiciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLlpuID0gbmV3IGduKFByLnRzKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLmVzID0gbmV3IGduKFByLm5zKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5abi5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcih0LCBlKTtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uYWRkKG4pLCB0aGlzLmVzID0gdGhpcy5lcy5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBzcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLnJzKG5ldyBQcih0LCBlKSk7XG4gICAgfVxuICAgIG9zKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIGNzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgaHQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMucnModCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgdXMoKSB7XG4gICAgICAgIHRoaXMuWm4uZm9yRWFjaCgodCA9PiB0aGlzLnJzKHQpKSk7XG4gICAgfVxuICAgIHJzKHQpIHtcbiAgICAgICAgdGhpcy5abiA9IHRoaXMuWm4uZGVsZXRlKHQpLCB0aGlzLmVzID0gdGhpcy5lcy5kZWxldGUodCk7XG4gICAgfVxuICAgIGhzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBQdChuZXcgaHQoW10pKSwgbiA9IG5ldyBQcihlLCB0KSwgcyA9IG5ldyBQcihlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gUG4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXMuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFByKHQsIDApLCBuID0gdGhpcy5abi5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIFByIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5scyA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyB0cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgZXQodC5scywgZS5scyk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBucyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBldCh0LmxzLCBlLmxzKSB8fCBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB2ciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkh0ID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JbiA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMuZnMgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuZHMgPSBuZXcgZ24oUHIudHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUoMCA9PT0gdGhpcy5Jbi5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZnM7XG4gICAgICAgIHRoaXMuZnMrKywgdGhpcy5Jbi5sZW5ndGggPiAwICYmIHRoaXMuSW5bdGhpcy5Jbi5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBuaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy5Jbi5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5kcyA9IHRoaXMuZHMuYWRkKG5ldyBQcihlLmtleSwgaSkpLCB0aGlzLkh0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUua2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUocik7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLndzKGUpKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSB0aGlzLl9zKG4pLCBpID0gcyA8IDAgPyAwIDogcztcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Jbi5sZW5ndGggPiBpID8gdGhpcy5JbltpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSgwID09PSB0aGlzLkluLmxlbmd0aCA/IC0xIDogdGhpcy5mcyAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLkluLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHIoZSwgMCksIHMgPSBuZXcgUHIoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5kcy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3ModC5scyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwganMucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgZ24oZXQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUHIodCwgMCksIHMgPSBuZXcgUHIodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuZHMuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5scyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwganMucmVzb2x2ZSh0aGlzLmdzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBQdC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUHIobmV3IFB0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBnbihldCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LmxzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBqcy5yZXNvbHZlKHRoaXMuZ3MobykpO1xuICAgIH1cbiAgICBncyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLndzKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEIoMCA9PT0gdGhpcy55cyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMuSW4uc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmRzO1xuICAgICAgICByZXR1cm4ganMuZm9yRWFjaChlLm11dGF0aW9ucywgKHMgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQcihzLmtleSwgZS5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgcy5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGUodCkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcihlLCAwKSwgcyA9IHRoaXMuZHMuZmlyc3RBZnRlck9yRXF1YWwobik7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKGUuaXNFcXVhbChzICYmIHMua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4ubGVuZ3RoLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICB5cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBfcyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkluLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLkluWzBdLmJhdGNoSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgdmVyc2lvbiBvZiBsb29rdXBNdXRhdGlvbkJhdGNoIHRoYXQgZG9lc24ndCByZXR1cm4gYSBwcm9taXNlLCB0aGlzIG1ha2VzXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXG4gICAgICovICAgIHdzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3ModCk7XG4gICAgICAgIGlmIChlIDwgMCB8fCBlID49IHRoaXMuSW4ubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW5bZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIFZyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSHQgPSB0LCB0aGlzLnBzID0gZSwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmtleSwgaSA9IHRoaXMuZG9jcy5nZXQocyksIHIgPSBpID8gaS5zaXplIDogMCwgbyA9IHRoaXMucHMoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KHMsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLmNsb25lKCksXG4gICAgICAgICAgICBzaXplOiBvLFxuICAgICAgICAgICAgcmVhZFRpbWU6IG5cbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSBvIC0gciwgdGhpcy5IdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBzLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKG4gPyBuLmRvY3VtZW50LmNsb25lKCkgOiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBUbigpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50LmNsb25lKCkgOiBLdC5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIGpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IFRuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBQdChlLnBhdGguY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaSwgcmVhZFRpbWU6IG99fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLnBhdGguaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIG8uY29tcGFyZVRvKG4pIDw9IDAgfHwgUGUoZSwgaSkgJiYgKHMgPSBzLmluc2VydChpLmtleSwgaS5jbG9uZSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUocyk7XG4gICAgfVxuICAgIFRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLmZvckVhY2godGhpcy5kb2NzLCAodCA9PiBlKHQpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXG4gICAgICAgIC8vIGEgc2VwYXJhdGUgY2hhbmdlbG9nIGFuZCBkb2VzIG5vdCBuZWVkIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlbW92YWxzLlxuICAgICAgICByZXR1cm4gbmV3IFNyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBBIGNsYXNzIHRoYXQgbWFuYWdlcyBjb2xsZWN0aW9uIGdyb3VwIGluZGljZXMuXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgU3IgZXh0ZW5kcyBRaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlNlID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMuU2UuYWRkRW50cnkodCwgcy5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShuKSkpIDogdGhpcy5TZS5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBqcy53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5TZS5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2UuZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRXMgPSBuZXcgamkoKHQgPT4gV3QodCkpLCB6dCksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gcnQubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLklzID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkFzID0gbmV3IGJyLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5ScyA9IE5pLnNlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Fcy5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4ganMucmVzb2x2ZSh0aGlzLklzKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuUnMubmV4dCgpLCBqcy5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5JcyAmJiAodGhpcy5JcyA9IGUpLCBcbiAgICAgICAganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjZSh0KSB7XG4gICAgICAgIHRoaXMuRXMuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5ScyA9IG5ldyBOaShlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuSXMgJiYgKHRoaXMuSXMgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKGUpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Fcy5kZWxldGUoZS50YXJnZXQpLCB0aGlzLkFzLmNzKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRXMuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Fcy5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIGpzLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXMuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBqcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Bcy5zcyhlLCBuKSwganMucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLkFzLm9zKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIGpzLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQXMuY3MoZSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Bcy5ocyhlKTtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGpzLnJlc29sdmUodGhpcy5Bcy5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIENyIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5icyA9IHt9LCB0aGlzLkxlID0gbmV3IFgoMCksIHRoaXMuQmUgPSAhMSwgdGhpcy5CZSA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgXG4gICAgICAgIHRoaXMuemUgPSBuZXcgRHIodGhpcyk7XG4gICAgICAgIHRoaXMuSHQgPSBuZXcgcGksIHRoaXMuSGUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZyKHQsIGUpO1xuICAgICAgICB9KHRoaXMuSHQsICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuUHModCkpKSwgdGhpcy5OID0gbmV3IHJpKGUpLCB0aGlzLkplID0gbmV3IFJyKHRoaXMuTik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLkJlID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQmU7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkh0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmJzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IHZyKHRoaXMuSHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLmJzW3QudG9LZXkoKV0gPSBlKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56ZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICAkKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTnIodGhpcy5MZS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS52cygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5WcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgU3ModCwgZSkge1xuICAgICAgICByZXR1cm4ganMub3IoT2JqZWN0LnZhbHVlcyh0aGlzLmJzKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIE5yIGV4dGVuZHMgS3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgeHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkRzID0gbmV3IGJyLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuQ3MgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgTnModCkge1xuICAgICAgICByZXR1cm4gbmV3IHhyKHQpO1xuICAgIH1cbiAgICBnZXQgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLkNzKSByZXR1cm4gdGhpcy5DcztcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Ecy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuZGVsZXRlKG4udG9TdHJpbmcoKSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHMucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmFkZChuLnRvU3RyaW5nKCkpLCBqcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSksIGpzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Ecy5jcyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIHZzKCkge1xuICAgICAgICB0aGlzLkNzID0gbmV3IFNldDtcbiAgICB9XG4gICAgVnModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBqcy5mb3JFYWNoKHRoaXMueHMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBQdC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLkNzID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMueHMuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFBzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAga3ModCwgZSkge1xuICAgICAgICByZXR1cm4ganMub3IoWyAoKSA9PiBqcy5yZXNvbHZlKHRoaXMuRHMuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuU3ModCwgZSkgXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGtyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiAkcih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIE9yKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgRnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgJHModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBqKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IEZyKHQsIGUsIHMuc3RhdGUsIGkpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgTXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBqKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IE1yKHQsIG4uc3RhdGUsIHMpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgTHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyAkcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IFZuKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IGJ0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IExyKHQsIGkpIDogKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgQnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljICRzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBCcihlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6IChPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBVciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gVm4oKTtcbiAgICB9XG4gICAgRnModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgTXModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBxciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuT2UgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5McyA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5CcyA9IHRoaXMuVXMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMucXMgPSBuZXcgd24oZXQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuS3MgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMuanMgPSBrcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkxzKSwgXG4gICAgICAgIHRoaXMuUXMgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMucXMgPSB0aGlzLnFzLmluc2VydCh0aGlzLkxzLCBuZXcgVXIpLCB0aGlzLldzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuR3MgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy56cyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5IcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5KcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Ccyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIGJ0KHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUucG4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLkxzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oa3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTHIuJHMoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5xcyA9IHRoaXMucXMuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLllzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Icyk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5YcyhlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy5acyh0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5LcykgdGhpcy5Vcyh0KTtcbiAgICAgICAgdGhpcy5LcyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlFzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGkodGhpcy5xcyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMuZWkodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5laSh0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMubmkodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShPcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBNci4kcyh0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuRnModCksIHRoaXMuWXMoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuc2kuTXModCksIHRoaXMuWXMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKE9yKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaWkodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5uaSh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yaSh0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICB0aGlzLm9pKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuQnMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5qcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIFVzKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMuanMpIHJldHVybiB2b2lkIE8oXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Xcy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNpKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5haSh0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy51aShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLmFpKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuR3MudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5saSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnpzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuZGkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWHMoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlpzKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLlFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gWC5UO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovIChlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgIT09IFguVCAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5KcykgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS53aSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLktzLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHNpKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcy5nZXQodGhpcy5Mcyk7XG4gICAgfVxuICAgIFlzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5qcywgdGhpcy5zaS5PcygpKTtcbiAgICB9XG4gICAgZWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IEZyKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gJHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLk9zKCkpO1xuICAgIH1cbiAgICBuaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAkcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICByaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5McyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuSHMsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgaWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gT3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgTXIodCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLk9zKCkpO1xuICAgIH1cbiAgICBvaSgpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuSnMsIFwidmFsdWUtbm90LXVzZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgY2kodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Xcy5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgdWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaSh0KTtcbiAgICAgICAgcmV0dXJuIExyLiRzKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBoaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkdzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIEZyLiRzKG5ldyBEKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy56cy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gTXIuJHMocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBYcyh0KSB7XG4gICAgICAgIHJldHVybiBCci4kcyh0KTtcbiAgICB9XG4gICAgYXN5bmMgbGkodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuX2kodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgZGkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLm1pKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICBhaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5xcy5pbnNlcnQodCwgZSkgOiB0aGlzLnFzLnJlbW92ZSh0KSwgcyA9IHRoaXMudGkodGhpcy5xcyksIGkgPSB0aGlzLnRpKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuZ2kociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5xcyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgWnModCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLnFzLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgdGkodCkge1xuICAgICAgICBsZXQgZSA9IFZuKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBLciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMueWkgPSBuZXcgVXIsIHRoaXMucGkgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aS5Gcyh0KSwgdGhpcy5waVt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnBpW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMueWkuTXModCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnBpW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnlpLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy55aSA9IG5ldyBVciwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MganIge1xuICAgIFRpKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIFFyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5FaSA9ICgpID0+IHRoaXMuSWkoKSwgdGhpcy5BaSA9ICgpID0+IHRoaXMuUmkoKSwgdGhpcy5iaSA9IFtdLCB0aGlzLlBpKCk7XG4gICAgfVxuICAgIFRpKHQpIHtcbiAgICAgICAgdGhpcy5iaS5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5FaSksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLkFpKTtcbiAgICB9XG4gICAgUGkoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuRWkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5BaSk7XG4gICAgfVxuICAgIElpKCkge1xuICAgICAgICAkKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBSaSgpIHtcbiAgICAgICAgJChcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuYmkpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBXciA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIEdyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmkgPSB0LnZpLCB0aGlzLlZpID0gdC5WaTtcbiAgICB9XG4gICAgU2kodCkge1xuICAgICAgICB0aGlzLkRpID0gdDtcbiAgICB9XG4gICAgQ2kodCkge1xuICAgICAgICB0aGlzLk5pID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy54aSA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlZpKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLnZpKHQpO1xuICAgIH1cbiAgICBraSgpIHtcbiAgICAgICAgdGhpcy5EaSgpO1xuICAgIH1cbiAgICAkaSh0KSB7XG4gICAgICAgIHRoaXMuTmkodCk7XG4gICAgfVxuICAgIE9pKHQpIHtcbiAgICAgICAgdGhpcy54aSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHpyIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5GaSA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLk1pID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgTGkodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5CaSh0LCBlKTtcbiAgICAgICAgJChcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIGksIG4pO1xuICAgICAgICBjb25zdCByID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLlVpKHIsIHMpLCB0aGlzLnFpKHQsIGksIHIsIG4pLnRoZW4oKHQgPT4gKCQoXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93IEYoXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCBpLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgS2kodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5MaSh0LCBlLCBuLCBzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIFVpKHQsIGUpIHtcbiAgICAgICAgaWYgKHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBDLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSkgZm9yIChjb25zdCBuIGluIGUuYXV0aEhlYWRlcnMpIGUuYXV0aEhlYWRlcnMuaGFzT3duUHJvcGVydHkobikgJiYgKHRbbl0gPSBlLmF1dGhIZWFkZXJzW25dKTtcbiAgICB9XG4gICAgQmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gV3JbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLkZpfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIHFpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIG8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIlhIUiByZWNlaXZlZDpcIiwgSlNPTi5zdHJpbmdpZnkoZSkpLCBpKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIHRpbWVkIG91dCcpLCByKG5ldyBqKEsuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhLKS5pbmRleE9mKGUpID49IDAgPyBlIDogSy5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgaihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgaihLLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCBjLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgamkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWyB0aGlzLkZpLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIHMgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIGkgPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgciA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKHIueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCB0aGlzLlVpKHIuaW5pdE1lc3NhZ2VIZWFkZXJzLCBlKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcbiAgICAgICAgLy8gVE9ETyhiLzE0NTYyNDc1Nik6IFRoZXJlIGlzIGEgYmFja2VuZCBidWcgd2hlcmUgJGh0dHBIZWFkZXJzIGlzbid0IHJlc3BlY3RlZCBpZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBkb2Vzbid0IGhhdmUgYW4gT3JpZ2luIGhlYWRlci4gU28gd2UgaGF2ZSB0byBleGNsdWRlIGEgZmV3IGJyb3dzZXIgZW52aXJvbm1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGtub3duIHRvIChzb21ldGltZXMpIG5vdCBpbmNsdWRlIGFuIE9yaWdpbi4gU2VlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzE0OTEuXG4gICAgICAgIGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKSB8fCBpc0VsZWN0cm9uKCkgfHwgaXNJRSgpIHx8IGlzVVdQKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgKHIuaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9IFwiJGh0dHBIZWFkZXJzXCIpO1xuICAgICAgICBjb25zdCBvID0gbi5qb2luKFwiXCIpO1xuICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiICsgbywgcik7XG4gICAgICAgIGNvbnN0IGMgPSBzLmNyZWF0ZVdlYkNoYW5uZWwobywgcik7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgYSA9ICExLCB1ID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgaCA9IG5ldyBHcih7XG4gICAgICAgICAgICB2aTogdCA9PiB7XG4gICAgICAgICAgICAgICAgdSA/ICQoXCJDb25uZWN0aW9uXCIsIFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIiwgdCkgOiAoYSB8fCAoJChcIkNvbm5lY3Rpb25cIiwgXCJPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LlwiKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIGEgPSAhMCksICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCBzZW5kaW5nOlwiLCB0KSwgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBWaTogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCBnID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICB1IHx8ICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLlwiKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgdSB8fCAodSA9ICEwLCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZFwiKSwgaC4kaSgpKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICB1IHx8ICh1ID0gITAsIEYoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIiwgdCksIGguJGkobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCBnKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCF1KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBCKCEhbik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4sIGkgPSBzLmVycm9yIHx8IChudWxsID09PSAoZSA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjpcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBoblt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBkbihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgbiA9IGkubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gSy5JTlRFUk5BTCwgbiA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIGkubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICB1ID0gITAsIGguJGkobmV3IGooZSwgbikpLCBjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIiwgbiksIGguT2kobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgZyhpLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyAkKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmICQoXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5XCIpO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgaC5raSgpO1xuICAgICAgICB9KSwgMCksIGg7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIEhyKCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBKcigpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIFlyKHQpIHtcbiAgICByZXR1cm4gbmV3IEJuKHQsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBYciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuT2UgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLlFpID0gbiwgdGhpcy5XaSA9IHMsIHRoaXMuR2kgPSBpLCB0aGlzLnppID0gMCwgXG4gICAgICAgIHRoaXMuSGkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLkppID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy56aSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBZaSgpIHtcbiAgICAgICAgdGhpcy56aSA9IHRoaXMuR2k7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgWGkodCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy56aSArIHRoaXMuWmkoKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5KaSksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmICQoXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMueml9IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuSGkgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLkppID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy56aSAqPSB0aGlzLldpLCB0aGlzLnppIDwgdGhpcy5RaSAmJiAodGhpcy56aSA9IHRoaXMuUWkpLCB0aGlzLnppID4gdGhpcy5HaSAmJiAodGhpcy56aSA9IHRoaXMuR2kpO1xuICAgIH1cbiAgICB0cigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5IaSAmJiAodGhpcy5IaS5za2lwRGVsYXkoKSwgdGhpcy5IaSA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSGkgJiYgKHRoaXMuSGkuY2FuY2VsKCksIHRoaXMuSGkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIFppKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLnppO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICB0aGlzLk9lID0gdCwgdGhpcy5lciA9IG4sIHRoaXMubnIgPSBzLCB0aGlzLnNyID0gaSwgdGhpcy5jcmVkZW50aWFsc1Byb3ZpZGVyID0gciwgXG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBvLCB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXIgPSAwLCB0aGlzLnJyID0gbnVsbCwgdGhpcy5jciA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5hciA9IG5ldyBYcih0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgdXIoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLmhyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIEVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLmxyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy51cigpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBkcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuYXIucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIHdyKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLmhyKCkgJiYgbnVsbCA9PT0gdGhpcy5yciAmJiAodGhpcy5yciA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5lciwgNmU0LCAoKCkgPT4gdGhpcy5fcigpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgbXIodCkge1xuICAgICAgICB0aGlzLmdyKCksIHRoaXMuc3RyZWFtLnNlbmQodCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgX3IoKSB7XG4gICAgICAgIGlmICh0aGlzLmhyKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgZ3IoKSB7XG4gICAgICAgIHRoaXMucnIgJiYgKHRoaXMucnIuY2FuY2VsKCksIHRoaXMucnIgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgeXIoKSB7XG4gICAgICAgIHRoaXMuY3IgJiYgKHRoaXMuY3IuY2FuY2VsKCksIHRoaXMuY3IgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5ncigpLCB0aGlzLnlyKCksIHRoaXMuYXIuY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLmlyKyssIDQgLyogRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLmFyLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gSy5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIE8oZS50b1N0cmluZygpKSwgTyhcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuYXIuWWkoKSkgOiBlICYmIGUuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBIZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5wcigpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLkNpKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgcHIoKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Ucih0aGlzLmlyKSwgZSA9IHRoaXMuaXI7XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLmlyID09PSBlICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLkVyKHQpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaihLLlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Jcih0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBFcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlRyKHRoaXMuaXIpO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuQXIodCksIHRoaXMuc3RyZWFtLlNpKCgoKSA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogT3BlbiAqLyAsIHRoaXMuY3IgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMubnIsIDFlNCwgKCgpID0+ICh0aGlzLmhyKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIEhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLlNpKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uQ2koKHQgPT4ge1xuICAgICAgICAgICAgZSgoKCkgPT4gdGhpcy5Jcih0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBlKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBCYWNrb2ZmICovICwgdGhpcy5hci5YaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIElyKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiAkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBUcih0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5pciA9PT0gdCA/IGUoKSA6ICgkKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgdG8gZXh0ZW5kcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgaSksIFxuICAgICAgICB0aGlzLk4gPSBzO1xuICAgIH1cbiAgICBBcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNyLmppKFwiTGlzdGVuXCIsIHQpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuYXIucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IG5zKHRoaXMuTiwgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gcnQubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gcnQubWluKCkgOiBlLnJlYWRUaW1lID8gam4oZS5yZWFkVGltZSkgOiBydC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuUnIoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIGJyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gWW4odGhpcy5OKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBuID0gSHQocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBvcyh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogY3ModCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgPyBuLnJlc3VtZVRva2VuID0gcW4odCwgZS5yZXN1bWVUb2tlbikgOiBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocnQubWluKCkpID4gMCAmJiAoXG4gICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICBuLnJlYWRUaW1lID0gVW4odCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLCBuO1xuICAgICAgICB9KHRoaXMuTiwgdCk7XG4gICAgICAgIGNvbnN0IG4gPSB1cyh0aGlzLk4sIHQpO1xuICAgICAgICBuICYmIChlLmxhYmVscyA9IG4pLCB0aGlzLm1yKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgUHIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBZbih0aGlzLk4pLCBlLnJlbW92ZVRhcmdldCA9IHQsIHRoaXMubXIoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgZW8gZXh0ZW5kcyBaciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBzdXBlcih0LCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFdyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBpKSwgXG4gICAgICAgIHRoaXMuTiA9IHMsIHRoaXMudnIgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgVnIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZyO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMudnIgPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHByKCkge1xuICAgICAgICB0aGlzLnZyICYmIHRoaXMuU3IoW10pO1xuICAgIH1cbiAgICBBcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNyLmppKFwiV3JpdGVcIiwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBCKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy52cikge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMuYXIucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBycyh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IGpuKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5EcihuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIEIoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMudnIgPSAhMCwgdGhpcy5saXN0ZW5lci5DcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBOcigpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IFluKHRoaXMuTiksIHRoaXMubXIodCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIFNyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gc3ModGhpcy5OLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubXIoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3Mgbm8gZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNyZWRlbnRpYWxzID0gdCwgdGhpcy5zciA9IGUsIHRoaXMuTiA9IG4sIHRoaXMua3IgPSAhMTtcbiAgICB9XG4gICAgJHIoKSB7XG4gICAgICAgIGlmICh0aGlzLmtyKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMuICovICAgIExpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHIoKSwgdGhpcy5jcmVkZW50aWFscy5nZXRUb2tlbigpLnRoZW4oKHMgPT4gdGhpcy5zci5MaSh0LCBlLCBuLCBzKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiB0aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBHZXRzIGFuIGF1dGggdG9rZW4gYW5kIGludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMuICovICAgIEtpKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHIoKSwgdGhpcy5jcmVkZW50aWFscy5nZXRUb2tlbigpLnRoZW4oKHMgPT4gdGhpcy5zci5LaSh0LCBlLCBuLCBzKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiB0aGlzLmNyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5rciA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIHNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PciA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NciA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgTHIoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuT3IgJiYgKHRoaXMuQnIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIHRoaXMuRnIgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIE9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLkZyID0gbnVsbCwgXG4gICAgICAgIHRoaXMuVXIoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5CcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIHFyKHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLkJyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pIDogKHRoaXMuT3IrKywgXG4gICAgICAgIHRoaXMuT3IgPj0gMSAmJiAodGhpcy5LcigpLCB0aGlzLlVyKGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLkJyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuS3IoKSwgdGhpcy5PciA9IDAsIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMuTXIgPSAhMSksIHRoaXMuQnIodCk7XG4gICAgfVxuICAgIEJyKHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgVXIodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5NciA/IChPKGUpLCB0aGlzLk1yID0gITEpIDogJChcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAgS3IoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRnIgJiYgKHRoaXMuRnIuY2FuY2VsKCksIHRoaXMuRnIgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGlvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuanIgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlFyID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV3IgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkdyID0gW10sIHRoaXMuenIgPSBpLCB0aGlzLnpyLlRpKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICB3byh0aGlzKSAmJiAoJChcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLldyLmFkZCg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IG9vKGUpLCBlLkhyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUuV3IuZGVsZXRlKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgcm8oZSk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5IciA9IG5ldyBzbyhuLCBzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJvKHQpIHtcbiAgICBpZiAod28odCkpIGZvciAoY29uc3QgZSBvZiB0LkdyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBvbyh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuR3IpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gY28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIG4uUXIuaGFzKGUudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi5Rci5zZXQoZS50YXJnZXRJZCwgZSksIGZvKG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBsbyhuKSA6IENvKG4pLmhyKCkgJiYgdW8obiwgZSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gYW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gQ28obik7XG4gICAgbi5Rci5kZWxldGUoZSksIHMuaHIoKSAmJiBobyhuLCBlKSwgMCA9PT0gbi5Rci5zaXplICYmIChzLmhyKCkgPyBzLndyKCkgOiB3byhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIHVvKHQsIGUpIHtcbiAgICB0LkpyLlkoZS50YXJnZXRJZCksIENvKHQpLmJyKGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIGhvKHQsIGUpIHtcbiAgICB0LkpyLlkoZSksIENvKHQpLlByKGUpO1xufVxuXG5mdW5jdGlvbiBsbyh0KSB7XG4gICAgdC5KciA9IG5ldyAkbih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgVHQ6IGUgPT4gdC5Rci5nZXQoZSkgfHwgbnVsbFxuICAgIH0pLCBDbyh0KS5zdGFydCgpLCB0LkhyLkxyKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBmbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmICFDbyh0KS51cigpICYmIHQuUXIuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIHdvKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gcSh0KS5Xci5zaXplO1xufVxuXG5mdW5jdGlvbiBfbyh0KSB7XG4gICAgdC5KciA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbW8odCkge1xuICAgIHQuUXIuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgdW8odCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnbyh0LCBlKSB7XG4gICAgX28odCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgZm8odCkgPyAodC5Ici5xcihlKSwgbG8odCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5Ici5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHlvKHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuSHIuc2V0KFwiT25saW5lXCIgLyogT25saW5lICovKSwgZSBpbnN0YW5jZW9mIHhuICYmIDIgLyogUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LlFyLmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LlFyLmRlbGV0ZShzKSwgdC5Kci5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgcG8odCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgQ24gPyB0LkpyLnJ0KGUpIDogZSBpbnN0YW5jZW9mIE5uID8gdC5Kci5mdChlKSA6IHQuSnIuYXQoZSksIFxuICAgICFuLmlzRXF1YWwocnQubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnIodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuSnIuX3QoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuUXIuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LlFyLnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LlFyLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW4pIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LlFyLnNldChlLCBuLndpdGhSZXN1bWVUb2tlbihfdC5FTVBUWV9CWVRFX1NUUklORywgbi5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgaG8odCwgZSk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IGlpKG4udGFyZ2V0LCBlLCAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovICwgbi5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgdW8odCwgcyk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBwbyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gcG8odCwgZSwgbikge1xuICAgIGlmICghSHMoZSkpIHRocm93IGU7XG4gICAgdC5Xci5hZGQoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgb28odCksIHQuSHIuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBmcih0LmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIHQuV3IuZGVsZXRlKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IHJvKHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIFRvKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IHBvKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEVvKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KSwgbiA9IE5vKGUpO1xuICAgIGxldCBzID0gZS5qci5sZW5ndGggPiAwID8gZS5qcltlLmpyLmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtJbyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX3IoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuanIubGVuZ3RoICYmIG4ud3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIEFvKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgcG8oZSwgdCk7XG4gICAgfVxuICAgIFJvKGUpICYmIGJvKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBJbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmIHQuanIubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIEFvKHQsIGUpIHtcbiAgICB0LmpyLnB1c2goZSk7XG4gICAgY29uc3QgbiA9IE5vKHQpO1xuICAgIG4uaHIoKSAmJiBuLlZyICYmIG4uU3IoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBSbyh0KSB7XG4gICAgcmV0dXJuIHdvKHQpICYmICFObyh0KS51cigpICYmIHQuanIubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gYm8odCkge1xuICAgIE5vKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICBObyh0KS5OcigpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB2byh0KSB7XG4gICAgY29uc3QgZSA9IE5vKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmpyKSBlLlNyKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVm8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LmpyLnNoaWZ0KCksIGkgPSBzaS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IFRvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBFbyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gU28odCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBObyh0KS5WciAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgZm4obikgJiYgbiAhPT0gSy5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5qci5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIE5vKHQpLmRyKCksIGF3YWl0IFRvKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IEVvKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgUm8odCkgJiYgYm8odCk7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIERvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBlID8gKG4uV3IuZGVsZXRlKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCBybyhuKSkgOiBlIHx8IChuLldyLmFkZCgyIC8qIElzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgb28obiksIG4uSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIENvKHQpIHtcbiAgICByZXR1cm4gdC5ZciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuWXIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgICAgICByZXR1cm4gcy4kcigpLCBuZXcgdG8oZSwgcy5zciwgcy5jcmVkZW50aWFscywgcy5OLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgU2k6IG1vLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENpOiBnby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBScjogeW8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LkdyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWXIuZHIoKSwgZm8odCkgPyBsbyh0KSA6IHQuSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKSA6IChhd2FpdCB0LllyLnN0b3AoKSwgXG4gICAgICAgIF9vKHQpKTtcbiAgICB9KSkpLCB0LllyO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gTm8odCkge1xuICAgIHJldHVybiB0LlhyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5YciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCk7XG4gICAgICAgIHJldHVybiBzLiRyKCksIG5ldyBlbyhlLCBzLnNyLCBzLmNyZWRlbnRpYWxzLCBzLk4sIG4pO1xuICAgIH0odC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBTaTogUG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgQ2k6IFNvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENyOiB2by5iaW5kKG51bGwsIHQpLFxuICAgICAgICBEcjogVm8uYmluZChudWxsLCB0KVxuICAgIH0pLCB0LkdyLnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuWHIuZHIoKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgRW8odCkpIDogKGF3YWl0IHQuWHIuc3RvcCgpLCB0LmpyLmxlbmd0aCA+IDAgJiYgKCQoXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHt0LmpyLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIHQuanIgPSBbXSkpO1xuICAgIH0pKSksIHQuWHI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgeG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gcywgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBRLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKHQgPT4ge30pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgeG8odCwgZSwgciwgcywgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydCh0KSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwodCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAodCA/IFwiOiBcIiArIHQgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKHQgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBrbyh0LCBlKSB7XG4gICAgaWYgKE8oXCJBc3luY1F1ZXVlXCIsIGAke2V9OiAke3R9YCksIEhzKHQpKSByZXR1cm4gbmV3IGooSy5VTkFWQUlMQUJMRSwgYCR7ZX06ICR7dH1gKTtcbiAgICB0aHJvdyB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgJG8ge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCA/IChlLCBuKSA9PiB0KGUsIG4pIHx8IFB0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6ICh0LCBlKSA9PiBQdC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gSW4oKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgd24odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQodCkge1xuICAgICAgICByZXR1cm4gbmV3ICRvKHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGUpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlbGV0ZSh0LmtleSk7XG4gICAgICAgIHJldHVybiBlLmNvcHkoZS5rZXllZE1hcC5pbnNlcnQodC5rZXksIHQpLCBlLnNvcnRlZFNldC5pbnNlcnQodCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZSh0KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgJG8pKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSB0Lmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyB0LmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyAkbztcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IHQsIG4uc29ydGVkU2V0ID0gZSwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgT28ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLlpyID0gbmV3IHduKFB0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvYy5rZXksIG4gPSB0aGlzLlpyLmdldChlKTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIE1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwgdCkgOiAzIC8qIE1ldGFkYXRhICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuWnIgPSB0aGlzLlpyLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5yZW1vdmUoZSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIEFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLlpyID0gdGhpcy5aci5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgTCgpIDogdGhpcy5aciA9IHRoaXMuWnIuaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBlbygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5aci5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBGbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYykge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5kb2NzID0gZSwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gcywgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHIsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgRm8odCwgZSwgJG8uZW1wdHlTZXQoZSksIGksIG4sIHMsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gdC5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSAmJiBBZSh0aGlzLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbCh0LmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKHQub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSB0LmRvY0NoYW5nZXM7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoZVt0XS50eXBlICE9PSBuW3RdLnR5cGUgfHwgIWVbdF0uZG9jLmlzRXF1YWwoblt0XS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgTW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5vID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgTG8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgamkoKHQgPT4gUmUodCkpLCBBZSksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIHRoaXMuc28gPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gQm8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAociB8fCAoaSA9ICEwLCByID0gbmV3IE1vKSwgaSkgdHJ5IHtcbiAgICAgICAgci5ubyA9IGF3YWl0IG4ub25MaXN0ZW4ocyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0ga28odCwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke2JlKGUucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIGUub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQocywgciksIHIubGlzdGVuZXJzLnB1c2goZSksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIGUuaW8obi5vbmxpbmVTdGF0ZSksIHIubm8pIHtcbiAgICAgICAgZS5ybyhyLm5vKSAmJiBqbyhuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFVvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAocikge1xuICAgICAgICBjb25zdCB0ID0gci5saXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgICAgdCA+PSAwICYmIChyLmxpc3RlbmVycy5zcGxpY2UodCwgMSksIGkgPSAwID09PSByLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUocyksIG4ub25Vbmxpc3RlbihzKTtcbn1cblxuZnVuY3Rpb24gcW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGxldCBzID0gITE7XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IHQucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLnJvKHQpICYmIChzID0gITApO1xuICAgICAgICAgICAgaS5ubyA9IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcyAmJiBqbyhuKTtcbn1cblxuZnVuY3Rpb24gS28odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xdWVyaWVzLmdldChlKTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0Lm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgcy5xdWVyaWVzLmRlbGV0ZShlKTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBqbyh0KSB7XG4gICAgdC5zby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIFFvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLm9vID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY28gPSAhMSwgdGhpcy5hbyA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgcm8odCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiBlLnB1c2gobik7XG4gICAgICAgICAgICB0ID0gbmV3IEZvKHQucXVlcnksIHQuZG9jcywgdC5vbGREb2NzLCBlLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY28gPyB0aGlzLnVvKHQpICYmICh0aGlzLm9vLm5leHQodCksIGUgPSAhMCkgOiB0aGlzLmhvKHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLmxvKHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy5hbyA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLm9vLmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgaW8odCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW8gJiYgIXRoaXMuY28gJiYgdGhpcy5obyh0aGlzLmFvLCB0KSAmJiAodGhpcy5sbyh0aGlzLmFvKSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGhvKHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLmZvIHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gZSk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcbiAgICAgICAgfVxuICAgIHVvKHQpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKHQuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmFvICYmIHRoaXMuYW8uaGFzUGVuZGluZ1dyaXRlcyAhPT0gdC5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghdC5zeW5jU3RhdGVDaGFuZ2VkICYmICFlKSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIGxvKHQpIHtcbiAgICAgICAgdCA9IEZvLmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksIHQuZG9jcywgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUpLCB0aGlzLmNvID0gITAsIFxuICAgICAgICB0aGlzLm9vLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIFdvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHQsIHRoaXMuYnl0ZUxlbmd0aCA9IGU7XG4gICAgfVxuICAgIHdvKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMucGF5bG9hZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBHbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk4gPSB0O1xuICAgIH1cbiAgICB6bih0KSB7XG4gICAgICAgIHJldHVybiB6bih0aGlzLk4sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBIbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IHRzKHRoaXMuTiwgdC5kb2N1bWVudCwgITEpIDogS3QubmV3Tm9Eb2N1bWVudCh0aGlzLnpuKHQubWV0YWRhdGEubmFtZSksIHRoaXMuSm4odC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBKbih0KSB7XG4gICAgICAgIHJldHVybiBqbih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyB6byB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLl9vID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5OID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCB0aGlzLnByb2dyZXNzID0gSG8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIG1vKHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIHJldHVybiB0LnBheWxvYWQubmFtZWRRdWVyeSA/IHRoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KSA6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhID8gKHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbWV0YWRhdGE6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgIH0pLCB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5leGlzdHMgfHwgKytlKSA6IHQucGF5bG9hZC5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSB0LnBheWxvYWQuZG9jdW1lbnQsIFxuICAgICAgICArK2UpLCBlICE9PSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA/ICh0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZCA9IGUsIFxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSkgOiBudWxsO1xuICAgIH1cbiAgICB5byh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwLCBuID0gbmV3IEdvKHRoaXMuTik7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSBpZiAocy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi56bihzLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoZS5nZXQobikgfHwgUG4oKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IElyKHRoaXMubG9jYWxTdG9yZSwgbmV3IEdvKHRoaXMuTiksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLl9vLmlkKSwgZSA9IHRoaXMueW8odGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBBcih0aGlzLmxvY2FsU3RvcmUsIHQsIGUuZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwgbmV3IGlyKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gSG8odCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgIGRvY3VtZW50c0xvYWRlZDogMCxcbiAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0aGF0IHRoZSBsb2FkaW5nXG4gKiBoYXMgc3VjY2VlZGVkLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgWW8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXG4gKiBhIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyB0byBkb2NzLCBhbmQgYXBwbGllc1xuICogdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdCBwb3NzaWJsZSByZXN1bHRzLlxuICovIGNsYXNzIFhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5wbyA9IGUsIHRoaXMuVG8gPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5FbyA9IFBuKCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gUG4oKSwgdGhpcy5JbyA9IHZlKHQpLCB0aGlzLkFvID0gbmV3ICRvKHRoaXMuSW8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIHJlbW90ZSBkb2N1bWVudHMgdGhhdCB0aGUgc2VydmVyIGhhcyB0b2xkIHVzIGJlbG9uZ3MgdG8gdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKiB0aGlzIHZpZXcuXG4gICAgICovICAgIGdldCBSbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzZXQgb2YgZG9jIGNoYW5nZXMsIGFwcGxpZXMgdGhlIHF1ZXJ5IGxpbWl0LCBhbmQgY29tcHV0ZXNcbiAgICAgKiB3aGF0IHRoZSBuZXcgcmVzdWx0cyBzaG91bGQgYmUsIHdoYXQgdGhlIGNoYW5nZXMgd2VyZSwgYW5kIHdoZXRoZXIgd2UgbWF5XG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgZG9jIGNoYW5nZXMgdG8gYXBwbHkgdG8gdGhpcyB2aWV3LlxuICAgICAqIEBwYXJhbSBwcmV2aW91c0NoYW5nZXMgLSBJZiB0aGlzIGlzIGJlaW5nIGNhbGxlZCB3aXRoIGEgcmVmaWxsLCB0aGVuIHN0YXJ0XG4gICAgICogICAgICAgIHdpdGggdGhpcyBzZXQgb2YgZG9jcyBhbmQgY2hhbmdlcyBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gICAgICogQHJldHVybnMgYSBuZXcgc2V0IG9mIGRvY3MsIGNoYW5nZXMsIGFuZCByZWZpbGwgZmxhZy5cbiAgICAgKi8gICAgYm8odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IGUuUG8gOiBuZXcgT28sIHMgPSBlID8gZS5BbyA6IHRoaXMuQW87XG4gICAgICAgIGxldCBpID0gZSA/IGUubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCByID0gcywgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgYyA9IF9lKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMubGFzdCgpIDogbnVsbCwgYSA9IG1lKHRoaXMucXVlcnkpICYmIHMuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHMuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAodC5pbm9yZGVyVHJhdmVyc2FsKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHMuZ2V0KHQpLCBoID0gUGUodGhpcy5xdWVyeSwgZSkgPyBlIDogbnVsbCwgbCA9ICEhdSAmJiB0aGlzLm11dGF0ZWRLZXlzLmhhcyh1LmtleSksIGYgPSAhIWggJiYgKGguaGFzTG9jYWxNdXRhdGlvbnMgfHwgXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcbiAgICAgICAgICAgIC8vIG11dGF0ZWQgZHVyaW5nIHRoZSBsaWZldGltZSBvZiB0aGUgdmlldy5cbiAgICAgICAgICAgIHRoaXMubXV0YXRlZEtleXMuaGFzKGgua2V5KSAmJiBoLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7XG4gICAgICAgICAgICBsZXQgZCA9ICExO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgJiYgaCkge1xuICAgICAgICAgICAgICAgIHUuZGF0YS5pc0VxdWFsKGguZGF0YSkgPyBsICE9PSBmICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMyAvKiBNZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITApIDogdGhpcy52byh1LCBoKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAoYyAmJiB0aGlzLklvKGgsIGMpID4gMCB8fCBhICYmIHRoaXMuSW8oaCwgYSkgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgIH0pLCBkID0gITApIDogdSAmJiAhaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBkID0gITAsIChjIHx8IGEpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgZCAmJiAoaCA/IChyID0gci5hZGQoaCksIGkgPSBmID8gaS5hZGQodCkgOiBpLmRlbGV0ZSh0KSkgOiAociA9IHIuZGVsZXRlKHQpLCBpID0gaS5kZWxldGUodCkpKTtcbiAgICAgICAgfSkpLCBfZSh0aGlzLnF1ZXJ5KSB8fCBtZSh0aGlzLnF1ZXJ5KSkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX2UodGhpcy5xdWVyeSkgPyByLmxhc3QoKSA6IHIuZmlyc3QoKTtcbiAgICAgICAgICAgIHIgPSByLmRlbGV0ZSh0LmtleSksIGkgPSBpLmRlbGV0ZSh0LmtleSksIG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQW86IHIsXG4gICAgICAgICAgICBQbzogbixcbiAgICAgICAgICAgIExuOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdm8odCwgZSkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiB0Lmhhc0xvY2FsTXV0YXRpb25zICYmIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICFlLmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSBpT1MvQW5kcm9pZCBjbGllbnRzIGFsd2F5cyBjb21wdXRlIGxpbWJvIGRvY3VtZW50IGNoYW5nZXMuXG4gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuQW87XG4gICAgICAgIHRoaXMuQW8gPSB0LkFvLCB0aGlzLm11dGF0ZWRLZXlzID0gdC5tdXRhdGVkS2V5cztcbiAgICAgICAgLy8gU29ydCBjaGFuZ2VzIGJhc2VkIG9uIHR5cGUgYW5kIHF1ZXJ5IGNvbXBhcmF0b3JcbiAgICAgICAgY29uc3QgaSA9IHQuUG8uZW8oKTtcbiAgICAgICAgaS5zb3J0KCgodCwgZSkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy5Jbyh0LmRvYywgZS5kb2MpKSksIHRoaXMuVm8obik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy5TbygpIDogW10sIG8gPSAwID09PSB0aGlzLkVvLnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jZWQgKi8gOiAwIC8qIExvY2FsICovICwgYyA9IG8gIT09IHRoaXMuVG87XG4gICAgICAgIGlmICh0aGlzLlRvID0gbywgMCAhPT0gaS5sZW5ndGggfHwgYykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IEZvKHRoaXMucXVlcnksIHQuQW8sIHMsIGksIHQubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IG8sIGMsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSksXG4gICAgICAgICAgICAgICAgRG86IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgRG86IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgaW8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBBbzogdGhpcy5BbyxcbiAgICAgICAgICAgIFBvOiBuZXcgT28sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIExuOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBEbzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBDbyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMucG8uaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuQW8uaGFzKHQpICYmICF0aGlzLkFvLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgVm8odCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5wbyA9IHRoaXMucG8uYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5wbyA9IHRoaXMucG8uZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIFNvKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5FbztcbiAgICAgICAgdGhpcy5FbyA9IFBuKCksIHRoaXMuQW8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkNvKHQua2V5KSAmJiAodGhpcy5FbyA9IHRoaXMuRW8uYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLkVvLmhhcyh0KSB8fCBlLnB1c2gobmV3IFlvKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLkVvLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyBKbyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgTm8odCkge1xuICAgICAgICB0aGlzLnBvID0gdC5HbiwgdGhpcy5FbyA9IFBuKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJvKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIHhvKCkge1xuICAgICAgICByZXR1cm4gRm8uZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5BbywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gdGhpcy5Ubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIFpvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIHRjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtvID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgZWMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLiRvID0ge30sIHRoaXMuT28gPSBuZXcgamkoKHQgPT4gUmUodCkpLCBBZSksIFxuICAgICAgICB0aGlzLkZvID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NbyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTG8gPSBuZXcgd24oUHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQm8gPSBuZXcgTWFwLCB0aGlzLlVvID0gbmV3IGJyLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5xbyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLktvID0gbmV3IE1hcCwgdGhpcy5qbyA9IE5pLmllKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLlFvID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuUW87XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG5jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gQ2ModCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4uT28uZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LnhvKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgbXIobi5sb2NhbFN0b3JlLCBFZShlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgc2MobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIpLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBjbyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBzYyh0LCBlLCBuLCBzKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LldvID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuYm8obik7XG4gICAgICAgIGkuTG4gJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgeXIodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuYm8odCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gbWModCwgZS50YXJnZXRJZCwgby5EbyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCBpID0gYXdhaXQgeXIodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgciA9IG5ldyBYbyhlLCBpLkduKSwgbyA9IHIuYm8oaS5kb2N1bWVudHMpLCBjID0gRG4uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSksIGEgPSByLmFwcGx5Q2hhbmdlcyhvLCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGMpO1xuICAgIG1jKHQsIG4sIGEuRG8pO1xuICAgIGNvbnN0IHUgPSBuZXcgWm8oZSwgbiwgcik7XG4gICAgcmV0dXJuIHQuT28uc2V0KGUsIHUpLCB0LkZvLmhhcyhuKSA/IHQuRm8uZ2V0KG4pLnB1c2goZSkgOiB0LkZvLnNldChuLCBbIGUgXSksIGEuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBpYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLk9vLmdldChlKSwgaSA9IG4uRm8uZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLkZvLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhQWUodCwgZSkpKSksIHZvaWQgbi5Pby5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBncihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgYW8obi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgd2Mobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChGaSk7XG4gICAgfSBlbHNlIHdjKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBncihuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiByYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE5jKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IGl0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBQbigpKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLlFuLlBuKHQsIGkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgIHIgPSBpO1xuICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgdG8gZ3VhcmFudGVlIGNvbnNpc3RlbnQgdmFsdWVzIGFuZCBwcmV2ZW50cyBmbGlja2VyXG4gICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFhlKHQsIHIuZ2V0KHQua2V5KSk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZSAmJiBcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IG5uKHQua2V5LCBlLCBxdChlLnZhbHVlLm1hcFZhbHVlKSwgR2UuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Jbi5hZGRNdXRhdGlvbkJhdGNoKHQsIHMsIG8sIGUpO1xuICAgICAgICAgICAgfSkpKSkudGhlbigodCA9PiAodC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyKSwge1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IHQuYmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5xb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyB3bihldCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LnFvW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgcGMocywgdC5jaGFuZ2VzKSwgYXdhaXQgRW8ocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0ga28odCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIG9jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZHIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Cby5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIEIodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMua28gPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBCKHMua28pIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChCKHMua28pLCBcbiAgICAgICAgICAgIHMua28gPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IHBjKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgRmkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIGNjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIFJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy5Pby5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5pbyhlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0LmlvKGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIGpvKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy4kby5Scih0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBhYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMuQm8uZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbiAgICAgICAgdCA9IHQuaW5zZXJ0KHIsIEt0Lm5ld05vRG9jdW1lbnQociwgcnQubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IFBuKCkuYWRkKHIpLCBpID0gbmV3IFNuKHJ0Lm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBnbihldCksIHQsIG4pO1xuICAgICAgICBhd2FpdCBvYyhzLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgcy5MbyA9IHMuTG8ucmVtb3ZlKHIpLCBzLkJvLmRlbGV0ZShlKSwgeWMocyk7XG4gICAgfSBlbHNlIGF3YWl0IGdyKHMubG9jYWxTdG9yZSwgZSwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IHdjKHMsIGUsIG4pKSkuY2F0Y2goRmkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1Yyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGxyKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgZGMobiwgcywgLyplcnJvcj0qLyBudWxsKSwgZmMobiwgcyksIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShzLCBcImFja25vd2xlZGdlZFwiKSwgXG4gICAgICAgIGF3YWl0IHBjKG4sIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgRmkodCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uSW4ubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChCKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIG4uSW4ucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLkluLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5Rbi5Qbih0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBkYyhzLCBlLCBuKSwgZmMocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgcGMocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBGaShuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gbGModCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHdvKG4ucmVtb3RlU3RvcmUpIHx8ICQoXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuSW4uZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gdCkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLktvLmdldCh0KSB8fCBbXTtcbiAgICAgICAgcy5wdXNoKGUpLCBuLktvLnNldCh0LCBzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBrbyh0LCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgZS5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gZmModCwgZSkge1xuICAgICh0LktvLmdldChlKSB8fCBbXSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQucmVzb2x2ZSgpO1xuICAgIH0pKSwgdC5Lby5kZWxldGUoZSk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gZGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIGxldCBpID0gcy5xb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLmdldChlKTtcbiAgICAgICAgdCAmJiAobiA/IHQucmVqZWN0KG4pIDogdC5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZShlKSksIHMucW9bcy5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3Yyh0LCBlLCBuID0gbnVsbCkge1xuICAgIHQuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5Gby5nZXQoZSkpIHQuT28uZGVsZXRlKHMpLCBuICYmIHQuJG8uR28ocywgbik7XG4gICAgaWYgKHQuRm8uZGVsZXRlKGUpLCB0LmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICB0LlVvLmNzKGUpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5Vby5jb250YWluc0tleShlKSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgX2ModCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9jKHQsIGUpIHtcbiAgICB0Lk1vLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gdC5Mby5nZXQoZSk7XG4gICAgbnVsbCAhPT0gbiAmJiAoYW8odC5yZW1vdGVTdG9yZSwgbiksIHQuTG8gPSB0LkxvLnJlbW92ZShlKSwgdC5Cby5kZWxldGUobiksIHljKHQpKTtcbn1cblxuZnVuY3Rpb24gbWModCwgZSwgbikge1xuICAgIGZvciAoY29uc3QgcyBvZiBuKSBpZiAocyBpbnN0YW5jZW9mIEpvKSB0LlVvLmFkZFJlZmVyZW5jZShzLmtleSwgZSksIGdjKHQsIHMpOyBlbHNlIGlmIChzIGluc3RhbmNlb2YgWW8pIHtcbiAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgcy5rZXkpLCB0LlVvLnJlbW92ZVJlZmVyZW5jZShzLmtleSwgZSk7XG4gICAgICAgIHQuVW8uY29udGFpbnNLZXkocy5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgX2ModCwgcy5rZXkpO1xuICAgIH0gZWxzZSBMKCk7XG59XG5cbmZ1bmN0aW9uIGdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgdC5Mby5nZXQobikgfHwgdC5Nby5oYXMocykgfHwgKCQoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCB0Lk1vLmFkZChzKSwgXG4gICAgeWModCkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24geWModCkge1xuICAgIGZvciAoO3QuTW8uc2l6ZSA+IDAgJiYgdC5Mby5zaXplIDwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lk1vLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgdC5Nby5kZWxldGUoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHQoaHQuZnJvbVN0cmluZyhlKSksIHMgPSB0LmpvLm5leHQoKTtcbiAgICAgICAgdC5Cby5zZXQocywgbmV3IHRjKG4pKSwgdC5MbyA9IHQuTG8uaW5zZXJ0KG4sIHMpLCBjbyh0LnJlbW90ZVN0b3JlLCBuZXcgaWkoRWUod2Uobi5wYXRoKSksIHMsIDIgLyogTGltYm9SZXNvbHV0aW9uICovICwgWC5UKSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy5Pby5pc0VtcHR5KCkgfHwgKHMuT28uZm9yRWFjaCgoKHQsIGMpID0+IHtcbiAgICAgICAgby5wdXNoKHMuV28oYywgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShjLnRhcmdldElkLCB0LmZyb21DYWNoZSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvci5rbihjLnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy4kby5ScihpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IGpzLmZvckVhY2goZSwgKGUgPT4ganMuZm9yRWFjaChlLk5uLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IGpzLmZvckVhY2goZS54biwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFIcyh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5Vbi5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5VbiA9IG4uVW4uaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVGModCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgICQoXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaHIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5Lby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5Lby5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgcGMobiwgdC5Xbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBFYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLkJvLmdldChlKTtcbiAgICBpZiAocyAmJiBzLmtvKSByZXR1cm4gUG4oKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBQbigpO1xuICAgICAgICBjb25zdCBzID0gbi5Gby5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Pby5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3LlJvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIEljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGF3YWl0IHlyKG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcuTm8ocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIG1jKG4sIGUudGFyZ2V0SWQsIGkuRG8pLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gQWModCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBUcihlLmxvY2FsU3RvcmUpLnRoZW4oKHQgPT4gcGMoZSwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gUmModCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBxKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IHEobi5Jbik7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuWHQodCwgZSkubmV4dCgoZSA9PiBlID8gbi5Rbi5Qbih0LCBlKSA6IGpzLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBFbyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBkYyhpLCBlLCBzIHx8IG51bGwpLCBmYyhpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHEodCkuSW4pLnRlKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IEwoKSwgYXdhaXQgcGMoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgJChcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGJjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBpZiAoQ2MobiksIE5jKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi5Rbykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCBQYyhuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4uUW8gPSAhMCwgYXdhaXQgRG8obi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgY28obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi5Rbykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uRm8uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKHdjKG4sIGkpLCBcbiAgICAgICAgICAgIGdyKG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgYW8obi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgUGMobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuQm8uZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBhbyhlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5Vby51cygpLCBlLkJvID0gbmV3IE1hcCwgZS5MbyA9IG5ldyB3bihQdC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uUW8gPSAhMSwgYXdhaXQgRG8obi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gUGModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuRm8uZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IG1yKHMubG9jYWxTdG9yZSwgRWUoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5Pby5nZXQodCksIG4gPSBhd2FpdCBJYyhzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IHByKHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgbXIocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgc2MocywgdmMobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLiRvLlJyKHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIHZjKHQpIHtcbiAgICByZXR1cm4gZGUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIEZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIFZjKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gcShxKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLnBuKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBTYyh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgaWYgKGkuUW8pIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICQoXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpOyBlbHNlIGlmIChpLkZvLmhhcyhlKSkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBUcihpLmxvY2FsU3RvcmUpLCBzID0gU24uY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4pO1xuICAgICAgICAgICAgYXdhaXQgcGMoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgZ3IoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCB3YyhpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBEYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IENjKHQpO1xuICAgIGlmIChzLlFvKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5Gby5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgcHIocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IG1yKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBzYyhzLCB2YyhlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpLCBjbyhzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5Gby5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IGdyKHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBhbyhzLnJlbW90ZVN0b3JlLCB0KSwgd2MocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChGaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBDYyh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBvYy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gRWMuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gYWMuYmluZChudWxsLCBlKSwgZS4kby5SciA9IHFvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLiRvLkdvID0gS28uYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIE5jKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSB1Yy5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IGhjLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIHhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZS5nZXRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IGpuKGUuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJoYXNOZXdlckJ1bmRsZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uSmUuZ2V0QnVuZGxlTWV0YWRhdGEodCwgZS5pZCkpKS50aGVuKCh0ID0+ICEhdCAmJiB0LmNyZWF0ZVRpbWUuY29tcGFyZVRvKHMpID49IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBCdW5kbGVNZXRhZGF0YWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi8gKHQubG9jYWxTdG9yZSwgcykpIHJldHVybiBhd2FpdCBlLmNsb3NlKCksIHZvaWQgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhIbyhzKSk7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IHpvKHMsIHQubG9jYWxTdG9yZSwgZS5OKTtcbiAgICAgICAgICAgIGxldCByID0gYXdhaXQgZS56bygpO1xuICAgICAgICAgICAgZm9yICg7cjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGkubW8ocik7XG4gICAgICAgICAgICAgICAgdCAmJiBuLl91cGRhdGVQcm9ncmVzcyh0KSwgciA9IGF3YWl0IGUuem8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMTYwODc2NDQzKTogVGhpcyBjdXJyZW50bHkgcmFpc2VzIHNuYXBzaG90cyB3aXRoXG4gICAgICAgICAgICAvLyBgZnJvbUNhY2hlPWZhbHNlYCBpZiB1c2VycyBhbHJlYWR5IGxpc3RlbiB0byBzb21lIHF1ZXJpZXMgYW5kIGJ1bmRsZXNcbiAgICAgICAgICAgIC8vIGhhcyBuZXdlciB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGModCwgby5FbiwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uSmUuc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovICh0LmxvY2FsU3RvcmUsIHMpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIEYoXCJTeW5jRW5naW5lXCIsIGBMb2FkaW5nIGJ1bmRsZSBmYWlsZWQgd2l0aCAke3R9YCksIG4uX2ZhaWxXaXRoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIGtjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuTiA9IFlyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5Ibyh0KSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuSm8odCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLllvKHQpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLlhvKHQpO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiB1cih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgY3IsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTik7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDcih4ci5OcywgdGhpcy5OKTtcbiAgICB9XG4gICAgSG8odCkge1xuICAgICAgICByZXR1cm4gbmV3IEtyO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgJGMgZXh0ZW5kcyBrYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLlpvID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBuLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KSwgYXdhaXQgRXIodGhpcy5sb2NhbFN0b3JlKSwgYXdhaXQgdGhpcy5aby5pbml0aWFsaXplKHRoaXMsIHQpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgTmModGhpcy5aby5zeW5jRW5naW5lKSwgYXdhaXQgRW8odGhpcy5aby5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLm5uKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiB1cih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgY3IsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTik7XG4gICAgfVxuICAgIFlvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaShlLCB0LmFzeW5jUXVldWUpO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBzcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBSaS53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogUmkuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyB0cih0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBIcigpLCBKcigpLCB0aGlzLk4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIEhvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLcjtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIE9jIGV4dGVuZHMgJGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy5abyA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuWm8uc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIHFyICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBfaTogUmMuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIG1pOiBTYy5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgZ2k6IERjLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBwbjogVmMuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIHdpOiBBYy5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLm5uKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGJjKHRoaXMuWm8uc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEhvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEhyKCk7XG4gICAgICAgIGlmICghcXIuYnQoZSkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gc3IodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IHFyKGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIEZjIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBjYyh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IFRjLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IERvKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMbztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFlyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IHpyKHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbm8odCwgZSwgbik7XG4gICAgICAgIH0odC5jcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gY2ModGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIFJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBRci5idCgpID8gbmV3IFFyIDogbmV3IGpyLCBuZXcgaW8oZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBlYyh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChjLlFvID0gITApLCBjO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLldyLmFkZCg1IC8qIFNodXRkb3duICovKSwgYXdhaXQgb28oZSksIFxuICAgICAgICAgICAgZS56ci5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuSHIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gTWModCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgTGMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMudGModGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy50Yyh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdCk7XG4gICAgfVxuICAgIGVjKCkge1xuICAgICAgICB0aGlzLm11dGVkID0gITA7XG4gICAgfVxuICAgIHRjKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tdXRlZCB8fCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IHQoZSk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyBCYyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMubmMgPSB0LCB0aGlzLk4gPSBlLCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgUSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5zYyA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5pYygpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdCAmJiB0LndvKCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUodC5wYXlsb2FkLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0LnBheWxvYWQpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYy5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIHpvKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuaWMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBpYygpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMucmMoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zYy5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMub2MoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuY2Mobik7XG4gICAgICAgIHJldHVybiBuZXcgV28oSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgYWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIHJjKCkge1xuICAgICAgICBmb3IgKDt0aGlzLmFjKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnVjKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLm9jKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBjYyh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51YygpICYmIHRoaXMub2MoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2MuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgb2ModCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMubmMuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgdWMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLm5jLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgVWMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IFluKG4uTikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IEduKG4uTiwgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uS2koXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBlcyhuLk4sIHQpO1xuICAgICAgICAgICAgICAgIG8uc2V0KGUua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgQighIWUpLCBjLnB1c2goZSk7XG4gICAgICAgICAgICB9KSksIGM7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHRoaXMucmVjb3JkVmVyc2lvbih0KSkpLCBlO1xuICAgIH1cbiAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgY24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmRlbGV0ZShlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IFB0LmZyb21QYXRoKGUpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgYW4obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IFluKG4uTikgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICB3cml0ZXM6IGUubWFwKCh0ID0+IHNzKG4uTiwgdCkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4uTGkoXCJDb21taXRcIiwgcywgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgZSA9IHQudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNOb0RvY3VtZW50KCkpIHRocm93IEwoKTtcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cbiAgICAgICAgICAgIGUgPSBydC5taW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwobikpIFxuICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSA/IEdlLnVwZGF0ZVRpbWUoZSkgOiBHZS5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwocnQubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBHZS5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi9cbmNsYXNzIHFjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IG4sIHRoaXMuZGVmZXJyZWQgPSBzLCBcbiAgICAgICAgdGhpcy5oYyA9IDUsIHRoaXMuYXIgPSBuZXcgWHIodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVHJhbnNhY3Rpb25SZXRyeSAqLyk7XG4gICAgfVxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqLyAgICBydW4oKSB7XG4gICAgICAgIHRoaXMuaGMgLT0gMSwgdGhpcy5sYygpO1xuICAgIH1cbiAgICBsYygpIHtcbiAgICAgICAgdGhpcy5hci5YaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVYyh0aGlzLmRhdGFzdG9yZSksIGUgPSB0aGlzLmZjKHQpO1xuICAgICAgICAgICAgZSAmJiBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0LmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGModCk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGModCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZmModCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odCk7XG4gICAgICAgICAgICByZXR1cm4gIUF0KGUpICYmIGUuY2F0Y2ggJiYgZS50aGVuID8gZSA6ICh0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcihcIlRyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZVwiKSksIFxuICAgICAgICAgICAgbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5yZWplY3QodCksIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGModCkge1xuICAgICAgICB0aGlzLmhjID4gMCAmJiB0aGlzLndjKHQpID8gKHRoaXMuaGMgLT0gMSwgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmxjKCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSkgOiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KTtcbiAgICB9XG4gICAgd2ModCkge1xuICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkge1xuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZTtcbiAgICAgICAgICAgIHJldHVybiBcImFib3J0ZWRcIiA9PT0gZSB8fCBcImZhaWxlZC1wcmVjb25kaXRpb25cIiA9PT0gZSB8fCAhZm4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cbiAqL1xuY2xhc3MgS2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFiYXNlSW5mbyA9IG4sIHRoaXMudXNlciA9IEQuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHR0LkkoKSwgdGhpcy5jcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgdGhpcy5jcmVkZW50aWFscy5zdGFydChlLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmNyZWRlbnRpYWxMaXN0ZW5lcih0KSwgXG4gICAgICAgICAgICB0aGlzLnVzZXIgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogdGhpcy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGtvKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGpjKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgaHIoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBRYyh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgV2ModCk7XG4gICAgJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCAkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgICAgIGNvbnN0IHMgPSB3byhuKTtcbiAgICAgICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgICAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAgICAgLy8gbmV3IG11dGF0aW9ucyBmcm9tIHRoZSBMb2NhbFN0b3JlIChzaW5jZSBtdXRhdGlvbnMgYXJlIHBlci11c2VyKS5cbiAgICAgICAgICAgICAgICBuLldyLmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBvbyhuKSwgcyAmJiBcbiAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICBuLkhyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgICAgIG4uV3IuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IHJvKG4pO1xuICAgIH0oZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gV2ModCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8ICgkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IGpjKHQsIG5ldyBrYykpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBHYyh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IFFjKHQsIG5ldyBGYykpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIHpjKHQpIHtcbiAgICByZXR1cm4gV2ModCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIEhjKHQpIHtcbiAgICByZXR1cm4gV2ModCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gSmModCkge1xuICAgIHJldHVybiBHYyh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gWWModCkge1xuICAgIHJldHVybiBHYyh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBYYyh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IEdjKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSBuYy5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IGljLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gWmModCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgemModCksIG4gPSBhd2FpdCBKYyh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLldyLmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIHJvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gdGEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgemModCksIG4gPSBhd2FpdCBKYyh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuV3IuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgb28oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5Ici5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBlYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLlFuLkFuKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0ga28odCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEhjKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5hKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBMYyh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFVvKHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIWMgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYyAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBRbyh3ZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIGZvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEJvKHQsIG8pO1xuICAgIH0oYXdhaXQgWGModCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBzYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IHlyKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgWG8oZSwgcy5HbiksIHIgPSBpLmJvKHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGtvKHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgSGModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaWEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IExjKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gVW8odCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IFFvKG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgZm86ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gQm8odCwgbyk7XG4gICAgfShhd2FpdCBYYyh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHJhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IExjKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHQpLnNvLmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IFhjKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uZWMoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHEodCkuc28uZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IFhjKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBvYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIEdjKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IHFjKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGNhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCYyh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBNYyh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBNYyhuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBZcihlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgeGMoYXdhaXQgWWModCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gYWEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLkplLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IEhjKHQpLCBlKSkpO1xufVxuXG5jbGFzcyB1YSB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIERhdGFiYXNlSW5mbyB1c2luZyB0aGUgcHJvdmlkZWQgaG9zdCwgZGF0YWJhc2VJZCBhbmRcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0gYXBwSWQgLSBUaGUgRmlyZWJhc2UgQXBwIElkLlxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZUtleSAtIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcbiAgICAgKiBzdG9yYWdlICh1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRhdGFiYXNlSWQpLlxuICAgICAqIEBwYXJhbSBob3N0IC0gVGhlIEZpcmVzdG9yZSBiYWNrZW5kIGhvc3QgdG8gY29ubmVjdCB0by5cbiAgICAgKiBAcGFyYW0gc3NsIC0gV2hldGhlciB0byB1c2UgU1NMIHdoZW4gY29ubmVjdGluZy5cbiAgICAgKiBAcGFyYW0gZm9yY2VMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmb3JjZUxvbmdQb2xsaW5nIG9wdGlvblxuICAgICAqIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGF1dG9EZXRlY3RMb25nUG9sbGluZyAtIFdoZXRoZXIgdG8gdXNlIHRoZSBkZXRlY3RCdWZmZXJpbmdQcm94eVxuICAgICAqIG9wdGlvbiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSB1c2VGZXRjaFN0cmVhbXMgV2hldGhlciB0byB1c2UgdGhlIEZldGNoIEFQSSBpbnN0ZWFkIG9mXG4gICAgICogWE1MSFRUUFJlcXVlc3RcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBjKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuYXBwSWQgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5ob3N0ID0gcywgdGhpcy5zc2wgPSBpLCBcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gciwgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBvLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGM7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBkYXRhYmFzZSBJRCBhIEZpcmVzdG9yZSBjbGllbnQgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQGludGVybmFsXG4gKi9cbmNsYXNzIGhhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gdCwgdGhpcy5kYXRhYmFzZSA9IGUgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgaGEgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBsYSA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gZmEodCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGRhKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gd2EodCkge1xuICAgIGlmICghUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIF9hKHQpIHtcbiAgICBpZiAoUHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIG1hKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yKSByZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIGdhKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBtYSh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24geWEodCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgcGEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIGRhKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBUYSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgcGEoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMSwgdCBpbnN0YW5jZW9mIGhhID8gdGhpcy5fZGF0YWJhc2VJZCA9IHQgOiAodGhpcy5fYXBwID0gdCwgXG4gICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGhhKHQub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgcGEodCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fY3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgRztcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQighKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgWShlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbGEuZ2V0KHQpO1xuICAgICAgICAgICAgZSAmJiAoJChcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBsYS5kZWxldGUodCksIGUudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEVhKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IGdhKHQsIFRhKSkuX2dldFNldHRpbmdzKCk7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IGUgJiYgRihcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgdXNlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWRcIiksIFxuICAgIHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgciksIHtcbiAgICAgICAgaG9zdDogYCR7ZX06JHtufWAsXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IEQuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBjcmVhdGVNb2NrVXNlclRva2VuKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBEKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2NyZWRlbnRpYWxzID0gbmV3IHoobmV3IFcoZSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgSWEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmEodGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJYSh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBBYSB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgcXVlcnl9KS5cbiAqLyBjbGFzcyBSYSBleHRlbmRzIEFhIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgd2UobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgSWEodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJhKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJhKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZmEoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIFRhKSB7XG4gICAgICAgIGNvbnN0IHMgPSBodC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gX2EocyksIG5ldyBSYSh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBJYSB8fCB0IGluc3RhbmNlb2YgUmEpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfYShzKSwgbmV3IFJhKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gUGEodCwgZSkge1xuICAgIGlmICh0ID0gZ2EodCwgVGEpLCBmYShcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgQWEodCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBcbiAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGZlKGh0LmVtcHR5UGF0aCgpLCB0KTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gdmEodCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmIChlID0gdHQuSSgpKSwgZmEoXCJkb2NcIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgVGEpIHtcbiAgICAgICAgY29uc3QgcyA9IGh0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiB3YShzKSwgbmV3IElhKHQsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBQdChzKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIElhIHx8IHQgaW5zdGFuY2VvZiBSYSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChodC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHdhKHMpLCBuZXcgSWEodC5maXJlc3RvcmUsIHQgaW5zdGFuY2VvZiBSYSA/IHQuY29udmVydGVyIDogbnVsbCwgbmV3IFB0KHMpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIFZhKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgKHQgaW5zdGFuY2VvZiBJYSB8fCB0IGluc3RhbmNlb2YgUmEpICYmIChlIGluc3RhbmNlb2YgSWEgfHwgZSBpbnN0YW5jZW9mIFJhKSAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIHQucGF0aCA9PT0gZS5wYXRoICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gU2EodCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0IGluc3RhbmNlb2YgQWEgJiYgZSBpbnN0YW5jZW9mIEFhICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgQWUodC5fcXVlcnksIGUuX3F1ZXJ5KSAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBEYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLl9jID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLm1jID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLmdjID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy55YyA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLlRjID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLkVjID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5JYyA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5BYyA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuYXIgPSBuZXcgWHIodGhpcywgXCJhc3luY19xdWV1ZV9yZXRyeVwiIC8qIEFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuUmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gSnIoKTtcbiAgICAgICAgICAgIHQgJiYgJChcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyB0LnZpc2liaWxpdHlTdGF0ZSksIHRoaXMuYXIudHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdCA9IEpyKCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlJjKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nYztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldCh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKHQpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCh0KSB7XG4gICAgICAgIHRoaXMuYmMoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5QYyh0KTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5nYykge1xuICAgICAgICAgICAgdGhpcy5nYyA9ICEwLCB0aGlzLkljID0gdCB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBKcigpO1xuICAgICAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuUmMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUodCkge1xuICAgICAgICBpZiAodGhpcy5iYygpLCB0aGlzLmdjKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0aGlzLlBjKCgoKSA9PiB0aGlzLmdjICYmIHRoaXMuSWMgPyBQcm9taXNlLnJlc29sdmUoKSA6ICh0KCkudGhlbihlLnJlc29sdmUsIGUucmVqZWN0KSwgXG4gICAgICAgIGUucHJvbWlzZSkpKS50aGVuKCgoKSA9PiBlLnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZSh0KSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMubWMucHVzaCh0KSwgdGhpcy52YygpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyB2YygpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMubWMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWNbMF0oKSwgdGhpcy5tYy5zaGlmdCgpLCB0aGlzLmFyLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFIcyh0KSkgdGhyb3cgdDtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWMubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMuYXIuWGkoKCgpID0+IHRoaXMudmMoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFBjKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX2MudGhlbigoKCkgPT4gKHRoaXMuRWMgPSAhMCwgdCgpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuVGMgPSB0LCB0aGlzLkVjID0gITE7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBPKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgZSksIHQ7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+ICh0aGlzLkVjID0gITEsIHQpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jID0gZSwgZTtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkodCwgZSwgbikge1xuICAgICAgICB0aGlzLmJjKCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuQWMuaW5kZXhPZih0KSA+IC0xICYmIChlID0gMCk7XG4gICAgICAgIGNvbnN0IHMgPSB4by5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0LCBlLCBuLCAodCA9PiB0aGlzLlZjKHQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnljLnB1c2gocyksIHM7XG4gICAgfVxuICAgIGJjKCkge1xuICAgICAgICB0aGlzLlRjICYmIEwoKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIFNjKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCB0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0ID0gdGhpcy5fYywgYXdhaXQgdDtcbiAgICAgICAgfSB3aGlsZSAodCAhPT0gdGhpcy5fYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgRGModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy55YykgaWYgKGUudGltZXJJZCA9PT0gdCkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICBDYyh0KSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuU2MoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy55Yy5zb3J0KCgodCwgZSkgPT4gdC50YXJnZXRUaW1lTXMgLSBlLnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMueWMpIGlmIChlLnNraXBEZWxheSgpLCBcImFsbFwiIC8qIEFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuU2MoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBOYyh0KSB7XG4gICAgICAgIHRoaXMuQWMucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIFZjKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnljLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMueWMuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQ2EodCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBOYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBRLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBET01FeGNlcHRpb24gZXJyb3IgY29kZSBjb25zdGFudHMuICovIGNvbnN0IHhhID0gLTE7XG5cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi9cbmNsYXNzIGthIGV4dGVuZHMgVGEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSB7QGxpbmsgRmlyZXN0b3JlfSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlXCIsIHRoaXMuX3F1ZXVlID0gbmV3IERhLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwibmFtZVwiIGluIHQgPyB0Lm5hbWUgOiBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIE1hKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uIElmIHRoZSBjdXN0b20gc2V0dGluZ3MgYXJlIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uICRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gX2dldFByb3ZpZGVyKHQsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChuLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCB0ID0gbi5nZXRJbW1lZGlhdGUoKSwgcyA9IG4uZ2V0T3B0aW9ucygpO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKHMsIGUpKSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gbi5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICogcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGEgbmV3XG4gKiBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UgdGhhdCB0aGUgcmV0dXJuZWQge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEByZXR1cm5zIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZWQgYXBwLlxuICovIGZ1bmN0aW9uIE9hKGUgPSBnZXRBcHAoKSkge1xuICAgIHJldHVybiBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gRmEodCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgTWEodCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gTWEodCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IHVhKHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgbik7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IEtjKHQuX2NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBMYSh0LCBlKSB7XG4gICAgSGEodCA9IGdhKHQsIGthKSk7XG4gICAgY29uc3QgbiA9IEZhKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBGYztcbiAgICByZXR1cm4gVWEobiwgaSwgbmV3ICRjKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gQmEodCkge1xuICAgIEhhKHQgPSBnYSh0LCBrYSkpO1xuICAgIGNvbnN0IGUgPSBGYSh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgRmM7XG4gICAgcmV0dXJuIFVhKGUsIHMsIG5ldyBPYyhzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gVWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGpjKHQsIG4pLCBhd2FpdCBRYyh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gSy5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiBxYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBRO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghV3MuYnQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgV3MuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfShzcih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIEthKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gbGMoYXdhaXQgWWModCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KEZhKHQgPSBnYSh0LCBrYSkpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24gamEodCkge1xuICAgIHJldHVybiBaYyhGYSh0ID0gZ2EodCwga2EpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIFFhKHQpIHtcbiAgICByZXR1cm4gdGEoRmEodCA9IGdhKHQsIGthKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gV2EodCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvciBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkIG9iamVjdHMgYXJlXG4gKiAgIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnNcbiAqICAgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzIHVwZGF0ZXMsIGFuZCBjb21wbGV0aW9uXG4gKiAgIG9yIGVycm9yIGV2ZW50cy4gSXQgY2FuIGJlIHVzZWQgYXMgYSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gR2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBGYSh0ID0gZ2EodCwga2EpKSwgcyA9IG5ldyBOYTtcbiAgICByZXR1cm4gY2EobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlbiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlIGluIGxvY2FsXG4gKiBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKi8gZnVuY3Rpb24gemEodCwgZSkge1xuICAgIHJldHVybiBhYShGYSh0ID0gZ2EodCwga2EpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IEFhKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBIYSh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgSmEge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IGZ0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIFlhKCkge1xuICAgIHJldHVybiBuZXcgSmEoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgWGEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhhKF90LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWGEoX3QuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgWmEge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgdHUge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBldCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgZXQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBldSA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBudSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBubih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgZW4odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3Mgc3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IG5uKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGl1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBydSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLk4gPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLnhjKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IGtjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5rYztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgICRjKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLk4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgT2ModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5NYyh0KSwgcztcbiAgICB9XG4gICAgTGModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgRmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy54YygpLCBzO1xuICAgIH1cbiAgICBCYyh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy4kYyh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBGYzogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFVjKHQpIHtcbiAgICAgICAgcmV0dXJuIGJ1KHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5xYyB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLktjKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIHhjKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuTWModGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIE1jKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLlVjKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoaXUodGhpcy5rYykgJiYgZXUudGVzdCh0KSkgdGhyb3cgdGhpcy5VYygnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3Mgb3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5OID0gbiB8fCBZcih0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIGpjKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IHJ1KHtcbiAgICAgICAgICAgIGtjOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIEtjOiBuLFxuICAgICAgICAgICAgcGF0aDogZnQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICBGYzogITEsXG4gICAgICAgICAgICBxYzogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuTiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGN1KHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IFlyKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgb3UodC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gYXUodCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQuamMoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgRXUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCBjID0gcHUocywgbyk7XG4gICAgbGV0IGEsIHU7XG4gICAgaWYgKHIubWVyZ2UpIGEgPSBuZXcgZHQoby5maWVsZE1hc2spLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IEl1KGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIFB1KHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IGR0KHQpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGEuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBudShuZXcgVXQoYyksIGEsIHUpO1xufVxuXG5jbGFzcyB1dSBleHRlbmRzIFphIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LmtjKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC5rYyA/IHQuVWMoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LlVjKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHV1O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gaHUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgcnUoe1xuICAgICAgICBrYzogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIEtjOiBlLnNldHRpbmdzLktjLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICBGYzogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5OLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBsdSBleHRlbmRzIFphIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgamUodC5wYXRoLCBuZXcgT2UpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBsdTtcbiAgICB9XG59XG5cbmNsYXNzIGZ1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFjLm1hcCgodCA9PiB5dSh0LCBlKSkpLCBzID0gbmV3IEZlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGR1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuUWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBodSh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLlFjLm1hcCgodCA9PiB5dSh0LCBlKSkpLCBzID0gbmV3IExlKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGplKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHd1IGV4dGVuZHMgWmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuV2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgVWUodC5OLCBDZSh0Lk4sIHRoaXMuV2MpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBqZSh0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiBfdSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQuamMoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBFdShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IFV0LmVtcHR5KCk7XG4gICAgY3QocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBSdShlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGEgPSBpLkxjKGMpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIHV1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaChjKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geXUocywgYSk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaChjKSwgby5zZXQoYywgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGMgPSBuZXcgZHQocik7XG4gICAgcmV0dXJuIG5ldyBzdShvLCBjLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIG11KHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC5qYygxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pLCBjID0gWyBJdShlLCBzLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIGMucHVzaChJdShlLCByW3RdKSksIGEucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgdSA9IFtdLCBoID0gVXQuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IGMubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICghUHUodSwgY1t0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IGNbdF07XG4gICAgICAgIGxldCBuID0gYVt0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLkxjKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHV1KSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHUucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geXUobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHUucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgZHQodSk7XG4gICAgcmV0dXJuIG5ldyBzdShoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIGd1KHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiB5dShuLCB0LmpjKHMgPyA0IC8qIEFycmF5QXJndW1lbnQgKi8gOiAzIC8qIEFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiB5dSh0LCBlKSB7XG4gICAgaWYgKFR1KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBFdShcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgcHUodCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBaYSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBGaWVsZFZhbHVlLmRlbGV0ZSgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghaXUoZS5rYykpIHRocm93IGUuVWMoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLlVjKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MuRmMgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLmtjKSB0aHJvdyBlLlVjKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSB5dShpLCBlLkJjKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4gQ2UoZS5OLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gaXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBVbihlLk4sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgaXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGl0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBVbihlLk4sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgdHUpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFhhKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogcW4oZS5OLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIElhKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5VYyhgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IFFuKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUuVWMoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke21hKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHB1KHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGF0KHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBjdCh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHl1KHMsIGUuT2ModCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gVHUodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGl0IHx8IHQgaW5zdGFuY2VvZiB0dSB8fCB0IGluc3RhbmNlb2YgWGEgfHwgdCBpbnN0YW5jZW9mIElhIHx8IHQgaW5zdGFuY2VvZiBaYSk7XG59XG5cbmZ1bmN0aW9uIEV1KHQsIGUsIG4pIHtcbiAgICBpZiAoIVR1KG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IG1hKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5VYyh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5VYyh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIEl1KHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIEphKSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gUnUodCwgZSk7XG4gICAgdGhyb3cgYnUoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIEZpZWxkUGF0aC5cIiwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXG4gKi8gY29uc3QgQXUgPSBuZXcgUmVnRXhwKFwiW35cXFxcKi9cXFxcW1xcXFxdXVwiKTtcblxuLyoqXG4gKiBXcmFwcyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nIHdpdGggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCB0aGUgbWV0aG9kIHRoYXRcbiAqIHdhcyB0aHJvd24uXG4gKiBAcGFyYW0gbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXG4gKiBAcGFyYW0gcGF0aCAtIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlXG4gKiBzcGxpdCBvbiBkb3RzLlxuICogQHBhcmFtIHRhcmdldERvYyAtIFRoZSBkb2N1bWVudCBhZ2FpbnN0IHdoaWNoIHRoZSBmaWVsZCBwYXRoIHdpbGwgYmVcbiAqIGV2YWx1YXRlZC5cbiAqLyBmdW5jdGlvbiBSdSh0LCBlLCBuKSB7XG4gICAgaWYgKGUuc2VhcmNoKEF1KSA+PSAwKSB0aHJvdyBidShgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBKYSguLi5lLnNwbGl0KFwiLlwiKSkuX2ludGVybmFsUGF0aDtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgIHRocm93IGJ1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCwgdCwgXG4gICAgICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgICAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYnUodCwgZSwgbiwgcywgaSkge1xuICAgIGNvbnN0IHIgPSBzICYmICFzLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgYyA9IGBGdW5jdGlvbiAke2V9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmIChjICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgYyArPSBcIi4gXCI7XG4gICAgbGV0IGEgPSBcIlwiO1xuICAgIHJldHVybiAociB8fCBvKSAmJiAoYSArPSBcIiAoZm91bmRcIiwgciAmJiAoYSArPSBgIGluIGZpZWxkICR7c31gKSwgbyAmJiAoYSArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYSArPSBcIilcIiksIG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYyArIHQgKyBhKTtcbn1cblxuLyoqIENoZWNrcyBgaGF5c3RhY2tgIGlmIEZpZWxkUGF0aCBgbmVlZGxlYCBpcyBwcmVzZW50LiBSdW5zIGluIE8obikuICovIGZ1bmN0aW9uIFB1KHQsIGUpIHtcbiAgICByZXR1cm4gdC5zb21lKCh0ID0+IHQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHZ1IHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHMsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWEodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBWdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKFN1KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUpIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBWdSBleHRlbmRzIHZ1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIFN1KHQsIGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IFJ1KHQsIGUpIDogZSBpbnN0YW5jZW9mIEphID8gZS5faW50ZXJuYWxQYXRoIDogZS5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBzbmFwc2hvdCwgZGVzY3JpYmluZyB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICovIGNsYXNzIER1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IHQuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgQ3UgZXh0ZW5kcyB2dSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBlLCBuLCBzLCByKSwgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IHQsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgc2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YVxuICAgICAqIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgTnUodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYEZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0LCBlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChTdShcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBOdSBleHRlbmRzIEN1IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3MgeHUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX3NuYXBzaG90ID0gcywgdGhpcy5tZXRhZGF0YSA9IG5ldyBEdShzLmhhc1BlbmRpbmdXcml0ZXMsIHMuZnJvbUNhY2hlKSwgXG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgIH1cbiAgICAvKiogQW4gYXJyYXkgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGRvY3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgdDtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyBhbGwgb2YgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGZvclxuICAgICAqIGVhY2ggZG9jdW1lbnQgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSB0aGlzQXJnIC0gVGhlIGB0aGlzYCBiaW5kaW5nIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICovICAgIGZvckVhY2godCwgZSkge1xuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5jYWxsKGUsIG5ldyBOdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IER1KHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmtleSksIHRoaXMuX3NuYXBzaG90LmZyb21DYWNoZSksIHRoaXMucXVlcnkuY29udmVydGVyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmIHRoaXNcbiAgICAgKiBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyAnYWRkZWQnXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2AgdGhhdCBjb250cm9sIHdoZXRoZXIgbWV0YWRhdGEtb25seVxuICAgICAqIGNoYW5nZXMgKGkuZS4gb25seSBgRG9jdW1lbnRTbmFwc2hvdC5tZXRhZGF0YWAgY2hhbmdlZCkgc2hvdWxkIHRyaWdnZXJcbiAgICAgKiBzbmFwc2hvdCBldmVudHMuXG4gICAgICovICAgIGRvY0NoYW5nZXModCA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKGUgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSBlIHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiAoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFkZGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogbmV3IE51KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBEdSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpLFxuICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogLTEsXG4gICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBlKytcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIEEgYERvY3VtZW50U2V0YCB0aGF0IGlzIHVwZGF0ZWQgaW5jcmVtZW50YWxseSBhcyBjaGFuZ2VzIGFyZSBhcHBsaWVkIHRvIHVzZVxuICAgICAgICAgICAgICAgIC8vIHRvIGxvb2t1cCB0aGUgaW5kZXggb2YgYSBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IHQuX3NuYXBzaG90Lm9sZERvY3M7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMuZmlsdGVyKCh0ID0+IGUgfHwgMyAvKiBNZXRhZGF0YSAqLyAhPT0gdC50eXBlKSkubWFwKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBOdSh0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBlLmRvYy5rZXksIGUuZG9jLCBuZXcgRHUodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGUuZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgciA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBBZGRlZCAqLyAhPT0gZS50eXBlICYmIChpID0gbi5pbmRleE9mKGUuZG9jLmtleSksIG4gPSBuLmRlbGV0ZShlLmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIDEgLyogUmVtb3ZlZCAqLyAhPT0gZS50eXBlICYmIChuID0gbi5hZGQoZS5kb2MpLCByID0gbi5pbmRleE9mKGUuZG9jLmtleSkpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBrdShlLnR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogclxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0aGlzLCBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBlKSwgdGhpcy5fY2FjaGVkQ2hhbmdlcztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGt1KHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgIHJldHVybiBcImFkZGVkXCI7XG5cbiAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogTWV0YWRhdGEgKi8gOlxuICAgICAgICByZXR1cm4gXCJtb2RpZmllZFwiO1xuXG4gICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgIHJldHVybiBcInJlbW92ZWRcIjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlZXhwKTogQWRkIHRlc3RzIGZvciBzbmFwc2hvdEVxdWFsIHdpdGggZGlmZmVyZW50IHNuYXBzaG90XG4vLyBtZXRhZGF0YVxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHNuYXBzaG90IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICovIGZ1bmN0aW9uICR1KHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEN1ICYmIGUgaW5zdGFuY2VvZiBDdSA/IHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHQuX2tleS5pc0VxdWFsKGUuX2tleSkgJiYgKG51bGwgPT09IHQuX2RvY3VtZW50ID8gbnVsbCA9PT0gZS5fZG9jdW1lbnQgOiB0Ll9kb2N1bWVudC5pc0VxdWFsKGUuX2RvY3VtZW50KSkgJiYgdC5fY29udmVydGVyID09PSBlLl9jb252ZXJ0ZXIgOiB0IGluc3RhbmNlb2YgeHUgJiYgZSBpbnN0YW5jZW9mIHh1ICYmICh0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiBTYSh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiB0Lm1ldGFkYXRhLmlzRXF1YWwoZS5tZXRhZGF0YSkgJiYgdC5fc25hcHNob3QuaXNFcXVhbChlLl9zbmFwc2hvdCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBPdSh0KSB7XG4gICAgaWYgKG1lKHQpICYmIDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IGooSy5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIGVuZEJlZm9yZToxfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0gb3Ige0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgcXVlcnl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeSBpbnN0YW5jZSB0aGF0XG4gKiBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgRnUge31cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBpbnN0YW5jZSBvZiB7QGxpbmsgUXVlcnl9IHRoYXQgaXMgZXh0ZW5kZWQgdG8gYWxzbyBpbmNsdWRlXG4gKiBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSB7QGxpbmsgUXVlcnl9IGluc3RhbmNlIHRvIHVzZSBhcyBhIGJhc2UgZm9yIHRoZSBuZXcgY29uc3RyYWludHMuXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIFRoZSBsaXN0IG9mIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9cyB0byBhcHBseS5cbiAqIEB0aHJvd3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBxdWVyeSBjb25zdHJhaW50cyBjYW5ub3QgYmUgY29tYmluZWQgd2l0aCB0aGVcbiAqIGV4aXN0aW5nIG9yIG5ldyBjb25zdHJhaW50cy5cbiAqLyBmdW5jdGlvbiBNdSh0LCAuLi5lKSB7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSBuLl9hcHBseSh0KTtcbiAgICByZXR1cm4gdDtcbn1cblxuY2xhc3MgTHUgZXh0ZW5kcyBGdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkdjID0gdCwgdGhpcy56YyA9IGUsIHRoaXMuSGMgPSBuLCB0aGlzLnR5cGUgPSBcIndoZXJlXCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBjdSh0LmZpcmVzdG9yZSksIG4gPSBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gPT09IHIgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIFlvdSBjYW4ndCBwZXJmb3JtICcke3J9JyBxdWVyaWVzIG9uIEZpZWxkUGF0aC5kb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICB0aChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKFp1KHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgYyA9IFp1KHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBJTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCB0aChvLCByKSwgXG4gICAgICAgICAgICBjID0gZ3UobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBKdC5jcmVhdGUoaSwgciwgYyk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnYoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0geWUodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwoZS5maWVsZCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtlLmZpZWxkLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZ2UodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgZWgodCwgZS5maWVsZCwgcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmIChlLmluZGV4T2Yobi5vcCkgPj0gMCkgcmV0dXJuIG4ub3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0odCwgXG4gICAgICAgICAgICAgICAgLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBhcnJheSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMi4gT25seSBvbmUgZGlzanVuY3RpdmUgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDMuIGBOT1RfRVFVQUxgIGNhbm5vdCBiZSB1c2VkIHdpdGggYW5vdGhlciBgTk9UX0VRVUFMYCBvcGVyYXRvci5cbiAqIDQuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKlxuICogQXJyYXkgb3BlcmF0b3JzOiBgQVJSQVlfQ09OVEFJTlNgLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYFxuICogRGlzanVuY3RpdmUgb3BlcmF0b3JzOiBgSU5gLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYCwgYE5PVF9JTmBcbiAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfShlLm9wKSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIFxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuID09PSBlLm9wID8gbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICAgICAgICAgIH0odCwgYSksIGE7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuR2MsIHRoaXMuemMsIHRoaXMuSGMpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBmZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50cyBtdXN0IGNvbnRhaW4gdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZSByZWxhdGlvbiBjb25zdHJhaW50XG4gKiBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gQnUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gU3UoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IEx1KGksIHMsIG4pO1xufVxuXG5jbGFzcyBVdSBleHRlbmRzIEZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuR2MgPSB0LCB0aGlzLkpjID0gZSwgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IGFlKGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZ2UodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB5ZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlaCh0LCBuLCBlLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KHQsIHMpLCBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAodC5fcXVlcnksIHRoaXMuR2MsIHRoaXMuSmMpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgbiwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gcXUodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IFN1KFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IFV1KHMsIG4pO1xufVxuXG5jbGFzcyBLdSBleHRlbmRzIEZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWWMgPSBlLCB0aGlzLlhjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIEllKHQuX3F1ZXJ5LCB0aGlzLlljLCB0aGlzLlhjKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIGp1KHQpIHtcbiAgICByZXR1cm4geWEoXCJsaW1pdFwiLCB0KSwgbmV3IEt1KFwibGltaXRcIiwgdCwgXCJGXCIgLyogRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIFF1KHQpIHtcbiAgICByZXR1cm4geWEoXCJsaW1pdFRvTGFzdFwiLCB0KSwgbmV3IEt1KFwibGltaXRUb0xhc3RcIiwgdCwgXCJMXCIgLyogTGFzdCAqLyk7XG59XG5cbmNsYXNzIFd1IGV4dGVuZHMgRnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5aYyA9IGUsIHRoaXMudGEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gWHUodCwgdGhpcy50eXBlLCB0aGlzLlpjLCB0aGlzLnRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBYSh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZmUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCBlLCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gR3UoLi4udCkge1xuICAgIHJldHVybiBuZXcgV3UoXCJzdGFydEF0XCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24genUoLi4udCkge1xuICAgIHJldHVybiBuZXcgV3UoXCJzdGFydEFmdGVyXCIsIHQsIFxuICAgIC8qYmVmb3JlPSovICExKTtcbn1cblxuY2xhc3MgSHUgZXh0ZW5kcyBGdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlpjID0gZSwgdGhpcy50YSA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBYdSh0LCB0aGlzLnR5cGUsIHRoaXMuWmMsIHRoaXMudGEpO1xuICAgICAgICByZXR1cm4gbmV3IEFhKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBmZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgZSk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEp1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEh1KFwiZW5kQmVmb3JlXCIsIHQsIC8qYmVmb3JlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gWXUoLi4udCkge1xuICAgIHJldHVybiBuZXcgSHUoXCJlbmRBdFwiLCB0LCAvKmJlZm9yZT0qLyAhMSk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBYdSh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiB2dSkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgaihLLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgVGUodCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKGt0KGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChUdCh0KSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgb2UociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gY3UodC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBjID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBhfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlKHQpICYmIC0xICE9PSBhLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghUHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFB0KG4pO1xuICAgICAgICAgICAgICAgICAgICBjLnB1c2goa3QoZSwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBndShuLCBzLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgYy5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgb2UoYywgcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWnUodCwgZSwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghcGUoZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQoaHQuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghUHQuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHByb3ZpZGVkIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke3N9JyBpcyBub3QgYmVjYXVzZSBpdCBoYXMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cyAoJHtzLmxlbmd0aH0pLmApO1xuICAgICAgICByZXR1cm4ga3QodCwgbmV3IFB0KHMpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBJYSkgcmV0dXJuIGt0KHQsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHttYShuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiB0aCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICBpZiAodC5sZW5ndGggPiAxMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gJyR7ZS50b1N0cmluZygpfScgZmlsdGVycyBzdXBwb3J0IGEgbWF4aW11bSBvZiAxMCBlbGVtZW50cyBpbiB0aGUgdmFsdWUgYXJyYXkuYCk7XG59XG5cbmZ1bmN0aW9uIGVoKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbChlKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke2UudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHtlLnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBuaCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKHZ0KHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB5dCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhwdCh0LmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLCBlKTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGN0KHQuZmllbGRzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IHR1KHl0KHQubGF0aXR1ZGUpLCB5dCh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChJdCh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBndCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBpdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gaHQuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgQihUcyhuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgaGEobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyBQdChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgTyhgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gc2godCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIGloIGV4dGVuZHMgbmgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IFhhKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJYSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqLyBjbGFzcyByaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSBlLCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gY3UodCk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBzID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IHNoKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGF1KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24ocy5fa2V5LCBHZS5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSBvaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBKYSA/IG11KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IF91KHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihpLl9rZXksIEdlLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgZSA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBjbihlLl9rZXksIEdlLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9oKHQsIGUpIHtcbiAgICBpZiAoKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovXG5mdW5jdGlvbiBjaCh0KSB7XG4gICAgdCA9IGdhKHQsIElhKTtcbiAgICBjb25zdCBlID0gZ2EodC5maXJlc3RvcmUsIGthKTtcbiAgICByZXR1cm4gbmEoRmEoZSksIHQuX2tleSkudGhlbigobiA9PiBFaChlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBhaCBleHRlbmRzIG5oIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYYSh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgSWEodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gdWgodCkge1xuICAgIHQgPSBnYSh0LCBJYSk7XG4gICAgY29uc3QgZSA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIG4gPSBGYShlKSwgcyA9IG5ldyBhaChlKTtcbiAgICByZXR1cm4gZWEobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBDdShlLCBzLCB0Ll9rZXksIG4sIG5ldyBEdShudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGhoKHQpIHtcbiAgICB0ID0gZ2EodCwgSWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpO1xuICAgIHJldHVybiBuYShGYShlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gRWgoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBsaCh0KSB7XG4gICAgdCA9IGdhKHQsIEFhKTtcbiAgICBjb25zdCBlID0gZ2EodC5maXJlc3RvcmUsIGthKSwgbiA9IEZhKGUpLCBzID0gbmV3IGFoKGUpO1xuICAgIHJldHVybiBPdSh0Ll9xdWVyeSksIGlhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyB4dShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGZoKHQpIHtcbiAgICB0ID0gZ2EodCwgQWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBuID0gRmEoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIHNhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyB4dShlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIGRoKHQpIHtcbiAgICB0ID0gZ2EodCwgQWEpO1xuICAgIGNvbnN0IGUgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBuID0gRmEoZSksIHMgPSBuZXcgYWgoZSk7XG4gICAgcmV0dXJuIGlhKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IHh1KGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIHdoKHQsIGUsIG4pIHtcbiAgICB0ID0gZ2EodCwgSWEpO1xuICAgIGNvbnN0IHMgPSBnYSh0LmZpcmVzdG9yZSwga2EpLCBpID0gc2godC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBUaChzLCBbIGF1KGN1KHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgR2Uubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gX2godCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSBnYSh0LCBJYSk7XG4gICAgY29uc3QgaSA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIHIgPSBjdShpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBKYSA/IG11KHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSwgbiwgcykgOiBfdShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUpO1xuICAgIHJldHVybiBUaChpLCBbIG8udG9NdXRhdGlvbih0Ll9rZXksIEdlLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIG1oKHQpIHtcbiAgICByZXR1cm4gVGgoZ2EodC5maXJlc3RvcmUsIGthKSwgWyBuZXcgY24odC5fa2V5LCBHZS5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBnaCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGdhKHQuZmlyZXN0b3JlLCBrYSksIHMgPSB2YSh0KSwgaSA9IHNoKHQuY29udmVydGVyLCBlKTtcbiAgICByZXR1cm4gVGgobiwgWyBhdShjdSh0LmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHMuX2tleSwgR2UuZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcykpO1xufVxuXG5mdW5jdGlvbiB5aCh0LCAuLi5lKSB7XG4gICAgdmFyIG4sIHMsIGk7XG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KTtcbiAgICBsZXQgciA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiBlW29dIHx8IENhKGVbb10pIHx8IChyID0gZVtvXSwgbysrKTtcbiAgICBjb25zdCBjID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiByLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmIChDYShlW29dKSkge1xuICAgICAgICBjb25zdCB0ID0gZVtvXTtcbiAgICAgICAgZVtvXSA9IG51bGwgPT09IChuID0gdC5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQodCksIGVbbyArIDFdID0gbnVsbCA9PT0gKHMgPSB0LmVycm9yKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmJpbmQodCksIFxuICAgICAgICBlW28gKyAyXSA9IG51bGwgPT09IChpID0gdC5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKHQpO1xuICAgIH1cbiAgICBsZXQgYSwgdSwgaDtcbiAgICBpZiAodCBpbnN0YW5jZW9mIElhKSB1ID0gZ2EodC5maXJlc3RvcmUsIGthKSwgaCA9IHdlKHQuX2tleS5wYXRoKSwgYSA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICBlW29dICYmIGVbb10oRWgodSwgdCwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gZ2EodCwgQWEpO1xuICAgICAgICB1ID0gZ2Eobi5maXJlc3RvcmUsIGthKSwgaCA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCBzID0gbmV3IGFoKHUpO1xuICAgICAgICBhID0ge1xuICAgICAgICAgICAgbmV4dDogdCA9PiB7XG4gICAgICAgICAgICAgICAgZVtvXSAmJiBlW29dKG5ldyB4dSh1LCBzLCBuLCB0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgICAgIH0sIE91KHQuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBMYyhzKSwgciA9IG5ldyBRbyhlLCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBCbyhhd2FpdCBYYyh0KSwgcikpKSwgKCkgPT4ge1xuICAgICAgICAgICAgaS5lYygpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gVW8oYXdhaXQgWGModCksIHIpKSk7XG4gICAgICAgIH07XG4gICAgfShGYSh1KSwgaCwgYywgYSk7XG59XG5cbmZ1bmN0aW9uIHBoKHQsIGUpIHtcbiAgICByZXR1cm4gcmEoRmEodCA9IGdhKHQsIGthKSksIENhKGUpID8gZSA6IHtcbiAgICAgICAgbmV4dDogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIFRoKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gcmMoYXdhaXQgWWModCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbiAgICB9KEZhKHQpLCBlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIEVoKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbi5kb2NzLmdldChlLl9rZXkpLCBpID0gbmV3IGFoKHQpO1xuICAgIHJldHVybiBuZXcgQ3UodCwgaSwgZS5fa2V5LCBzLCBuZXcgRHUobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovIGNsYXNzIEloIGV4dGVuZHMgY2xhc3Mge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl90cmFuc2FjdGlvbiA9IGUsIHRoaXMuX2RhdGFSZWFkZXIgPSBjdSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBvaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGloKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyBlLl9rZXkgXSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQgfHwgMSAhPT0gdC5sZW5ndGgpIHJldHVybiBMKCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFswXTtcbiAgICAgICAgICAgIGlmIChzLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IHZ1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgcy5rZXksIHMsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChzLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IHZ1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCBudWxsLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBzaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBhdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChzLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICBjb25zdCBpID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgSmEgPyBtdSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogX3UodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gb2godCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG9oKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgYWgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyBDdSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBEdShcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBBaCh0LCBlKSB7XG4gICAgcmV0dXJuIG9hKEZhKHQgPSBnYSh0LCBrYSkpLCAobiA9PiBlKG5ldyBJaCh0LCBuKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gUmgoKSB7XG4gICAgcmV0dXJuIG5ldyB1dShcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBiaCgpIHtcbiAgICByZXR1cm4gbmV3IGx1KFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBQaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IGZ1KFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gdmgoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBkdShcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gVmgodCkge1xuICAgIHJldHVybiBuZXcgd3UoXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBTaCh0KSB7XG4gICAgcmV0dXJuIEZhKHQgPSBnYSh0LCBrYSkpLCBuZXcgcmgodCwgKGUgPT4gVGgodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24odCwgZSA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgQyA9IHQ7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgodCwge29wdGlvbnM6IG59KSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBpID0gbmV3IGthKHMsIG5ldyBIKHQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSk7XG4gICAgICAgIHJldHVybiBuID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IGVcbiAgICAgICAgfSwgbiksIGkuX3NldFNldHRpbmdzKG4pLCBpO1xuICAgIH0pLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpLCByZWdpc3RlclZlcnNpb24oUywgXCIzLjMuMFwiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oUywgXCIzLjMuMFwiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IG5oIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIFhhIGFzIEJ5dGVzLCB4YSBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgUmEgYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgSWEgYXMgRG9jdW1lbnRSZWZlcmVuY2UsIEN1IGFzIERvY3VtZW50U25hcHNob3QsIEphIGFzIEZpZWxkUGF0aCwgWmEgYXMgRmllbGRWYWx1ZSwga2EgYXMgRmlyZXN0b3JlLCBqIGFzIEZpcmVzdG9yZUVycm9yLCB0dSBhcyBHZW9Qb2ludCwgTmEgYXMgTG9hZEJ1bmRsZVRhc2ssIEFhIGFzIFF1ZXJ5LCBGdSBhcyBRdWVyeUNvbnN0cmFpbnQsIE51IGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgeHUgYXMgUXVlcnlTbmFwc2hvdCwgRHUgYXMgU25hcHNob3RNZXRhZGF0YSwgaXQgYXMgVGltZXN0YW1wLCBJaCBhcyBUcmFuc2FjdGlvbiwgcmggYXMgV3JpdGVCYXRjaCwgaGEgYXMgX0RhdGFiYXNlSWQsIFB0IGFzIF9Eb2N1bWVudEtleSwgRyBhcyBfRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLCBmdCBhcyBfRmllbGRQYXRoLCBnYSBhcyBfY2FzdCwgVSBhcyBfZGVidWdBc3NlcnQsIHd0IGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgRiBhcyBfbG9nV2FybiwgZGEgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIGdoIGFzIGFkZERvYywgdmggYXMgYXJyYXlSZW1vdmUsIFBoIGFzIGFycmF5VW5pb24sIHFhIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIGJhIGFzIGNvbGxlY3Rpb24sIFBhIGFzIGNvbGxlY3Rpb25Hcm91cCwgRWEgYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBtaCBhcyBkZWxldGVEb2MsIFJoIGFzIGRlbGV0ZUZpZWxkLCBRYSBhcyBkaXNhYmxlTmV0d29yaywgdmEgYXMgZG9jLCBZYSBhcyBkb2N1bWVudElkLCBMYSBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgQmEgYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgamEgYXMgZW5hYmxlTmV0d29yaywgWXUgYXMgZW5kQXQsIEp1IGFzIGVuZEJlZm9yZSwgRmEgYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgVGggYXMgZXhlY3V0ZVdyaXRlLCBjaCBhcyBnZXREb2MsIHVoIGFzIGdldERvY0Zyb21DYWNoZSwgaGggYXMgZ2V0RG9jRnJvbVNlcnZlciwgbGggYXMgZ2V0RG9jcywgZmggYXMgZ2V0RG9jc0Zyb21DYWNoZSwgZGggYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIE9hIGFzIGdldEZpcmVzdG9yZSwgVmggYXMgaW5jcmVtZW50LCAkYSBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCBqdSBhcyBsaW1pdCwgUXUgYXMgbGltaXRUb0xhc3QsIEdhIGFzIGxvYWRCdW5kbGUsIHphIGFzIG5hbWVkUXVlcnksIHloIGFzIG9uU25hcHNob3QsIHBoIGFzIG9uU25hcHNob3RzSW5TeW5jLCBxdSBhcyBvcmRlckJ5LCBNdSBhcyBxdWVyeSwgU2EgYXMgcXVlcnlFcXVhbCwgVmEgYXMgcmVmRXF1YWwsIEFoIGFzIHJ1blRyYW5zYWN0aW9uLCBiaCBhcyBzZXJ2ZXJUaW1lc3RhbXAsIHdoIGFzIHNldERvYywgayBhcyBzZXRMb2dMZXZlbCwgJHUgYXMgc25hcHNob3RFcXVhbCwgenUgYXMgc3RhcnRBZnRlciwgR3UgYXMgc3RhcnRBdCwgV2EgYXMgdGVybWluYXRlLCBfaCBhcyB1cGRhdGVEb2MsIEthIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBCdSBhcyB3aGVyZSwgU2ggYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCBcIi4vc3R5bGUvc3R5bGUuY3NzXCI7XG5pbXBvcnQge1xuICBkcmF3Q2lyY2xlQXJvdW5kQ2hhcmFjdGVyLFxuICBhZGRJbWFnZXNUb1N0YXJ0UGFnZSxcbiAgYWRkSW1hZ2VzVG9HYW1lLFxuICB1cGRhdGVTdGF0dXNTaWRlQmFyLFxuICBjcmVhdGVQcmV0dHlBbGVydCxcbiAgcHJvbXB0VXNlckZvck5hbWUsXG4gIGRpc3BsYXlTY29yZWJvYXJkLFxuICBkaXNwbGF5SW1hZ2UsXG4gIHVwZGF0ZURvbUFmdGVyUmVmcmVzaCxcbn0gZnJvbSBcIi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBnZXRGaXJlYmFzZUNvbmZpZyB9IGZyb20gXCIuL2ZpcmViYXNlLWNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcbmltcG9ydCB7IGdldEF1dGgsIHNpZ25JbkFub255bW91c2x5LCBvbkF1dGhTdGF0ZUNoYW5nZWQgfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHtcbiAgZ2V0RmlyZXN0b3JlLFxuICBkb2MsXG4gIHNldERvYyxcbiAgZ2V0RG9jLFxuICBzZXJ2ZXJUaW1lc3RhbXAsXG4gIHVwZGF0ZURvYyxcbiAgaW5jcmVtZW50LFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8vIGRldGVybWluZXMgdGhlIGxvY2F0aW9ucyBvZiBlYWNoIGNoYXJhY3RlciBhY2NvcmRpbmcgdG8gdGhlIHNpemUgb2YgdGhlIGltYWdlIGRpc3BsYXllZFxuY29uc3QgY2FsY3VsYXRlTG9jYXRpb25zID0gZnVuY3Rpb24gKGNoYXJhY3Rlcikge1xuICBsZXQgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kaW1hZ2VcIik7XG4gIHN3aXRjaCAoY2hhcmFjdGVyKSB7XG4gICAgLy9lYWNoIGNoYXJhY3RlciBoYXMgYW4gYXJlYSBvZiBhY2NlcHRhYmxlIGxvY2F0aW9ucywgd2hpY2ggaXMgc3RvcmVkIGluIHRoZSBkYlxuICAgIGNhc2UgXCJ3YWxkb1wiOiB7XG4gICAgICBjb25zdCB3YWxkb0xvY2F0aW9uTWluV2lkdGggPSBNYXRoLmNlaWwoMC4zOTYzICogTnVtYmVyKGltZy5jbGllbnRXaWR0aCkpO1xuICAgICAgY29uc3Qgd2FsZG9Mb2NhdGlvbk1heFdpZHRoID0gTWF0aC5jZWlsKDAuNDEyMyAqIE51bWJlcihpbWcuY2xpZW50V2lkdGgpKTtcbiAgICAgIGNvbnN0IHdhbGRvTG9jYXRpb25NaW5IZWlnaHQgPSBNYXRoLmNlaWwoXG4gICAgICAgIDAuNTg3OSAqIE51bWJlcihpbWcuY2xpZW50SGVpZ2h0KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHdhbGRvTG9jYXRpb25NYXhIZWlnaHQgPSBNYXRoLmNlaWwoXG4gICAgICAgIDAuNjM1MiAqIE51bWJlcihpbWcuY2xpZW50SGVpZ2h0KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHdhbGRvID0ge1xuICAgICAgICBtaW53aWR0aDogd2FsZG9Mb2NhdGlvbk1pbldpZHRoLFxuICAgICAgICBtYXh3aWR0aDogd2FsZG9Mb2NhdGlvbk1heFdpZHRoLFxuICAgICAgICBtaW5oZWlnaHQ6IHdhbGRvTG9jYXRpb25NaW5IZWlnaHQsXG4gICAgICAgIG1heGhlaWdodDogd2FsZG9Mb2NhdGlvbk1heEhlaWdodCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gd2FsZG87XG4gICAgfVxuICAgIGNhc2UgXCJvZGxhd1wiOiB7XG4gICAgICBjb25zdCBvZGxhd0xvY2F0aW9uTWluV2lkdGggPSBNYXRoLmNlaWwoMC4wNjIgKiBOdW1iZXIoaW1nLmNsaWVudFdpZHRoKSk7XG4gICAgICBjb25zdCBvZGxhd0xvY2F0aW9uTWF4V2lkdGggPSBNYXRoLmNlaWwoMC4wNzcgKiBOdW1iZXIoaW1nLmNsaWVudFdpZHRoKSk7XG4gICAgICBjb25zdCBvZGxhd0xvY2F0aW9uTWluSGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAwLjY2MTYgKiBOdW1iZXIoaW1nLmNsaWVudEhlaWdodClcbiAgICAgICk7XG4gICAgICBjb25zdCBvZGxhd0xvY2F0aW9uTWF4SGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAwLjY5MjggKiBOdW1iZXIoaW1nLmNsaWVudEhlaWdodClcbiAgICAgICk7XG4gICAgICBjb25zdCBvZGxhdyA9IHtcbiAgICAgICAgbWlud2lkdGg6IG9kbGF3TG9jYXRpb25NaW5XaWR0aCxcbiAgICAgICAgbWF4d2lkdGg6IG9kbGF3TG9jYXRpb25NYXhXaWR0aCxcbiAgICAgICAgbWluaGVpZ2h0OiBvZGxhd0xvY2F0aW9uTWluSGVpZ2h0LFxuICAgICAgICBtYXhoZWlnaHQ6IG9kbGF3TG9jYXRpb25NYXhIZWlnaHQsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIG9kbGF3O1xuICAgIH1cbiAgICBjYXNlIFwid2VuZGFcIjoge1xuICAgICAgY29uc3Qgd2VuZGFMb2NhdGlvbk1pbldpZHRoID0gTWF0aC5jZWlsKDAuMjg4OCAqIE51bWJlcihpbWcuY2xpZW50V2lkdGgpKTtcbiAgICAgIGNvbnN0IHdlbmRhTG9jYXRpb25NYXhXaWR0aCA9IE1hdGguY2VpbCgwLjMwMDYgKiBOdW1iZXIoaW1nLmNsaWVudFdpZHRoKSk7XG4gICAgICBjb25zdCB3ZW5kYUxvY2F0aW9uTWluSGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAwLjQ3NjQgKiBOdW1iZXIoaW1nLmNsaWVudEhlaWdodClcbiAgICAgICk7XG4gICAgICBjb25zdCB3ZW5kYUxvY2F0aW9uTWF4SGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAwLjUzNTkgKiBOdW1iZXIoaW1nLmNsaWVudEhlaWdodClcbiAgICAgICk7XG4gICAgICBjb25zdCB3ZW5kYSA9IHtcbiAgICAgICAgbWlud2lkdGg6IHdlbmRhTG9jYXRpb25NaW5XaWR0aCxcbiAgICAgICAgbWF4d2lkdGg6IHdlbmRhTG9jYXRpb25NYXhXaWR0aCxcbiAgICAgICAgbWluaGVpZ2h0OiB3ZW5kYUxvY2F0aW9uTWluSGVpZ2h0LFxuICAgICAgICBtYXhoZWlnaHQ6IHdlbmRhTG9jYXRpb25NYXhIZWlnaHQsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHdlbmRhO1xuICAgIH1cbiAgICBjYXNlIFwid2l6YXJkXCI6IHtcbiAgICAgIGNvbnN0IHdpemFyZExvY2F0aW9uTWluV2lkdGggPSBNYXRoLmNlaWwoXG4gICAgICAgIDAuNzc0MyAqIE51bWJlcihpbWcuY2xpZW50V2lkdGgpXG4gICAgICApO1xuICAgICAgY29uc3Qgd2l6YXJkTG9jYXRpb25NYXhXaWR0aCA9IE1hdGguY2VpbChcbiAgICAgICAgMC43ODk3ICogTnVtYmVyKGltZy5jbGllbnRXaWR0aClcbiAgICAgICk7XG4gICAgICBjb25zdCB3aXphcmRMb2NhdGlvbk1pbkhlaWdodCA9IE1hdGguY2VpbChcbiAgICAgICAgMC41MzY5ICogTnVtYmVyKGltZy5jbGllbnRIZWlnaHQpXG4gICAgICApO1xuICAgICAgY29uc3Qgd2l6YXJkTG9jYXRpb25NYXhIZWlnaHQgPSBNYXRoLmNlaWwoXG4gICAgICAgIDAuNTg5OCAqIE51bWJlcihpbWcuY2xpZW50SGVpZ2h0KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHdpemFyZCA9IHtcbiAgICAgICAgbWlud2lkdGg6IHdpemFyZExvY2F0aW9uTWluV2lkdGgsXG4gICAgICAgIG1heHdpZHRoOiB3aXphcmRMb2NhdGlvbk1heFdpZHRoLFxuICAgICAgICBtaW5oZWlnaHQ6IHdpemFyZExvY2F0aW9uTWluSGVpZ2h0LFxuICAgICAgICBtYXhoZWlnaHQ6IHdpemFyZExvY2F0aW9uTWF4SGVpZ2h0LFxuICAgICAgfTtcbiAgICAgIHJldHVybiB3aXphcmQ7XG4gICAgfVxuICAgIGNhc2UgXCJ3b29mXCI6IHtcbiAgICAgIGNvbnN0IHdvb2ZMb2NhdGlvbk1pbldpZHRoID0gTWF0aC5jZWlsKDAuNTgyMyAqIE51bWJlcihpbWcuY2xpZW50V2lkdGgpKTtcbiAgICAgIGNvbnN0IHdvb2ZMb2NhdGlvbk1heFdpZHRoID0gTWF0aC5jZWlsKDAuNTkzNiAqIE51bWJlcihpbWcuY2xpZW50V2lkdGgpKTtcbiAgICAgIGNvbnN0IHdvb2ZMb2NhdGlvbk1pbkhlaWdodCA9IE1hdGguY2VpbChcbiAgICAgICAgMC45MDA3ICogTnVtYmVyKGltZy5jbGllbnRIZWlnaHQpXG4gICAgICApO1xuICAgICAgY29uc3Qgd29vZkxvY2F0aW9uTWF4SGVpZ2h0ID0gTWF0aC5jZWlsKFxuICAgICAgICAwLjkxMDUgKiBOdW1iZXIoaW1nLmNsaWVudEhlaWdodClcbiAgICAgICk7XG4gICAgICBjb25zdCB3b29mID0ge1xuICAgICAgICBtaW53aWR0aDogd29vZkxvY2F0aW9uTWluV2lkdGgsXG4gICAgICAgIG1heHdpZHRoOiB3b29mTG9jYXRpb25NYXhXaWR0aCxcbiAgICAgICAgbWluaGVpZ2h0OiB3b29mTG9jYXRpb25NaW5IZWlnaHQsXG4gICAgICAgIG1heGhlaWdodDogd29vZkxvY2F0aW9uTWF4SGVpZ2h0LFxuICAgICAgfTtcbiAgICAgIHJldHVybiB3b29mO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5sb2coXCJlcnJvciBlcnJvci4gd3JvbmcgY2hhcmFjdGVyIGNhbGxlZFwiKTtcbiAgfVxufTtcblxuLy8gZ2V0cyB0aGUgY2hhcmFjdGVyIGxvY2F0aW9uIGFyZWEgZnJvbSBkYiBhbmQgY2hlY2tzIGlmIHRoZSBjbGlja2VkIGNvb3JkaW5hdGUgaXMgaW5zaWRlIHRoYXQgYXJlYVxuY29uc3QgY2hlY2tJZlNlbGVjdGVkQ2hhcmFjdGVySXNDb3JyZWN0ID0gYXN5bmMgZnVuY3Rpb24gKGNvb3JkLCBldmVudHRhcmdldCkge1xuICBjb25zdCBjbGlja2VkWCA9IE51bWJlcihjb29yZFswXSk7XG4gIGNvbnN0IGNsaWNrZWRZID0gTnVtYmVyKGNvb3JkWzFdKTtcbiAgY29uc3QgY2xpY2tlZFRhcmdldExvY2F0aW9uT25EQiA9IGF3YWl0IGdldExvY2F0aW9uRnJvbURCKFxuICAgIGV2ZW50dGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyXG4gICk7XG4gIGNvbnN0IG1pbndpZHRoID0gTnVtYmVyKGNsaWNrZWRUYXJnZXRMb2NhdGlvbk9uREIubG9jYXRpb24ubWlud2lkdGgpO1xuICBjb25zdCBtYXh3aWR0aCA9IE51bWJlcihjbGlja2VkVGFyZ2V0TG9jYXRpb25PbkRCLmxvY2F0aW9uLm1heHdpZHRoKTtcbiAgY29uc3QgbWluaGVpZ2h0ID0gTnVtYmVyKGNsaWNrZWRUYXJnZXRMb2NhdGlvbk9uREIubG9jYXRpb24ubWluaGVpZ2h0KTtcbiAgY29uc3QgbWF4aGVpZ2h0ID0gTnVtYmVyKGNsaWNrZWRUYXJnZXRMb2NhdGlvbk9uREIubG9jYXRpb24ubWF4aGVpZ2h0KTtcbiAgaWYgKFxuICAgIGNsaWNrZWRYIDw9IG1heHdpZHRoICYmXG4gICAgY2xpY2tlZFggPj0gbWlud2lkdGggJiZcbiAgICBjbGlja2VkWSA8PSBtYXhoZWlnaHQgJiZcbiAgICBjbGlja2VkWSA+PSBtaW5oZWlnaHRcbiAgKSB7XG4gICAgLy8gaWYgaW5zaWRlIHRoZSBhcmVhLCB1cGRhdGVzIGRvbSBhbmQgZGJcbiAgICBjcmVhdGVQcmV0dHlBbGVydCh0cnVlLCBldmVudHRhcmdldCk7XG4gICAgdXBkYXRlRm91bmRDaGFyYWN0ZXJzKGV2ZW50dGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyKTtcbiAgICB1cGRhdGVTdGF0dXNTaWRlQmFyKGV2ZW50dGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyKTtcbiAgICBkcmF3Q2lyY2xlQXJvdW5kQ2hhcmFjdGVyKFxuICAgICAgY2xpY2tlZFgsXG4gICAgICBjbGlja2VkWSxcbiAgICAgIGV2ZW50dGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBjcmVhdGVQcmV0dHlBbGVydChmYWxzZSwgZXZlbnR0YXJnZXQpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuY29uc3Qgc2lnbkluID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIGF3YWl0IHNpZ25JbkFub255bW91c2x5KGdldEF1dGgoKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBzaWduaW5nIGluIFwiLCBlcnJvcik7XG4gIH1cbn07XG5cbmNvbnN0IGluaXRGaXJlYmFzZUF1dGggPSBmdW5jdGlvbiAoKSB7XG4gIG9uQXV0aFN0YXRlQ2hhbmdlZChnZXRBdXRoKCksIGF1dGhTdGF0ZU9ic2VydmVyKTtcbn07XG5cbmNvbnN0IGF1dGhTdGF0ZU9ic2VydmVyID0gYXN5bmMgZnVuY3Rpb24gKHVzZXIpIHtcbiAgLy8gaWYgdXNlciBpcyBsb2dnZWQgaW4gKGhhcyBjbGlja2VkIHRoZSBzdGFydCBidXR0b24pLCBzdGFydHMgdGhlIGdhbWVcbiAgaWYgKHVzZXIpIHtcbiAgICAvLyBjaGVja3MgaWYgdGhlIHVzZXIgYXMgcGxheWVkIGJlZm9yZSAocmVmcmVzaGVkIHRoZSBwYWdlKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhnZXRGaXJlc3RvcmUoKSwgXCJ1c2Vyc1wiLCB1c2VyLnVpZCk7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIGxldCB1c2VySGFzUGxheWVkQmVmb3JlID0gZmFsc2U7XG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHVzZXJIYXNQbGF5ZWRCZWZvcmUgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBoaWRlcyBsYW5kaW5nIHBhZ2VcbiAgICBjb25zdCBsb2FkaW5nZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nXCIpO1xuICAgIGxvYWRpbmdkaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGNvbnN0IGdhbWVzdGFydGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZXN0YXJ0XCIpO1xuICAgIGNvbnN0IGdhbWVkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVcIik7XG4gICAgZ2FtZWRpdi5jbGFzc0xpc3QuYWRkKFwic2hvd2dhbWVcIik7XG4gICAgZ2FtZWRpdi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgZ2FtZXN0YXJ0ZGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAvLyBsb2FkcyBiYWNrZ3JvdW5kIGltYWdlIGFuZCB0aHVtYm5haWxzLCBhbmQgY3JlYXRlcyBoaWdoIHNjb3JlcyBidXR0b25cbiAgICBjb25zdCBwbGFjZUltYWdlT25CYWNrZ3JvdW5kID0gYXdhaXQgZGlzcGxheUltYWdlKCk7XG4gICAgYWRkSW1hZ2VzVG9HYW1lKCk7XG4gICAgaGlnaGVzdFNjb3Jlc0xpbmsoKTtcbiAgICBpZiAoIXVzZXJIYXNQbGF5ZWRCZWZvcmUpIHtcbiAgICAgIC8vIGlmIHVzZXIgaGFzbid0IHBsYXllZCBiZWZvcmUsIGxvYWRzIGEgY2xlYW4gZ2FtZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGluaXRVc2VyKHVzZXIudWlkKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiB0aGUgdXNlciBoYXMgcGxheWVkIGJlZm9yZSwgZmV0Y2hlcyBpbmZvcm1hdGlvbiBvZiBmb3VuZCBjaGFyYWN0ZXJzIGZyb20gZGIgYW5kIHVwZGF0ZXMgZG9tXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdXBkYXRlRG9tQWZ0ZXJSZWZyZXNoKGRvY1NuYXAuZGF0YSgpKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBkaXNwbGF5cyBsYW5kaW5nIHBhZ2VcbiAgICBjb25zdCBsb2FkaW5nZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nXCIpO1xuICAgIGxvYWRpbmdkaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGNvbnN0IGdhbWVzdGFydGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZXN0YXJ0XCIpO1xuICAgIGdhbWVzdGFydGRpdi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgYWRkSW1hZ2VzVG9TdGFydFBhZ2UoKTtcbiAgfVxufTtcblxuLy8gc2F2ZXMgaW5mb3JtYXRpb24gZm9yIGN1cnJlbnQgdXNlciB0byBkYjsgY2hhcmFjdGVycycgbG9jYXRpb25zIGFuZCBzdGFydCB0aW1lXG5jb25zdCBpbml0VXNlciA9IGFzeW5jIGZ1bmN0aW9uICh1aWQpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzZXREb2MoZG9jKGdldEZpcmVzdG9yZSgpLCBcInVzZXJzXCIsIHVpZCksIHtcbiAgICAgIHdhbGRvTG9jYXRpb246IHsgbG9jYXRpb246IGNhbGN1bGF0ZUxvY2F0aW9ucyhcIndhbGRvXCIpLCBmb3VuZDogZmFsc2UgfSxcbiAgICAgIG9kbGF3TG9jYXRpb246IHsgbG9jYXRpb246IGNhbGN1bGF0ZUxvY2F0aW9ucyhcIm9kbGF3XCIpLCBmb3VuZDogZmFsc2UgfSxcbiAgICAgIHdlbmRhTG9jYXRpb246IHsgbG9jYXRpb246IGNhbGN1bGF0ZUxvY2F0aW9ucyhcIndlbmRhXCIpLCBmb3VuZDogZmFsc2UgfSxcbiAgICAgIHdpemFyZExvY2F0aW9uOiB7IGxvY2F0aW9uOiBjYWxjdWxhdGVMb2NhdGlvbnMoXCJ3aXphcmRcIiksIGZvdW5kOiBmYWxzZSB9LFxuICAgICAgd29vZkxvY2F0aW9uOiB7IGxvY2F0aW9uOiBjYWxjdWxhdGVMb2NhdGlvbnMoXCJ3b29mXCIpLCBmb3VuZDogZmFsc2UgfSxcbiAgICAgIHN0YXJ0VGltZTogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICBlbmRUaW1lOiAwLFxuICAgICAgZm91bmRjaGFyYWN0ZXJzOiAwLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3Igd3JpdGluZyB0byBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICB9XG59O1xuXG4vLyBmZXRjaGVzIGxvY2F0aW9uIG9mIGEgc3BlY2lmaWMgY2hhcmFjdGVyIGZvciBjdXJyZW50IHVzZXJcbmNvbnN0IGdldExvY2F0aW9uRnJvbURCID0gYXN5bmMgZnVuY3Rpb24gKGNoYXJhY3Rlcikge1xuICBjb25zdCBkb2NSZWYgPSBkb2MoZ2V0RmlyZXN0b3JlKCksIFwidXNlcnNcIiwgZ2V0QXV0aCgpLmN1cnJlbnRVc2VyLnVpZCk7XG4gIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICBjb25zdCBhbGxkYXRhID0gZG9jU25hcC5kYXRhKCk7XG4gICAgcmV0dXJuIGFsbGRhdGFbY2hhcmFjdGVyXTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcIk5vIHN1Y2ggZG9jdW1lbnQhXCIpO1xuICB9XG59O1xuXG4vLyB1cGRhdGVzIHZhbHVlcyBvbiBkYiB3aGVuIHVzZXIgZmluZHMgYSBjaGFyYWN0ZXI7IGlmIGFmdGVyIHVwZGF0aW5nIHRoZSBkYiB0aGUgbnVtYmVyIG9mIGZvdW5kIGNoYXJhY3RlcnMgaXMgdGhlIHRvdGFsIG51bWJlciBvZiBjaGFyYWN0ZXJzLCB1cGRhdGVzIHRoZSBlbmR0aW1lIG9uIGRiIGFuZCBjYWxscyB0aGUgaGlnaCBzY29yZXMgZnVuY3Rpb24uXG5jb25zdCB1cGRhdGVGb3VuZENoYXJhY3RlcnMgPSBhc3luYyBmdW5jdGlvbiAoY2hhcmFjdGVyKSB7XG4gIGlmIChnZXRBdXRoKCkuY3VycmVudFVzZXIgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY3VycmVudHVzZXIgPSBnZXRBdXRoKCkuY3VycmVudFVzZXIudWlkO1xuICBjb25zdCBkb2NSZWYgPSBkb2MoZ2V0RmlyZXN0b3JlKCksIFwidXNlcnNcIiwgY3VycmVudHVzZXIpO1xuICAvL2RpZG4ndCBtYW5hZ2UgdG8gZmluZCBob3cgdG8gdXBkYXRlIGZpZWxkcyBvbiBkYiB3aGVuIHRoZSBmaWVsZCBuYW1lIGlzIGEgdmFyaWFibGVcbiAgaWYgKGNoYXJhY3RlciA9PT0gXCJ3YWxkb0xvY2F0aW9uXCIpIHtcbiAgICAvLyBjaGFuZ2VzIHRoZSB2YWx1ZSBvZiBmaWVsZCBjaGFyYWN0ZXJMb2NhdGlvbi5mb3VuZCB0byB0cnVlIGFuZCBpbmNyZW1lbnRzIHRoZSBmb3VuZCBjaGFyYWN0ZXJzICsxXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgZm91bmRjaGFyYWN0ZXJzOiBpbmNyZW1lbnQoMSksXG4gICAgICAgIFwid2FsZG9Mb2NhdGlvbi5mb3VuZFwiOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgdXBkYXRlIGRvYyBpbiBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwib2RsYXdMb2NhdGlvblwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgZm91bmRjaGFyYWN0ZXJzOiBpbmNyZW1lbnQoMSksXG4gICAgICAgIFwib2RsYXdMb2NhdGlvbi5mb3VuZFwiOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgdXBkYXRlIGRvYyBpbiBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwid2VuZGFMb2NhdGlvblwiKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgZm91bmRjaGFyYWN0ZXJzOiBpbmNyZW1lbnQoMSksXG4gICAgICAgIFwid2VuZGFMb2NhdGlvbi5mb3VuZFwiOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgdXBkYXRlIGRvYyBpbiBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPT09IFwid2l6YXJkTG9jYXRpb25cIikge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAgIGZvdW5kY2hhcmFjdGVyczogaW5jcmVtZW50KDEpLFxuICAgICAgICBcIndpemFyZExvY2F0aW9uLmZvdW5kXCI6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCB1cGRhdGUgZG9jIGluIGRhdGFiYXNlIFwiLCBlcnJvcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA9PT0gXCJ3b29mTG9jYXRpb25cIikge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAgIGZvdW5kY2hhcmFjdGVyczogaW5jcmVtZW50KDEpLFxuICAgICAgICBcIndvb2ZMb2NhdGlvbi5mb3VuZFwiOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgdXBkYXRlIGRvYyBpbiBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuICBjb25zdCBudW1iZXJmb3VuZGNoYXJhY3RlcnMgPSBhd2FpdCBnZXROdW1iZXJPZkNoYXJhY3RlcnNGb3VuZEZyb21EQihkb2NSZWYpO1xuICBpZiAobnVtYmVyZm91bmRjaGFyYWN0ZXJzID09PSA1KSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgZW5kVGltZTogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCBzYXZlIHRpbWVzdGFtcCBmb3IgZW5kIG9mIHJvdW5kIFwiLCBlcnJvcik7XG4gICAgfVxuICAgIHNjb3JlYm9hcmREQihjdXJyZW50dXNlcik7XG4gIH1cbn07XG5cbmNvbnN0IGdldE51bWJlck9mQ2hhcmFjdGVyc0ZvdW5kRnJvbURCID0gYXN5bmMgZnVuY3Rpb24gKGRvY1JlZikge1xuICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgY29uc3QgYWxsZGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xuICAgIGNvbnN0IG51bWJlcmNoYXJhY3RlcnMgPSBhbGxkYXRhW1wiZm91bmRjaGFyYWN0ZXJzXCJdO1xuICAgIHJldHVybiBudW1iZXJjaGFyYWN0ZXJzO1xuICB9XG59O1xuXG4vLyBjaGVja3MgdGhlIGN1cnJlbnQgaGlnaCBzY29yZXMgYm9hcmQgYW5kIHVwZGF0ZXMgaWYgbmVjZXNzYXJ5XG5jb25zdCBzY29yZWJvYXJkREIgPSBhc3luYyBmdW5jdGlvbiAodXNlcmlkKSB7XG4gIC8vIHRoZXJlIGFyZSAyIGNvbGxlY3Rpb25zIG9uIGRiOyBzY29yZWJvYXJkIGFuZCB1c2VyczsgdGhpcyBmdW5jdGlvbiBmZXRjaGVzIGJvdGhcbiAgY29uc3QgZG9jUmVmU2NvcmVib2FyZCA9IGRvYyhnZXRGaXJlc3RvcmUoKSwgXCJzY29yZWJvYXJkXCIsIFwic2NvcmVkYXRhXCIpO1xuICBjb25zdCBkb2NTbmFwU2NvcmVib2FyZCA9IGF3YWl0IGdldERvYyhkb2NSZWZTY29yZWJvYXJkKTtcbiAgY29uc3QgZG9jUmVmUGxheWVyID0gZG9jKGdldEZpcmVzdG9yZSgpLCBcInVzZXJzXCIsIHVzZXJpZCk7XG4gIGNvbnN0IGRvY1NuYXBQbGF5ZXIgPSBhd2FpdCBnZXREb2MoZG9jUmVmUGxheWVyKTtcbiAgbGV0IHRpbWVUb0ZpbmlzaCA9IDA7XG5cbiAgLy8gY2FsY3VsYXRlcyBwbGF5ZXIncyBzY29yZVxuICBpZiAoZG9jU25hcFBsYXllci5leGlzdHMoKSkge1xuICAgIGNvbnN0IHBsYXllcmRhdGEgPSBkb2NTbmFwUGxheWVyLmRhdGEoKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwbGF5ZXJkYXRhW1wic3RhcnRUaW1lXCJdO1xuICAgIGNvbnN0IGVuZFRpbWUgPSBwbGF5ZXJkYXRhW1wiZW5kVGltZVwiXTtcbiAgICB0aW1lVG9GaW5pc2ggPSBNYXRoLmNlaWwoTnVtYmVyKGVuZFRpbWUpIC0gTnVtYmVyKHN0YXJ0VGltZSkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwicGxheWVyIG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIC8vIHNlbmRzIGN1cnJlbnQgcGxheWVycyBpbiBzY29yZWJvYXJkIGFuZCBjdXJyZW50IGFub255bW91cyBjb3VudGVyIHRvIGJlIGV2YWx1YXRlZFxuICBpZiAoZG9jU25hcFNjb3JlYm9hcmQuZXhpc3RzKCkpIHtcbiAgICBjb25zdCBzY29yZWJvYXJkZGF0YSA9IGRvY1NuYXBTY29yZWJvYXJkLmRhdGEoKTtcbiAgICBjb25zdCBjdXJyZW50UGxheWVyc0luU2NvcmVib2FyZCA9IHNjb3JlYm9hcmRkYXRhW1wicGxheWVyc1wiXTtcbiAgICBjb25zdCBjdXJyZW50QW5vbnltb3VzID0gc2NvcmVib2FyZGRhdGFbXCJhbm9ueW1vdXNwbGF5ZXJzXCJdO1xuICAgIC8vIGV2YWx1YXRlU2NvcmVzIHJldHVybnMgYW4gYXJyYXkgd2l0aCBhIGJvb2xlYW4gZm9yIHdoZXRoZXIgb3Igbm9yIHRoZSBwbGF5ZXIgbWFkZSBpdCB0byB0aGUgaGlnaCBzY29yZXMgYm9hcmQsIHRoZSBjdXJyZW50IHBsYXllcnMgb24gdGhlIGJvYXJkICh3aGljaCBtaWdodCBpbmNsdWRlIHRoZSBjdXJyZW50IHVzZXIpLCBhbmQgYSBib29sZWFuIGZvciB3aGV0aGVyIHRoZSB1c2VyIHByb3ZpZGVkIGEgbmFtZVxuICAgIGNvbnN0IHBsYWNlbWVudEluU2NvcmVib2FyZCA9IGF3YWl0IGV2YWx1YXRlU2NvcmVzKFxuICAgICAgY3VycmVudFBsYXllcnNJblNjb3JlYm9hcmQsXG4gICAgICB0aW1lVG9GaW5pc2gsXG4gICAgICBjdXJyZW50QW5vbnltb3VzLFxuICAgICAgdXNlcmlkXG4gICAgKTtcblxuICAgIC8vIHBsYXllciBkaWRuJ3QgbWFrZSBpdCB0byB0aGUgc2NvcmVib2FyZFxuICAgIGlmIChwbGFjZW1lbnRJblNjb3JlYm9hcmRbMF0gPT09IGZhbHNlKSB7XG4gICAgICBkaXNwbGF5U2NvcmVib2FyZChcbiAgICAgICAgcGxhY2VtZW50SW5TY29yZWJvYXJkWzBdLFxuICAgICAgICBwbGFjZW1lbnRJblNjb3JlYm9hcmRbMV0sXG4gICAgICAgIHRpbWVUb0ZpbmlzaFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9wbGF5ZXIgbWFkZSBpdCB0byB0aGUgc2NvcmVib2FyZCBidXQgZGlkbid0IHByb3ZpZGUgYSBuYW1lXG4gICAgICBpZiAocGxhY2VtZW50SW5TY29yZWJvYXJkWzJdID09PSB0cnVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZlNjb3JlYm9hcmQsIHtcbiAgICAgICAgICAgIHBsYXllcnM6IHBsYWNlbWVudEluU2NvcmVib2FyZFsxXSxcbiAgICAgICAgICAgIGFub255bW91c3BsYXllcnM6IGluY3JlbWVudCgxKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkbid0IHVwZGF0ZSBzY29yZWJvYXJkIFwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vcGxheWVyIG1hZGUgaXQgdG8gdGhlIHNjb3JlYm9hcmQgYW5kIHByb3ZpZGVkIGEgbmFtZVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWZTY29yZWJvYXJkLCB7XG4gICAgICAgICAgICBwbGF5ZXJzOiBwbGFjZW1lbnRJblNjb3JlYm9hcmRbMV0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJDb3VsZG4ndCB1cGRhdGUgc2NvcmVib2FyZCBcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkaXNwbGF5U2NvcmVib2FyZChcbiAgICAgICAgcGxhY2VtZW50SW5TY29yZWJvYXJkWzBdLFxuICAgICAgICBwbGFjZW1lbnRJblNjb3JlYm9hcmRbMV0sXG4gICAgICAgIHRpbWVUb0ZpbmlzaFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIGNvbXBhcmVzIHVzZXIgdGltZSB0byBmaW5pc2ggd2l0aCB0aGUgc2NvcmVzIGN1cnJlbnRseSBvbiBoaWdoIHNjb3JlcyBib2FyZFxuY29uc3QgZXZhbHVhdGVTY29yZXMgPSBhc3luYyBmdW5jdGlvbiAoXG4gIGN1cnJlbnRQbGF5ZXJzQXJyYXksXG4gIG5ld3BsYXllclNjb3JlLFxuICBjdXJyZW50YW5vbnltb3VzLFxuICB1c2VyaWRcbikge1xuICAvLyBnZXQgc2NvcmVzXG4gIGxldCBjdXJyZW50U2NvcmVzID0gW107XG4gIGxldCBjdXJyZW50VXNlcklkcyA9IFtdO1xuICAvLyBkZWVwIGNvcHkgb2YgY3VycmVudCBwbGF5ZXIgYXJyYXlcbiAgbGV0IGNvcHlPcmlnaW5hbFBsYXllckFycmF5ID0gY29weUFycmF5VmFsdWVzKGN1cnJlbnRQbGF5ZXJzQXJyYXkpO1xuICBjb25zdCBjb3B5b2Zjb3B5ID0gY29weUFycmF5VmFsdWVzKGNvcHlPcmlnaW5hbFBsYXllckFycmF5KTtcblxuICAvLyBleHRyYWN0cyB0aW1lIGFuZCBuYW1lIGZvciB1c2VyIG9uIGhpZ2ggc2NvcmVzIGJvYXJkXG4gIGN1cnJlbnRQbGF5ZXJzQXJyYXkuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgY3VycmVudFNjb3Jlcy5wdXNoKG9iai50aW1lKTtcbiAgICBjdXJyZW50VXNlcklkcy5wdXNoKG9iai51c2VyaW5kYik7XG4gIH0pO1xuXG4gIC8vIGNvbXBhcmVzIGN1cnJlbnQgc2NvcmVzIHdpdGggdXNlciBzY29yZVxuICBjb25zdCBtYWRlSXRUb1Njb3JlYm9hcmQgPSBjdXJyZW50U2NvcmVzLmZpbmRJbmRleChcbiAgICAoc2NvcmUpID0+IE51bWJlcihzY29yZSkgPT09IDAgfHwgTnVtYmVyKHNjb3JlKSA+IE51bWJlcihuZXdwbGF5ZXJTY29yZSlcbiAgKTtcblxuICBsZXQgYW5vbnltb3VzdXNlciA9IGZhbHNlO1xuXG4gIC8vIGlmIHVzZXIgc2NvcmUgaXMgYmV0dGVyIHRoYW4gYXQgbGVhc3Qgb25lIHNjb3JlIG9uIGRiXG4gIGlmIChtYWRlSXRUb1Njb3JlYm9hcmQgIT09IC0xKSB7XG4gICAgbGV0IHVzZXJTZWxlY3RlZE5hbWUgPSBwcm9tcHRVc2VyRm9yTmFtZSgpO1xuICAgIGlmICh1c2VyU2VsZWN0ZWROYW1lID09PSB1bmRlZmluZWQgfHwgdXNlclNlbGVjdGVkTmFtZSA9PT0gXCJcIikge1xuICAgICAgdXNlclNlbGVjdGVkTmFtZSA9IFwiQW5vbnltb3VzXCIgKyBOdW1iZXIoY3VycmVudGFub255bW91cyArIDEpO1xuICAgICAgLy8gYW5vbnltb3VzIHVzZXIgaXMgbm93IHRydWUgc28gdGhhdCBsYXRlciBvbiB0aGUgbnVtYmVyIG9mIGFub255bW91cyB1c2VycyBnZXRzIGluY3JlbWVudGVkIGluIGRiXG4gICAgICBhbm9ueW1vdXN1c2VyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLzAgYW5kIDEgbWl4OyBpbmRleCBvbiBhcnJheSAoMC00KSBhbmQgcGxhY2VtZW50IGRpZmZlciAoMS01KSBieSAxXG4gICAgY29uc3QgZmlyc3RQbGF5ZXJUb0NoYW5nZVNjb3JlID0gbWFkZUl0VG9TY29yZWJvYXJkICsgMTtcbiAgICBjb25zdCB0b3RhbE51bWJlclBsYXllclRvQ2hhbmdlID0gNiAtIGZpcnN0UGxheWVyVG9DaGFuZ2VTY29yZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsTnVtYmVyUGxheWVyVG9DaGFuZ2U7IGkrKykge1xuICAgICAgLy91cGRhdGUgYXJyYXkgb2Ygd2lubmVycyBzdGFydGluZyB3aXRoIHRoZSBjdXJyZW50IHBsYXllclxuICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgY29weU9yaWdpbmFsUGxheWVyQXJyYXlbXG4gICAgICAgICAgZmlyc3RQbGF5ZXJUb0NoYW5nZVNjb3JlICsgKGkgLSAxKVxuICAgICAgICBdLm5hbWUgPSB1c2VyU2VsZWN0ZWROYW1lO1xuICAgICAgICBjb3B5T3JpZ2luYWxQbGF5ZXJBcnJheVtcbiAgICAgICAgICBmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpXG4gICAgICAgIF0udGltZSA9IG5ld3BsYXllclNjb3JlO1xuICAgICAgICBjb3B5T3JpZ2luYWxQbGF5ZXJBcnJheVtcbiAgICAgICAgICBmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpXG4gICAgICAgIF0udXNlcmluZGIgPSB1c2VyaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL2NvcHkgd2hhdCB3YXMgb24gdGhlIG9sZCBhcnJheSBvZiB3aW5uZXJzIGF0IHRoZSBwcmV2aW91cyBpbmRleFxuICAgICAgICBjb3B5T3JpZ2luYWxQbGF5ZXJBcnJheVtmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpXS5uYW1lID1cbiAgICAgICAgICBjb3B5b2Zjb3B5W2ZpcnN0UGxheWVyVG9DaGFuZ2VTY29yZSArIChpIC0gMSkgLSAxXS5uYW1lO1xuICAgICAgICBjb3B5T3JpZ2luYWxQbGF5ZXJBcnJheVtmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpXS50aW1lID1cbiAgICAgICAgICBjb3B5b2Zjb3B5W2ZpcnN0UGxheWVyVG9DaGFuZ2VTY29yZSArIChpIC0gMSkgLSAxXS50aW1lO1xuICAgICAgICBjb3B5T3JpZ2luYWxQbGF5ZXJBcnJheVtmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpXS51c2VyaW5kYiA9XG4gICAgICAgICAgY29weW9mY29weVtmaXJzdFBsYXllclRvQ2hhbmdlU2NvcmUgKyAoaSAtIDEpIC0gMV0udXNlcmluZGI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbdHJ1ZSwgY29weU9yaWdpbmFsUGxheWVyQXJyYXksIGFub255bW91c3VzZXJdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbZmFsc2UsIGNvcHlPcmlnaW5hbFBsYXllckFycmF5LCBhbm9ueW1vdXN1c2VyXTtcbiAgfVxufTtcblxuLy8gaWYgdGhlIHVzZXIgcmVzaXplcyB0aGUgd2luZG93LCByZWNhbGN1bGF0ZXMgY2hhcmFjdGVyJ3MgbG9jYXRpb25zIGFuZCB1cGRhdGVzIGRiXG5jb25zdCByZUNhbGN1bGF0ZUxvY2F0aW9uc09uUmVzaXplID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBpZiAoZ2V0QXV0aCgpLmN1cnJlbnRVc2VyID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGN1cnJlbnR1c2VyID0gZ2V0QXV0aCgpLmN1cnJlbnRVc2VyLnVpZDtcbiAgY29uc3QgZG9jUmVmID0gZG9jKGdldEZpcmVzdG9yZSgpLCBcInVzZXJzXCIsIGN1cnJlbnR1c2VyKTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICBcIndhbGRvTG9jYXRpb24ubG9jYXRpb25cIjogY2FsY3VsYXRlTG9jYXRpb25zKFwid2FsZG9cIiksXG4gICAgICBcIm9kbGF3TG9jYXRpb24ubG9jYXRpb25cIjogY2FsY3VsYXRlTG9jYXRpb25zKFwib2RsYXdcIiksXG4gICAgICBcIndlbmRhTG9jYXRpb24ubG9jYXRpb25cIjogY2FsY3VsYXRlTG9jYXRpb25zKFwid2VuZGFcIiksXG4gICAgICBcIndpemFyZExvY2F0aW9uLmxvY2F0aW9uXCI6IGNhbGN1bGF0ZUxvY2F0aW9ucyhcIndpemFyZFwiKSxcbiAgICAgIFwid29vZkxvY2F0aW9uLmxvY2F0aW9uXCI6IGNhbGN1bGF0ZUxvY2F0aW9ucyhcIndvb2ZcIiksXG4gICAgfSk7XG4gICAgLy9yZW1vdmVzIGV4aXN0aW5nIGRvbSBzdHlsaW5nIGZvciBmb3VuZCBjaGFyYWN0ZXJzIGFuZCB1cGRhdGVzIGRvbSBhdCB0aGUgbmV3IGxvY2F0aW9uc1xuICAgIGNvbnN0IGFsbGNpcmNsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNoYXJhY3RlcmZvdW5kY2lyY2xlXCIpO1xuICAgIGFsbGNpcmNsZXMuZm9yRWFjaCgoZGl2KSA9PiBkaXYucmVtb3ZlKCkpO1xuICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICB1cGRhdGVEb21BZnRlclJlZnJlc2goZG9jU25hcC5kYXRhKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiQ291bGRuJ3QgdXBkYXRlIGRvYyBpbiBkYXRhYmFzZSBcIiwgZXJyb3IpO1xuICB9XG59O1xuXG4vLyBsb2FkcyBoaWdoIHNjb3JlcyBib2FyZCBieSBmaXJzdCBmZXRjaGluZyB0aGUgY3VycmVudCBwbGF5ZXJzIG9uIGJvYXJkIGZyb20gZGJcbmNvbnN0IGhpZ2hlc3RTY29yZXNMaW5rID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCBoaWdoZXN0c2NvcmVzcGFyYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGlnaGVzdHNjb3Jlc2xpbmtcIik7XG4gIGhpZ2hlc3RzY29yZXNwYXJhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZG9jUmVmU2NvcmVib2FyZCA9IGRvYyhnZXRGaXJlc3RvcmUoKSwgXCJzY29yZWJvYXJkXCIsIFwic2NvcmVkYXRhXCIpO1xuICAgIGNvbnN0IGRvY1NuYXBTY29yZWJvYXJkID0gYXdhaXQgZ2V0RG9jKGRvY1JlZlNjb3JlYm9hcmQpO1xuICAgIGlmIChkb2NTbmFwU2NvcmVib2FyZC5leGlzdHMoKSkge1xuICAgICAgY29uc3Qgc2NvcmVib2FyZGRhdGEgPSBkb2NTbmFwU2NvcmVib2FyZC5kYXRhKCk7XG4gICAgICBjb25zdCBjdXJyZW50UGxheWVyc0luU2NvcmVib2FyZCA9IHNjb3JlYm9hcmRkYXRhW1wicGxheWVyc1wiXTtcbiAgICAgIGRpc3BsYXlTY29yZWJvYXJkKG51bGwsIGN1cnJlbnRQbGF5ZXJzSW5TY29yZWJvYXJkLCBudWxsKTtcbiAgICAgIGNvbnN0IGNsb3NlYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZXNjb3JlYm9hcmRidXR0b25cIik7XG4gICAgICBjb25zdCBvdmVybGF5ZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY29yZWJvYXJkZGl2XCIpO1xuICAgICAgY2xvc2VidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgb3ZlcmxheWRpdi5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBkZWVwIGNvcHkgZnVuY3Rpb24gb2YgYXJyYXkgb2Ygb2JqZWN0c1xuY29uc3QgY29weUFycmF5VmFsdWVzID0gZnVuY3Rpb24gKGFycmF5T2ZPYmplY3RzKSB7XG4gIGxldCByZXN1bHRpbmdhcnJheSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5T2ZPYmplY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgb2xkb2JqID0gYXJyYXlPZk9iamVjdHNbaV07XG4gICAgY29uc3Qgb2JqbmFtZSA9IG9sZG9iai5uYW1lO1xuICAgIGNvbnN0IG9ianRpbWUgPSBvbGRvYmoudGltZTtcbiAgICBjb25zdCBvYmphbGlhcyA9IG9sZG9iai5hbGlhcztcbiAgICBjb25zdCBvYmp1c2VyaW5kYiA9IG9sZG9iai51c2VyaW5kYjtcbiAgICBjb25zdCBtYWtlbmV3b2JqID0ge1xuICAgICAgbmFtZTogb2JqbmFtZSxcbiAgICAgIHRpbWU6IG9ianRpbWUsXG4gICAgICBhbGlhczogb2JqYWxpYXMsXG4gICAgICB1c2VyaW5kYjogb2JqdXNlcmluZGIsXG4gICAgfTtcbiAgICByZXN1bHRpbmdhcnJheS5wdXNoKG1ha2VuZXdvYmopO1xuICB9XG4gIHJldHVybiByZXN1bHRpbmdhcnJheTtcbn07XG5cbmNvbnN0IGxvZ2luYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dpblwiKTtcbmxvZ2luYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaWduSW4pO1xuXG5jb25zdCBmaXJlYmFzZUFwcENvbmZpZyA9IGdldEZpcmViYXNlQ29uZmlnKCk7XG5pbml0aWFsaXplQXBwKGZpcmViYXNlQXBwQ29uZmlnKTtcbmluaXRGaXJlYmFzZUF1dGgoKTtcblxud2luZG93Lm9ucmVzaXplID0gcmVDYWxjdWxhdGVMb2NhdGlvbnNPblJlc2l6ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2hlY2tJZlNlbGVjdGVkQ2hhcmFjdGVySXNDb3JyZWN0O1xuIl0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fIiwiVVJMIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMl9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8zX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzRfX18iLCJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzNfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF80X19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwiZXhwb3J0cyIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNvbnRlbnQiLCJuZWVkTGF5ZXIiLCJjb25jYXQiLCJsZW5ndGgiLCJqb2luIiwiaSIsIm1vZHVsZXMiLCJtZWRpYSIsImRlZHVwZSIsInN1cHBvcnRzIiwibGF5ZXIiLCJ1bmRlZmluZWQiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiayIsIl9rIiwidXJsIiwib3B0aW9ucyIsIlN0cmluZyIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidGVzdCIsInNsaWNlIiwiaGFzaCIsIm5lZWRRdW90ZXMiLCJyZXBsYWNlIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJiYXNlNjQiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwic291cmNlTWFwcGluZyIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsInN0eWxlc0luRE9NIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwicmVzdWx0IiwibW9kdWxlc1RvRG9tIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiYmFzZSIsImNvdW50IiwiaW5kZXhCeUlkZW50aWZpZXIiLCJvYmoiLCJjc3MiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZEVsZW1lbnRTdHlsZSIsImJ5SW5kZXgiLCJzcGxpY2UiLCJhcGkiLCJkb21BUEkiLCJ1cGRhdGUiLCJuZXdPYmoiLCJyZW1vdmUiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwiaW5kZXgiLCJuZXdMYXN0SWRlbnRpZmllcnMiLCJfaSIsIl9pbmRleCIsIm1lbW8iLCJpbnNlcnQiLCJzdHlsZSIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid2luZG93IiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImdldFRhcmdldCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwic3R5bGVFbGVtZW50Iiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsImFwcGx5IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwicmVtb3ZlU3R5bGVFbGVtZW50Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJmaXJzdENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIm4iLCJnZXR0ZXIiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicCIsImIiLCJiYXNlVVJJIiwic2VsZiIsImhyZWYiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsImVuY29kZVN0cmluZyIsInN0ciIsIm91dCIsImMiLCJjaGFyQ29kZUF0Iiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWZlcnJlZCIsImNvbnN0cnVjdG9yIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJlcnJvciIsInZhbHVlIiwiY2F0Y2giLCJuYXZpZ2F0b3IiLCJpc01vYmlsZUNvcmRvdmEiLCJpc0Jyb3dzZXJFeHRlbnNpb24iLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImlzUmVhY3ROYXRpdmUiLCJpc0lFIiwidWEiLCJpbmRleE9mIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsInN1cGVyIiwibmFtZSIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsInF1ZXJ5c3RyaW5nUGFyYW1zIiwicGFyYW1zIiwiZW50cmllcyIsImZvckVhY2giLCJhcnJheVZhbCIsInF1ZXJ5c3RyaW5nRGVjb2RlIiwicXVlcnlzdHJpbmciLCJzcGxpdCIsInRva2VuIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFjdFF1ZXJ5c3RyaW5nIiwicXVlcnlTdGFydCIsImZyYWdtZW50U3RhcnQiLCJzdWJzdHJpbmciLCJPYnNlcnZlclByb3h5IiwiZXhlY3V0b3IiLCJvbk5vT2JzZXJ2ZXJzIiwib2JzZXJ2ZXJzIiwidW5zdWJzY3JpYmVzIiwib2JzZXJ2ZXJDb3VudCIsInRhc2siLCJmaW5hbGl6ZWQiLCJ0aGVuIiwibmV4dCIsImZvckVhY2hPYnNlcnZlciIsIm9ic2VydmVyIiwiY2xvc2UiLCJjb21wbGV0ZSIsInN1YnNjcmliZSIsIm5leHRPck9ic2VydmVyIiwibWV0aG9kcyIsIm1ldGhvZCIsImltcGxlbWVudHNBbnlNZXRob2RzIiwibm9vcCIsInVuc3ViIiwidW5zdWJzY3JpYmVPbmUiLCJiaW5kIiwiZmluYWxFcnJvciIsImZuIiwic2VuZE9uZSIsImNvbnNvbGUiLCJlcnIiLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiaW5zdGFuY2UiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwiX2EiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImFkZCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJpbmZvIiwid2FybiIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiYXNzaWduIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsImlzRGVsZXRlZCIsImFwcE5hbWUiLCJTREtfVkVSU0lPTiIsImdldEFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwibWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiX19yZXN0IiwicyIsInQiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInByb2RFcnJvck1hcCIsIl9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSIsImxvZ0NsaWVudCIsIl9sb2dFcnJvciIsIm1zZyIsIl9mYWlsIiwiYXV0aE9yQ29kZSIsInJlc3QiLCJjcmVhdGVFcnJvckludGVybmFsIiwiX2NyZWF0ZUVycm9yIiwiZnVsbFBhcmFtcyIsIl9lcnJvckZhY3RvcnkiLCJfYXNzZXJ0IiwiYXNzZXJ0aW9uIiwiZGVidWdGYWlsIiwiZmFpbHVyZSIsImRlYnVnQXNzZXJ0IiwiaW5zdGFuY2VDYWNoZSIsIl9nZXRJbnN0YW5jZSIsImNscyIsIl9nZXRDdXJyZW50VXJsIiwiX2dldEN1cnJlbnRTY2hlbWUiLCJwcm90b2NvbCIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiTWF0aCIsIm1pbiIsIl9lbXVsYXRvclVybCIsInBhdGgiLCJlbXVsYXRvciIsInN0YXJ0c1dpdGgiLCJGZXRjaFByb3ZpZGVyIiwic3RhdGljIiwiZmV0Y2hJbXBsIiwiaGVhZGVyc0ltcGwiLCJyZXNwb25zZUltcGwiLCJmZXRjaCIsIkhlYWRlcnMiLCJSZXNwb25zZSIsIlNFUlZFUl9FUlJPUl9NQVAiLCJERUZBVUxUX0FQSV9USU1FT1VUX01TIiwiX2FkZFRpZElmTmVjZXNzYXJ5IiwiYXV0aCIsInJlcXVlc3QiLCJ0ZW5hbnRJZCIsIl9wZXJmb3JtQXBpUmVxdWVzdCIsImN1c3RvbUVycm9yTWFwIiwiX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nIiwiYm9keSIsInF1ZXJ5IiwiYXBpS2V5IiwiaGVhZGVycyIsIl9nZXRTZGtDbGllbnRWZXJzaW9uIiwibGFuZ3VhZ2VDb2RlIiwiX2dldEZpbmFsVGFyZ2V0IiwiYXBpSG9zdCIsInJlZmVycmVyUG9saWN5IiwiZmV0Y2hGbiIsIl9jYW5Jbml0RW11bGF0b3IiLCJlcnJvck1hcCIsIm5ldHdvcmtUaW1lb3V0IiwiTmV0d29ya1RpbWVvdXQiLCJyZXNwb25zZSIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsImVycm9yTWVzc2FnZSIsInNlcnZlckVycm9yQ29kZSIsInNlcnZlckVycm9yTWVzc2FnZSIsImF1dGhFcnJvciIsInRvTG93ZXJDYXNlIiwiX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UiLCJfcGVyZm9ybVNpZ25JblJlcXVlc3QiLCJzZXJ2ZXJSZXNwb25zZSIsIl9zZXJ2ZXJSZXNwb25zZSIsImhvc3QiLCJhcGlTY2hlbWUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJfdG9rZW5SZXNwb25zZSIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsImRhdGUiLCJOdW1iZXIiLCJpc05hTiIsImdldFRpbWUiLCJ0b1VUQ1N0cmluZyIsInNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyIsInNlY29uZHMiLCJfcGFyc2VUb2tlbiIsImFsZ29yaXRobSIsInBheWxvYWQiLCJzaWduYXR1cmUiLCJkZWNvZGVkIiwiYmFzZTY0RGVjb2RlIiwicGFyc2UiLCJfbG9nb3V0SWZJbnZhbGlkYXRlZCIsInVzZXIiLCJieXBhc3NBdXRoU3RhdGUiLCJpc1VzZXJJbnZhbGlkYXRlZCIsImN1cnJlbnRVc2VyIiwic2lnbk91dCIsIlByb2FjdGl2ZVJlZnJlc2giLCJpc1J1bm5pbmciLCJ0aW1lcklkIiwiZXJyb3JCYWNrb2ZmIiwiX3N0YXJ0Iiwic2NoZWR1bGUiLCJfc3RvcCIsImdldEludGVydmFsIiwid2FzRXJyb3IiLCJpbnRlcnZhbCIsInN0c1Rva2VuTWFuYWdlciIsImV4cGlyYXRpb25UaW1lIiwibWF4IiwiaXRlcmF0aW9uIiwiZ2V0SWRUb2tlbiIsIlVzZXJNZXRhZGF0YSIsImNyZWF0ZWRBdCIsImxhc3RMb2dpbkF0IiwiX2luaXRpYWxpemVUaW1lIiwibGFzdFNpZ25JblRpbWUiLCJjcmVhdGlvblRpbWUiLCJfY29weSIsIm1ldGFkYXRhIiwidG9KU09OIiwiX3JlbG9hZFdpdGhvdXRTYXZpbmciLCJpZFRva2VuIiwiZ2V0QWNjb3VudEluZm8iLCJ1c2VycyIsImNvcmVBY2NvdW50IiwiX25vdGlmeVJlbG9hZExpc3RlbmVyIiwibmV3UHJvdmlkZXJEYXRhIiwicHJvdmlkZXJVc2VySW5mbyIsInByb3ZpZGVySWQiLCJ1aWQiLCJyYXdJZCIsImRpc3BsYXlOYW1lIiwicGhvdG9VUkwiLCJwaG90b1VybCIsInByb3ZpZGVyRGF0YSIsIm9yaWdpbmFsIiwibmV3RGF0YSIsInNvbWUiLCJvbGRJc0Fub255bW91cyIsImlzQW5vbnltb3VzIiwibmV3SXNBbm9ueW1vdXMiLCJwYXNzd29yZEhhc2giLCJ1cGRhdGVzIiwibG9jYWxJZCIsImVtYWlsVmVyaWZpZWQiLCJTdHNUb2tlbk1hbmFnZXIiLCJyZWZyZXNoVG9rZW4iLCJhY2Nlc3NUb2tlbiIsImlzRXhwaXJlZCIsInVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZSIsImV4cGlyZXNJbiIsInBhcnNlZFRva2VuIiwiZXhwIiwiaWF0IiwiX3Rva2VuRXhwaXJlc0luIiwidXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbiIsImZvcmNlUmVmcmVzaCIsInJlZnJlc2giLCJjbGVhclJlZnJlc2hUb2tlbiIsIm9sZFRva2VuIiwidG9rZW5BcGlIb3N0IiwiYWNjZXNzX3Rva2VuIiwiZXhwaXJlc19pbiIsInJlZnJlc2hfdG9rZW4iLCJyZXF1ZXN0U3RzVG9rZW4iLCJleHBpcmVzSW5TZWMiLCJvYmplY3QiLCJtYW5hZ2VyIiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9wZXJmb3JtUmVmcmVzaCIsImFzc2VydFN0cmluZ09yVW5kZWZpbmVkIiwiVXNlckltcGwiLCJvcHQiLCJwcm9hY3RpdmVSZWZyZXNoIiwicmVsb2FkVXNlckluZm8iLCJyZWxvYWRMaXN0ZW5lciIsImdldFRva2VuIiwiX3BlcnNpc3RVc2VySWZDdXJyZW50IiwiX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCIsImdldElkVG9rZW5SZXN1bHQiLCJ1c2VySW50ZXJuYWwiLCJjbGFpbXMiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25JblByb3ZpZGVyIiwiYXV0aFRpbWUiLCJpc3N1ZWRBdFRpbWUiLCJzaWduSW5TZWNvbmRGYWN0b3IiLCJyZWxvYWQiLCJ1c2VySW5mbyIsIl9vblJlbG9hZCIsIl9zdGFydFByb2FjdGl2ZVJlZnJlc2giLCJfc3RvcFByb2FjdGl2ZVJlZnJlc2giLCJ0b2tlbnNSZWZyZXNoZWQiLCJkZWxldGVBY2NvdW50IiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9iIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2FkZExpc3RlbmVyIiwiX2tleSIsIl9saXN0ZW5lciIsIl9yZW1vdmVMaXN0ZW5lciIsImluTWVtb3J5UGVyc2lzdGVuY2UiLCJfcGVyc2lzdGVuY2VLZXlOYW1lIiwiUGVyc2lzdGVuY2VVc2VyTWFuYWdlciIsInBlcnNpc3RlbmNlIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJzZXRDdXJyZW50VXNlciIsIl9zZXQiLCJibG9iIiwiX2dldCIsIl9mcm9tSlNPTiIsInJlbW92ZUN1cnJlbnRVc2VyIiwiX3JlbW92ZSIsInNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0IiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInBlcnNpc3RlbmNlSGllcmFyY2h5IiwiYXZhaWxhYmxlUGVyc2lzdGVuY2VzIiwiX2lzQXZhaWxhYmxlIiwic2VsZWN0ZWRQZXJzaXN0ZW5jZSIsInVzZXJUb01pZ3JhdGUiLCJtaWdyYXRpb25IaWVyYXJjaHkiLCJfc2hvdWxkQWxsb3dNaWdyYXRpb24iLCJfZ2V0QnJvd3Nlck5hbWUiLCJ1c2VyQWdlbnQiLCJfaXNJRU1vYmlsZSIsIl9pc0ZpcmVmb3giLCJfaXNCbGFja0JlcnJ5IiwiX2lzV2ViT1MiLCJfaXNTYWZhcmkiLCJfaXNDaHJvbWVJT1MiLCJfaXNBbmRyb2lkIiwicmUiLCJtYXRjaGVzIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsIkF1dGhJbXBsIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsInJlZGlyZWN0VXNlciIsImlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQiLCJfaXNJbml0aWFsaXplZCIsIl9kZWxldGVkIiwiX2luaXRpYWxpemF0aW9uUHJvbWlzZSIsIl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJsYXN0Tm90aWZpZWRVaWQiLCJzZXR0aW5ncyIsImFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyIsImNsaWVudFZlcnNpb24iLCJzZGtDbGllbnRWZXJzaW9uIiwiX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UiLCJwb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJxdWV1ZSIsInBlcnNpc3RlbmNlTWFuYWdlciIsIl9zaG91bGRJbml0UHJvYWN0aXZlbHkiLCJfaW5pdGlhbGl6ZSIsImluaXRpYWxpemVDdXJyZW50VXNlciIsImFzc2VydGVkUGVyc2lzdGVuY2UiLCJfY3VycmVudFVzZXIiLCJfdXBkYXRlQ3VycmVudFVzZXIiLCJzdG9yZWRVc2VyIiwiYXV0aERvbWFpbiIsImdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwicmVkaXJlY3RVc2VyRXZlbnRJZCIsInN0b3JlZFVzZXJFdmVudElkIiwidHJ5UmVkaXJlY3RTaWduSW4iLCJkaXJlY3RseVNldEN1cnJlbnRVc2VyIiwicmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyIiwicmVkaXJlY3RSZXNvbHZlciIsIl9jb21wbGV0ZVJlZGlyZWN0Rm4iLCJfc2V0UmVkaXJlY3RVc2VyIiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsIl9nZXRQZXJzaXN0ZW5jZSIsIl91cGRhdGVFcnJvck1hcCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsIm9uSWRUb2tlbkNoYW5nZWQiLCJyZWRpcmVjdE1hbmFnZXIiLCJyZXNvbHZlciIsIl9yZWRpcmVjdFBlcnNpc3RlbmNlIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJfbG9nRnJhbWV3b3JrIiwiZnJhbWV3b3JrIiwic29ydCIsIl9nZXRGcmFtZXdvcmtzIiwiX2Nhc3RBdXRoIiwicHJveHkiLCJjcmVhdGVTdWJzY3JpYmUiLCJBdXRoQ3JlZGVudGlhbCIsInNpZ25Jbk1ldGhvZCIsIl9nZXRJZFRva2VuUmVzcG9uc2UiLCJfYXV0aCIsIl9saW5rVG9JZFRva2VuIiwiX2lkVG9rZW4iLCJfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyIiwiRW1haWxBdXRoQ3JlZGVudGlhbCIsIl9lbWFpbCIsIl9wYXNzd29yZCIsIl90ZW5hbnRJZCIsInBhc3N3b3JkIiwib29iQ29kZSIsIl9mcm9tRW1haWxBbmRQYXNzd29yZCIsIl9mcm9tRW1haWxBbmRDb2RlIiwic2lnbkluV2l0aFBhc3N3b3JkIiwicmV0dXJuU2VjdXJlVG9rZW4iLCJzaWduSW5XaXRoRW1haWxMaW5rJDEiLCJ1cGRhdGVFbWFpbFBhc3N3b3JkIiwic2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmciLCJzaWduSW5XaXRoSWRwIiwiT0F1dGhDcmVkZW50aWFsIiwiYXJndW1lbnRzIiwicGVuZGluZ1Rva2VuIiwiY3JlZCIsIm9hdXRoVG9rZW4iLCJvYXV0aFRva2VuU2VjcmV0Iiwic2VjcmV0IiwiYnVpbGRSZXF1ZXN0IiwiYXV0b0NyZWF0ZSIsInJlcXVlc3RVcmkiLCJwb3N0Qm9keSIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJQaG9uZUF1dGhDcmVkZW50aWFsIiwidmVyaWZpY2F0aW9uSWQiLCJ2ZXJpZmljYXRpb25Db2RlIiwidGVtcG9yYXJ5UHJvb2YiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsIm9wZXJhdGlvbiIsInZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmciLCJzZXNzaW9uSW5mbyIsIkFjdGlvbkNvZGVVUkwiLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsInBhcnNlTGluayIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwic2V0RGVmYXVsdExhbmd1YWdlIiwic2V0Q3VzdG9tUGFyYW1ldGVycyIsImN1c3RvbU9BdXRoUGFyYW1ldGVycyIsImdldEN1c3RvbVBhcmFtZXRlcnMiLCJCYXNlT0F1dGhQcm92aWRlciIsInNjb3BlcyIsImFkZFNjb3BlIiwic2NvcGUiLCJnZXRTY29wZXMiLCJGYWNlYm9va0F1dGhQcm92aWRlciIsIl9mcm9tUGFyYW1zIiwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QiLCJ1c2VyQ3JlZGVudGlhbCIsImNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwidG9rZW5SZXNwb25zZSIsIm9hdXRoQWNjZXNzVG9rZW4iLCJjcmVkZW50aWFsIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwiR09PR0xFX1NJR05fSU5fTUVUSE9EIiwib2F1dGhJZFRva2VuIiwiR2l0aHViQXV0aFByb3ZpZGVyIiwiR0lUSFVCX1NJR05fSU5fTUVUSE9EIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwiX2Zyb21JZFRva2VuUmVzcG9uc2UiLCJwcm92aWRlcklkRm9yUmVzcG9uc2UiLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJNdWx0aUZhY3RvckVycm9yIiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiX2Zyb21FcnJvckFuZE9wZXJhdGlvbiIsIldlYWtNYXAiLCJTVE9SQUdFX0FWQUlMQUJMRV9LRVkiLCJCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyIsInN0b3JhZ2VSZXRyaWV2ZXIiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsImxvY2FsU3RvcmFnZSIsImV2ZW50IiwicG9sbCIsIm9uU3RvcmFnZUV2ZW50IiwibGlzdGVuZXJzIiwibG9jYWxDYWNoZSIsInBvbGxUaW1lciIsInNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCIsIl9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSIsInRvcCIsIl9pc0lmcmFtZSIsImZhbGxiYWNrVG9Qb2xsaW5nIiwiZm9yQWxsQ2hhbmdlZEtleXMiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiX29sZFZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiZGV0YWNoTGlzdGVuZXIiLCJzdG9wUG9sbGluZyIsInN0b3JlZFZhbHVlIiwidHJpZ2dlckxpc3RlbmVycyIsImRvY3VtZW50TW9kZSIsImxpc3RlbmVyIiwic3RhcnRQb2xsaW5nIiwic2V0SW50ZXJ2YWwiLCJTdG9yYWdlRXZlbnQiLCJjbGVhckludGVydmFsIiwiYXR0YWNoTGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNpemUiLCJicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsIkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJzZXNzaW9uU3RvcmFnZSIsImJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJSZWNlaXZlciIsImV2ZW50VGFyZ2V0IiwiaGFuZGxlcnNNYXAiLCJoYW5kbGVFdmVudCIsInJlY2VpdmVycyIsImZpbmQiLCJyZWNlaXZlciIsImlzTGlzdGVuaW5ndG8iLCJuZXdJbnN0YW5jZSIsIm1lc3NhZ2VFdmVudCIsImV2ZW50SWQiLCJldmVudFR5cGUiLCJoYW5kbGVycyIsInBvcnRzIiwicG9zdE1lc3NhZ2UiLCJzdGF0dXMiLCJwcm9taXNlcyIsImhhbmRsZXIiLCJvcmlnaW4iLCJmdWxmaWxsZWQiLCJyZWFzb24iLCJfYWxsU2V0dGxlZCIsIl9zdWJzY3JpYmUiLCJldmVudEhhbmRsZXIiLCJfdW5zdWJzY3JpYmUiLCJfZ2VuZXJhdGVFdmVudElkIiwicHJlZml4IiwiZGlnaXRzIiwicmFuZG9tIiwiZmxvb3IiLCJTZW5kZXIiLCJyZW1vdmVNZXNzYWdlSGFuZGxlciIsIm1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbk1lc3NhZ2UiLCJ0aW1lb3V0IiwiTWVzc2FnZUNoYW5uZWwiLCJjb21wbGV0aW9uVGltZXIiLCJzdGFydCIsImFja1RpbWVyIiwicG9ydDIiLCJmaW5hbGx5IiwiX3dpbmRvdyIsIl9pc1dvcmtlciIsIkRCX05BTUUiLCJEQl9PQkpFQ1RTVE9SRV9OQU1FIiwiREJfREFUQV9LRVlQQVRIIiwiREJQcm9taXNlIiwidG9Qcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJkYiIsImlzUmVhZFdyaXRlIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIl9vcGVuRGF0YWJhc2UiLCJpbmRleGVkREIiLCJvcGVuIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwib2JqZWN0U3RvcmVOYW1lcyIsImNvbnRhaW5zIiwiZGVsZXRlRGF0YWJhc2UiLCJfZGVsZXRlRGF0YWJhc2UiLCJfcHV0T2JqZWN0IiwicHV0IiwiX2RlbGV0ZU9iamVjdCIsIkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJwZW5kaW5nV3JpdGVzIiwic2VuZGVyIiwic2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlIiwiYWN0aXZlU2VydmljZVdvcmtlciIsIl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UiLCJpbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZyIsIm9wIiwibnVtQXR0ZW1wdHMiLCJfb3BlbkRiIiwiaW5pdGlhbGl6ZVJlY2VpdmVyIiwiaW5pdGlhbGl6ZVNlbmRlciIsIl9vcmlnaW4iLCJrZXlQcm9jZXNzZWQiLCJfcG9sbCIsIl9kYXRhIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwiYWN0aXZlIiwiX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJyZXN1bHRzIiwiX3NlbmQiLCJjb250cm9sbGVyIiwid3JpdGUiLCJfd2l0aFBlbmRpbmdXcml0ZSIsIl93aXRoUmV0cmllcyIsIm5vdGlmeVNlcnZpY2VXb3JrZXIiLCJnZXRPYmplY3QiLCJnZXRBbGxSZXF1ZXN0IiwiZ2V0QWxsIiwia2V5c0luUmVzdWx0IiwiZmJhc2Vfa2V5IiwibG9jYWxLZXkiLCJpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwiX2dlbmVyYXRlQ2FsbGJhY2tOYW1lIiwiUGhvbmVBdXRoUHJvdmlkZXIiLCJ2ZXJpZnlQaG9uZU51bWJlciIsInBob25lT3B0aW9ucyIsImFwcGxpY2F0aW9uVmVyaWZpZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwidmVyaWZ5IiwicGhvbmVJbmZvT3B0aW9ucyIsInNlc3Npb24iLCJzdGFydEVucm9sbFBob25lTWZhIiwicGhvbmVFbnJvbGxtZW50SW5mbyIsInBob25lU2Vzc2lvbkluZm8iLCJtZmFFbnJvbGxtZW50SWQiLCJtdWx0aUZhY3RvckhpbnQiLCJtdWx0aUZhY3RvclVpZCIsInN0YXJ0U2lnbkluUGhvbmVNZmEiLCJtZmFQZW5kaW5nQ3JlZGVudGlhbCIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsIl92ZXJpZnlQaG9uZU51bWJlciIsIl9mcm9tVmVyaWZpY2F0aW9uIiwiX2Zyb21Ub2tlblJlc3BvbnNlIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3NpZ25JbldpdGhDcmVkZW50aWFsIiwiX3JlYXV0aCIsInBhcnNlZCIsInN1YiIsIl9mb3JPcGVyYXRpb24iLCJfcmVhdXRoZW50aWNhdGUiLCJfbGluayIsIl9saW5rJDEiLCJBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24iLCJwZW5kaW5nUHJvbWlzZSIsImV2ZW50TWFuYWdlciIsImV4ZWN1dGUiLCJvbkV4ZWN1dGlvbiIsInJlZ2lzdGVyQ29uc3VtZXIiLCJ1cmxSZXNwb25zZSIsImdldElkcFRhc2siLCJvbkVycm9yIiwidW5yZWdpc3RlckFuZENsZWFuVXAiLCJ1bnJlZ2lzdGVyQ29uc3VtZXIiLCJjbGVhblVwIiwiX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQiLCJQb3B1cE9wZXJhdGlvbiIsImF1dGhXaW5kb3ciLCJwb2xsSWQiLCJjdXJyZW50UG9wdXBBY3Rpb24iLCJjYW5jZWwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsImhhc1BlbmRpbmdSZWRpcmVjdCIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIm9uQXV0aEV2ZW50IiwiX3JlZGlyZWN0VXNlckZvcklkIiwiX2dldFJlZGlyZWN0UmVzdWx0IiwicmVzb2x2ZXJFeHRlcm4iLCJhdXRoSW50ZXJuYWwiLCJyZXNvbHZlck92ZXJyaWRlIiwiX3dpdGhEZWZhdWx0UmVzb2x2ZXIiLCJBdXRoRXZlbnRNYW5hZ2VyIiwiY2FjaGVkRXZlbnRVaWRzIiwiY29uc3VtZXJzIiwicXVldWVkUmVkaXJlY3RFdmVudCIsImhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCIsImxhc3RQcm9jZXNzZWRFdmVudFRpbWUiLCJhdXRoRXZlbnRDb25zdW1lciIsImlzRXZlbnRGb3JDb25zdW1lciIsInNlbmRUb0NvbnN1bWVyIiwic2F2ZUV2ZW50VG9DYWNoZSIsIm9uRXZlbnQiLCJoYXNFdmVudEJlZW5IYW5kbGVkIiwiaGFuZGxlZCIsImNvbnN1bWVyIiwiaXNOdWxsUmVkaXJlY3RFdmVudCIsImlzUmVkaXJlY3RFdmVudCIsImV2ZW50SWRNYXRjaGVzIiwiY2xlYXIiLCJldmVudFVpZCIsInYiLCJJUF9BRERSRVNTX1JFR0VYIiwiSFRUUF9SRUdFWCIsIm1hdGNoRG9tYWluIiwiZXhwZWN0ZWQiLCJjdXJyZW50VXJsIiwiaG9zdG5hbWUiLCJjZVVybCIsImVzY2FwZWREb21haW5QYXR0ZXJuIiwiUmVnRXhwIiwiTkVUV09SS19USU1FT1VUIiwicmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzIiwiYmVhY29uIiwiX19fanNsIiwiSCIsImhpbnQiLCJyIiwiTCIsIkNQIiwiY2FjaGVkR0FwaUxvYWRlciIsIl9sb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsImVsIiwib25sb2FkIiwib25lcnJvciIsImNoYXJzZXQiLCJsb2FkR2FwaSIsIlBJTkdfVElNRU9VVCIsIklGUkFNRV9BVFRSSUJVVEVTIiwicG9zaXRpb24iLCJ3aWR0aCIsImhlaWdodCIsInRhYmluZGV4IiwiRUlEX0ZST01fQVBJSE9TVCIsImdldElmcmFtZVVybCIsImVpZCIsImZ3IiwiQkFTRV9QT1BVUF9PUFRJT05TIiwicmVzaXphYmxlIiwic3RhdHVzYmFyIiwidG9vbGJhciIsIkF1dGhQb3B1cCIsIl9nZXRSZWRpcmVjdFVybCIsImF1dGhUeXBlIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsUGFyYW1zIiwiaXNFbXB0eSIsInRpZCIsInBhcmFtc0RpY3QiLCJnZXRIYW5kbGVyQmFzZSIsIldFQl9TVE9SQUdFX1NVUFBPUlRfS0VZIiwiYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciIsImV2ZW50TWFuYWdlcnMiLCJvcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMiLCJzY3JlZW4iLCJhdmFpbEhlaWdodCIsImxlZnQiLCJhdmFpbFdpZHRoIiwic2Nyb2xsYmFycyIsIm9wdGlvbnNTdHJpbmciLCJyZWR1Y2UiLCJhY2N1bSIsInN0YW5kYWxvbmUiLCJfaXNJT1NTdGFuZGFsb25lIiwiY2xpY2siLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIm9wZW5Bc05ld1dpbmRvd0lPUyIsIm5ld1dpbiIsImZvY3VzIiwiX29wZW4iLCJpbml0QW5kR2V0TWFuYWdlciIsImlmcmFtZSIsImNvbnRleHQiLCJ3aGVyZSIsIm1lc3NhZ2VIYW5kbGVyc0ZpbHRlciIsIkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUiIsImRvbnRjbGVhciIsInJlc3R5bGUiLCJzZXRIaWRlT25MZWF2ZSIsIm5ldHdvcmtFcnJvciIsIm5ldHdvcmtFcnJvclRpbWVyIiwiY2xlYXJUaW1lckFuZFJlc29sdmUiLCJwaW5nIiwiX29wZW5JZnJhbWUiLCJyZWdpc3RlciIsImlmcmFtZUV2ZW50IiwiYXV0aEV2ZW50Iiwic2VuZCIsImF1dGhvcml6ZWREb21haW5zIiwiX2dldFByb2plY3RDb25maWciLCJkb21haW4iLCJfdmFsaWRhdGVPcmlnaW4iLCJBdXRoSW50ZXJvcCIsImludGVybmFsTGlzdGVuZXJzIiwiZ2V0VWlkIiwiYXNzZXJ0QXV0aENvbmZpZ3VyZWQiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsInVuc3Vic2NyaWJlIiwidXBkYXRlUHJvYWN0aXZlUmVmcmVzaCIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZ2V0QXV0aCIsImRlcHMiLCJpbml0aWFsaXplQXV0aCIsImF1dGhJbnN0YW5jZSIsImhpZXJhcmNoeSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwiX2luc3RhbmNlSWRlbnRpZmllciIsIl9pbnN0YW5jZSIsImdldFZlcnNpb25Gb3JQbGF0Zm9ybSIsImRyYXdDaXJjbGVBcm91bmRDaGFyYWN0ZXIiLCJjb29yZHgiLCJjb29yZHkiLCJjaGFyYWN0ZXIiLCJpbWciLCJnZXRFbGVtZW50QnlJZCIsImJhY2tncm91bmRpdiIsImltZ3dpZHRoIiwiY2xpZW50V2lkdGgiLCJiYWNrZ3JvdW5kZGl2d2lkdGgiLCJsZWZ0bWFyZ2luIiwiZGl2IiwiYm9yZGVyIiwiYm9yZGVyUmFkaXVzIiwiekluZGV4IiwidXBkYXRlU3RhdHVzU2lkZUJhciIsImRhdGFzZXRjaGFyYWN0ZXIiLCJmaW5kY2hhcmFjdGVybmFtZSIsInNldG5hbWUiLCJhbGlhc29uZGl2IiwiY2hhcmFjdGVyZGl2b25kb20iLCJjbGFzc0xpc3QiLCJwYXJhIiwiaW5uZXJIVE1MIiwiY3JlYXRlUHJldHR5QWxlcnQiLCJjaGFyYWN0ZXJmb3VuZCIsImV2ZW50dGFyZ2V0Iiwib3ZlcmxheWRpdiIsImdhbWVkaXYiLCJidXR0b25kaXYiLCJhbm5vdWNlbWVudGRpdiIsImNsb3NlYnV0dG9uIiwiYWxsQ2hhcmFjdGVycyIsImZvdW5kQ2hhcmFjdGVyIiwiZGF0YXNldCIsImN1cnJlbnRjaGFyYWN0ZXIiLCJ0ZXh0Q29udGVudCIsImRpc3BsYXlTY29yZWJvYXJkIiwicGxheWVySGFzSGlnaFNjb3JlIiwic2NvcmVib2FyZGFycmF5IiwiY3VycmVudHVzZXJzY29yZSIsImJ1dHRvbiIsInBsYXllclNjb3JlIiwidGl0bGUiLCJ0YWJsZSIsInRib2R5IiwibmV3cm93IiwicGxhY2VtZW50IiwidGRQbGFjZW1lbnQiLCJ0ZFBsYWNlbWVudFRleHQiLCJ0ZE5hbWUiLCJwbGF5ZXJuYW1lIiwicGxheWVyc2NvcmUiLCJ0aW1lIiwidGROYW1lVGV4dCIsInRkU2NvcmUiLCJ0ZFNjb3JlVGV4dCIsInVwZGF0ZURvbUFmdGVyUmVmcmVzaCIsIm51bWJlcm9mZm91bmRjaGFyYWN0ZXJzIiwiZm91bmRjaGFyYWN0ZXJzIiwiYWxsY2hhcmFjdGVycyIsImNoYXJhY3RlcmRhdGEiLCJ3YWxkb0xvY2F0aW9uIiwib2RsYXdMb2NhdGlvbiIsIndlbmRhTG9jYXRpb24iLCJ3aXphcmRMb2NhdGlvbiIsIndvb2ZMb2NhdGlvbiIsImZvdW5kIiwiY2hhcmFjdGVyc0xvY2F0aW9uIiwibWlud2lkdGgiLCJtYXh3aWR0aCIsIm1pbmhlaWdodCIsIm1heGhlaWdodCIsInByb2plY3RJZCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsImFwcElkIiwiY29tbW9uanNHbG9iYWwiLCJlc20iLCJnb29nIiwibCIsImFhIiwiYmEiLCJlYSIsImZhIiwiaGEiLCJpYSIsInVuc2hpZnQiLCJxIiwiamEiLCJaIiwiVmIiLCJmIiwiaCIsImxhIiwibmEiLCJNIiwiZGEiLCJzaGlmdCIsIm1hIiwicWEiLCJyYSIsInNhIiwieCIsInRhIiwidHJpbSIsImV4ZWMiLCJ3IiwidmEiLCJ3YSIsInhhIiwieWEiLCJ6YSIsIkFhIiwiQ2EiLCJOYSIsIkhhIiwieSIsIklhIiwiSmEiLCJLYSIsIkxhIiwiTWEiLCJPYSIsIlBhIiwiUWEiLCJwYXJzZUZsb2F0IiwiU2EiLCJHYSIsIlJhIiwicGFyc2VJbnQiLCJVYSIsIlZhIiwieiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJBIiwicmVsYXRlZFRhcmdldCIsInNjcmVlblkiLCJzY3JlZW5YIiwiY2xpZW50WSIsImNsaWVudFgiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJjdHJsS2V5Iiwic3RhdGUiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiV2EiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwiQiIsIlhhIiwiWWEiLCJjYXB0dXJlIiwiY2EiLCJaYSIsIiRhIiwiYmIiLCJhYiIsImZiIiwib25jZSIsImdiIiwiaGIiLCJOIiwiaWIiLCJqYiIsIm1iIiwia2IiLCJhdHRhY2hFdmVudCIsImxiIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIk8iLCJuYiIsIm9iIiwiZGV0YWNoRXZlbnQiLCJwYiIsIkMiLCJQIiwiSSIsIkQiLCJxYiIsInJiIiwic2IiLCJ0YiIsIkFiIiwidmIiLCJqIiwid2IiLCJyZXNldCIsInliIiwiemIiLCJEYiIsIkJiIiwiQ2IiLCJFYiIsIkZiIiwiUyIsIkdiIiwiSGIiLCJJYiIsIkUiLCJKYiIsIktiIiwiTGIiLCJNYiIsIkYiLCJQYiIsIlJiIiwiU2IiLCJUYiIsIlViIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJKIiwiSyIsIldiIiwiTk9fRVJST1IiLCJ4YiIsIlRJTUVPVVQiLCJYYiIsIlliIiwiWmIiLCIkYiIsImNjIiwiT1BFTiIsImFjIiwiYmMiLCJkYyIsIlgiLCJWIiwiZWMiLCJXIiwiWSIsIiQiLCJVIiwiZmMiLCJYTUxIdHRwUmVxdWVzdCIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm1jIiwibmMiLCJHIiwiTmIiLCJxYyIsIkJhIiwidGMiLCJ2YyIsInNjIiwid2MiLCJyYyIsInN1YnN0ciIsInhjIiwiZWIiLCJwYyIsInVjIiwiYWJvcnQiLCJ5YyIsInpjIiwiQWMiLCJCYyIsIkNjIiwia2EiLCJRIiwiRGEiLCJFYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiRGMiLCJSIiwib2EiLCJFYyIsIkZjIiwiR2MiLCJIYyIsIkljIiwiS2MiLCJUIiwiSmMiLCJMYyIsImdhIiwib2MiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsIk9iIiwiUWIiLCJNYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiU2MiLCJUYyIsImRkIiwiWmMiLCJVYyIsIiRjIiwiYWJzIiwiZGVjb2RlVVJJIiwiZW5jb2RlVVJJIiwiY2QiLCJWYyIsIldjIiwiWGMiLCJZYyIsIk5jIiwiZWQiLCJnZCIsImhkIiwiUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nIiwicGVyZm9ybWFuY2UiLCJnZXRFbnRyaWVzQnlUeXBlIiwibmV4dEhvcFByb3RvY29sIiwiamQiLCJrZCIsImxkIiwibWQiLCJvZCIsIm9uYWJvcnQiLCJwZCIsInFkIiwicmVhZHlTdGF0ZSIsInJkIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInVkIiwicmVhZCIsInRkIiwic2QiLCJjcmVkZW50aWFscyIsImNhY2hlIiwiUmVxdWVzdCIsImFycmF5QnVmZmVyIiwiVGEiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5IiwiZG9uZSIsInNldFJlcXVlc3RIZWFkZXIiLCJhcHBlbmQiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJ2ZCIsIndkIiwieGQiLCJ5ZCIsInBhIiwiemQiLCJDZCIsIkRkIiwiRWQiLCJGYSIsIkFkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkdkIiwiRmQiLCJIZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIklkIiwieG1sSHR0cEZhY3RvcnkiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJKZCIsIktkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiTGQiLCJNZCIsIlFkIiwiUGQiLCJyb3VuZCIsIk9kIiwiUmQiLCJOZCIsIm5kIiwiYWQiLCJiZCIsInBvcnQiLCJTZCIsIlRkIiwibWVzc2FnZVVybFBhcmFtcyIsIm1lc3NhZ2VIZWFkZXJzIiwiY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCIsImluaXRNZXNzYWdlSGVhZGVycyIsIm1lc3NhZ2VDb250ZW50VHlwZSIsImh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0iLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlVkIiwiX19zbV9fIiwiVmQiLCJ0b1VwcGVyQ2FzZSIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwiQmQiLCJfX2RhdGFfXyIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJnZXRTdGF0RXZlbnRUYXJnZXQiLCJFcnJvckNvZGUiLCJFdmVudCIsIlN0YXQiLCJ1YiIsIlBST1hZIiwiTk9QUk9YWSIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJXZWJDaGFubmVsIiwiWGhySW8iLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0tleSIsImlzRXF1YWwiLCJVTkFVVEhFTlRJQ0FURUQiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIk1PQ0tfVVNFUiIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsImF1dGhIZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImludmFsaWRhdGVUb2tlbiIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsImdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwidHQiLCJldCIsIm50IiwiZXZlcnkiLCJpdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInZhbHVlT2YiLCJwYWRTdGFydCIsInJ0IiwidGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsIm90IiwiY3QiLCJhdCIsInV0Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJsZW4iLCJjb21wYXJhdG9yIiwiY2hpbGQiLCJsaW1pdCIsImNvbnN0cnVjdCIsInBvcEZpcnN0IiwicG9wTGFzdCIsImZpcnN0U2VnbWVudCIsImxhc3RTZWdtZW50IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiaHQiLCJjYW5vbmljYWxTdHJpbmciLCJsdCIsImZ0IiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwiZHQiLCJmaWVsZHMiLCJjb3ZlcnMiLCJfdCIsImJpbmFyeVN0cmluZyIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwibXQiLCJndCIsIm5hbm9zIiwieXQiLCJwdCIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlR0IiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiRXQiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJJdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJBdCIsIlJ0IiwiUHQiLCJmcm9tU3RyaW5nIiwiaGFzQ29sbGVjdGlvbklkIiwidnQiLCJWdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsIlN0IiwiRHQiLCJDdCIsIk50IiwieHQiLCJmcm9tTmFtZSIsIiR0IiwiT3QiLCJGdCIsIk10IiwiTHQiLCJCdCIsIlV0IiwiZmllbGQiLCJnZXRGaWVsZHNNYXAiLCJzZXRBbGwiLCJlbXB0eVBhdGgiLCJhcHBseUNoYW5nZXMiLCJjbG9uZSIsInF0IiwiS3QiLCJkb2N1bWVudFR5cGUiLCJkb2N1bWVudFN0YXRlIiwiZW1wdHkiLCJjb252ZXJ0VG9Gb3VuZERvY3VtZW50IiwiY29udmVydFRvTm9Eb2N1bWVudCIsImNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsInNldEhhc0xvY2FsTXV0YXRpb25zIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJqdCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwiUXQiLCJXdCIsIll0IiwiZGlyIiwiY2UiLCJ6dCIsInVlIiwibGUiLCJIdCIsImlzRG9jdW1lbnRLZXkiLCJKdCIsIlh0IiwibmUiLCJzZSIsImllIiwiWnQiLCJ0ZSIsImVlIiwibnVsbFZhbHVlIiwib2UiLCJiZWZvcmUiLCJhZSIsImhlIiwiZmUiLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJ3ZSIsIm1lIiwiVGUiLCJ5ZSIsImdlIiwia2V5RmllbGQiLCJFZSIsIkFlIiwiUmUiLCJiZSIsIkd0IiwiUGUiLCJ2ZSIsIlZlIiwiU2UiLCJEZSIsIkNlIiwiaXNJbnRlZ2VyIiwiTUFYX1NBRkVfSU5URUdFUiIsIk1JTl9TQUZFX0lOVEVHRVIiLCJidCIsIk5lIiwieGUiLCJPZSIsIkZlIiwiTWUiLCJMZSIsIkJlIiwiJGUiLCJxZSIsImtlIiwiVWUiLCJlbGVtZW50cyIsIktlIiwiamUiLCJ0cmFuc2Zvcm0iLCJXZSIsInRyYW5zZm9ybVJlc3VsdHMiLCJHZSIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc05vbmUiLCJ6ZSIsIkhlIiwiSmUiLCJlbiIsInJuIiwiZmllbGRUcmFuc2Zvcm1zIiwibm4iLCJwcmVjb25kaXRpb24iLCJzbiIsIlllIiwib24iLCJ0biIsIlhlIiwiWmUiLCJRZSIsImZpZWxkTWFzayIsImNuIiwiYW4iLCJ1biIsImhuIiwibG4iLCJkbiIsInduIiwicm9vdCIsIm1uIiwiRU1QVFkiLCJjb3B5IiwiQkxBQ0siLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJfbiIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwicG9wIiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsInBvdyIsImduIiwiZmlyc3QiLCJsYXN0IiwiZm9yRWFjaEluUmFuZ2UiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsInluIiwidW5pb25XaXRoIiwiaXRlciIsInBuIiwiVG4iLCJFbiIsIkluIiwiQW4iLCJibiIsIlBuIiwidm4iLCJWbiIsIlNuIiwic25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q2hhbmdlcyIsInRhcmdldE1pc21hdGNoZXMiLCJkb2N1bWVudFVwZGF0ZXMiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwiRG4iLCJjcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UiLCJyZXN1bWVUb2tlbiIsImN1cnJlbnQiLCJhZGRlZERvY3VtZW50cyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwicmVtb3ZlZERvY3VtZW50cyIsIkNuIiwicmVtb3ZlZFRhcmdldElkcyIsIk5uIiwidGFyZ2V0SWQiLCJ4biIsInRhcmdldElkcyIsImNhdXNlIiwia24iLCJGbiIsIiRuIiwic3QiLCJPbiIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50Iiwid3QiLCJwdXJwb3NlIiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIk1uIiwiYXNjIiwiZGVzYyIsIkxuIiwiaW4iLCJCbiIsImRhdGFiYXNlSWQiLCJVbiIsInFuIiwiS24iLCJqbiIsImZyb21UaW1lc3RhbXAiLCJRbiIsImRhdGFiYXNlIiwiV24iLCJUcyIsIkduIiwiem4iLCJYbiIsIkhuIiwiWW4iLCJabiIsIm9zIiwiZG9jdW1lbnRzIiwiY3MiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwiX3MiLCJmaWVsZEZpbHRlciIsIndzIiwiY29tcG9zaXRlRmlsdGVyIiwiZGlyZWN0aW9uIiwiZHMiLCJscyIsImFzIiwiSm4iLCJocyIsIm1zIiwiZnMiLCJkZSIsInlzIiwiZ3MiLCJmaWVsZFBhdGgiLCJmcm9tU2VydmVyRm9ybWF0IiwiTmFOIiwicHMiLCJmaWVsZFBhdGhzIiwiRXMiLCJBcyIsIklzIiwiUHMiLCJvd25lcklkIiwiYWxsb3dUYWJTeW5jaHJvbml6YXRpb24iLCJsZWFzZVRpbWVzdGFtcE1zIiwic3RvcmUiLCJ2cyIsInVzZXJJZCIsImxhc3RBY2tub3dsZWRnZWRCYXRjaElkIiwibGFzdFN0cmVhbVRva2VuIiwiVnMiLCJiYXRjaElkIiwibG9jYWxXcml0ZVRpbWVNcyIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJ1c2VyTXV0YXRpb25zS2V5UGF0aCIsIlNzIiwiUExBQ0VIT0xERVIiLCJOcyIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJyZWFkVGltZSIsInBhcmVudFBhdGgiLCJyZWFkVGltZUluZGV4IiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsInhzIiwiYnl0ZVNpemUiLCJrcyIsImNhbm9uaWNhbElkIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCIkcyIsInNlcXVlbmNlTnVtYmVyIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiT3MiLCJoaWdoZXN0VGFyZ2V0SWQiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q291bnQiLCJGcyIsIk1zIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsIkxzIiwiYnVuZGxlSWQiLCJjcmVhdGVUaW1lIiwiQnMiLCJidW5kbGVkUXVlcnkiLCJqcyIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiSHMiLCJuaSIsImxvY2FsV3JpdGVUaW1lIiwiYXBwbHlUb1JlbW90ZURvY3VtZW50IiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0Iiwic2kiLCJiYXRjaCIsImNvbW1pdFZlcnNpb24iLCJkb2NWZXJzaW9ucyIsImlpIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aFJlc3VtZVRva2VuIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJyaSIsIkllIiwicGkiLCJUaSIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiUmkiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsIkRFRkFVTFQiLCJESVNBQkxFRCIsIk5pIiwiRmkiLCJqaSIsIm1hcEtleUZuIiwiZXF1YWxzRm4iLCJpbm5lciIsInJyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJSbiIsImdldEVudHJ5IiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSIsInBlIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJvciIsImZyb21DYWNoZSIsImRvY0NoYW5nZXMiLCJkb2MiLCJjciIsImFyIiwiZ2V0TXV0YXRpb25RdWV1ZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRUYXJnZXRDYWNoZSIsImdldEluZGV4TWFuYWdlciIsImdldEJ1bmRsZUNhY2hlIiwiY29sbGVjdEdhcmJhZ2UiLCJydW5UcmFuc2FjdGlvbiIsImNvbGxlY3QiLCJociIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJmciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJfciIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwiZ3IiLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsInlyIiwiZ2V0VGFyZ2V0RGF0YSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiUnIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsInNhdmVCdW5kbGVNZXRhZGF0YSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsImJyIiwiUHIiLCJ0cyIsImVzIiwibnMiLCJhZGRSZWZlcmVuY2UiLCJzcyIsInJlbW92ZVJlZmVyZW5jZSIsInJzIiwidXMiLCJjb250YWluc0tleSIsInZyIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsIlBPU0lUSVZFX0lORklOSVRZIiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJWciIsImRvY3MiLCJhZGRFbnRyeSIsInJlbW92ZUVudHJ5IiwibmV3Q2hhbmdlQnVmZmVyIiwiU3IiLCJnZXRTaXplIiwiY2hhbmdlcyIsImNoYW5nZXNBcHBsaWVkIiwiZ2V0UmVhZFRpbWUiLCJhc3NlcnROb3RBcHBsaWVkIiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwiRHIiLCJScyIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsIkNyIiwiYnMiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsIk5yIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50Iiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwieHIiLCJEcyIsIkNzIiwiZnJvbVBhdGgiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwiVXIiLCJhY3RpdmVUYXJnZXRJZHMiLCJLciIsInlpIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJqciIsIlFyIiwiRWkiLCJJaSIsIkFpIiwiYmkiLCJQaSIsIldyIiwiQmF0Y2hHZXREb2N1bWVudHMiLCJDb21taXQiLCJSdW5RdWVyeSIsIkdyIiwidmkiLCJWaSIsIlNpIiwiRGkiLCJDaSIsInhpIiwia2kiLCIkaSIsIk9pIiwienIiLCJkYXRhYmFzZUluZm8iLCJzc2wiLCJNaSIsIkxpIiwiQmkiLCJVaSIsInFpIiwiS2kiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJKciIsIllyIiwiWHIiLCJRaSIsIldpIiwiR2kiLCJ6aSIsIkhpIiwiSmkiLCJZaSIsIlhpIiwiWmkiLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsInRyIiwic2tpcERlbGF5IiwiWnIiLCJlciIsIm5yIiwic3IiLCJjcmVkZW50aWFsc1Byb3ZpZGVyIiwiaXIiLCJ1ciIsImxyIiwiZHIiLCJ3ciIsIm1yIiwicHIiLCJUciIsIkVyIiwiSXIiLCJBciIsImVucXVldWVBbmRGb3JnZXQiLCJ0byIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiZW8iLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJ3cml0ZXMiLCJ1cGRhdGVNYXNrIiwidXBkYXRlVHJhbnNmb3JtcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJjdXJyZW50RG9jdW1lbnQiLCJubyIsImtyIiwiJHIiLCJ0ZXJtaW5hdGUiLCJzbyIsImFzeW5jUXVldWUiLCJPciIsIkZyIiwiTXIiLCJMciIsIkJyIiwicXIiLCJpbyIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJ3byIsIm9vIiwiSHIiLCJybyIsImNvIiwiZm8iLCJsbyIsIkNvIiwidW8iLCJhbyIsImhvIiwiX28iLCJtbyIsImdvIiwieW8iLCJyZWplY3RMaXN0ZW4iLCJwbyIsImFwcGx5UmVtb3RlRXZlbnQiLCJUbyIsIkVvIiwiTm8iLCJJbyIsIkFvIiwiUm8iLCJibyIsIlBvIiwidm8iLCJWbyIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiU28iLCJyZWplY3RGYWlsZWRXcml0ZSIsInN0b3AiLCJ4byIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwia28iLCIkbyIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiT28iLCJ0cmFjayIsIkZvIiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZW1wdHlTZXQiLCJNbyIsIkxvIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwicW8iLCJqbyIsIktvIiwiUW8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJKbyIsIllvIiwiWG8iLCJzbmFwc2hvdCIsIkRvIiwiWm8iLCJ2aWV3IiwicmVtb3RlU3RvcmUiLCJzaGFyZWRDbGllbnRTdGF0ZSIsIm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zIiwiQm8iLCJVbyIsImlzUHJpbWFyeUNsaWVudCIsIkdvIiwiV28iLCJ0cmFja1JlbW92YWxzIiwic3luY2hyb25pemVUYWJzIiwiSG8iLCJnY1NjaGVkdWxlciIsImluaXRpYWxVc2VyIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJzeW5jRW5naW5lIiwiY3JlYXRlU3luY0VuZ2luZSIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJtdXRlZCIsImNyZWRlbnRpYWxMaXN0ZW5lciIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIm9ubGluZUNvbXBvbmVudHMiLCJvZmZsaW5lQ29tcG9uZW50cyIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJnZXRDb25maWd1cmF0aW9uIiwib25MaXN0ZW4iLCJvblVubGlzdGVuIiwicGVyc2lzdGVuY2VLZXkiLCJpc0RlZmF1bHREYXRhYmFzZSIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJjYWNoZVNpemVCeXRlcyIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJfY3JlZGVudGlhbHMiLCJfcGVyc2lzdGVuY2VLZXkiLCJfc2V0dGluZ3MiLCJfc2V0dGluZ3NGcm96ZW4iLCJfZGF0YWJhc2VJZCIsIl9hcHAiLCJfaW5pdGlhbGl6ZWQiLCJfdGVybWluYXRlZCIsIl90ZXJtaW5hdGVUYXNrIiwiX3NldFNldHRpbmdzIiwiY2xpZW50Iiwic2Vzc2lvbkluZGV4IiwiaWFtVG9rZW4iLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwiY29udmVydGVyIiwiZmlyZXN0b3JlIiwiX3BhdGgiLCJ3aXRoQ29udmVydGVyIiwiX3F1ZXJ5IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsIl9ieXRlU3RyaW5nIiwiX21ldGhvZE5hbWUiLCJ0dSIsImlzRmluaXRlIiwiX2xhdCIsIl9sb25nIiwiZXUiLCJudSIsInRvTXV0YXRpb24iLCJzdSIsIml1IiwicnUiLCJidSIsIm1ldGhvZE5hbWUiLCJvdSIsImN1IiwiYXUiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiRXUiLCJwdSIsIkl1IiwiUHUiLCJ1dSIsIl90b0ZpZWxkVHJhbnNmb3JtIiwibHUiLCJ3dSIsInl1IiwiVHUiLCJmcm9tRGF0ZSIsImdldFByb3RvdHlwZU9mIiwiUnUiLCJBdSIsInNlYXJjaCIsInZ1IiwiX2ZpcmVzdG9yZSIsIl91c2VyRGF0YVdyaXRlciIsIl9kb2N1bWVudCIsIl9jb252ZXJ0ZXIiLCJyZWYiLCJWdSIsImZyb21GaXJlc3RvcmUiLCJjb252ZXJ0VmFsdWUiLCJTdSIsIkR1IiwiQ3UiLCJfZmlyZXN0b3JlSW1wbCIsIk51Iiwic2VydmVyVGltZXN0YW1wcyIsImNoIiwiYWgiLCJFaCIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0U2VydmVyVGltZXN0YW1wIiwiY29udmVydEJ5dGVzIiwiY29udmVydFJlZmVyZW5jZSIsImNvbnZlcnRHZW9Qb2ludCIsImNvbnZlcnRBcnJheSIsImNvbnZlcnRPYmplY3QiLCJjb252ZXJ0RG9jdW1lbnRLZXkiLCJtdSIsIl91IiwiVGgiLCJiaCIsIlZoIiwiY2FsY3VsYXRlTG9jYXRpb25zIiwiY2VpbCIsImNsaWVudEhlaWdodCIsImluaXRVc2VyIiwidG9GaXJlc3RvcmUiLCJzaCIsIm5vbmUiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZ2V0TnVtYmVyT2ZDaGFyYWN0ZXJzRm91bmRGcm9tREIiLCJkb2NSZWYiLCJkb2NTbmFwIiwic2NvcmVib2FyZERCIiwidXNlcmlkIiwiZG9jUmVmU2NvcmVib2FyZCIsImRvY1NuYXBTY29yZWJvYXJkIiwiZG9jUmVmUGxheWVyIiwiZG9jU25hcFBsYXllciIsInRpbWVUb0ZpbmlzaCIsInBsYXllcmRhdGEiLCJzY29yZWJvYXJkZGF0YSIsImN1cnJlbnRQbGF5ZXJzSW5TY29yZWJvYXJkIiwiY3VycmVudEFub255bW91cyIsInBsYWNlbWVudEluU2NvcmVib2FyZCIsImV2YWx1YXRlU2NvcmVzIiwicGxheWVycyIsImFub255bW91c3BsYXllcnMiLCJjdXJyZW50UGxheWVyc0FycmF5IiwibmV3cGxheWVyU2NvcmUiLCJjdXJyZW50YW5vbnltb3VzIiwiY3VycmVudFNjb3JlcyIsImN1cnJlbnRVc2VySWRzIiwiY29weU9yaWdpbmFsUGxheWVyQXJyYXkiLCJjb3B5QXJyYXlWYWx1ZXMiLCJjb3B5b2Zjb3B5IiwidXNlcmluZGIiLCJtYWRlSXRUb1Njb3JlYm9hcmQiLCJmaW5kSW5kZXgiLCJzY29yZSIsImFub255bW91c3VzZXIiLCJ1c2VyU2VsZWN0ZWROYW1lIiwidXNlcm5hbWUiLCJwcm9tcHQiLCJwcm9tcHRVc2VyRm9yTmFtZSIsImZpcnN0UGxheWVyVG9DaGFuZ2VTY29yZSIsInRvdGFsTnVtYmVyUGxheWVyVG9DaGFuZ2UiLCJoaWdoZXN0U2NvcmVzTGluayIsImFycmF5T2ZPYmplY3RzIiwicmVzdWx0aW5nYXJyYXkiLCJvbGRvYmoiLCJtYWtlbmV3b2JqIiwiYWxpYXMiLCJzaWduVXAiLCJzaWduSW5Bbm9ueW1vdXNseSIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiaW5pdGlhbGl6ZUFwcCIsImdldEZpcmViYXNlQ29uZmlnIiwidXNlckhhc1BsYXllZEJlZm9yZSIsImRpc3BsYXkiLCJnYW1lc3RhcnRkaXYiLCJiYWNrZ3JvdW5kIiwiYWx0IiwibWF4SGVpZ2h0IiwibWF4V2lkdGgiLCJtYXJnaW4iLCJiYWNrZ3JvdW5kZGl2IiwiY2xvc2VkaXYiLCJ0b3BvZmZzZXQiLCJvZmZzZXRZIiwib2Zmc2V0WCIsInVsIiwibGl3YWxkbyIsImxpb2RsYXciLCJsaXdlbmRhIiwibGl3aGl0ZWJlYXJkIiwibGl3b29mIiwiY2xpY2tMb2NhdGlvbiIsImNoYXJhY3RlcnMiLCJhbm90aGVyZXZlbnQiLCJjcmVhdGVEcm9wRG93biIsImRpc3BsYXlJbWFnZSIsInNpZGV0aHVtYm5haWxzZGl2IiwiZmlsZSIsImhpZ2hzY29yZWJ1dHRvbiIsImFkZEltYWdlc1RvR2FtZSIsImNoYXJhY3RlcnNEaXYiLCJhZGRJbWFnZXNUb1N0YXJ0UGFnZSIsIm9ucmVzaXplIiwiY3VycmVudHVzZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29vcmQiLCJjbGlja2VkWCIsImNsaWNrZWRZIiwiY2xpY2tlZFRhcmdldExvY2F0aW9uT25EQiIsImdldExvY2F0aW9uRnJvbURCIiwidXBkYXRlRm91bmRDaGFyYWN0ZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==